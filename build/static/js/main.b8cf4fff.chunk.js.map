{"version":3,"sources":["res/matcaps/matcap-porcelain-white.jpg","res/matcaps/razin.png","res/textures/tri_pattern.jpg","res/matcaps/overexposed-outline.png","res/matcaps/outline.png","res/matcaps/undershadow.png","res/textures/checker.png","res/sprites/circle.png","components/MenuItemText.tsx","constants/characters.ts","common/file-type.ts","components/ImportDialog.tsx","common/dayt.ts","components/TreeItemLabel.tsx","components/ContextMenu.tsx","components/icons/NodesIcon.tsx","components/icons/SurfaceIcon.tsx","components/icons/RoomIcon.tsx","components/icons/SourceIcon.tsx","components/icons/ReceiverIcon.tsx","components/ObjectView.tsx","common/proper-case.ts","objects/container.ts","containers/PanelContainer.tsx","components/TextInput.tsx","components/NumberInput.tsx","components/GridRow.tsx","components/ObjectProperties/FDTDProperties.tsx","components/CheckboxInput.tsx","components/ColorInput.tsx","components/ObjectProperties/SourceProperties.tsx","components/ObjectProperties/ReceiverProperties.tsx","components/GridRowSeperator.tsx","components/ObjectProperties/RayTracerProperties.tsx","components/ObjectProperties/RoomProperties.tsx","compute/acoustics/util/nums.ts","compute/acoustics/std/bands.ts","compute/acoustics/bands.ts","compute/acoustics/util/allowMultiple.ts","compute/acoustics/std/constants.ts","compute/acoustics/convert.ts","compute/acoustics/util/linspace.ts","compute/acoustics/porous.ts","compute/acoustics/weight/index.ts","compute/acoustics/transmission/tau.ts","compute/acoustics/transmission/tl.ts","compute/acoustics/transmission/nr.ts","compute/acoustics/transmission/compositeTL.ts","compute/acoustics/std/weight.ts","compute/acoustics/complex.ts","compute/acoustics/fft/fft.ts","compute/acoustics/util/range.ts","compute/acoustics/util/chunk.ts","compute/acoustics/window/window-functions.ts","compute/acoustics/window/functions/hann.ts","compute/acoustics/window/applyWindow.ts","compute/acoustics/fft/index.ts","compute/acoustics/util/complex-array.ts","components/ObjectProperties/RT60Properties.tsx","common/chunk.ts","compute/acoustics/interpolate-log.ts","compute/acoustics/interpolate-alpha.ts","compute/acoustics/reflection-coefficient.ts","compute/raytracer/brdf.ts","common/discretize.ts","objects/surface.ts","components/ObjectProperties/SurfaceProperties.tsx","components/ObjectProperties/GenericObjectProperties.tsx","components/ObjectProperties/index.tsx","components/SettingsDrawer.tsx","compute/solver.ts","components/Gutter/RT60Tab.tsx","components/Gutter/RayTracerTab.tsx","components/Gutter/RendererTab.tsx","components/Gutter/Gutter.tsx","components/AbsorptionGradient.tsx","components/MaterialDrawer.tsx","common/clamp.ts","components/setting-components/SettingsPanelBlock.tsx","components/setting-components/SettingsPanelSetting.tsx","components/setting-components/SettingsTextComponent.tsx","components/setting-components/SettingsNumberComponent.tsx","components/setting-components/SettingsColorComponent.tsx","components/setting-components/SettingsPanel.tsx","containers/App.tsx","messenger.ts","objects/asset-store.ts","objects/source.ts","objects/receiver.ts","render/OrbitControls.js","common/timer.ts","common/lerp.ts","common/easing.ts","render/env/grid.ts","render/defaults.ts","render/env/axes.ts","render/env/lights.ts","render/pick-helper.ts","render/renderer.ts","common/fullscreen.ts","render/loaders/stl.ts","render/loaders/obj.ts","import-handlers/index.ts","common/expose.ts","common/setting.ts","res/models/testthing.obj","compute/fdtd/defaults.ts","compute/fdtd/shader/index.ts","compute/fdtd/shader/shader.vert","compute/fdtd/shader/shader.frag","compute/fdtd/index.ts","objects/room.ts","compute/raytracer/scattered-energy.ts","compute/raytracer/shaders/points/shader.vert","compute/raytracer/shaders/points/index.ts","compute/raytracer/shaders/points/shader.frag","compute/raytracer/index.ts","compute/rt/index.ts","common/cubic-bezier.ts","index.tsx","hotkeys.ts","common/browser-report.ts"],"names":["module","exports","__webpack_require__","p","MenuItemText","props","react_default","a","createElement","style","display","justifyContent","text","color","Colors","LIGHT_GRAY1","hotkey","COMMAND","CONTROL","SHIFT","OPTION","DELETE","DELETE_FORWARDS","UP_ARROW","RIGHT_ARROW","LEFT_ARROW","DOWN_ARROW","TAB","ESCAPE","ICONS","FILE_FILLED","TEXT_FILLED","FILES","ARCHIVE","AUDIO","CODE","EXCEL","IMAGE","FILE","PDF","POWERPOINT","TEXT","VIDEO","WORD","allowed","stl","obj","gltf","fileType","name","split","slice","DROP_ALLOWED","file_type","assoc","html","js","png","css","txt","md","lock","ts","json","yml","abec","rtf","TXT","dxf","pdf","vips","vacs","asc","msh","stp","jpg","tmd","xls","skp","dae","svg","res","dpr","pas","dll","vsix","st","ico","step","py","sh","FOR","o","h","c","scss","map","cpp","mm","java","m","app","wav","sofa","bin","nib","rc","sln","LGPL","hh","main","cxx","dtd","cc","cu","dat","f","in","BSD","dox","MPL2","GPL","bz2","log","4","out","pc","dir","make","11","lib","pdb","el","toml","opts","mjs","yaml","foo","0","1","flow","idea","xml","iml","bnf","DOCS","hbs","pick","pyc","jsx","less","com","php","zip","csv","mp3","ttf","exe","chm","ppm","toy","hpp","ac","am","sub","deps","Po","m4","Plo","lol","err","3","glsl","dSYM","hmap","d","dia","doc","docx","bat","iss","ui","odt","bmp","PNG","md3","tga","ply","mtl","md2","3d","uc","pmx","jpeg","7z","mdl","MDL","ase","nff","mat","NFF","fbx","b3d","pk3","lws","JPG","lwo","m3","3DS","3ds","x3d","hmp","x","mdc","amf","glb","frag","vert","ogex","ASE","FBX","DAE","smd","off","raw","zgl","xgl","bvh","STL","max","q3o","q3s","ter","lxo","ms3d","3mf","csm","sib","irr","X","WRL","wrl","ifc","cob","inl","asm","adb","ads","gpr","mak","cs","def","S","pk","msc","686","bor","gcc","keep","pump","hlsl","xib","pch","exp","tpl","mk","i","rst","sty","f03","pl","dft","rdft","texi","eps","bfnn","refs","info","fig","tex","ml","mli","pde","hs","ipch","r","vst3","vst","room","icns","std","gyp","node","gypi","conf","targ","lcov","snyk","md~","crt","key","bak","tar","jade","cmd","MIT","tgz","jst","gz","test","tmpl","file","tlog","vs","suo","mov","db","user","htm","mode","pug","psd","asar","pak","snap","eot","woff","geo","finc","f90","F90","md5","swf","tail","stat","ejs","priv","pem","pub","bar","wmf","cfg","tsx","cert","un~","9","8","ls","uniq","gv","ps","env","keys","so","pac","erb","idl","omit","mkd","data","wasm","gif","lint","io","tags","jsm","rdoc","sage","tsv","rt","dmg","otf","scpt","jxa","mkb","icf","kbd","ini","docs","spec","rb","po","pot","LIB","l","y","c++","h++","2/m4","asv","mid","12","10","js~","remy","get","cnf","cub","wxs","swp","blob","pyd","pyx","vtu","mph","egg","mo","ogg","aac","asd","7","vrt","mp4","gpu","htc","item","base","npy","py3","pb","h5","tif","go","bats","fish","aiff","rej","orig","gnu","sql","wat","rs","useStyles","makeStyles","dropzone","height","width","backgroundColor","backgroundColors","ImportDialog","_useState","useState","IDK","_useState2","Object","slicedToArray","dropAllowed","setDropAllowed","_useState3","_useState4","filelist","setFilelist","components","assign","icon","title","transitionDuration","borderRadius","paddingBottom","minWidth","className","Classes","DIALOG_BODY","onDragEnter","e","_e$dataTransfer","dataTransfer","types","items","files","yes","length","_items$i","kind","type","YES","NO","onDragLeave","onDragOver","_e$dataTransfer2","_items$i2","stopPropagation","preventDefault","onDrop","_e$dataTransfer3","filearray","Array","from","onClick","input","document","querySelector","setAttribute","body","appendChild","addEventListener","target","push","remove","click","fontSize","textAlign","HTML_TABLE_BORDERED","HTML_TABLE_CONDENSED","HTML_TABLE_STRIPED","join","uuid","FileTypes","id","marginLeft","time","lastModified","Date","toString","DialogActions","BUTTON","intent","Intent","PRIMARY","disabled","onImport","TreeItemLabel","label","ContextMenu","ContextMenuTarget","_class","_React$Component","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","value","children","handleMenuItemClick","React","Component","NodesIcon","SvgIcon","viewBox","fill","xmlns","stroke","SurfaceIcon","cx","cy","RoomIcon","data-name","points","SourceIcon","Wifi_default","transform","fillOpacity","ReceiverIcon","Mic_default","ObjectView","expanded","setExpanded","ContainerLabelStyle","fontWeight","containers","LIGHT_GRAY3","collapseIcon","ExpandMore_default","filter","expandIcon","ChevronRight_default","concat","unselctable","TreeView","defaultExpanded","defaultExpandIcon","defaultCollapseIcon","TreeItem","unselectable","nodeId","mapchildren","container","sharedProps","draggable","selected","meta","replace","charAt","toUpperCase","substr","toLowerCase","genericLabel","roomLabel","ContextMenuSharedProps","textContent","onDelete","components_ContextMenu","Container","_this","call","select","deselect","renderCallback","save","restore","visible","position","toArray","scale","rotation","state","set","val","setX","setY","z","setZ","THREE","PanelContainer","TextInput","basestyle","_props","onChange","currentTarget","NumberInput","min","GridRow","Fragment","span","gridColumnStart","gridColumnEnd","FDTDPropertiesContainerStyle","gridTemplateColumns","padding","gridRowGap","gridColumnGap","FDTDProperties","onPropertyChange","object","hasOwnProperty","components_TextInput","components_NumberInput","gain","threshold","dx","running","dt","q","CheckboxInput","checked","ColorInput","SourcePropertiesContainerStyle","SourceProperties","XYZProps","messenger","postMessage","components_CheckboxInput","components_ColorInput","getColorAsString","undefined","ReceiverPropertiesContainerStyle","ReceiverProperties","GridRowSeperator","borderBottomStyle","borderBottomWidth","borderBottomColor","marginTop","marginBottom","RayTracerPropertiesContainerStyle","RayTracerProperties","sources","sourcesSelectOptions","sourceIDs","includes","sourceSelectedOptions","receivers","receiverSelectOptions","receiverIDs","receiverSelectedOptions","customStyles","indicatorsContainer","provided","objectSpread","clearIndicator","dropdownIndicator","control","minHeight","updateInterval","reflectionOrder","passes","pointSize","checkedNode","uncheckedNode","raysVisible","runningWithoutReceivers","isRunning","onButtonClick","minimal","react_select_browser_esm","defaultValue","isMulti","options","classNamePrefix","styles","console","reflectionLossFrequencies","Math","random","RoomPropertiesContainerStyle","RoomProperties","nums","v","third_octave","whole_octave","whole_octave_all","Lower","Center","Upper","third_octave_all","Octave","start","end","Number","ThirdOctave","Flower","k","fc","pow","Fupper","allowMultiple","func","pref","units","Wref","Iref","Lw2Lp","Lw","Q","abs","log10","PI","Lp2Lw","Lp","P2Lp","P","Lp2P","lp","I2Li","I","Li2I","Li","li","W2Lw","W","w","Lw2W","lw","Lp2Ln","Ar","Ao","P_dB","dB_P","I_dB","dB_I","W_dB","dB_W","pi","tanh","coth","ccoth","complex","real","im","defaults","speed","density","flowResistivity","thickness","frequencies","arr","floor","linspace","rigidBackedPorousAbsorber","params","_Object$assign","ρ","σ","Z0","zc","γ","multiplier","R","clone","mult","add","divide","frequency","reflection","magnitude","phase","angle","absorption","A","freq","f2","sqrt","R_a","B","R_b","C","R_c","R_d","D","tau","TL","args","NR","area","offset","Lsource","Lreciever","compositeTL","wallElements","num","elt","reduce","b","den","weight","Complex","imag","Error","radius","cos","arg","sin","dd","product","multiply","conjugate","unit","FFT","bitReversalTable","previousArraySize","H","spectrum","row","fft1d","transpose","_this2","ifft1d","size","N","calcFactors","createBitReversalTable","updateArraySize","sortData","n","tmp","subtract","swap","_this3","_this3$power1d","power1d","_this3$power1d2","rowSpectrum","rowMax","powerSpectrum","absolute","sortedData","copy","exponential","power","getExponent2","reverseBits","ceil","bits","padStart","reversedBits","binaryRepresentation","parseInt","log2","isInteger","transposedData","init2DArray","centerX","centerY","shiftedData","u","chunk","_","range","WindowFunctions","Hann","hann","applyWindowComplex","window","default_fftoptions","buffersize","dim","fft","values","Float32Array","f32_array","makebuffer","makeComplexArray","RT60PropertiesContainerStyle","RT60Properties","sabine","toFixed","array","interpolateLog","x1","y1","x2","y2","xi","interpolateAlpha","alpha","reflectionCoefficient","α","θ","rootOneMinusAlpha","ξo_sinθ","BRDF","coefficients","steps","getIndex","j","stop","round","absorptionCoefficient","diffusionCoefficient","angle_in","angle_out","reflected","specularEnergy","diffusedEnergyPerSlot","incoming","outgoing","sum","materials","shader","vertexShader","_templateObject","fragmentShader","_templateObject2","depthTest","uniforms","side","transparent","opacity","reflectivity","depthWrite","mesh","wire","wireframe","line","displayInternalEdges","displayEdges","fillSurface","_displayVertexNormals","Surface","edges","triangles","vertexNormals","_triangles","selectedMaterial","normalMaterial","normalColor","shaderMaterial","absorptionFunction","reflectionFunction","_acousticMaterial","brdf","geometry","parent","computeBoundingBox","computeBoundingSphere","tempmesh","computeVertexNormals","getAttribute","construct","toConsumableArray","bind","assertThisInitialized","dict","forEach","tri","JSON","stringify","sort","segments","edge","vertices","theta","acousticMaterial","material","needsUpdate","getArea","String","displayVertexNormals","SurfacePropertiesContainerStyle","SurfaceProperties","wireframeVisible","small","GenericObjectPropertiesContainerStyle","GenericObjectProperties","ObjectProperties","nextProps","nextState","nextContext","RT60Properties_RT60Properties","SettingsDrawer","Position","RIGHT","autoFocus","enforceFocus","hasBackdrop","onClose","canOutsideClickClose","canEscapeKeyClose","isCloseButtonShown","rightIcon","onSubmit","isOpen","Solver","update","clearpass","RT60Tab","solver","RayTracerTab","handleObjectPropertyChange","handleObjectPropertyValueChangeAsNumber","handleObjectPropertyValueChangeAsString","handleObjectPropertyButtonClick","prop","forceUpdate","valueAsNumber","valueAsString","ObjectProperties_ObjectProperties","onPropertyValueChangeAsNumber","onPropertyValueChangeAsString","RendererTab","renderer","fov","setFov","zoom","setZoom","_useState5","isOrtho","_useState6","setIsOrtho","camera","updateProjectionMatrix","Gutter","selectedTabIndex","handleTabChange","tabIndex","setState","solvers","margin","esm","selectedIndex","onSelect","RayTracerTab_RayTracerTab","RT60Tab_RT60Tab","chroma","correctLightness","absorptionGradient","colors","percentage","col","MaterialDrawer","listref","listScroll","bufferLength","query","selected_item","selected_object","handleQueryChange","handleInput","handleObjectViewClick","handleListItemDoubleClick","createRef","event","current","scrollTop","focus","shiftKey","filteredItems","rooms","_id","materialProperties","ObjectView_ObjectView","iconSize","onInput","ref","MaterialDrawerListArray","_loop","containerProps","handleListItemClick","onDoubleClick","background","MaterialDrawerList","SettingsPanelBlock","SettingsPanelSetting","edited","description","SettingsTextComponent","setting","staged_value","SettingsNumberComponent","SettingsColorComponent","SettingsPanel","handleTextComponentChange","handleNumberComponentChange","handleColorComponentChange","SettingInputComponent","defineProperty","setStagedValue","SettingsTextComponent_SettingsTextComponent","SettingsNumberComponent_SettingsNumberComponent","SettingsColorComponent_SettingsColorComponent","SettingsPanelBlock_SettingsPanelBlock","SettingsPanelSetting_SettingsPanelSetting","AppToaster","Toaster","create","TOP","FocusStyleManager","onlyShowFocusOnTabs","App","canvas","statsCanvas","prog","MaterialOptionListRenderer","terminalOpen","newWarningVisible","materialDrawerOpen","lastUpdateReason","simulationRunning","importDialogVisible","selectedObject","settingsDrawerVisible","settings","tool","darkmode","stats","chartData","setupMessageHandlers","showImportDialog","handleImportDialogClose","handleObjectViewDelete","handleSettingsButtonClick","handleMaterialBarClose","handleMaterialBarItemSelect","handleSettingChange","addMessageHandler","message","handler","cb","acc","_len","_key","objects","toastProps","show","_len2","_key2","_len3","_key3","_len4","_key4","_len5","_key5","_len6","_key6","_this4","_this5","Group","align","Alignment","LEFT","Divider","BOTTOM_LEFT","Characters","canOutsideClickCancel","canEscapeKeyCancel","cancelButtonText","confirmButtonText","DANGER","onConfirm","onCancel","SettingsDrawer_SettingsDrawer","SettingsPanel_SettingsPanel","MaterialDrawer_MaterialDrawer","usePortal","themeName","lib_default","secondaryMinSize","primaryMinSize","secondaryInitialSize","primaryIndex","customClassName","vertical","onSecondaryPaneSizeChange","Gutter_Gutter_Gutter","Messenger","dictionary","messageListeners","lastMessage","accumulator","_this$dictionary$mess2","results","callback","loader","MATCAP_PORCELAIN_WHITE","load","matcapPorcelainWhite","MATCAP_UNDER_SHADOW","matcapOutline","matcapOverexposedOutline","matcapRazin","matcapUnderShadow","TEXTURE_CHECKER","triPattern","checker","Source","phi","numRays","brighten","matcap","userData","t","brighterColor","getHex","setHex","getColorAsNumber","fromCharCode","getHexString","setStyle","selectedColor","Receiver","OrbitControls","domElement","warn","error","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","UP","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","keyMods","pan","dolly","noMiddleButton","target0","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","saveState","scope","reset","dispatchEvent","changeEvent","STATE","NONE","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","makeSafe","addScaledVector","panOffset","setFromSpherical","lookAt","multiplyScalar","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dy","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","button","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","prototype","EventDispatcher","constructor","MapControls","Timer","onFinish","t1","progress","now","t2","lerp","amt","lerp3","EasingFunctions","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","Grid","gridHelper","divisions","color1","color2","wrapS","wrapT","magFilter","repeat","planeGeo","planeMat","setXYZ","renderOrder","setRGB","render_defaults","metadata","version","generator","layers","pos","near","far","aspect","filmGauge","filmOffset","Axes","Xaxis","Yaxis","Zaxis","makeLine","Lights","ambientLight","enableAll","ambientLights","light","helpers","PickHelper","scene","mount","pickPosition","raycaster","pickedObject","pickedObjectSavedColor","hover","setPickPosition","setFromCamera","intersectedObjects","intersectObjects","found","_intersectedObjects$i","_intersectedObjects$i2","_intersectedObjects$i3","match","normalizedPosition","setPickPositionCenter","getCanvasRelativePosition","rect","getBoundingClientRect","Renderer","mouseConfigSet","modifierKeyState","_camera","perspectiveCamera","orthoCamera","workspace","lights","axes","grid","stack","settingHandlers","sourceGroup","sourceTemplate","receiverGroup","receiverTemplate","geometryGroup","controls","workspaceCursor","fog","_fov","textures","smoothingCameraCallback","smoothingCamera","pickHelper","composer","outlinePass","renderPass","effectFXAA","method","Shift","Control","Alt","Meta","context","getContext","antialias","depth","precision","shadowMap","shadowMapSoft","setSize","pixelRatio","devicePixelRatio","setPixelRatio","Default","EffectComposer","RenderPass","addPass","lightHelpersVisible","setHelpersVisible","fogColor","setOrtho","storeCameraState","getObjectByProperty","axis","dist","distanceTo","easingFunction","adds","+x","-x","+y","-y","+z","-z","smoothCameraTo","duration","selection","altKey","render","storedState","parse","localStorage","getItem","fromArray","toJSON","setItem","on","filmWidth","getFilmWidth","filmHeight","getFilmHeight","_this$renderer$domEle","_this$renderer$domEle2","_this$renderer$domEle3","_this$renderer$domEle4","parentElement","force","_this$renderer$domEle5","_this$renderer$domEle6","resize","rays","_this$workspace$getOb","boundingBox","halfheight","halfwidth","originalPosition","originalTarget","timer","_timer","curveFunction","tick","resizeCanvasToDisplaySize","requestAnimationFrame","setRotationFromQuaternion","normalize","ortho","_this$scene$fog","fullScreen","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","STLLoader","binData","ensureBinary","reader","DataView","getUint32","byteLength","solid","getUint8","isBinary","parseBinary","parseASCII","ensureString","g","defaultR","defaultG","defaultB","faces","hasColors","index","normals","face","normalX","getFloat32","normalY","normalZ","packedColor","getUint16","vertexstart","addAttribute","patternFace","patternNormal","patternVertex","result","normal","exec","parseFloat","buf","array_buffer","Uint8Array","strArray","charCodeAt","buffer","OBJLoader","fileContents","defaultModelName","currentMaterial","currentGroup","smoothingGroup","materialLibraries","models","Promise","resolve","reject","theError","stripComments","commentIndex","indexOf","substring","lines","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","lineItems","trim","parseObject","parseGroup","parseVertexCoords","parseTextureCoords","parseVertexNormal","parseSmoothShadingStatement","parsePolygon","parseMtlLib","parseUseMtl","return","textureCoords","modelName","currentModel","totalVertices","group","vertexValues","vertexIndex","textureCoordsIndex","vertexNormalIndex","groupNumber","_res$models$reduce","_res$models$reduce2","model","verts","vertNormals","texCoords","vertex","vn","tc","expose","Setting","_value","newvalue","testthing","fdtd_shader","FDTD","_Solver","_gain","_threshold","lx","ly","lz","nz","ny","nx","sourceLocations","kernel","pressureAttribute","satisfyBounds","_this$room$boundingBo","getSize","initKernel","initRenderItems","GPU","createKernel","prev","curr","u_prev","thread","u_center","setOutput","Input","updateSources","getFDTDPressureAttribute","boxGeometry","attributes","translateArray","setUsage","image","alphaTest","setFDTD","Room","surfaces","_fdtdmeshid","volume","originalFileName","originalFileData","surface","calculateBoundingBox","volumeOfMesh","union","getObjectById","p1","p2","p3","cross","triangle","signedVolumeOfTriangle","scatteredEnergy","incomingEnergy","scatteringCoefficient","gamma","fs","computeBoundsTree","disposeBoundsTree","raycast","acceleratedRaycast","DRAWSTYLE","asin","ReceiverData","roomID","surfaceIDs","invertedDrawStyle","RayTracer","intersections","_isRunning","intervals","rayBufferGeometry","rayBufferAttribute","colorBufferAttribute","rayPositionIndex","maxrays","intersectableObjects","paths","messageHandlerIDs","statsUpdatePeriod","lastTime","_runningWithoutReceivers","allReceiverData","hits","_pointSize","chartdata","_raysVisible","_invertedDrawStyle","__start_time","__calc_time","__num_checked_paths","paramsHasRaysVisible","paramsHasInvertedDrawStyle","setDrawRange","premultipliedAlpha","blending","depthFunc","frustumCulled","PointShader","drawStyle","ENERGY","inverted","pointScale","writable","findIDs","numRaysShot","numValidRayPaths","removeMessageHandler","source","mapIntersectableObjects","rec","energy","setXY","plane","getPlane","pleq","constant","avec4","bvec4","cvec4","ro","rd","order","iter","chain","ray","origin","direction","_intersections$0$obje","angleTo","intersectedReceiver","rr","reflectionloss","traceRay","point","setInterval","applyEuler","path","appendRay","startAllMonteCarlo","interval","clearInterval","calc_time","num_valid_rays","valid_ray_rate","num_checks","check_rate","calculateTotalPathTime","_this6","receiverRadius","receiverPosition","receiverData","energytime","segment","energytime_diffuse","time_rec","total_time","_this7","pathkeys","raypath","reflectionLossFunction","intersection","refloss","sample_rate","saveImpulseResponse","Blob","FileSaver","saveAs","_this8","sampleRate","_ret","maxTime","numSamples","sampledArray","_loop2","_j","sampleTime","actualTime","sums","sub_counter","resampleResponse","_loadWasm","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","instantiate","fetch","consoleLog","abrupt","sent","loadWasm","then","catch","_this9","_this10","precheck","isFinite","RT60","response","arrs","cubicBezier","p0","c0","c1","c2","c3","CSG","CAG","materialsIndex","selectedObjects","materialSearcher","Searcher","keySelector","browser","userAgent","definePropertySupported","report","timestamp","cookies","flash","ip","os","screen","dppx","scripts","navigator","viewport","layout","lang","websockets","innerWidth","innerHeight","warning","msg","cookie","plugins","plugin","versions","minorVersion","colorDepth","isNaN","WebSocket","languages","language","browserReport","simulation","glfdtd","fog_color","default_save_name","roomkeys","submit","search","raytracer","removeMessageHandlers","rt60","calculateReflectionLoss","testWasm","addSource","addReceiver","_ref","objectURL","URL","createObjectURL","t0","importHandlers","addRoom","_x","init","clearRays","surfaceCount","timeout","_ref2","settingChanged","hotkeys","fullscreen","ReactDOM","App_App","getElementById","setTimeout","sourceidL","sourceidR","receiverId","testroom"],"mappings":"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EAAKE,MAExD,KAAM,8BC5BH,SAASI,GAAYC,GAC1B,IAAIC,EAAMD,EACPrtB,IAAI,SAACutB,GAAD,OAA8BA,EAAIP,OACtCQ,OAAO,SAACjzB,EAAWkzB,GAAZ,OAAkClzB,EAAIkzB,IAC5CC,EAAML,EACPrtB,IAAI,SAACutB,GAAD,OAA8BA,EAAIX,KAAOA,GAAIW,EAAIV,IAAM,GAAKU,EAAIP,OACpEQ,OAAO,SAACjzB,EAAWkzB,GAAZ,OAAkClzB,EAAIkzB,IAChD,OAAO,GAAKxH,KAAKiC,MAAMoF,EAAMI,GCfxB,IAAMC,GAAS,CACpB1B,EAAG,EACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,gBACD,oBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBACC,kBACA,kBACA,kBACA,kBACA,kBACA,kBAEHK,EAAG,EACA,iBACA,gBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACD,mBACA,oBACC,mBACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBAEHE,EAAG,EACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,mBACA,kBACA,kBACD,kBACA,kBACA,kBACA,kBACA,kBACC,oBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBAEHG,EAAG,EACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACD,qBACA,iBACA,iBACA,iBACA,iBACA,iBAC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","file":"static/js/main.b8cf4fff.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/matcap-porcelain-white.1b992319.jpg\";","module.exports = __webpack_public_path__ + \"static/media/razin.7dc843ee.png\";","module.exports = __webpack_public_path__ + \"static/media/tri_pattern.d121adfc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/overexposed-outline.7ffb3957.png\";","module.exports = __webpack_public_path__ + \"static/media/outline.b0ec2b15.png\";","module.exports = __webpack_public_path__ + \"static/media/undershadow.59382953.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAIAAAD91JpzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyZGJhMzNlOC03M2JkLTRjMmUtOWFmOS00OGFiNTU4ZjJlYmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTYzRkQ0NzBBMkM1MTFFOEFDNUVERjczMTNBOTc0QzgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTYzRkQ0NkZBMkM1MTFFOEFDNUVERjczMTNBOTc0QzgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyZGJhMzNlOC03M2JkLTRjMmUtOWFmOS00OGFiNTU4ZjJlYmUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MmRiYTMzZTgtNzNiZC00YzJlLTlhZjktNDhhYjU1OGYyZWJlIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+cQJ/swAAABdJREFUeNpiaGhoOHDgAJODgwOQAggwAC6cBsMmqZXvAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","import React from 'react';\nimport { Colors } from '@blueprintjs/core';\nimport { Characters } from '../constants';\n\nexport interface MenuItemTextProps{\n  text: string;\n  hotkey: string;\n}\n\nexport default function MenuItemText(props: MenuItemTextProps) {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      }}>\n      <div>{props.text}</div>\n      <div style={{ color: Colors.LIGHT_GRAY1 }}>{props.hotkey||\"\"}</div>\n    </div>\n  );\n}","export const COMMAND = \"⌘\";\nexport const CONTROL = \"⌃\";\nexport const SHIFT = \"⇧\";\nexport const OPTION = \"⌥\";\nexport const DELETE = \"⌫\";\nexport const DELETE_FORWARDS = \"⌦\";\nexport const UP_ARROW = \"↑\";\nexport const RIGHT_ARROW = \"→\";\nexport const LEFT_ARROW = \"←\";\nexport const DOWN_ARROW = \"↓\";\nexport const TAB = \"⇥\";\nexport const ESCAPE = \"⎋\";\n\n","export const ICONS = {\n\tFILE_FILLED: \"icon-file\",\n\tTEXT_FILLED: \"icon-file-text\",\n\tFILES: \"icon-files-o\",\n\tARCHIVE: \"icon-file-archive-o\",\n\tAUDIO: \"icon-file-audio-o\",\n\tCODE: \"icon-file-code-o\",\n\tEXCEL: \"icon-file-excel-o\",\n\tIMAGE: \"icon-file-image-o\",\n\tFILE: \"icon-file-o\",\n\tPDF: \"icon-file-pdf-o\",\n\tPOWERPOINT: \"icon-file-powerpoint-o\",\n\tTEXT: \"icon-file-text-o\",\n\tVIDEO: \"icon-file-video-o\",\n\tWORD: \"file-word-o\"\n};\nexport const allowed = {\n\tstl: true,\n\tobj: true,\n\tgltf: true\n}\nexport const assoc = {\n\thtml: ICONS.CODE,\n\tjs: ICONS.CODE,\n\tpng: ICONS.IMAGE,\n\tcss: ICONS.CODE,\n\ttxt: ICONS.CODE,\n\tmd: ICONS.CODE,\n\tlock: ICONS.CODE,\n\tts: ICONS.CODE,\n\tjson: ICONS.CODE,\n\tyml: ICONS.CODE,\n\tabec: ICONS.TEXT,\n\trtf: ICONS.TEXT,\n\tTXT: ICONS.TEXT,\n\tdxf: ICONS.FILE,\n\tpdf: ICONS.PDF,\n\tvips: ICONS.FILE,\n\tvacs: ICONS.FILE,\n\tasc: ICONS.FILE,\n\tmsh: ICONS.TEXT,\n\tstp: ICONS.FILE,\n\tjpg: ICONS.IMAGE,\n\ttmd: ICONS.FILE,\n\txls: ICONS.EXCEL,\n\tskp: ICONS.FILE,\n\tdae: ICONS.FILE,\n\tsvg: ICONS.CODE,\n\tres: ICONS.FILE,\n\tdpr: ICONS.FILE,\n\tpas: ICONS.FILE,\n\tdll: ICONS.CODE,\n\tvsix: ICONS.FILE,\n\tst: ICONS.FILE,\n\tico: ICONS.FILE,\n\tstep: ICONS.FILE,\n\tpy: ICONS.CODE,\n\tsh: ICONS.CODE,\n\tFOR: ICONS.CODE,\n\to: ICONS.CODE,\n\th: ICONS.CODE,\n\tc: ICONS.CODE,\n\tscss: ICONS.CODE,\n\tmap: ICONS.CODE,\n\tcpp: ICONS.CODE,\n\tmm: ICONS.CODE,\n\tjava: ICONS.CODE,\n\tm: ICONS.CODE,\n\tapp: ICONS.FILE,\n\twav: ICONS.AUDIO,\n\tsofa: ICONS.FILE,\n\tbin: ICONS.FILE,\n\tnib: ICONS.FILE,\n\trc: ICONS.FILE,\n\tsln: ICONS.FILE,\n\tLGPL: ICONS.FILE,\n\thh: ICONS.CODE,\n\tmain: ICONS.CODE,\n\tcxx: ICONS.CODE,\n\tdtd: ICONS.CODE,\n\tcc: ICONS.CODE,\n\tcu: ICONS.CODE,\n\tdat: ICONS.CODE,\n\tf: ICONS.CODE,\n\tin: ICONS.FILE,\n\tBSD: ICONS.FILE,\n\tdox: ICONS.FILE,\n\tMPL2: ICONS.FILE,\n\tGPL: ICONS.FILE,\n\tbz2: ICONS.FILE,\n\tlog: ICONS.FILE,\n\t\"4\": ICONS.FILE,\n\tout: ICONS.FILE,\n\tpc: ICONS.FILE,\n\tdir: ICONS.FILE,\n\tmake: ICONS.FILE,\n\ta: ICONS.FILE,\n\t\"11\": ICONS.FILE,\n\tlib: ICONS.FILE,\n\tpdb: ICONS.FILE,\n\tel: ICONS.FILE,\n\ttoml: ICONS.FILE,\n\topts: ICONS.FILE,\n\tmjs: ICONS.FILE,\n\tyaml: ICONS.FILE,\n\tfoo: ICONS.FILE,\n\t\"0\": ICONS.FILE,\n\t\"1\": ICONS.FILE,\n\tflow: ICONS.FILE,\n\tidea: ICONS.FILE,\n\txml: ICONS.FILE,\n\timl: ICONS.FILE,\n\tbnf: ICONS.FILE,\n\tDOCS: ICONS.FILE,\n\thbs: ICONS.FILE,\n\tpick: ICONS.FILE,\n\tpyc: ICONS.FILE,\n\tjsx: ICONS.CODE,\n\tless: ICONS.CODE,\n\tcom: ICONS.FILE,\n\tphp: ICONS.CODE,\n\tzip: ICONS.FILE,\n\tcsv: ICONS.FILE,\n\tmp3: ICONS.FILE,\n\tttf: ICONS.FILE,\n\texe: ICONS.FILE,\n\tchm: ICONS.FILE,\n\tppm: ICONS.FILE,\n\ttoy: ICONS.FILE,\n\thpp: ICONS.FILE,\n\tac: ICONS.FILE,\n\tam: ICONS.FILE,\n\tsub: ICONS.FILE,\n\tdeps: ICONS.FILE,\n\tPo: ICONS.FILE,\n\tm4: ICONS.FILE,\n\tPlo: ICONS.FILE,\n\tlol: ICONS.FILE,\n\terr: ICONS.FILE,\n\t\"3\": ICONS.FILE,\n\tglsl: ICONS.FILE,\n\tdSYM: ICONS.FILE,\n\thmap: ICONS.FILE,\n\td: ICONS.FILE,\n\tdia: ICONS.FILE,\n\tdoc: ICONS.FILE,\n\tdocx: ICONS.FILE,\n\tbat: ICONS.FILE,\n\tiss: ICONS.FILE,\n\tui: ICONS.FILE,\n\todt: ICONS.FILE,\n\tbmp: ICONS.FILE,\n\tPNG: ICONS.FILE,\n\tstl: ICONS.FILE,\n\tmd3: ICONS.FILE,\n\ttga: ICONS.FILE,\n\tply: ICONS.FILE,\n\tobj: ICONS.FILE,\n\tmtl: ICONS.FILE,\n\tmd2: ICONS.FILE,\n\t\"3d\": ICONS.FILE,\n\tuc: ICONS.FILE,\n\tpmx: ICONS.FILE,\n\tjpeg: ICONS.IMAGE,\n\t\"7z\": ICONS.FILE,\n\tmdl: ICONS.FILE,\n\tMDL: ICONS.FILE,\n\tase: ICONS.FILE,\n\tnff: ICONS.FILE,\n\tmat: ICONS.FILE,\n\tNFF: ICONS.FILE,\n\tfbx: ICONS.FILE,\n\tb3d: ICONS.FILE,\n\tpk3: ICONS.FILE,\n\tlws: ICONS.FILE,\n\tJPG: ICONS.FILE,\n\tlwo: ICONS.FILE,\n\tm3: ICONS.FILE,\n\t\"3DS\": ICONS.FILE,\n\t\"3ds\": ICONS.FILE,\n\tx3d: ICONS.FILE,\n\thmp: ICONS.FILE,\n\tx: ICONS.FILE,\n\tmdc: ICONS.FILE,\n\tamf: ICONS.FILE,\n\tglb: ICONS.FILE,\n\tgltf: ICONS.FILE,\n\tfrag: ICONS.FILE,\n\tvert: ICONS.FILE,\n\togex: ICONS.FILE,\n\tASE: ICONS.FILE,\n\tFBX: ICONS.FILE,\n\tDAE: ICONS.FILE,\n\tsmd: ICONS.FILE,\n\toff: ICONS.FILE,\n\traw: ICONS.FILE,\n\tzgl: ICONS.FILE,\n\txgl: ICONS.FILE,\n\tbvh: ICONS.FILE,\n\tSTL: ICONS.FILE,\n\tmax: ICONS.FILE,\n\tq3o: ICONS.FILE,\n\tq3s: ICONS.FILE,\n\tter: ICONS.FILE,\n\tlxo: ICONS.FILE,\n\tms3d: ICONS.FILE,\n\t\"3mf\": ICONS.FILE,\n\tcsm: ICONS.FILE,\n\tsib: ICONS.FILE,\n\tirr: ICONS.FILE,\n\tX: ICONS.FILE,\n\tWRL: ICONS.FILE,\n\twrl: ICONS.FILE,\n\tifc: ICONS.FILE,\n\tcob: ICONS.FILE,\n\tinl: ICONS.FILE,\n\tasm: ICONS.FILE,\n\tadb: ICONS.FILE,\n\tads: ICONS.FILE,\n\tgpr: ICONS.FILE,\n\tmak: ICONS.FILE,\n\tcs: ICONS.FILE,\n\tdef: ICONS.FILE,\n\tS: ICONS.FILE,\n\tpk: ICONS.FILE,\n\tmsc: ICONS.FILE,\n\t\"686\": ICONS.FILE,\n\tbor: ICONS.FILE,\n\tgcc: ICONS.FILE,\n\tkeep: ICONS.FILE,\n\tpump: ICONS.FILE,\n\thlsl: ICONS.FILE,\n\txib: ICONS.FILE,\n\tpch: ICONS.FILE,\n\texp: ICONS.FILE,\n\ttpl: ICONS.FILE,\n\tmk: ICONS.FILE,\n\ti: ICONS.FILE,\n\trst: ICONS.FILE,\n\tsty: ICONS.FILE,\n\tf03: ICONS.FILE,\n\tpl: ICONS.FILE,\n\tdft: ICONS.FILE,\n\trdft: ICONS.FILE,\n\ttexi: ICONS.FILE,\n\teps: ICONS.FILE,\n\tbfnn: ICONS.FILE,\n\trefs: ICONS.FILE,\n\tinfo: ICONS.FILE,\n\tfig: ICONS.FILE,\n\ttex: ICONS.FILE,\n\tml: ICONS.FILE,\n\tmli: ICONS.FILE,\n\tpde: ICONS.FILE,\n\ths: ICONS.FILE,\n\tipch: ICONS.FILE,\n\tr: ICONS.FILE,\n\tvst3: ICONS.FILE,\n\tvst: ICONS.FILE,\n\troom: ICONS.FILE,\n\ticns: ICONS.FILE,\n\tstd: ICONS.FILE,\n\tgyp: ICONS.FILE,\n\tnode: ICONS.FILE,\n\tgypi: ICONS.FILE,\n\tconf: ICONS.FILE,\n\ttarg: ICONS.FILE,\n\tlcov: ICONS.FILE,\n\tsnyk: ICONS.FILE,\n\t\"md~\": ICONS.FILE,\n\tcrt: ICONS.FILE,\n\tkey: ICONS.FILE,\n\tbak: ICONS.FILE,\n\ttar: ICONS.FILE,\n\tjade: ICONS.FILE,\n\tcmd: ICONS.FILE,\n\tname: ICONS.FILE,\n\tMIT: ICONS.FILE,\n\ttgz: ICONS.FILE,\n\tjst: ICONS.FILE,\n\tgz: ICONS.FILE,\n\ttest: ICONS.FILE,\n\ttmpl: ICONS.FILE,\n\tfile: ICONS.FILE,\n\ttlog: ICONS.FILE,\n\tvs: ICONS.FILE,\n\tsuo: ICONS.FILE,\n\tmov: ICONS.VIDEO,\n\tdb: ICONS.FILE,\n\tuser: ICONS.FILE,\n\thtm: ICONS.FILE,\n\tmode: ICONS.FILE,\n\tpug: ICONS.FILE,\n\tpsd: ICONS.FILE,\n\tasar: ICONS.FILE,\n\tpak: ICONS.FILE,\n\tsnap: ICONS.FILE,\n\teot: ICONS.FILE,\n\twoff: ICONS.FILE,\n\tgeo: ICONS.FILE,\n\tfinc: ICONS.FILE,\n\tf90: ICONS.FILE,\n\tF90: ICONS.FILE,\n\tmd5: ICONS.FILE,\n\tswf: ICONS.FILE,\n\ttail: ICONS.FILE,\n\tstat: ICONS.FILE,\n\tejs: ICONS.FILE,\n\tpriv: ICONS.FILE,\n\tpem: ICONS.FILE,\n\tpub: ICONS.FILE,\n\tbar: ICONS.FILE,\n\twmf: ICONS.FILE,\n\tcfg: ICONS.FILE,\n\ttsx: ICONS.FILE,\n\tcert: ICONS.FILE,\n\t\"un~\": ICONS.FILE,\n\t\"9\": ICONS.FILE,\n\t\"8\": ICONS.FILE,\n\tls: ICONS.FILE,\n\tuniq: ICONS.FILE,\n\tgv: ICONS.FILE,\n\tps: ICONS.FILE,\n\tenv: ICONS.FILE,\n\tkeys: ICONS.FILE,\n\tso: ICONS.FILE,\n\tpac: ICONS.FILE,\n\terb: ICONS.FILE,\n\tidl: ICONS.FILE,\n\tomit: ICONS.FILE,\n\tmkd: ICONS.FILE,\n\tdata: ICONS.FILE,\n\twasm: ICONS.FILE,\n\tgif: ICONS.FILE,\n\tlint: ICONS.FILE,\n\tio: ICONS.FILE,\n\ttags: ICONS.FILE,\n\tjsm: ICONS.FILE,\n\trdoc: ICONS.FILE,\n\tsage: ICONS.FILE,\n\ttsv: ICONS.FILE,\n\trt: ICONS.FILE,\n\tdmg: ICONS.FILE,\n\totf: ICONS.FILE,\n\tscpt: ICONS.FILE,\n\tjxa: ICONS.FILE,\n\tmkb: ICONS.FILE,\n\ticf: ICONS.FILE,\n\tkbd: ICONS.FILE,\n\tini: ICONS.FILE,\n\tdocs: ICONS.FILE,\n\tspec: ICONS.FILE,\n\trb: ICONS.FILE,\n\tpo: ICONS.FILE,\n\tpot: ICONS.FILE,\n\tLIB: ICONS.FILE,\n\tl: ICONS.FILE,\n\ty: ICONS.FILE,\n\t\"c++\": ICONS.FILE,\n\t\"h++\": ICONS.FILE,\n\t\"2/m4\": ICONS.FILE,\n\tasv: ICONS.FILE,\n\tp: ICONS.FILE,\n\tmid: ICONS.FILE,\n\t\"12\": ICONS.FILE,\n\t\"10\": ICONS.FILE,\n\t\"js~\": ICONS.FILE,\n\tremy: ICONS.FILE,\n\tget: ICONS.FILE,\n\tcnf: ICONS.FILE,\n\tcub: ICONS.FILE,\n\twxs: ICONS.FILE,\n\tswp: ICONS.FILE,\n\tblob: ICONS.FILE,\n\tpyd: ICONS.FILE,\n\tpyx: ICONS.FILE,\n\tvtu: ICONS.FILE,\n\tmph: ICONS.FILE,\n\tegg: ICONS.FILE,\n\tmo: ICONS.FILE,\n\togg: ICONS.AUDIO,\n\taac: ICONS.AUDIO,\n\tasd: ICONS.FILE,\n\t\"7\": ICONS.FILE,\n\tvrt: ICONS.FILE,\n\tmp4: ICONS.VIDEO,\n\tgpu: ICONS.FILE,\n\thtc: ICONS.FILE,\n\titem: ICONS.FILE,\n\tbase: ICONS.FILE,\n\tnpy: ICONS.FILE,\n\tpy3: ICONS.CODE,\n\tpb: ICONS.FILE,\n\th5: ICONS.FILE,\n\ttif: ICONS.FILE,\n\tgo: ICONS.CODE,\n\tbats: ICONS.CODE,\n\tfish: ICONS.FILE,\n\taiff: ICONS.FILE,\n\trej: ICONS.FILE,\n\torig: ICONS.FILE,\n\tgnu: ICONS.FILE,\n\tsql: ICONS.CODE,\n\twat: ICONS.CODE,\n\trs: ICONS.CODE\n};\n\nexport function fileType(name: string) {\n  return name.split('.').slice(-1)[0];\n}\n\nexport default {\n\tICONS,\n\tassoc,\n  allowed,\n  fileType\n};","import React, {useState} from \"react\";\n\nimport { uuid } from 'uuidv4';\n\nimport { mmm_dd_yyyy } from \"../common/dayt\"; \nimport FileTypes from '../common/file-type';\n\nimport {\n\tAnchorButton,\n\tButton,\n\tClasses,\n\tCode,\n\tDialog,\n\tH5,\n\tIntent,\n\tSwitch,\n\tTooltip,\n\tCard,\n\tElevation,\n\tColors,\n\tHTMLTable,\n\tCheckbox\n} from \"@blueprintjs/core\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { DialogActions } from \"@material-ui/core\";\n\nexport interface IDialogExampleState {\n\tautoFocus: boolean;\n\tcanEscapeKeyClose: boolean;\n\tcanOutsideClickClose: boolean;\n\tenforceFocus: boolean;\n\tisOpen: boolean;\n\tusePortal: boolean;\n}\n\n\n\nexport interface ImportDialogProps {\n\tautoFocus: boolean;\n\tcanEscapeKeyClose: boolean;\n\tcanOutsideClickClose: boolean;\n\tenforceFocus: boolean;\n\tisOpen: boolean;\n\tusePortal: boolean;\n\tdata?: {\n\t\tthemeName?: string;\n\t};\n\tonImport: (...args) => void;\n\tonClose: (event?: React.SyntheticEvent<HTMLElement, Event> | undefined) => void;\n\tonDrop: (...args) => void;\n}\n\nconst useStyles = makeStyles({\n    dropzone: {\n        height: \"100%\",\n        width: \"100%\",\n        backgroundColor: \"#000000\"\n    }\n})\n\nexport const ACCEPTED_FILE_TYPES = [\n    \"\"\n]\n\nexport enum DROP_ALLOWED {\n    NO = 0,\n    IDK = 1,\n    YES = 2\n}\n\nconst backgroundColors = [\n\t\"rgba(255,0,0,.2)\",\n\t\"rgba(0,0,0,0)\",\n\t\"rgba(0,255,0,.2)\"\n];\n\nexport interface FileWithCheckbox{\n\tfile: File;\n\tchecked: boolean;\n}\n\nexport default function ImportDialog(props: ImportDialogProps) {\n    const classes = useStyles();\n\tconst [dropAllowed, setDropAllowed] = useState(DROP_ALLOWED.IDK);\n\tconst [filelist, setFilelist] = useState([] as File[]);\n\treturn (\n\t\t<Dialog\n\t\t\ticon=\"import\"\n\t\t\t// onClose={props.onClose}\n\t\t\ttitle=\"Import\"\n\t\t\ttransitionDuration={0}\n\t\t\tstyle={{\n\t\t\t\tborderRadius: \"2px\",\n\t\t\t\tpaddingBottom: \"0\",\n\t\t\t\twidth: \"auto\",\n\t\t\t\tminWidth: \"350px\"\n\t\t\t}}\n\t\t\t{...props}>\n\t\t\t<div\n\t\t\t\tclassName={Classes.DIALOG_BODY}\n\t\t\t\tonDragEnter={(e: React.DragEvent<HTMLElement>) => {\n\t\t\t\t\tconst { types, files, items } = e.dataTransfer;\n\t\t\t\t\tlet yes = true;\n\t\t\t\t\tfor (let i = 0; i < types.length; i++) {\n\t\t\t\t\t\tconst { kind, type } = items[i];\n\t\t\t\t\t\tif (kind !== \"file\") {\n\t\t\t\t\t\t\tyes = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (yes) {\n\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.YES);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.NO);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonDragLeave={e => {\n\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.IDK);\n\t\t\t\t}}\n\t\t\t\tonDragOver={(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\t\t\tconst { types, files, items } = e.dataTransfer;\n\t\t\t\t\tlet yes = true;\n\t\t\t\t\tfor (let i = 0; i < types.length; i++) {\n\t\t\t\t\t\tconst { kind, type } = items[i];\n\t\t\t\t\t\tif (kind !== \"file\") {\n\t\t\t\t\t\t\tyes = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (yes) {\n\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.YES);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.NO);\n\t\t\t\t\t}\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t\tonDrop={(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\t\t\tconst { types, files, items } = e.dataTransfer;\n\t\t\t\t\tlet filearray = Array.from(files);\n\t\t\t\t\tsetFilelist(filearray);\n\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.IDK);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}}>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: backgroundColors[dropAllowed]\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={\"drop-zone\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst input = (document.querySelector(\"#temp-file-import\") as HTMLInputElement) || document.createElement(\"input\");\n\t\t\t\t\t\tinput.type = \"file\";\n\t\t\t\t\t\tinput.setAttribute(\"style\", \"display: none;\");\n\t\t\t\t\t\tinput.setAttribute(\"id\", \"temp-file-import\");\n\t\t\t\t\t\tdocument.body.appendChild(input);\n\t\t\t\t\t\tinput.addEventListener(\"change\", (e: Event) => {\n\t\t\t\t\t\t\tconst target: HTMLInputElement = e.target as HTMLInputElement;\n\t\t\t\t\t\t\tconst filearray = [] as File[];\n\t\t\t\t\t\t\tif (target && target.files) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < target.files.length; i++) {\n\t\t\t\t\t\t\t\t\tfilearray.push(target.files[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetFilelist(filearray);\n\t\t\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.IDK);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinput.addEventListener(\"blur\", () => {\n\t\t\t\t\t\t\tinput.remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinput.click();\n\t\t\t\t\t}}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: \"gray\",\n\t\t\t\t\t\t\tfontSize: \"12pt\",\n\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\ttextAlign: \"center\"\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tDrag files or click to browse\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{filelist.length > 0 ? (\n\t\t\t\t\t<HTMLTable\n\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\tClasses.HTML_TABLE_BORDERED,\n\t\t\t\t\t\t\tClasses.HTML_TABLE_CONDENSED,\n\t\t\t\t\t\t\tClasses.HTML_TABLE_STRIPED\n\t\t\t\t\t\t].join(\" \")}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\ttextAlign: \"center\"\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>.ico</th>\n\t\t\t\t\t\t\t\t<th>name</th>\n\t\t\t\t\t\t\t\t<th>last-modified</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody style={{}}>\n\t\t\t\t\t\t\t{filelist.map((file,i,a) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={uuid()} className={\"table-hover\"}>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"icon \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tFileTypes.assoc[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\".\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(-1)[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t] ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tFileTypes.ICONS.FILE\n\t\t\t\t\t\t\t\t\t\t\t\t}></div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tid={file.name}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft: \"1em\"\n\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t{file.name}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td id={file.name + \"lastModified\"}>\n\t\t\t\t\t\t\t\t\t\t\t{mmm_dd_yyyy(file.lastModified)}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tFileTypes.allowed[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\".\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(-1)[0]]\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"✓\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"x\"\n\t\t\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</HTMLTable>\n\t\t\t\t) : (\n\t\t\t\t\t<div></div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tclassName={Classes.BUTTON}\n\t\t\t\t\tintent={Intent.PRIMARY}\n\t\t\t\t\tdisabled={filelist.length == 0}\n\t\t\t\t\ttext=\"Import\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tprops.onImport(filelist);\n\t\t\t\t\t\tsetFilelist([] as File[]);\n\t\t\t\t\t}}\n\t\t\t\t></Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","export function unix(){\n  return Date.now();\n}\n\nexport function mmddyyyy(t=Date.now()) {\n  const d = new Date(t);\n  const month = d.getMonth();\n  const day = d.getDay();\n  const year = d.getFullYear();\n  const time = d.getTime()\n  return `${month}-${day}-${year} at ${time}`;\n}\n\nexport function parse(time) {\n  return new Date(time)\n\t\t.toString()\n\t\t.split(/\\s+/gim)\n\t\t.filter(x =>\n\t\t\tx.match(/^(\\w{3}|\\d{1,2}|\\d{4}|(\\d{2}\\:\\d{2}\\:\\d{2}))$/gim)\n\t\t);\n}\n\nexport function mmm_dd_yyyy(time) {\n  return new Date(time)\n\t\t.toString()\n\t\t.split(/\\s+/gim)\n\t\t.slice(1, 5)\n\t\t.join(\" \");\n}","import React from 'react';\n\nexport interface TreeItemLabelProps {\n  label: React.ReactNode;\n  icon?: React.ReactNode;\n}\n\nexport default function TreeItemLabel(props: TreeItemLabelProps) {\n  return (\n    <div className=\"tree-item-label-container\">\n      <div className=\"tree-item-label-label\">\n        {props.icon && (<div className=\"tree-item-label-icon\"> {props.icon || \"\"}</div>)}\n        {props.label}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport { ContextMenuTarget, Menu, MenuItem } from \"@blueprintjs/core\";\n \n\nexport interface ContextMenuProps {\n  handleMenuItemClick: ((event: React.MouseEvent<HTMLElement, MouseEvent>) => void) & ((event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => void);\n}\n\n\n@ContextMenuTarget\nexport class ContextMenu extends React.Component<ContextMenuProps, {}> {\n    public render() {\n        // root element must support `onContextMenu`\n        return <div>{this.props.children}</div>;\n    }\n \n    public renderContextMenu() {\n        // return a single element, or nothing to use default browser behavior\n        return (\n            <Menu>\n                <MenuItem onClick={this.props.handleMenuItemClick} text=\"Delete\" />\n            </Menu>\n        );\n    }\n \n    public onContextMenuClose() {\n        // Optional method called once the context menu is closed.\n    }\n}\n\nexport default ContextMenu;","import React from 'react';\nimport { SvgIcon, SvgIconProps } from \"@material-ui/core\";\n\nexport function NodesIcon(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <svg width=\"24\" height=\"24\" viewBox=\"-4 -4 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M4 12C4 13.1046 3.10457 14 2 14C0.89543 14 0 13.1046 0 12C0 10.8954 0.89543 10 2 10C3.10457 10 4 10.8954 4 12Z\" fill=\"black\" />\n        <path d=\"M14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z\" fill=\"black\" />\n        <path d=\"M9 2C9 3.10457 8.10457 4 7 4C5.89543 4 5 3.10457 5 2C5 0.89543 5.89543 0 7 0C8.10457 0 9 0.89543 9 2Z\" fill=\"black\" />\n        <path d=\"M7 2L2 12H12L7 2Z\" stroke=\"black\" />\n      </svg>\n    </SvgIcon>\n  );\n}\n","import React from 'react';\nimport { SvgIcon, SvgIconProps } from \"@material-ui/core\";\n\nexport function SurfaceIcon(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <svg fill=\"none\" {...props}>\n        <path fill=\"#C0C1C1\" stroke=\"#303030\" d=\"M4.6 4.6h13.8v13.8H4.6z\" />\n        <circle cx={4.6} cy={4.6} r={1.84} fill=\"#303030\" />\n        <circle cx={18.4} cy={4.6} r={1.84} fill=\"#303030\" />\n        <circle cx={18.4} cy={18.4} r={1.84} fill=\"#303030\" />\n        <circle cx={4.6} cy={18.4} r={1.84} fill=\"#303030\" />\n      </svg>\n    </SvgIcon>\n  );\n}\n","import React from 'react';\nimport { SvgIcon, SvgIconProps } from \"@material-ui/core\";\n\nexport function RoomIcon(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer_1\" data-name=\"Layer 1\" viewBox=\"0 0 31 28\">\n        <polygon points=\"6.473 10.456 15.492 5.332 24.524 10.455 15.485 15.865 6.473 10.456\" fill=\"#ebebeb\" />\n        <polygon points=\"6.473 10.456 15.489 15.866 15.492 26.635 6.472 21.259 6.473 10.456\" fill=\"#90908f\" />\n        <polygon points=\"24.524 10.455 24.528 21.305 15.492 26.635 15.492 15.866 24.524 10.455\" fill=\"#c6c7c8\" />\n        <path\n          d=\"M24.49414,9.897l-8.5-4.83105a1.00013,1.00013,0,0,0-.98828,0l-8.5,4.83105A1.00006,1.00006,0,0,0,6,10.76642V20.99231a.99993.99993,0,0,0,.48816.85907L14.989,26.91681a1,1,0,0,0,1.021.00159l8.49915-5.02747A1.0001,1.0001,0,0,0,25,21.03027V10.76642A1.00006,1.00006,0,0,0,24.49414,9.897ZM15.5,5.93555l8.17548,4.6466L15.501,15.419l-8.14533-4.8545ZM7,20.99219V11.51678l8,4.76691V25.76Zm9,4.77118V16.28473l8-4.73181v9.47735Z\"\n          fill=\"#535353\"\n        />\n      </svg>\n    </SvgIcon>\n  );\n}\n","import React from \"react\";\nimport WifiIcon from \"@material-ui/icons/Wifi\";\nimport { SvgIconProps } from \"@material-ui/core\";\n\nexport function SourceIcon(props: SvgIconProps) {\n  return <WifiIcon transform=\"rotate(45)\" fillOpacity={0.95} {...props} />;\n}","import React from \"react\";\nimport MicIcon from \"@material-ui/icons/Mic\";\nimport { SvgIconProps } from \"@material-ui/core\";\n\nexport function ReceiverIcon(props: SvgIconProps) {\n  return <MicIcon {...props} />;\n}","import React, { useState } from \"react\";\nimport { makeStyles, createStyles } from \"@material-ui/core/styles\";\nimport { SvgIcon } from \"@material-ui/core\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\n\n\n\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport TreeItemLabel from './TreeItemLabel';\nimport Source from \"../objects/source\";\nimport Receiver from \"../objects/receiver\";\nimport properCase from \"../common/proper-case\";\nimport { KeyValuePair } from \"../common/key-value-pair\";\nimport Container from \"../objects/container\";\nimport Surface from \"../objects/surface\";\nimport Solver from \"../compute/solver\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { Icon } from \"@fortawesome/fontawesome-svg-core\";\nimport ContextMenu from \"./ContextMenu\";\nimport {\n  NodesIcon,\n  FDTDIcon,\n  RoomIcon,\n  SurfaceIcon,\n  RayTracerIcon,\n  SourceIcon,\n  ReceiverIcon,\n  RT60Icon\n} from './icons';\nimport \"./ObjectView.css\";\n\n\nexport interface ObjectViewProps {\n  containers: KeyValuePair<Container>;\n  onDelete: (...args) => void;\n  onClick: (...args) => void;\n  \n}\n\ntype ClickEvent = React.MouseEvent<HTMLElement, MouseEvent>;\n\n\n  function mapchildren(container: Container | THREE.Object3D, props: ObjectViewProps, expanded: string[], setExpanded) {\n    if (container[\"kind\"]) {\n      const sharedProps = {\n        draggable: true,\n        key: container.uuid,\n        nodeId: container.uuid\n      };\n      const className = (container as Container).selected ? \"container-selected\" : \"\";\n      const draggable = true;\n      const key = container.uuid;\n      const nodeId = container.uuid;\n      const meta = properCase(container[\"kind\"]);\n      const genericLabel = container.name || \"untitled\";\n      const onClick = (e: ClickEvent) => props.onClick(container, e);\n      const collapseIcon = <ExpandMoreIcon onClick={(e) => setExpanded(expanded.filter((x) => x !== container.uuid))} fontSize=\"inherit\" />;\n      const expandIcon = <ChevronRightIcon onClick={(e) => setExpanded(expanded.concat(container.uuid))} fontSize=\"inherit\" />;\n\n      const label = <TreeItemLabel {...{ label: genericLabel, meta }} />;\n      const roomLabel = <TreeItemLabel icon={<RoomIcon fontSize=\"inherit\" />} {...{ label: genericLabel, meta }} />;\n\n      const ContextMenuSharedProps = {\n        handleMenuItemClick: (e) => {\n          if (e.target.textContent) {\n            switch (e.target.textContent) {\n              case \"Delete\":\n                props.onDelete(container);\n                break;\n              default:\n                break;\n            }\n          }\n        },\n        key: key + \"context-menu\"\n      };\n\n      switch (container[\"kind\"]) {\n        case \"surface\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ icon: <NodesIcon fontSize=\"inherit\" />, className, label, onClick, draggable, key, nodeId }} />\n            </ContextMenu>\n          );\n\n        case \"source\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ icon: <SourceIcon fontSize=\"inherit\" />, className, label, onClick, draggable, key, nodeId }} />\n            </ContextMenu>\n          );\n\n        case \"receiver\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ icon: <ReceiverIcon fontSize=\"inherit\" />, className, label, onClick, draggable, key, nodeId }} />\n            </ContextMenu>\n          );\n\n        case \"room\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ label: roomLabel, onClick, draggable, key, nodeId, collapseIcon, className, expandIcon }}>\n                {container.children.map((x) => mapchildren(x, props, expanded, setExpanded))}\n              </TreeItem>\n            </ContextMenu>\n          );\n        \n        case \"container\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem\n                label={<TreeItemLabel icon={<SurfaceIcon fontSize=\"inherit\" />} label={container.name || \"untitled\"} />}\n                collapseIcon={<ExpandMoreIcon onClick={(e) => setExpanded(expanded.filter((x) => x !== container.uuid))} fontSize=\"inherit\" />}\n                expandIcon={<ChevronRightIcon onClick={(e) => setExpanded(expanded.concat(container.uuid))} fontSize=\"inherit\" />}\n                className={className}\n                {...sharedProps}>\n                {container.children.map((x) => mapchildren(x, props, expanded, setExpanded))}\n              </TreeItem>\n            </ContextMenu>\n          );\n\n        default:\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem\n                label={<TreeItemLabel label={container.name || \"untitled\"} />}\n                {...sharedProps}\n                collapseIcon={<ExpandMoreIcon onClick={(e) => setExpanded(expanded.filter((x) => x !== container.uuid))} fontSize=\"inherit\" />}\n                expandIcon={<ChevronRightIcon onClick={(e) => setExpanded(expanded.concat(container.uuid))} fontSize=\"inherit\" />}\n                >\n                {container.children instanceof Array && container.children.map((x) => mapchildren(x, props, expanded, setExpanded))}\n              </TreeItem>\n            </ContextMenu>\n          );\n      }\n    }\n    return (\n      <ContextMenu\n        handleMenuItemClick={(e) => {\n          if (e.target.textContent) {\n            switch (e.target.textContent) {\n              case \"Delete\":\n                props.onDelete(container);\n                break;\n              default:\n                break;\n            }\n          }\n        }}\n        key={container.uuid + \"context-menu\"}>\n        <TreeItem\n          nodeId={container.uuid}\n          label={<TreeItemLabel label={container.name || \"untitled\"} />}\n          key={container.uuid}\n          draggable={true}\n          onClick={(e) => props.onClick(container, e)}>\n          {container.children.map((x) => mapchildren(x, props, expanded, setExpanded))}\n        </TreeItem>\n      </ContextMenu>\n    );\n  }\n\nexport default function ObjectView(props) {\n\n  const [expanded, setExpanded] = useState([\"\"]);\n  \n  const ContainerLabelStyle ={\n    fontWeight: 400,\n    color: Object.keys(props.containers).length == 0 ? Colors.LIGHT_GRAY3 : \"#182026\"\n  }\n\n  \n  const label = <TreeItemLabel label={<div style={ContainerLabelStyle}>Objects</div>}/>;\n  const expandClickHandler = e => setExpanded(expanded.concat(\"containers\"));\n  const collapseClickHandler = e => setExpanded(expanded.filter(x => x !== \"containers\"));\n  const collapseIcon = <ExpandMoreIcon onClick={collapseClickHandler} fontSize=\"inherit\" />;\n  const expandIcon = <ChevronRightIcon onClick={expandClickHandler} fontSize=\"inherit\" />;\n  const unselctable = Object.keys(props.containers).length == 0 ? \"on\" : \"off\";\n  const keys = Object.keys(props.containers);\n  return (\n    <TreeView\n      expanded={expanded}\n      className=\"tree-view-root\"\n      defaultExpanded={[]}\n      defaultExpandIcon={<ExpandMoreIcon fontSize=\"inherit\" />}\n      defaultCollapseIcon={<ChevronRightIcon fontSize=\"inherit\" />}\n    >\n      <TreeItem\n        label={label}\n        expandIcon={expandIcon}\n        collapseIcon={collapseIcon}\n        unselectable={unselctable}\n        nodeId=\"containers\"\n      >\n        {keys.map((x: string) => mapchildren(props.containers[x], props, expanded, setExpanded))}\n      </TreeItem>\n    </TreeView>\n  );\n}\n","export default function properCase(str: string) {\n  return str.replace(/\\w\\S*/g, function(txt) {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n}","import * as THREE from \"three\";\nimport Receiver from \"./receiver\";\nimport Surface from \"./surface\";\nimport Room from \"./room\";\nimport Source from \"./source\";\nimport { KeyValuePair } from \"../common/key-value-pair\";\n\ntype UserData = {\n\t[key: string]: any;\n};\n\nexport interface ContainerSaveObject {\n\tname: string;\n  visible: boolean;\n  position: number[];\n  scale: number[];\n  rotation: number[];\n  uuid: string;\n}\n\nexport interface ContainerProps {\n\tuserData?: UserData;\n\ttype?: string;\n\tchildren?: Array<THREE.Object3D | Container | THREE.Group>;\n}\n\nexport default class Container extends THREE.Group {\n\tkind: string;\n\tselected: boolean;\n\tselect!: () => void;\n\tdeselect!: () => void;\n\trenderCallback!: (time?: number) => void;\n\tsave: () => ContainerSaveObject;\n\trestore: (state: ContainerSaveObject) => void;\n\tconstructor(name: string, props?: ContainerProps) {\n\t\tsuper();\n\t\tthis.name = name;\n\t\tthis.kind = \"container\";\n\t\tprops &&\n\t\t\t(() => {\n\t\t\t\tfor (const key in props) {\n\t\t\t\t\tthis[key] = props[key];\n\t\t\t\t}\n\t\t\t})();\n\t\tthis.selected = false;\n\t\tthis.select = () => {\n\t\t\t// this.children.forEach((child: Receiver | Room | Source | Surface) => {\n\t\t\t// \tif (child['kind']) {\n\t\t\t// \t\tchild.select();\n\t\t\t// \t}\n\t\t\t// })\n\t\t\t// this.selected = true;\n\t\t};\n\t\tthis.deselect = () => {\n\t\t\t// this.children.forEach((child: Receiver | Room | Source | Surface) => {\n\t\t\t// \t\tif (child[\"kind\"]) {\n\t\t\t// \t\t\tchild.deselect();\n\t\t\t// \t\t}\n\t\t\t// });\n\t\t\t// this.selected = false;\n\t\t};\n\t\tthis.renderCallback = () => { };\n\t\tthis.save = () => {\n      const name = this.name;\n      const visible = this.visible;\n      const position = this.position.toArray();\n      const scale = this.scale.toArray();\n      const rotation = this.rotation.toArray();\n      const uuid = this.uuid;\n      return {\n        name,\n        visible,\n        position,\n        scale,\n        rotation,\n        uuid\n      };\n    };\n\t\tthis.restore = (state: ContainerSaveObject) => { \n\t\t\tthis.name = state.name;\n\t\t\tthis.visible = state.visible;\n\t\t\tthis.position.set(state.position[0], state.position[1], state.position[2]);\n\t\t\tthis.scale.set(state.scale[0], state.scale[1], state.scale[2]);\n\t\t\tthis.rotation.set(state.rotation[0], state.rotation[1], state.rotation[2]);\n\t\t\tthis.uuid = state.uuid;\n\t\t};\n\t}\n\n\tget x() {\n\t\treturn this.position.x;\n\t}\n\tset x(val) {\n\t\tthis.position.setX(val);\n\t}\n\tget y() {\n\t\treturn this.position.y;\n\t}\n\tset y(val) {\n\t\tthis.position.setY(val);\n\t}\n\tget z() {\n\t\treturn this.position.z;\n\t}\n\tset z(val) {\n\t\tthis.position.setZ(val);\n\t}\n\n\tget scalex() {\n\t\treturn this.scale.x;\n\t}\n\tset scalex(val) {\n\t\tthis.scale.setX(val);\n\t}\n\tget scaley() {\n\t\treturn this.scale.y;\n\t}\n\tset scaley(val) {\n\t\tthis.scale.setY(val);\n\t}\n\tget scalez() {\n\t\treturn this.scale.z;\n\t}\n\tset scalez(val) {\n\t\tthis.scale.setZ(val);\n\t}\n\n\tget rotationx() {\n\t\treturn this.rotation.x;\n\t}\n\tset rotationx(val) {\n\t\tthis.rotation.x = val;\n\t}\n\tget rotationy() {\n\t\treturn this.rotation.y;\n\t}\n\tset rotationy(val) {\n\t\tthis.rotation.y = val;\n\t}\n\tget rotationz() {\n\t\treturn this.rotation.z;\n\t}\n\tset rotationz(val) {\n\t\tthis.rotation.z = val;\n  }\n  \n\n}\n","import React from \"react\";\n\nexport interface PanelContainerProps {\n  children?: any;\n  className?: string;\n}\n\nexport default function PanelContainer(props: PanelContainerProps) {\n  const className = props.className || \"panel full\";\n  return (\n    <div className={className}>\n      <div className=\"panel-content\">{props.children}</div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { ObjectPropertyInputEvent } from \"./NumberInput\";\n\nexport interface TextInputProps {\n  name: string;\n  className?: string;\n  value: string;\n  verifier?: (val: string) => boolean;\n  id?: string;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  onChange: (e: ObjectPropertyInputEvent) => void;\n}\n\n\n\n\nexport function TextInput(props: TextInputProps) {\n  \n   const basestyle: React.CSSProperties = {\n   };\n   let mergedStyles = props.style\n     ? Object.assign(basestyle, props.style)\n     : basestyle;\n\n\n  \n  const _props = {\n    value: props.value,\n    type: \"text\",\n    onChange: (e: React.ChangeEvent) => {\n      props.onChange({\n        name: props.name,\n        type: \"text\",\n        value: (e.currentTarget as HTMLInputElement).value,\n        id: props.id\n      })\n    },\n    name: props.name, \n    // className?: props.className;\n    // value: number|string;\n    style: basestyle,\n    disabled: props.disabled,\n    className: \"text-input\"\n  };\n\treturn (\n    <input {..._props}/>\n  );\n}\n\nexport default TextInput;\n","import React, { useState } from \"react\";\n\nexport interface NumberInputProps {\n  name: string;\n  className?: string;\n  value: number | string;\n  style?: React.CSSProperties;\n  disabled?: boolean;\n  step?: number;\n  min?: number;\n  max?: number;\n  id?: string;\n  onChange: (e: ObjectPropertyInputEvent) => void;\n  verifier?: (val: string | number) => boolean;\n}\n\nexport interface ObjectPropertyInputEvent {\n  name: string;\n  type: string;\n  value: any;\n  checked?: boolean;\n  id?: string;\n}\n\nexport function NumberInput(props: NumberInputProps) {\n  const _props = {\n    onChange: e =>\n      props.onChange({\n        value: e.currentTarget.value,\n        name: props.name,\n        id: props.id,\n        type: \"number\"\n      }),\n    name: props.name,\n    className: [\"number-input\", props.className || \"\"].join(\" \"),\n    value: props.value,\n    style: props.style,\n    disabled: props.disabled,\n    step: props.step,\n    min: props.min,\n    max: props.max,\n    id: props.id,\n    type: \"number\"\n  };\n  return <input {..._props} />;\n}\n\nexport default NumberInput;\n","import React from 'react';\n\nexport interface GridRowProps {\n  label?: React.ReactNode|React.ReactNode[];\n\tchildren?: React.ReactNode | React.ReactNode[];\n  span?: number;\n  style?: React.CSSProperties\n}\n\nexport default function GridRow(props: GridRowProps) {\n\treturn (\n    <>\n      {props.span && props.span == 2 ? (\n        <div\n          style={{ display: \"grid\", gridColumnStart: \"1\", gridColumnEnd: \"3\" }}>\n          {props.children}\n        </div>\n      ) : (\n        <>\n          <div\n            style={{\n              display: \"grid\",\n              gridColumnStart: \"1\",\n              gridColumnEnd: \"2\"\n            }}>\n            {props.label}\n          </div>\n          <div\n            style={{\n              display: \"grid\",\n              gridColumnStart: \"2\",\n              gridColumnEnd: \"3\"\n            }}>\n            <div\n              style={Object.assign({\n                display: \"flex\",\n                justifyContent: \"space-evenly\"\n              }, props.style || {})}>\n              {props.children}\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  );\n}","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, {ObjectPropertyInputEvent} from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport GridRow from '../GridRow';\n\nimport Source from '../../objects/source';\nimport { FDTD } from \"../../compute/fdtd\";\nimport Receiver from \"../../objects/receiver\";\n\n\nexport interface FDTDPropertiesProps {\n\tobject: FDTD;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n\tonPropertyValueChangeAsNumber: (id: string, prop: string, valueAsNumber: number) => void;\n\tonPropertyValueChangeAsString: (id: string, prop: string, valueAsString: string) => void;\n}\n\n\n\nconst FDTDPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function FDTDProperties(props: FDTDPropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\t\n\treturn (\n\t\t<div>\n\t\t\t<div style={FDTDPropertiesContainerStyle}>\n\t\t\t\t\n\t\t\t\t{props.object.hasOwnProperty('name') && (\n\t\t\t\t\t<GridRow label={\"name\"}>\n\t\t\t\t\t\t<TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('_gain') && (\n\t\t\t\t\t<GridRow label={\"gain\"}>\n\t\t\t\t\t\t<NumberInput name=\"gain\" value={props.object.gain} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('_threshold') && (\n\t\t\t\t\t<GridRow label={\"threshold\"}>\n\t\t\t\t\t\t<NumberInput name=\"threshold\" value={props.object.threshold} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('dx') && (\n\t\t\t\t\t<GridRow label={\"dx\"}>\n\t\t\t\t\t\t<NumberInput name=\"dx\" value={props.object.dx} onChange={props.onPropertyChange} disabled={props.object.running}/>\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('dt') && (\n\t\t\t\t\t<GridRow label={\"dt\"}>\n\t\t\t\t\t\t<NumberInput name=\"dt\" value={props.object.dt} onChange={props.onPropertyChange} disabled={props.object.running}/>\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('q') && (\n\t\t\t\t\t<GridRow label={\"q\"}>\n\t\t\t\t\t\t<NumberInput name=\"q\" value={props.object.q} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('r') && (\n\t\t\t\t\t<GridRow label={\"r\"}>\n\t\t\t\t\t\t<NumberInput name=\"r\" value={props.object.r} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t\n\t\t\t\t{/* {props.object.hasOwnProperty('visible') && (\n\t\t\t\t\t<GridRow label={\"visible\"}>\n\t\t\t\t\t\t<CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t\n\t\t\t\t{props.object.hasOwnProperty('position') && (\n\t\t\t\t\t<GridRow label={\"position\"}>\n\t\t\t\t\t\t<NumberInput name=\"x\" value={props.object.position.x} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"y\" value={props.object.position.y} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"z\" value={props.object.position.z} {...XYZProps}/>\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\n\t\t\t\t{props.object.hasOwnProperty('scale') && (\n\t\t\t\t\t<GridRow label={\"scale\"}>\n\t\t\t\t\t\t<NumberInput name=\"scalex\" value={props.object.scale.x} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"scaley\" value={props.object.scale.y} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"scalez\" value={props.object.scale.z} {...XYZProps} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\n\t\t\t\t{props.object.hasOwnProperty('rotation') && (\n\t\t\t\t\t<GridRow label={\"rotation\"}>\n\t\t\t\t\t\t<NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps}/>\n\t\t\t\t\t</GridRow>\n\t\t\t\t)} */}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport { ObjectPropertyInputEvent } from \"./NumberInput\";\nimport \"./CheckboxInput.css\";\n\nexport interface CheckboxInputProps {\n\tname: string;\n\tclassName?: string;\n\tchecked: boolean;\n\tcheckedNode?: React.ReactNode\n\tuncheckedNode?: React.ReactNode\n\tonChange: (e: ObjectPropertyInputEvent) => void;\n}\n\nexport function CheckboxInput(props: CheckboxInputProps) {\n\treturn (\n\t\t<label className=\"checkbox-container\">\n\t\t\t<input\n\t\t\t\tclassName={\"checkbox-input\"}\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\t\tprops.onChange({\n\t\t\t\t\tname: e.currentTarget.name,\n\t\t\t\t\ttype: e.currentTarget.type,\n\t\t\t\t\tvalue: e.currentTarget.checked,\n\t\t\t\t\tchecked: e.currentTarget.checked,\n\t\t\t\t\tid: e.currentTarget.id\n\t\t\t\t})\n\t\t\t\t}}\n\t\t\t\tname={props.name}\n\t\t\t\tchecked={props.checked}\n\t\t\t/>\n\t\t\t{/* {props.checked ? (props.checkedNode || <VisibilityIcon fontSize=\"small\" className=\"checkbox-checkmark\"/>) : (props.uncheckedNode || <VisibilityOffIcon fontSize=\"small\" className=\"checkbox-checkmark\"/>)} */}\n\t\t</label> \n\t)\n}\n\nexport default CheckboxInput;\n","import React, {useState} from \"react\";\n\nexport interface ColorInputProps {\n  name: string;\n  className?: string;\n  value: string;\n  style?: React.CSSProperties;\n  disabled?: boolean;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport function ColorInput(props: ColorInputProps) {\n  return (<div>\n    <input type=\"color\" onChange={props.onChange} name={props.name} className={props.className||\"\"} value={props.value} />\n  </div>)\n}\n\n\n\n\nexport default ColorInput;\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport Messenger from \"../../messenger\";\nimport ColorInput from \"../ColorInput\";\n\nexport interface SourcePropertiesProps {\n  object: Source;\n  messenger: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n}\n\n\n\nconst SourcePropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function SourceProperties(props: SourcePropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n\t\tonChange: props.onPropertyChange,\n\t}\n\t\n\tconst source = props.messenger.postMessage(\"FETCH_SOURCE\", props.object.uuid)[0];\n\t// console.log(source);\n\t\n\t\n\treturn (\n    <div>\n      <div style={SourcePropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"visible\"}>\n            <CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"position\") && (\n          <GridRow label={\"position\"}>\n            <NumberInput name=\"x\" value={props.object.position.x} {...XYZProps} />\n            <NumberInput name=\"y\" value={props.object.position.y} {...XYZProps} />\n            <NumberInput name=\"z\" value={props.object.position.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"scale\") && (\n          <GridRow label={\"scale\"}>\n            <NumberInput name=\"scalex\" value={props.object.scale.x} {...XYZProps} min={10e-10} />\n            <NumberInput name=\"scaley\" value={props.object.scale.y} {...XYZProps} min={10e-10} />\n            <NumberInput name=\"scalez\" value={props.object.scale.z} {...XYZProps} min={10e-10} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"rotation\") && (\n          <GridRow label={\"rotation\"}>\n            <NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps} />\n            <NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps} />\n            <NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {/* {props.object.hasOwnProperty(\"theta\") && (\n          <GridRow label={\"theta\"}>\n            <NumberInput name=\"theta\" value={props.object.theta} {...XYZProps} />\n          </GridRow>\n        )}\n        {props.object.hasOwnProperty(\"phi\") && (\n          <GridRow label={\"phi\"}>\n            <NumberInput name=\"phi\" value={props.object.phi} {...XYZProps} />\n          </GridRow>\n        )} */}\n        {props.object.hasOwnProperty(\"mesh\") && (\n          <GridRow label={\"color\"}>\n            <ColorInput\n              name=\"color\"\n              value={props.object.getColorAsString()}\n              onChange={(e) => {\n                props.onPropertyChange({\n                  value: e.currentTarget.value,\n                  name: e.currentTarget.name,\n                  id: e.currentTarget.id,\n                  type: e.currentTarget.type,\n                  checked: undefined\n                });\n              }}\n            />\n          </GridRow>\n        )}\n        {props.object.hasOwnProperty(\"uuid\") && (\n          <GridRow label={\"uuid\"}>\n            <span className=\"muted-text\">{props.object.uuid}</span>\n          </GridRow>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport Receiver from \"../../objects/receiver\";\nimport ColorInput from '../ColorInput';\n\nexport interface ReceiverPropertiesProps {\n  object: Receiver;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n}\n\n\n\nconst ReceiverPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function ReceiverProperties(props: ReceiverPropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\t\n\treturn (\n    <div>\n      <div style={ReceiverPropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"visible\"}>\n            <CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"position\") && (\n          <GridRow label={\"position\"}>\n            <NumberInput name=\"x\" value={props.object.position.x} {...XYZProps} />\n            <NumberInput name=\"y\" value={props.object.position.y} {...XYZProps} />\n            <NumberInput name=\"z\" value={props.object.position.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"scale\") && (\n          <GridRow label={\"scale\"}>\n            <NumberInput name=\"scalex\" value={props.object.scale.x} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scaley\" value={props.object.scale.y} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scalez\" value={props.object.scale.z} min={10e-10} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"rotation\") && (\n          <GridRow label={\"rotation\"}>\n            <NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps} />\n            <NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps} />\n            <NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"mesh\") && (\n          <GridRow label={\"color\"}>\n            <ColorInput\n              name=\"color\"\n              value={props.object.getColorAsString()}\n              onChange={(e) => {\n                props.onPropertyChange({\n                  value: e.currentTarget.value,\n                  name: e.currentTarget.name,\n                  id: e.currentTarget.id,\n                  type: e.currentTarget.type,\n                  checked: undefined\n                });\n              }}\n            />\n          </GridRow>\n        )}\n        {props.object.hasOwnProperty(\"uuid\") && (\n          <GridRow label={\"uuid\"}>\n            <span className=\"muted-text\">{props.object.uuid}</span>\n          </GridRow>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport interface GridRowSeperatorProps {\n  label?: React.ReactNode | React.ReactNode[];\n  children?: React.ReactNode | React.ReactNode[];\n  span?: number;\n  color?: string;\n  marginTop?: string;\n  marginBottom?: string;\n}\n\nexport default function GridRowSeperator(props: GridRowSeperatorProps) {\n  return (\n    <div style={{\n      display: \"grid\",\n      gridColumnStart: \"1\",\n      gridColumnEnd: \"3\"\n    }}>\n      <div style={{\n        borderBottomStyle: \"solid\",\n        borderBottomWidth: \"1px\",\n        borderBottomColor: props.color || \"rgba(0,0,0,0.2)\",\n        width: \"100%\",\n        marginTop: props.marginTop || \"1em\",\n        marginBottom: props.marginBottom || \"1em\"\n      }}/>\n    </div>\n  )\n}\n","import React, { Fragment } from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport GridRowSeperator from '../GridRowSeperator';\nimport RayTracer from \"../../compute/raytracer\";\nimport { Button } from \"@blueprintjs/core\";\nimport Select, { components } from \"react-select\";\nimport Messenger from \"../../messenger\";\n\n\nexport interface RayTracerPropertiesProps {\n  object: RayTracer;\n  messenger: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n\tonPropertyValueChangeAsNumber: (id: string, prop: string, valueAsNumber: number) => void;\n\tonPropertyValueChangeAsString: (id: string, prop: string, valueAsString: string) => void;\n\tonButtonClick: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\nconst RayTracerPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\nexport default function RayTracerProperties(props: RayTracerPropertiesProps) {\n  const XYZProps = {\n    style: {\n      width: \"30%\"\n    },\n    onChange: props.onPropertyChange,\n  };\n\n  const onSourceChange = (e) => {\n    console.log(e);\n    props.messenger.postMessage(\"RAYTRACER_SOURCE_CHANGE\", !e ? [] : e, props.object.uuid);\n    \n  }\n\n  const onReceiverChange = e => {\n    console.log(e);\n    props.messenger.postMessage(\"RAYTRACER_RECEIVER_CHANGE\", !e? [] : e, props.object.uuid);\n  };\n\n  let sources = props.messenger.postMessage(\"FETCH_ALL_SOURCES\")[0];\n  const sourcesSelectOptions = sources.map(x => {\n    return {\n      value: x.uuid,\n      label: x.name,\n      key: x.uuid,\n      id: x.uuid\n    };\n  });\n  if (sources.length > 0) {\n    sources = sources.filter(x => props.object.sourceIDs.includes(x.uuid))\n  }\n  const sourceSelectedOptions = sources.map(x => {\n     return {\n       value: x.uuid,\n       label: x.name,\n       key: x.uuid,\n       id: x.uuid\n     };\n  })\n  \n  let receivers = props.messenger.postMessage(\"FETCH_ALL_RECEIVERS\")[0]\n  const receiverSelectOptions = receivers.map(x => {\n    return {\n      value: x.uuid,\n      label: x.name,\n      key: x.uuid,\n      id: x.uuid\n    };\n  });    \n  if (receivers.length > 0) {\n    receivers = receivers.filter(x => props.object.receiverIDs.includes(x.uuid));\n  }\n  const receiverSelectedOptions = receivers.map(x => {\n    return {\n      value: x.uuid,\n      label: x.name,\n      key: x.uuid,\n      id: x.uuid\n    };\n  })\n   \n  const customStyles = {\n    indicatorsContainer: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    clearIndicator: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    dropdownIndicator: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    control: (provided, state) => ({\n      ...provided,\n      minHeight: 0\n    }),\n    container: (provided, state) => ({\n      ...provided,\n      width: \"100%\"\n    })\n  };\n  \n  return (\n    <div>\n      <div style={RayTracerPropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"updateInterval\") && (\n          <GridRow label={\"rate (ms)\"}>\n            <NumberInput name=\"updateInterval\" value={props.object.updateInterval} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"reflectionOrder\") && (\n          <GridRow label={\"order\"}>\n            <NumberInput name=\"reflectionOrder\" value={props.object.reflectionOrder} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"passes\") && (\n          <GridRow label={\"passes\"}>\n            <NumberInput name=\"passes\" value={props.object.passes} {...XYZProps} min={1} step={1} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"_pointSize\") && (\n          <GridRow label={\"point size\"}>\n            <NumberInput name=\"pointSize\" value={props.object.pointSize} {...XYZProps} min={1} step={1} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"_raysVisible\") && (\n          <GridRow label=\"show rays\">\n            <CheckboxInput\n              checkedNode={<div className=\"checked-icon\"></div>}\n              uncheckedNode={<div className=\"unchecked-icon\" />}\n              name={\"raysVisible\"}\n              onChange={props.onPropertyChange}\n              checked={props.object.raysVisible}\n            />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"_runningWithoutReceivers\") && (\n          <GridRow label=\"ignore receivers\">\n            <CheckboxInput\n              checkedNode={<div className=\"checked-icon\"></div>}\n              uncheckedNode={<div className=\"unchecked-icon\" />}\n              name={\"runningWithoutReceivers\"}\n              onChange={props.onPropertyChange}\n              checked={props.object.runningWithoutReceivers}\n            />\n          </GridRow>\n        )}\n        <GridRowSeperator />\n        <GridRow label={\"run\"}>\n          <Button\n            name={props.object.isRunning ? \"ray-tracer-pause\" : \"ray-tracer-play\"}\n            icon={props.object.isRunning ? \"pause\" : \"play\"}\n            onClick={props.onButtonClick}\n            minimal\n            className={\"bp3-small-icon-button\"}\n          />\n        </GridRow>\n        <GridRow label={\"clear\"}>\n          <Button name=\"ray-tracer-clear\" icon=\"cross\" onClick={props.onButtonClick} minimal className={\"bp3-small-icon-button\"} />\n        </GridRow>\n        <GridRowSeperator />\n        <GridRow label=\"sources\"></GridRow>\n        <GridRow span={2}>\n          <Select\n            defaultValue={sourceSelectedOptions}\n            isMulti\n            name=\"sources\"\n            options={sourcesSelectOptions}\n            className=\"basic-multi-select\"\n            classNamePrefix=\"select\"\n            key={\"sources\"}\n            styles={customStyles}\n            onChange={onSourceChange}\n          />\n        </GridRow>\n\n        <GridRow label=\"receivers\"></GridRow>\n        <GridRow span={2}>\n          <Select\n            defaultValue={receiverSelectedOptions}\n            isMulti\n            name=\"receivers\"\n            options={receiverSelectOptions}\n            className=\"basic-multi-select\"\n            classNamePrefix=\"select\"\n            key={\"receievers\"}\n            styles={customStyles}\n            onChange={onReceiverChange}\n          />\n        </GridRow>\n\n        <GridRowSeperator />\n        <GridRow span={2}>\n          <Button\n            text=\"Calulate Response\"\n            onClick={(e) => props.messenger.postMessage(\"RAYTRACER_CALCULATE_RESPONSE\", props.object.uuid, props.object.reflectionLossFrequencies)}\n          />\n        </GridRow>\n        <GridRow span={2}>\n          <Button text=\"Test WASM\" onClick={(e) => props.messenger.postMessage(\"RAYTRACER_TEST_WASM\", props.object.uuid, Math.random())} />\n        </GridRow>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport Room from '../../objects/room';\n\nexport interface RoomPropertiesProps {\n  object: Room;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n}\n\n\n\nconst RoomPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function RoomProperties(props: RoomPropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\t\n\treturn (\n    <div>\n      <div style={RoomPropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"visible\"}>\n            <CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"position\") && (\n          <GridRow label={\"position\"}>\n            <NumberInput name=\"x\" value={props.object.position.x} {...XYZProps} />\n            <NumberInput name=\"y\" value={props.object.position.y} {...XYZProps} />\n            <NumberInput name=\"z\" value={props.object.position.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"scale\") && (\n          <GridRow label={\"scale\"}>\n            <NumberInput name=\"scalex\" value={props.object.scale.x} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scaley\" value={props.object.scale.y} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scalez\" value={props.object.scale.z} min={10e-10} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"rotation\") && (\n          <GridRow label={\"rotation\"}>\n            <NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps} />\n            <NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps} />\n            <NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps} />\n          </GridRow>\n        )}\n      </div>\n    </div>\n  );\n}\n","export function nums(f: Function, v: number | number[]): number | number[] {\n  if (typeof v === 'number') {\n    return f(v);\n  } else {\n    return v.map(x => f(x));\n  }\n}\n","export const third_octave: number[] = [\n  6.3,\n  8,\n  10,\n  12.5,\n  16,\n  20,\n  25,\n  31.5,\n  40,\n  50,\n  63,\n  80,\n  100,\n  125,\n  160,\n  200,\n  250,\n  315,\n  400,\n  500,\n  630,\n  800,\n  1000,\n  1250,\n  1600,\n  2000,\n  2500,\n  3150,\n  4000,\n  5000,\n  6300,\n  8000,\n  10000,\n  12500,\n  16000,\n  20000,\n];\nexport const whole_octave: number[] = [\n  8,\n  16,\n  31.5,\n  63,\n  125,\n  250,\n  500,\n  1000,\n  2000,\n  4000,\n  8000,\n  16000,\n];\nexport const whole_octave_all = [\n  {\n    Lower: 11,\n    Center: 16,\n    Upper: 22,\n  },\n  {\n    Lower: 22,\n    Center: 31.5,\n    Upper: 44,\n  },\n  {\n    Lower: 44,\n    Center: 63,\n    Upper: 88,\n  },\n  {\n    Lower: 88,\n    Center: 125,\n    Upper: 177,\n  },\n  {\n    Lower: 177,\n    Center: 250,\n    Upper: 355,\n  },\n  {\n    Lower: 355,\n    Center: 500,\n    Upper: 710,\n  },\n  {\n    Lower: 710,\n    Center: 1000,\n    Upper: 1420,\n  },\n  {\n    Lower: 1420,\n    Center: 2000,\n    Upper: 2840,\n  },\n  {\n    Lower: 2840,\n    Center: 4000,\n    Upper: 5680,\n  },\n  {\n    Lower: 5680,\n    Center: 8000,\n    Upper: 11360,\n  },\n  {\n    Lower: 11360,\n    Center: 16000,\n    Upper: 22720,\n  },\n];\n\nexport const third_octave_all = [\n  {\n    Lower: 11.2,\n    Center: 12.5,\n    Upper: 14.1,\n  },\n  {\n    Lower: 14.1,\n    Center: 16,\n    Upper: 17.8,\n  },\n  {\n    Lower: 17.8,\n    Center: 20,\n    Upper: 22.4,\n  },\n  {\n    Lower: 22.4,\n    Center: 25,\n    Upper: 28.2,\n  },\n  {\n    Lower: 28.2,\n    Center: 31.5,\n    Upper: 35.5,\n  },\n  {\n    Lower: 35.5,\n    Center: 40,\n    Upper: 44.7,\n  },\n  {\n    Lower: 44.7,\n    Center: 50,\n    Upper: 56.2,\n  },\n  {\n    Lower: 56.2,\n    Center: 63,\n    Upper: 70.8,\n  },\n  {\n    Lower: 70.8,\n    Center: 80,\n    Upper: 89.1,\n  },\n  {\n    Lower: 89.1,\n    Center: 100,\n    Upper: 112,\n  },\n  {\n    Lower: 112,\n    Center: 125,\n    Upper: 141,\n  },\n  {\n    Lower: 141,\n    Center: 160,\n    Upper: 178,\n  },\n  {\n    Lower: 178,\n    Center: 200,\n    Upper: 224,\n  },\n  {\n    Lower: 224,\n    Center: 250,\n    Upper: 282,\n  },\n  {\n    Lower: 282,\n    Center: 315,\n    Upper: 355,\n  },\n  {\n    Lower: 355,\n    Center: 400,\n    Upper: 447,\n  },\n  {\n    Lower: 447,\n    Center: 500,\n    Upper: 562,\n  },\n  {\n    Lower: 562,\n    Center: 630,\n    Upper: 708,\n  },\n  {\n    Lower: 708,\n    Center: 800,\n    Upper: 891,\n  },\n  {\n    Lower: 891,\n    Center: 1000,\n    Upper: 1122,\n  },\n  {\n    Lower: 1122,\n    Center: 1250,\n    Upper: 1413,\n  },\n  {\n    Lower: 1413,\n    Center: 1600,\n    Upper: 1778,\n  },\n  {\n    Lower: 1778,\n    Center: 2000,\n    Upper: 2239,\n  },\n  {\n    Lower: 2239,\n    Center: 2500,\n    Upper: 2818,\n  },\n  {\n    Lower: 2818,\n    Center: 3150,\n    Upper: 3548,\n  },\n  {\n    Lower: 3548,\n    Center: 4000,\n    Upper: 4467,\n  },\n  {\n    Lower: 4467,\n    Center: 5000,\n    Upper: 5623,\n  },\n  {\n    Lower: 5623,\n    Center: 6300,\n    Upper: 7079,\n  },\n  {\n    Lower: 7079,\n    Center: 8000,\n    Upper: 8913,\n  },\n  {\n    Lower: 8913,\n    Center: 10000,\n    Upper: 11220,\n  },\n  {\n    Lower: 11220,\n    Center: 12500,\n    Upper: 14130,\n  },\n  {\n    Lower: 14130,\n    Center: 16000,\n    Upper: 17780,\n  },\n  {\n    Lower: 17780,\n    Center: 20000,\n    Upper: 22390,\n  },\n];\n","import { nums } from './util/nums';\n\nimport { third_octave_all, whole_octave_all } from './std/bands';\n\n/**\n * @description Returns the nominal octave band frequencies between a given range (inclusive)\n * @function Octave\n * @param {number} [start] start frequency\n * @param {number} [end] end frequency\n */\nexport function Octave(start: number, end: number): number[] {\n  return whole_octave_all\n    .map(x => x.Center)\n    .filter(x => x >= Number(start || 0) && x <= Number(end || 20000));\n}\n\n/**\n * @description Returns the nominal third octave band frequencies between a given range (inclusive)\n * @function ThirdOctave\n * @param {number} [start] start frequency\n * @param {number} [end] end frequency\n */\nexport function ThirdOctave(start?: number, end?: number): number[] {\n  return third_octave_all\n    .map(x => x.Center)\n    .filter(x => x >= Number(start || 0) && x <= Number(end || 22000));\n}\n\n/**\n * @description Returns the lower band limit of a frequency band\n * @function Flower\n * @param {number} k inverse fraction (i.e. third = 3, sixth = 6, etc.)\n * @param {number | number[]} fc center frequency\n */\nexport function Flower(k: number, fc: number | number[]) {\n  return nums((f: number) => f / Math.pow(2, 1 / (2 * k)), fc);\n}\n\n/**\n * @description Returns the upper band limit of a frequency band\n * @function Fupper\n * @param {number} k inverse fraction (i.e. third = 3, sixth = 6, etc.)\n * @param {number | number[]} fc center frequency\n */\nexport function Fupper(k: number, fc: number | number[]) {\n  return nums((f: number) => f * Math.pow(2, 1 / (2 * k)), fc);\n}\n\n// const Bands = {\n//   Octave: {\n//     Nominal: whole_octave_all.map(x => x.Center),\n//     fromRange: (start: number, end: number): number[] => whole_octave_all.map(x => x.Center).filter(x => x >= Number(start) && x <= Number(end)),\n//     withLimits: whole_octave_all,\n//   },\n//   ThirdOctave: {\n//     Nominal: third_octave_all.map(x => x.Center),\n//     fromRange: (start: number, end: number): number[] => {\n//       return third_octave_all.map(x => x.Center).filter(x => x >= Number(start) && x <= Number(end));\n//     },\n//     withLimits: third_octave_all\n//   },\n//   Flower: (k, fc) => {\n//     if (typeof fc === \"number\")\n//       fc = [fc];\n//     return fc.map(f => f / Math.pow(2, 1 / (2 * k)));\n//   },\n//   Fupper: (k, fc) => {\n//     if (typeof fc === \"number\")\n//       fc = [fc];\n//     return fc.map(f => f * Math.pow(2, 1 / (2 * k)));\n//   }\n// };\n","export function allowMultiple(\n  func: Function,\n  val: number | number[]\n): number | number[] {\n  if (val instanceof Array) {\n    return val.map(x => func(x));\n  } else return func(val);\n}\n","export const pref = {\n  value: 2e-5,\n  units: 'Pa',\n};\n\nexport const Wref = {\n  value: 1e-12,\n  units: 'W',\n};\n\nexport const Iref = {\n  value: 1e-12,\n  units: 'W/m2',\n};\n","import { allowMultiple } from './util/allowMultiple';\nimport { pref, Wref, Iref } from './std/constants';\n\n/**\n * Convert sound power level to sound pressure level\n * @param Lw sound power level\n * @param r radius\n * @param Q directivity\n */\nexport function Lw2Lp(\n  Lw: number | number[],\n  r: number = 1,\n  Q: number = 1\n): number | number[] {\n  return allowMultiple(\n    (x: number) => x - Math.abs(10 * Math.log10(Q / (4 * Math.PI * r * r))),\n    Lw\n  );\n}\n\n\n\n/**\n * Convert sound pressure level to sound power level\n * @param Lp sound pressure level\n * @param r radius\n * @param Q directivity\n */\nexport function Lp2Lw(\n  Lp: number | number[],\n  r: number = 1,\n  Q: number = 1\n): number | number[] {\n  return allowMultiple(\n    (x: number) => Math.abs(10 * Math.log10(Q / (4 * Math.PI * r * r))) + x,\n    Lp\n  );\n}\n\n/**\n * Convert pressure to sound pressure level\n * @param P pressure\n */\nexport function P2Lp(P: number | number[]): number | number[] {\n  return allowMultiple((p: number) => 20 * Math.log10(p / pref.value), P);\n}\n/**\n * Convert sound pressure level to pressure\n * @param Lp sound pressure level\n */\nexport function Lp2P(Lp: number | number[]): number | number[] {\n  return allowMultiple((lp: number) => Math.pow(10, lp / 20) * pref.value, Lp);\n}\n\n/**\n * Convert Intensity to sound intensity level\n * @param I Intensity\n */\nexport function I2Li(I: number | number[]): number | number[] {\n  return allowMultiple((i: number) => 10 * Math.log10(i / Iref.value), I);\n}\n/**\n * Convert sound intensity level to Intensity\n * @param Li sound intensity level\n */\nexport function Li2I(Li: number | number[]): number | number[] {\n  return allowMultiple((li: number) => Math.pow(10, li / 10) * Iref.value, Li);\n}\n\n/**\n * Convert Power to sound power level\n * @param W Power\n */\nexport function W2Lw(W: number | number[]): number | number[] {\n  return allowMultiple((w: number) => 10 * Math.log10(w / Wref.value), W);\n}\n/**\n * Convert sound power level to Power\n * @param Lw sound power level\n */\nexport function Lw2W(Lw: number | number[]): number | number[] {\n  return allowMultiple((lw: number) => Math.pow(10, lw / 10) * Wref.value, Lw);\n}\n\nexport function Lp2Ln(\n  Lp: number | number[],\n  Ar: number,\n  Ao: number = 108\n): number | number[] {\n  return allowMultiple((lp: number) => lp - 10 * Math.log10(Ao / Ar), Lp);\n}\n\n/**\n * Converts pressure to sound pressure level\n * @param P pressure\n * @deprecated use P2Lp() instead\n */\nexport function P_dB(P: number | number[]): number | number[] {\n  return allowMultiple((p: number) => 20 * Math.log10(p / pref.value), P);\n}\n/**\n * Convert sound pressure level to pressure\n * @param Lp sound pressure level\n * @deprecated use Lp2P() instead\n */\nexport function dB_P(Lp: number | number[]): number | number[] {\n  return allowMultiple((lp: number) => Math.pow(10, lp / 20) * pref.value, Lp);\n}\n/**\n * Convert Intensity to sound intensity level\n * @param I Intensity\n * @deprecated use I2Li() instead\n */\nexport function I_dB(I: number | number[]): number | number[] {\n  return allowMultiple((i: number) => 10 * Math.log10(i / Iref.value), I);\n}\n/**\n * Convert sound intensity level to Intensity\n * @param Li sound intensity level\n * @deprecated use Li2I() instead\n */\nexport function dB_I(Li: number | number[]): number | number[] {\n  return allowMultiple((li: number) => Math.pow(10, li / 10) * Iref.value, Li);\n}\n/**\n * Convert Power to sound power level\n * @param W Power\n * @deprecated use W2Lw() instead\n */\nexport function W_dB(W: number | number[]): number | number[] {\n  return allowMultiple((w: number) => 10 * Math.log10(w / Wref.value), W);\n}\n/**\n * Convert sound power level to Power\n * @param Lw sound power level\n * @deprecated use Lw2W() instead\n */\nexport function dB_W(Lw: number | number[]): number | number[] {\n  return allowMultiple((lw: number) => Math.pow(10, lw / 10) * Wref.value, Lw);\n}\n","export const linspace = (start: number, step: number, end: number): number[] => {\n    const arr = [start];\n    for (let i = 0; i < Math.floor((end - start) / step); i++){\n        arr.push(arr[i]+step)\n    }\n    return arr;\n}\n\n","import { linspace } from './util/linspace';\nimport complex from 'complex';\nimport randBetween from './util/rand-between';\n\n\n\nconst { PI: pi, tanh } = Math;\nconst coth = (x: number) => 1 / tanh(x);\nconst ccoth = (x: complex) => new complex(coth(x.real), coth(x.im));\n\nexport interface RigidBackedPorousAbsorberParams {\n    speed?: number;\n    density?: number;\n    flowResistivity?: number;\n    thickness?: number;\n    frequencies?: number[];\n}\n\nconst defaults = {\n    speed: 340,\n    density: 1.21,\n    flowResistivity: 50000,\n    thickness: 0.0254,\n    frequencies: linspace(100, 50, 10000)\n}\n\nexport function rigidBackedPorousAbsorber(params: RigidBackedPorousAbsorberParams) {\n    const {\n        speed: c,\n        density: ρ,\n        flowResistivity: σ,\n        thickness: l,\n        frequencies: f\n    } = Object.assign(defaults, params); \n    \n    const Z0 = c * ρ; \n    \n    // dimensionless quantity for Delany and Bazley\n    const X = f.map(f => ρ * f / σ); \n    \n    // characteristic impedance\n    const zc = X.map(X => new complex(ρ * c * (1 + 0.0571 * X ** -0.754), ρ * c * (-0.087 * X ** -0.732))); \n    \n    // complex wave number\n    const k = X.map((X, i) => {\n        const multiplier = 2 * pi / c * f[i];\n        return new complex(\n            multiplier * +(1 + 0.0978 * X ** -0.700),\n            multiplier * -(0 + 0.1890 * X ** -0.595)\n        );\n    }); \n    \n    // propogation constant\n    const γ = k.map(k => new complex(-k.im, k.real)); \n    \n    // surface impedance\n    const z = zc.map((zc, i) => zc.clone().mult(ccoth(γ[i].clone().mult(l)))); \n    \n    // reflection factor\n    const R = z.map(z => {\n        // return z.sub(Z0).divide(z.add(Z0));\n        let sub = z.clone().sub(Z0);\n        let add = z.clone().add(Z0);\n        return sub.divide(add)\n    });\n    \n    // normal incidence absorption coefficient\n    const a = R.map(R => 1 - R.abs() ** 2);\n    \n    return {\n        frequency: f,\n        reflection: {\n            magnitude: R.map(R => R.abs()),\n            phase: R.map(R => R.angle())\n        },\n        absorption: a\n    }\n}\n","function R_a(f: number): number {\n  const f2: number = f * f;\n  const f4: number = f2 * f2;\n  return (\n    (148693636 * f4) /\n    ((f2 + 424.36) *\n      Math.sqrt((f2 + 11599.29) * (f2 + 544496.41)) *\n      (f2 + 148693636))\n  );\n}\n\nexport function A(f: number[]): number[] {\n  return f.map((freq: number) => 20 * Math.log10(R_a(freq)) + 2.0);\n}\n\nfunction R_b(f: number): number {\n  const f2: number = f * f;\n  const f3: number = f * f * f;\n  return (\n    (148693636 * f3) /\n    ((f2 + 424.36) * Math.sqrt(f2 + 24964) * (f2 + 148693636))\n  );\n}\n\nexport function B(f: number[]): number[] {\n  return f.map((freq: number) => 20 * Math.log10(R_b(freq)) + 0.17);\n}\n\nfunction R_c(f: number): number {\n  const f2: number = f * f;\n  return (148693636 * f2) / ((f2 + 424.36) * (f2 + 148693636));\n}\n\nexport function C(f: number[]): number[] {\n  return f.map((freq: number) => 20 * Math.log10(R_c(freq)) + 0.06);\n}\n\nfunction h(f: number): number {\n  const f2: number = f * f;\n  return (\n    (Math.pow(1037918.48 - f2, 2) + 1080768.16 * f2) /\n    (Math.pow(9837328 - f2, 2) + 11723776 * f2)\n  );\n}\nfunction R_d(f: number): number {\n  const f2: number = f * f;\n  return (\n    f *\n    14499.711699348261 *\n    Math.sqrt(h(f) / ((f2 + 79919.29) * (f2 + 1345600)))\n  );\n}\n\nexport function D(f: number[]): number[] {\n  return f.map((freq: number) => 20 * Math.log10(R_d(freq)));\n}\n","export function tau(TL: number): number {\n  return 1 / Math.pow(10, TL / 10);\n}\n","type dB = number;\n\n/**\n * @interface TLArgs Args to TL function\n */\ninterface TLArgs {\n  /**\n   * @property {tau} number Transmission Coefficient (dB)\n   */\n  tau?: number;\n  /**\n   * @property {NR} number Noise Reduction in (dB) (i.e. Lsource-Lreciever)\n   */\n  NR?: number;\n  /**\n   * @property {area} number surface area of test wall (m^2)\n   */\n  area?: number;\n  /**\n   *  @property {absorption} number total absorption of reciever room (sabins)\n   */\n  absorption?: number;\n  /**\n   * @property {m} number surface density of wall (density * thickness) (if metric, specify the units \"metric\")\n   */\n  m?: number;\n  /**\n   * @property {f} number frequency\n   */\n  f?: number;\n  /**\n   * @property {units} string can be either \"english\" or \"metric\"\n   */\n  units?: string;\n}\n\nexport function TL(args: TLArgs): dB {\n  if (args.tau) return 10 * Math.log10(1 / args.tau);\n  else if (args.NR && args.area && args.absorption)\n    return args.NR + 10 * Math.log10(args.area / args.absorption);\n  else if (args.m && args.f) {\n    const offset: number =\n      args.units === 'metric' ? 47 : args.units === 'english' ? 33 : 33;\n    return 20 * Math.log10(args.m) + 20 * Math.log10(args.f) - offset;\n  } else throw 'Not enough input parameters';\n}\n","/**\n * @interface NRARgs Args to NR function\n */\ninterface NRArgs {\n  /**\n   * @property {TL} number Transmission Loss between two spaces\n   */\n  TL?: number;\n  /**\n   * @property {absorption} number Transmission Loss between two spaces\n   */\n  absorption?: number;\n  /**\n   * @property {area} number surface area of target\n   */\n  area?: number;\n  /**\n   *  @property {Lsource} number Source sound pressure level\n   */\n  Lsource?: number;\n  /**\n   * @property {Lreciever} number Reciever sound pressure level\n   */\n  Lreciever?: number;\n}\n\n/**\n * @description Returns the noise reduction between two spaces\n * @param {} args function arguments\n */\nexport function NR(args: NRArgs): number {\n  if (args.Lsource && args.Lreciever) {\n    return args.Lsource - args.Lreciever;\n  } else if (args.TL && args.area && args.absorption) {\n    return args.TL + 10 * Math.log10(args.absorption / args.area);\n  } else {\n    throw 'Not enough input parameters';\n  }\n}\n","interface WallElement {\n  tau?: number;\n  area: number;\n  TL?: number;\n}\n\nimport { tau } from './tau';\n\nexport function compositeTL(wallElements: WallElement[]): number {\n  let num = wallElements\n    .map((elt: WallElement): number => elt.area)\n    .reduce((a: number, b: number): number => a + b);\n  let den = wallElements\n    .map((elt: WallElement): number => elt.tau || tau(elt.TL || 0) * elt.area)\n    .reduce((a: number, b: number): number => a + b);\n  return 10 * Math.log10(num / den);\n}\n","export const weight = {\n  A: [\n    -85.4034698850268,\n    -77.5562778645859,\n    -70.4349397360756,\n    -63.5885204340496,\n    -56.4263051990417,\n    -50.3946568624623,\n    -44.8204947281104,\n    -39.528865426248,\n    -34.5392479351003,\n    -30.2749794369672,\n    -26.2228250531521,\n    -22.3976662589003,\n    -19.1449537169269,\n    -16.1896524750703,\n    -13.2443259342764,\n    -10.8470531184781,\n    -8.67482370061268,\n    -6.64376365442129,\n    -4.77388185229179,\n    -3.24779317273975,\n    -1.90842948831609,\n    -0.79456996812772,\n    0.000198587069132782,\n    0.576374772966456,\n    0.993290735808623,\n    1.20189793149763,\n    1.27130247251845,\n    1.20197961642606,\n    0.964427742304929,\n    0.555663621971461,\n    -0.113752729259771,\n    -1.14430883708883,\n    -2.48813423968903,\n    -4.24962009557738,\n    -6.70071363772358,\n    -9.34056481158524,\n  ],\n  B: [\n    -49.208306113318,\n    -43.43104131534,\n    -38.2404351920707,\n    -33.3206115663136,\n    -28.2822081424028,\n    -24.1597513987061,\n    -20.4794345629446,\n    -17.1252478920128,\n    -14.100979065641,\n    -11.625152845811,\n    -9.36335830697656,\n    -7.31238492438451,\n    -5.64739487352881,\n    -4.22644841671248,\n    -2.94388111978705,\n    -2.04069126484729,\n    -1.35976619173359,\n    -0.853007465570098,\n    -0.495725170373744,\n    -0.275165404168238,\n    -0.128955524908155,\n    -0.0402409590007389,\n    0.00039617873700315,\n    0.00766193175540189,\n    -0.0219751820658593,\n    -0.088459629081859,\n    -0.20529416042174,\n    -0.401918593842549,\n    -0.723902944782478,\n    -1.18311046629893,\n    -1.88605703953169,\n    -2.93843379477163,\n    -4.29513839421593,\n    -6.0648880342395,\n    -8.52171566365969,\n    -11.1648038539027,\n  ],\n  C: [\n    -21.2976758782129,\n    -17.5912059564357,\n    -14.3325969315565,\n    -11.3412988285716,\n    -8.42999108268896,\n    -6.22116172767383,\n    -4.44092623702249,\n    -3.03264181725982,\n    -1.98344866500175,\n    -1.30196241646831,\n    -0.822545470844991,\n    -0.498012573602325,\n    -0.30157157474052,\n    -0.173665638169078,\n    -0.0842956702037082,\n    -0.033997206228342,\n    -0.0024223554062643,\n    0.0171433094194731,\n    0.0276612041829675,\n    0.0306916547919759,\n    0.0275869718807538,\n    0.016974064280032,\n    -0.00184722261806047,\n    -0.0330665606947445,\n    -0.0895639788923799,\n    -0.171268790492428,\n    -0.297872423593498,\n    -0.500936819071135,\n    -0.827089258514049,\n    -1.28874847577318,\n    -1.99330899139503,\n    -3.04672937074981,\n    -4.40404748578577,\n    -6.1741898212771,\n    -8.63128949493934,\n    -11.2745311011041,\n  ],\n  D: [\n    -30.6383852062861,\n    -28.5648839429673,\n    -26.6288857172578,\n    -24.6941243590872,\n    -22.5560179656796,\n    -20.6266016442763,\n    -18.7020980827224,\n    -16.716969788925,\n    -14.6786576497467,\n    -12.7943238315598,\n    -10.8737157555414,\n    -8.93943811512999,\n    -7.20326487669535,\n    -5.56680768983859,\n    -3.92112702908293,\n    -2.63434438365631,\n    -1.58970047648788,\n    -0.809962001690756,\n    -0.362425595175375,\n    -0.278188711058589,\n    -0.460054251644556,\n    -0.610738498473274,\n    7.71461973242629e-15,\n    1.92086080501645,\n    5.04909508006931,\n    7.94981039655113,\n    10.3188436856191,\n    11.5426572632177,\n    11.1040386116406,\n    9.6114134969742,\n    7.62904658499927,\n    5.46321126933522,\n    3.43709339935925,\n    1.4306869963152,\n    -0.765768653645567,\n    -2.73513742749999,\n  ],\n};\n","export class Complex {\n  // Real part\n  public real: number;\n\n  // Imaginary part\n  public imag: number;\n\n  constructor(params: any) {\n    let real = 0;\n    let imag = 0;\n\n    // Euclidean\n    if ('real' in params && 'imag' in params) {\n      real = params.real;\n      imag = params.imag;\n    }\n\n    // Polar\n    else if ('radius' in params && 'arg' in params) {\n      real = params.radius * Math.cos(params.arg);\n      imag = params.radius * Math.sin(params.arg);\n    }\n\n    // Error\n    else {\n      throw Error();\n    }\n\n    this.real = real;\n    this.imag = imag;\n  }\n\n  /**\n   * Conjugates the complex number.\n   */\n  public conjugate(): Complex {\n    return new Complex({ real: this.real, imag: -this.imag });\n  }\n\n  /**\n   * Calculates the absolute value of the complex number;\n   */\n  public absolute(): number {\n    const abs = this.real ** 2 + this.imag ** 2;\n    return Math.sqrt(abs);\n  }\n\n  /**\n   * Swaps the real part and the imaginary part.\n   */\n  public swap(): Complex {\n    return new Complex({ real: this.imag, imag: this.real });\n  }\n\n  /**\n   * Adds a complex number.\n   * @param c Complex number to add\n   */\n  public add(c: Complex): Complex {\n    const real = this.real + c.real;\n    const imag = this.imag + c.imag;\n    return new Complex({ real: real, imag: imag });\n  }\n\n  /**\n   * Subtracts a complex number.\n   * @param c Complex number to subtract\n   */\n  public subtract(c: Complex): Complex {\n    const real = this.real - c.real;\n    const imag = this.imag - c.imag;\n    return new Complex({ real: real, imag: imag });\n  }\n\n  /**\n   * Multiplies a complex number.\n   * @param c Complex number to multiply\n   */\n  public multiply(c: Complex): Complex {\n    const real = this.real * c.real - this.imag * c.imag;\n    const imag = this.real * c.imag + this.imag * c.real;\n    return new Complex({ real: real, imag: imag });\n  }\n\n  /**\n   * Divides a complex number.\n   * @param c Complex number to devide by.\n   */\n  public divide(c: Complex): Complex {\n    const cc = c.real ** 2;\n    const dd = c.imag ** 2;\n    const product = this.multiply(c.conjugate());\n    const real = product.real / (cc + dd);\n    const imag = product.imag / (cc + dd);\n    return new Complex({ real: real, imag: imag });\n  }\n\n  /**\n   * Converts the complex number to a string.\n   * @param unit Imaginary unit ('i' or 'j').\n   */\n  public toString(unit: string = 'i'): string {\n    if (this.imag >= 0) {\n      return `${this.real} + ${unit}${this.imag}`;\n    } else {\n      return `${this.real} + ${unit}${-this.imag}`;\n    }\n  }\n\n  /**\n   * Converts the complex number to an array ([real, imag] format).\n   */\n  public toArray(): [number, number] {\n    return [this.real, this.imag];\n  }\n\n  /**\n   * Copies the complex number object.\n   */\n  public copy(): Complex {\n    return new Complex({ real: this.real, imag: this.imag });\n  }\n}\n\nexport function makeComplexArray(arr: number[]): Complex[] {\n  return arr.map(\n    (x: number) =>\n      new Complex({\n        real: x,\n        imag: 0,\n      })\n  );\n}\n","import { Complex } from '../complex';\n\nexport type ArrayOfValues =\n  | Complex[]\n  | Float32Array\n  | Float64Array\n  | Uint16Array\n  | Uint32Array\n  | Uint8Array\n  | BigUint64Array\n  | number[];\n\nexport class FFT {\n  // W factors\n  private w: Complex[] = [];\n\n  // Bit reversal table\n  private bitReversalTable: number[] = [];\n\n  // Previous array size\n  private previousArraySize: number = 0;\n\n  /**\n   * Operates a 2D Cooley-Tukey FFT.\n   * @param data\n   * @param width\n   * @param height\n   */\n  public fft2d(data: Complex[][], width: number, height: number): Complex[][] {\n    const [W, H] = [width, height];\n\n    let spectrum: Complex[][] = new Array(H);\n\n    // Apply a 1D FFT to each row\n    spectrum = data.map(row => this.fft1d(row, W));\n    spectrum = this.transpose(spectrum, W, H);\n\n    // Apply a 1D FFT to each column\n    spectrum = spectrum.map(row => this.fft1d(row, H));\n    spectrum = this.transpose(spectrum, H, W);\n\n    return spectrum;\n  }\n\n  /**\n   * Operates a 2D Cooley-Tukey IFFT.\n   * @param spectrum\n   * @param width\n   * @param height\n   */\n  public ifft2d(\n    spectrum: Complex[][],\n    width: number,\n    height: number\n  ): Complex[][] {\n    const [W, H] = [width, height];\n\n    let data: Complex[][] = new Array(H);\n\n    // Apply a 1D IFFT to each column\n    data = this.transpose(spectrum, W, H);\n    data = data.map(row => this.ifft1d(row, H));\n\n    // Apply a 1D IFFT to each row\n    data = this.transpose(data, H, W);\n    data = data.map(row => this.ifft1d(row, W));\n\n    return data;\n  }\n\n  /**\n   * Operates a 1D Cooley-Tukey FFT.\n   * @param data\n   * @param size\n   */\n  public fft1d(data: Complex[], size: number): Complex[] {\n    const N = size;\n\n    this.calcFactors(N);\n    this.createBitReversalTable(N);\n    this.updateArraySize(N);\n\n    let spectrum = this.sortData(data, N);\n\n    for (let a = 1, b = N / 2; a < N; a *= 2, b /= 2) {\n      for (let k = 0; k < a; k++) {\n        for (let n = k; n < N; n += 2 * a) {\n          let tmp = spectrum[n + a].multiply(this.w[b * k]);\n          spectrum[n + a] = spectrum[n].subtract(tmp);\n          spectrum[n] = spectrum[n].add(tmp);\n        }\n      }\n    }\n\n    return spectrum;\n  }\n\n  /**\n   * Operates a 1D Cooley-Tukey IFFT.\n   * @param data\n   * @param size\n   */\n  public ifft1d(spectrum: Complex[], size: number): Complex[] {\n    const N = size;\n\n    let data: Complex[] = spectrum.map(c => c.swap());\n    data = this.fft1d(data, N);\n    data = data.map(c => c.swap().divide(new Complex({ real: N, imag: 0 })));\n\n    return data;\n  }\n\n  /**\n   * Calculates the power spectrum of the given 2D spectrum and finds the max value.\n   * @param spectrum\n   * @param width\n   * @param height\n   */\n  public power2d(\n    spectrum: Complex[][],\n    width: number,\n    height: number\n  ): [number[][], number] {\n    let powerSpectrum: number[][] = new Array(height);\n    let max: number = 0;\n\n    powerSpectrum = spectrum.map(row => {\n      let [rowSpectrum, rowMax] = this.power1d(row, width);\n      max = Math.max(max, rowMax);\n      return rowSpectrum;\n    });\n\n    return [powerSpectrum, max];\n  }\n\n  /**\n   * Calculates the power spectrum of the given 1D spectrum and finds the max value.\n   * @param spectrum\n   * @param size\n   */\n  public power1d(spectrum: Complex[], size: number): [number[], number] {\n    let powerSpectrum = new Array(size);\n    let max = 0;\n\n    for (let x = 0; x < size; x++) {\n      powerSpectrum[x] = spectrum[x].absolute() ** 2;\n      max = Math.max(max, powerSpectrum[x]);\n    }\n\n    return [powerSpectrum, max];\n  }\n\n  /**\n   * Sorts the given data array depending on the bit reversal table.\n   * @param data Data array\n   * @param size Array size\n   */\n  private sortData(data: Complex[], size: number): Complex[] {\n    const N = size;\n    let sortedData: Complex[] = new Array(N);\n\n    for (let k = 0; k < N; k++) {\n      let l = this.bitReversalTable[k];\n      sortedData[k] = data[l].copy();\n    }\n\n    return sortedData;\n  }\n\n  /**\n   * Calculates W factors.\n   * @param size Array size (1D)\n   */\n  private calcFactors(size: number) {\n    const N = size;\n    if (size != this.previousArraySize) {\n      this.w = new Array(N);\n      for (let k = 0; k < N / 2; k++) {\n        let c = this.exponential((-2 * Math.PI * k) / N);\n        this.w[k] = c;\n      }\n    }\n  }\n\n  /**\n   * Creates a bit reversal table of the given array size `size`.\n   * @param size Array size\n   */\n  private createBitReversalTable(size: number) {\n    if (size != this.previousArraySize) {\n      const N = size;\n      const power = this.getExponent2(size);\n      this.bitReversalTable = new Array(N);\n      for (let n = 0; n < N; n++) {\n        this.bitReversalTable[n] = this.reverseBits(n, power);\n      }\n    }\n  }\n\n  /**\n   * Operates bit reversal to a given number.\n   * @param n Number to operate bit reversal\n   * @param power Number of bits\n   */\n  private reverseBits(n: number, power: number): number {\n    const N = Math.ceil(power / 2);\n    const bits = n.toString(2).padStart(power, '0');\n    let reversedBits: string[] = new Array(power);\n\n    for (let k = 0; k < N; k++) {\n      reversedBits[k] = bits[power - k];\n      reversedBits[power - k] = bits[k];\n    }\n\n    const binaryRepresentation: string = reversedBits.join('');\n    return parseInt(binaryRepresentation, 2);\n  }\n\n  /**\n   * Operates log2(n) to the given number `n`.\n   * @param n number\n   */\n  private getExponent2(n: number): number {\n    let p = Math.log2(n);\n    if (Number.isInteger(p) == false) {\n      throw Error();\n    }\n    return p;\n  }\n\n  /**\n   * Initializes a 2D array with the given size.\n   * @param width Number of columns\n   * @param height Number of rows\n   */\n  private init2DArray(width: number, height: number): any[][] {\n    let array = new Array(height).fill(null).map(() => new Array(width));\n    return array;\n  }\n\n  /**\n   * Exponential function.\n   * @param arg Argument of e\n   */\n  private exponential(arg: number): Complex {\n    return new Complex({ radius: 1, arg: arg });\n  }\n\n  /**\n   * Updates previous array size.\n   * @param size New array size\n   */\n  private updateArraySize(size: number) {\n    if (size != this.previousArraySize) {\n      this.previousArraySize = size;\n    }\n  }\n\n  /**\n   * Transposes the given 2D data array.\n   * @param data\n   * @param width\n   * @param height\n   */\n  private transpose(\n    data: Complex[][],\n    width: number,\n    height: number\n  ): Complex[][] {\n    const [W, H] = [width, height];\n    let transposedData: Complex[][] = this.init2DArray(W, H);\n\n    for (let y = 0; y < H; y++) {\n      for (let x = 0; x < W; x++) {\n        transposedData[y][x] = data[x][y].copy();\n      }\n    }\n\n    return transposedData;\n  }\n\n  /**\n   * Shifts coordinates.\n   * @param x\n   * @param y\n   * @param width\n   * @param height\n   */\n  public shift(data: Complex[][], width: number, height: number): Complex[][] {\n    const [W, H] = [width, height];\n    const centerX = W / 2;\n    const centerY = H / 2;\n\n    let shiftedData: Complex[][] = this.init2DArray(W, H);\n\n    for (let y = 0; y < H; y++) {\n      for (let x = 0; x < W; x++) {\n        let u = (x + centerX) % W;\n        let v = (y + centerY) % H;\n        shiftedData[v][u] = data[y][x].copy();\n      }\n    }\n\n    return shiftedData;\n  }\n}\n","export const range = (n: number) => {\n  return Array(n)\n    .fill(0)\n    .map((_: number, i: number) => i);\n};\n\n","import { range } from './range';\nexport const chunk = (n: number) => (arr: any[]) => {\n  return range(Math.ceil(arr.length / n)).map((_: number, i: number) =>\n    arr.slice(i * n, i * n + n)\n  );\n};\n","import { Hann } from './functions/hann';\n\nexport interface WindowFunctionDictionary {\n  [index: string]: (N: number) => number[];\n}\n\nexport const WindowFunctions = {\n  Hann,\n} as WindowFunctionDictionary;\n\nexport { Hann };\n","const hann = (n: number, N: number) =>\n  Math.pow(Math.sin((Math.PI * n) / (N - 1)), 2);\n\n/** Hann window\n * @function Hann\n * @param  {number} N Length of the window\n * @returns {number[]} a Hann window of length N\n */\nexport const Hann = (N: number): number[] => {\n  return Object.keys(Array(N).fill(0)).map(x => hann(Number(x), N));\n};\n","import { WindowFunctions } from './window-functions';\nimport { Complex } from '../complex';\nexport const applyWindow = (window: string) => (arr: []) => {\n  if (WindowFunctions[window]) {\n    return WindowFunctions[window](arr.length).map(\n      (x: number, i: number) => arr[i] * x\n    );\n  } else throw new Error(`'${window}' does not exist`);\n};\n\nexport const applyWindowComplex = (window: string) => (arr: Complex[]) => {\n  if (WindowFunctions[window]) {\n    return WindowFunctions[window](arr.length).map(\n      (x: number, i: number) =>\n        new Complex({ real: arr[i].real * x, imag: arr[i].imag })\n    );\n  } else throw new Error(`'${window}' does not exist`);\n};\n","import { FFT } from './fft';\nimport { Complex, makeComplexArray } from '../complex';\nimport { Float32Array_to_ComplexArray } from '../util/complex-array';\nimport { chunk } from '../util/chunk';\nimport * as window from '../window/applyWindow';\n\nexport interface fftoptions {\n  buffersize?: number;\n  dim?: number;\n  absolute?: boolean;\n  window?: string;\n}\n\nconst default_fftoptions: fftoptions = {\n  buffersize: 0,\n  dim: 1,\n  absolute: false,\n  window: 'Hann',\n};\n\nexport function fft(\n  values: number[] | Complex[] | Float32Array,\n  opts: fftoptions = default_fftoptions\n) {\n  opts = Object.assign(default_fftoptions, opts || default_fftoptions);\n  // console.log(opts);\n\n  if (!(values instanceof Array || values instanceof Float32Array))\n    throw new Error('need to pass in an array');\n\n  // let n = Math.pow(2, Math.floor(Math.log(values.length) / Math.LN2));\n  const makebuffer = chunk(opts.buffersize || 1024);\n  let arr: Complex[][] = [[]];\n\n  if (values[0] instanceof Complex) {\n    arr = makebuffer(values as Complex[]).map((x: Complex[]) => {\n      return window.applyWindowComplex(opts.window || 'Hann')(x);\n    });\n  }\n\n  if (values instanceof Float32Array) {\n    arr = makebuffer(Float32Array_to_ComplexArray(values)).map(\n      (x: Complex[]) => {\n        return window.applyWindowComplex(opts.window || 'Hann')(x);\n      }\n    );\n  }\n\n  if (values[0] instanceof Number) {\n    arr = makebuffer(makeComplexArray(values as number[])).map(\n      (x: Complex[]) => {\n        return window.applyWindowComplex(opts.window || 'Hann')(x);\n      }\n    );\n  }\n\n  return (arr as Complex[][]).map(x => {\n    if (x.length == opts.buffersize) {\n      return new FFT().fft1d(x, opts.buffersize || 1024);\n    } else {\n      return new FFT().fft1d(\n        x.concat(\n          Array((opts.buffersize || 1024) - x.length).fill(\n            new Complex({\n              real: 0,\n              imag: 0,\n            })\n          )\n        ),\n        opts.buffersize || 1024\n      );\n    }\n  });\n}\n","import { Complex } from '../complex';\n\nexport function Float32Array_to_ComplexArray(\n  f32_array: Float32Array\n): Complex[] {\n  return Array.from(f32_array).map(x => new Complex({ real: x, imag: 0 }));\n}\n\nexport function Float64Array_to_ComplexArray(\n  f64_array: Float64Array\n): Complex[] {\n  return Array.from(f64_array).map(x => new Complex({ real: x, imag: 0 }));\n}\n","import React, { Fragment } from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from \"../../objects/source\";\nimport GridRow from \"../GridRow\";\nimport GridRowSeperator from \"../GridRowSeperator\";\nimport {RT60} from \"../../compute/rt\";\nimport { Button } from \"@blueprintjs/core\";\nimport Select, { components } from \"react-select\";\nimport Messenger from \"../../messenger\";\nimport * as ac from '../../compute/acoustics';\nimport \"./RT60Properties.css\";\n\nexport interface RT60PropertiesProps {\n  object: RT60;\n  messenger: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n  onButtonClick: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\nconst RT60PropertiesContainerStyle: React.CSSProperties = {\n  display: \"grid\",\n  gridTemplateColumns: \"auto auto\",\n  padding: \".25em\",\n  gridRowGap: \".25em\",\n  gridColumnGap: \".25em\"\n};\n\nexport default function RT60Properties(props: RT60PropertiesProps) {\n  const XYZProps = {\n    style: {\n      width: \"30%\"\n    },\n    onChange: props.onPropertyChange\n  };\n\n\n\n  const customStyles = {\n    indicatorsContainer: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    clearIndicator: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    dropdownIndicator: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    control: (provided, state) => ({\n      ...provided,\n      minHeight: 0\n    }),\n    container: (provided, state) => ({\n      ...provided,\n      width: \"100%\"\n    })\n  };\n\n  // console.log(sources, receivers);\n  const sabine = props.object.sabine(ac.whole_octave);\n  return (\n    <div>\n      <div style={RT60PropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput\n              name=\"name\"\n              value={props.object.name}\n              onChange={props.onPropertyChange}\n            />\n          </GridRow>\n        )}\n        <GridRow label={\"sabine\"}>\n          <table>\n            <thead>\n              <tr>\n                <th>Frequency</th>\n                <th>Time</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                sabine[0].map((x,i) => (\n                  <tr key={\"sabine-row-\"+i}>\n                    <td>{x}</td>\n                    <td>{sabine[1][i].toFixed(2)}</td>\n                  </tr>\n                ))\n              }\n            </tbody>\n         </table>\n        </GridRow>\n      </div>\n    </div>\n  );\n}\n","export function chunk(array: Array<any>, size: number) {\n\tvar R = [] as any[];\n\tfor (var i = 0; i < array.length; i += size)\n\t\tR.push(array.slice(i, i + size));\n\treturn R;\n}\n","export function interpolateLog(x1, y1, x2, y2, xi) {\n  return y1 + (Math.log10(xi) - Math.log10(x1)) / (Math.log10(x2) - Math.log10(x1)) * (y2 - y1);\n}\n\nexport default interpolateLog;","import interpolateLog from './interpolate-log';\n\nexport function interpolateAlpha(alpha: number[], freq: number[]) {\n  return function (f: number) {\n    let i = 0;\n    while (f > freq[i] && i < freq.length) {\n      i++;\n    }\n    if (i > 0 && i<freq.length) {\n      const x1 = freq[i - 1];\n      const y1 = alpha[i - 1];\n      const x2 = freq[i];\n      const y2 = alpha[i];\n      const xi = f;\n      return interpolateLog(x1,y1,x2,y2,xi);\n    }\n    \n    else {\n      return i == 0 ? alpha[i] : alpha[freq.length-1];\n    }\n  }\n}\n\n\n\nexport default interpolateAlpha;","/**\n * Calcualtes the *reflection coefficient* **R**\n * of a surface with *absorption coefficient* **α**\n * at an *angle* **θ**\n *\n * @export\n * @param {number} α absorption coefficient **α ∈ [0,1]**\n * @param {number} θ angle of incidence **θ ∈ [0,π/2]**\n * @returns {number} R reflection coefficient **R ∈ [0,1]**\n */\n\nexport function reflectionCoefficient(α: number, θ: number) {\n  const rootOneMinusAlpha = Math.sqrt(1 - α);\n  const ξo = (1 - rootOneMinusAlpha) / (1 + rootOneMinusAlpha);\n  const ξo_sinθ = ξo * Math.sin(θ);\n  const R = (ξo_sinθ - 1) / (ξo_sinθ + 1);\n  return R;\n}\n\nexport default reflectionCoefficient;\n\n\n","import { discretize } from '../../common/discretize';\n\nexport interface BRDFProps {\n  /**\n   * the number of discrete chunks in the BRDF\n   */\n  steps?: number;\n\n  absorptionCoefficient: number;\n  diffusionCoefficient: number;\n}\n\nexport class BRDF {\n  coefficients: number[][];\n  steps: number;\n  getIndex: (v: number) => number;\n  constructor(props: BRDFProps) {\n    //set member variables;\n    this.steps = (props && props.steps) || 10;\n    this.coefficients = [] as number[][];\n    for (let j = 0; j < this.steps; j++) {\n      this.coefficients.push([] as number[]);\n    }\n    this.getIndex = discretize(this.steps, 0, Math.PI);\n    this.set(props.absorptionCoefficient, props.diffusionCoefficient);\n  }\n\n  get(angle_in: number, angle_out: number) {\n    return this.coefficients[this.getIndex(angle_in)][this.getIndex(angle_out)];\n  }\n  \n  set(absorptionCoefficient: number, diffusionCoefficient: number) {\n    const reflected = 1 - absorptionCoefficient;\n    const specularEnergy = reflected * (1 - diffusionCoefficient);\n    const diffuse = reflected - specularEnergy;\n    const diffusedEnergyPerSlot = diffuse / this.steps; // Other than the specular direction\n    \n    // for each incoming slot\n    for (let incoming = 0; incoming < this.steps; incoming++) {\n      \n      // for each outgoing slot\n      for (let outgoing = 0; outgoing < this.steps; outgoing++) {\n        \n        // set the coefficient to the diffuse energy per slot\n        this.coefficients[incoming][outgoing] = diffusedEnergyPerSlot;\n        \n        \n        let specular = this.steps - incoming - 1;\n        if (outgoing == specular)\n          this.coefficients[incoming][outgoing] += specularEnergy;\n      }\n    }\n    return this;\n  }\n\n  randomize() {\n    let sum;\n    for (let incoming = 0; incoming < this.steps; incoming++) {\n      sum = 0;\n      for (let outgoing = 0; outgoing < this.steps; outgoing++) {\n        this.coefficients[incoming][outgoing] = Math.random();\n        sum += this.coefficients[incoming][outgoing];\n      }\n      for (let outgoing = 0; outgoing < this.steps; outgoing++)\n        this.coefficients[incoming][outgoing] =\n          this.coefficients[incoming][outgoing] / sum;\n    }\n    return this;\n  }\n}\n\n","export function discretize(n: number, start: number, stop: number) {\n  return function (v: number) {\n    return Math.round((stop - start) / n * v);\n  }\n}","import * as THREE from \"three\";\nimport Container, { ContainerProps } from \"./container\";\nimport {chunk} from '../common/chunk';\nimport { KeyValuePair } from \"../common/key-value-pair\";\nimport interpolateAlpha from '../compute/acoustics/interpolate-alpha';\nimport reflectionCoefficient from '../compute/acoustics/reflection-coefficient';\nimport { AcousticMaterial } from \"..\";\nimport { BRDF } from '../compute/raytracer/brdf';\n\n\nconst glsl = x => x[0];\nconst defaults = {\n  materials: {\n    shader: new THREE.ShaderMaterial({\n      vertexShader: glsl`\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main()\n\t\t\t{\n\t\t\t\tvUv = uv;\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t\t}\n\n\t\t\t`,\n      fragmentShader: glsl`\n\t\t\t\tuniform float time;\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\tvoid main( void ) {\n\n\t\t\t\t\tvec2 position = - 1.0 + 2.0 * vUv;\n\n\t\t\t\t\tfloat red = abs( sin( position.x * position.y + time / 5.0 ) );\n\t\t\t\t\tfloat green = abs( sin( position.x * position.y + time / 4.0 ) );\n\t\t\t\t\tfloat blue = abs( sin( position.x * position.y + time / 3.0 ) );\n\t\t\t\t\tgl_FragColor = vec4( red, green, blue, 1.0 );\n\n\t\t\t\t}\n\t\t\t`,\n\n      depthTest: true,\n\n      uniforms: {\n        time: { value: 10.0 }\n      },\n      visible: true,\n      side: THREE.FrontSide\n    }),\n    selected: new THREE.MeshLambertMaterial({\n      color: new THREE.Color(0xb3d7ff),\n      // emissiveIntensity: 2,\n      // emissive: new THREE.Color(1, 1, 0),\n      transparent: true,\n      opacity: 0.5,\n      side: THREE.DoubleSide,\n      reflectivity: 0.15,\n      depthWrite: true,\n      depthTest: false\n    }),\n\n    mesh: new THREE.MeshLambertMaterial({\n      transparent: true,\n      opacity: 0.1,\n      side: THREE.DoubleSide,\n      // emissive: new THREE.Color(0xffffff),\n      // emissiveIntensity: 0,\n      reflectivity: 0.15,\n      color: new THREE.Color(0xaaaaaa),\n      depthWrite: true,\n      depthTest: false\n    }),\n\n    wire: new THREE.MeshBasicMaterial({\n      side: THREE.FrontSide,\n      wireframe: true,\n      color: 0x2c2d2d\n    }),\n    line: new THREE.LineBasicMaterial({\n      color: 0x999999\n    })\n  },\n  displayInternalEdges: false,\n  displayEdges: true,\n  fillSurface: true,\n  _displayVertexNormals: false\n};\n\nexport interface SurfaceProps extends ContainerProps {\n\tacousticMaterial: AcousticMaterial;\n  geometry: THREE.BufferGeometry;\n  displayInternalEdges?: boolean;\n  displayEdges?: boolean;\n  fillSurface?: boolean;\n  _displayVertexNormals?: boolean;\n}\n\ninterface KeepLine{\n\tkeep: boolean;\n\tline: number[][];\n}\n\nexport default class Surface extends Container {\n\t// for render\n\tmesh: THREE.Mesh;\n\twire: THREE.Mesh;\n\tedges: THREE.LineSegments;\n\tdisplayInternalEdges: boolean;\n\tdisplayEdges: boolean;\n\ttriangles: number[][][];\n\tfillSurface: boolean;\n\t_displayVertexNormals: boolean;\n\tvertexNormals: THREE.VertexNormalsHelper;\n\t_triangles: THREE.Triangle[];\n\tselectedMaterial: THREE.MeshLambertMaterial;\n\tnormalMaterial: THREE.MeshLambertMaterial;\n\tnormalColor: THREE.Color;\n\tshaderMaterial: THREE.ShaderMaterial;\n\t\n\t// for acoustics\n\tabsorption!: number[];\n\tabsorptionFunction: (freq: number) => number;\n\treflection!: number[];\n\treflectionFunction: (freq: number, theta: number) => number;\n\t_acousticMaterial!: AcousticMaterial;\n\tbrdf: BRDF[];\n\tarea!: number;\n\t// renderer: Renderer;\n\tconstructor(name: string, props: SurfaceProps) {\n\t\tsuper(name);\n\t\tthis.kind = \"surface\";\n\t\tthis.displayInternalEdges = props.displayInternalEdges || defaults.displayInternalEdges;\n\t\tthis.displayEdges = props.displayEdges || defaults.displayEdges;\n\t\tthis.fillSurface = props.fillSurface || defaults.fillSurface;\n\t\tthis._displayVertexNormals = props._displayVertexNormals || defaults._displayVertexNormals;\n\t\tthis.shaderMaterial = defaults.materials.shader;\n\t\tthis.wire = new THREE.Mesh(props.geometry, defaults.materials.wire);\n\t\tlet parent = this.parent;\n\t\twhile (parent) {\n\t\t\tparent = parent.parent;\n\t\t}\n\t\tthis.mesh = new THREE.Mesh(props.geometry, defaults.materials.mesh);\n\t\tthis.mesh.geometry.computeBoundingBox();\n\t\tthis.mesh.geometry.computeBoundingSphere();\n\t\t\n\t\t// this.mesh.geometry.computeVertexNormals();\n\t\tconst tempmesh = new THREE.Mesh(props.geometry.clone(), undefined);\n\t\ttempmesh.geometry.computeVertexNormals()\n\t\tthis.vertexNormals = new THREE.VertexNormalsHelper(tempmesh, 0.25, 0xff0000, 1);\n\t\t\n\t\tthis.triangles = chunk(chunk(Array.from((props.geometry.getAttribute('position') as THREE.BufferAttribute).array), 3), 3);\n\t\tthis._triangles = this.triangles.map(x => new THREE.Triangle(\n\t\t\tnew THREE.Vector3(...x[0]),\n\t\t\tnew THREE.Vector3(...x[1]),\n\t\t\tnew THREE.Vector3(...x[2]),\n\t\t));\n\t\t\n\t\tthis.selectedMaterial = defaults.materials.selected;\n\t\tthis.normalMaterial = defaults.materials.mesh;\n\t\tthis.normalColor = new THREE.Color(0xaaaaaa);\n\t\tthis.select = this.select.bind(this);\n\t\tthis.select = this.deselect.bind(this);\n\t\t\n\t\t// console.log(this.triangles);\n\t\tconst dict = {} as KeyValuePair<KeepLine>;\n\t\tthis.triangles.forEach(tri => {\n\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\tconst line = [tri[i], tri[(i + 1) % 3]];\n\t\t\t\tconst key = JSON.stringify(line.sort());\n\t\t\t\tif (!dict[key]) {\n\t\t\t\t\tdict[key] = {\n\t\t\t\t\t\tkeep: true,\n\t\t\t\t\t\tline: line\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdict[key].keep = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst segments = new THREE.Geometry();\n\t\tconst edges = Object.keys(dict).reduce((a, b: string) => {\n\t\t\tif (dict[b].keep) {\n\t\t\t\ta.push(dict[b].line);\n\t\t\t}\n\t\t\treturn a;\n\t\t}, [] as number[][][]).forEach(edge => {\n\t\t\tedge.forEach(vert => {\n\t\t\t\tsegments.vertices.push(new THREE.Vector3(vert[0], vert[1], vert[2]));\n\t\t\t});\n\t\t});\n\t\tthis.edges = new THREE.LineSegments(segments, defaults.materials.line);\n\n\t\t\n\t\tthis.add(this.mesh);\n\t\tthis.mesh.visible = this.fillSurface;\n\t\t// (parent! as THREE.Scene).add(this.mesh);\n\t\tthis.add(this.wire);\n\t\tthis.wire.visible = this.displayInternalEdges;\n\t\tthis.add(this.edges);\n\t\tthis.edges.visible = this.displayEdges;\n\t\tthis.add(this.vertexNormals);\n\t\tthis.vertexNormals.visible = this._displayVertexNormals;\n\t\t\n\t\t// this.absorption = [0.05, 0.15, 0.10, 0.05, 0.04, 0.07, 0.09, 0.09];\n\t\tthis.absorption = [0.00,0.04,0.23,0.52,0.90,0.94,0.66,0.66];\n\t\tconst freq = [63, 125, 250, 500, 1000., 2000, 4000, 8000];\n\t\tthis.absorptionFunction = interpolateAlpha(this.absorption, freq);\n\t\tthis.reflectionFunction = (freq, theta) => reflectionCoefficient(this.absorptionFunction(freq), theta);\n\t\tthis.acousticMaterial = props.acousticMaterial;\n\t\tthis.brdf = [] as BRDF[];\n\t\tfor (const key in this.acousticMaterial.absorption){\n\t\t\tthis.brdf.push(new BRDF({\n\t\t\t\tabsorptionCoefficient: this.acousticMaterial.absorption[key],\n\t\t\t\tdiffusionCoefficient: 0.1\n\t\t\t}));\t\n\t\t}\n\t\t\n\t\tthis.select = () => {\n\t\t\tthis.selected = true;\n\t\t\t(this.mesh\n\t\t\t\t.material as THREE.MeshLambertMaterial | THREE.ShaderMaterial) = this.selectedMaterial;\n\t\t\t(this.mesh.material as THREE.MeshLambertMaterial).needsUpdate = true;\n\t\t\t// setInterval(() => {\n\t\t\t// \t//@ts-ignore\n\t\t\t// \t(this.mesh.material as THREE.ShaderMaterial).uniforms[\"time\"] += 1;\n\t\t\t// }, 16);\n\t\t};\n\t\tthis.deselect = () => {\n\t\t\tthis.selected = false;\n\t\t\t(this.mesh\n\t\t\t\t.material as THREE.MeshLambertMaterial) = this.normalMaterial;\n\t\t\t(this.mesh.material as THREE.MeshLambertMaterial).needsUpdate = true;\n\t\t};\n\t\tthis.getArea();\n\t}\n\tget acousticMaterial() {\n\t\treturn this._acousticMaterial;\n\t}\n\tset acousticMaterial(material: AcousticMaterial) {\n\t\tthis._acousticMaterial = material;\n\t\tconst freq = Object.keys(this._acousticMaterial.absorption).map(x => Number(x));\n\t\tthis.absorption = freq.map(x => this._acousticMaterial.absorption[String(x)]);\n\t\tthis.absorptionFunction = interpolateAlpha(this.absorption, freq);\n    this.reflectionFunction = (freq, theta) =>\n      reflectionCoefficient(this.absorptionFunction(freq), theta);\n    this.brdf = [] as BRDF[];\n    for (const key in this.acousticMaterial.absorption) {\n      this.brdf.push(\n        new BRDF({\n          absorptionCoefficient: this.acousticMaterial.absorption[key],\n          diffusionCoefficient: 0.1\n        })\n      );\n    }\n\t}\n\tgetArea() {\n\t\tthis.area = 0;\n\t\tfor (let i = 0; i < this._triangles.length; i++){\n\t\t\tthis.area += this._triangles[i].getArea();\n\t\t}\n\t\treturn this.area;\n\t}\n\tgetEdges() {\n\t\treturn this.edges;\n\t}\n\tget displayVertexNormals() {\n\t\treturn this.vertexNormals.visible;\n\t}\n\tset displayVertexNormals(displayVertexNormals: boolean) {\n\t\tthis.vertexNormals.visible = displayVertexNormals\n\t}\n\tget geometry() {\n\t\treturn this.mesh.geometry;\n\t}\n\tget faces() {\n\t\treturn this._triangles;\n\t}\n\tget wireframeVisible() {\n\t\treturn this.wire.visible;\n\t}\n\tset wireframeVisible(visible: boolean) {\n\t\tthis.wire.visible = visible;\n\t}\n}\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport Surface from '../../objects/surface';\nimport GridRowSeperator from \"../GridRowSeperator\";\n\nimport AutoCompleteTextInput from '../AutoCompleteTextInput';\nimport Messenger from \"../../messenger\";\nimport { Button, Tag } from \"@blueprintjs/core\";\n\n\n\nexport interface SurfacePropertiesProps {\n\tobject: Surface;\n\tmessenger: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n}\n\n\n// const MaterialMultiSelect = MultiSelect.ofType<AcousticMaterial>();\n\nconst SurfacePropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\nconst customStyles = {\n  indicatorsContainer: (provided, state) => ({\n    ...provided,\n    padding: 0\n  }),\n  clearIndicator: (provided, state) => ({\n    ...provided,\n    padding: 0\n  }),\n  dropdownIndicator: (provided, state) => ({\n    ...provided,\n    padding: 0\n  }),\n  control: (provided, state) => ({\n    ...provided,\n    minHeight: 0\n  }),\n  container: (provided, state) => ({\n    ...provided,\n    width: \"100%\"\n  })\n};\n\n\n\n\n\n\nexport default function SurfaceProperties(props: SurfacePropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\tasync function getMaterialSuggestions(value: string) {\n\t\tconst materials = props.messenger.postMessage(\"SEARCH_ALL_MATERIALS\", value)[0];\n\n\t\treturn new Promise<any[]>((resolve, reject) => { \n\t\t\tlet res = materials;\n\t\t\tif (res) {\n\t\t\t\tresolve(res);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treject(\"problem occured\")\n\t\t\t}\n\t\t})\n\t}\n\n\t\n\treturn (\n    <div>\n      <div style={SurfacePropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"visible\"}>\n            <CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {\n          <GridRow label={\"wireframe\"}>\n            <CheckboxInput name=\"wireframeVisible\" checked={props.object.wireframeVisible} onChange={props.onPropertyChange} />\n          </GridRow>\n        }\n\n        {props.object.hasOwnProperty(\"_displayVertexNormals\") && (\n          <GridRow label={\"vertex normals\"}>\n            <CheckboxInput name=\"displayVertexNormals\" checked={props.object.displayVertexNormals} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"position\") && (\n          <GridRow label={\"position\"}>\n            <NumberInput name=\"x\" value={props.object.position.x} {...XYZProps} />\n            <NumberInput name=\"y\" value={props.object.position.y} {...XYZProps} />\n            <NumberInput name=\"z\" value={props.object.position.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"scale\") && (\n          <GridRow label={\"scale\"}>\n            <NumberInput name=\"scalex\" value={props.object.scale.x} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scaley\" value={props.object.scale.y} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scalez\" value={props.object.scale.z} min={10e-10} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"rotation\") && (\n          <GridRow label={\"rotation\"}>\n            <NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps} />\n            <NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps} />\n            <NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps} />\n          </GridRow>\n        )}\n        <GridRowSeperator marginBottom={\".125em\"} />\n        <GridRow\n          label=\"material\"\n          style={{\n            display: \"unset\"\n          }}>\n          {/* <AutoCompleteTextInput\n\t\t\t\t\t\tgetSuggestions={async (value: string) => {\n\t\t\t\t\t\t\treturn await getMaterialSuggestions(value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tgetSuggestionValue={(suggestion => suggestion.name)}\n\t\t\t\t\t\trenderSuggestion={suggestion => (\n\t\t\t\t\t\t\t<div className=\"material-suggestion\">{suggestion.material}</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonChange={(value: string) => console.log(value)}\n\t\t\t\t\t/> */}\n          {props.object instanceof Surface && (props.object as Surface) && (\n            // (<Button text={props.object.acousticMaterial.name} minimal={true} />)\n            <>\n              <Tag\n              // onRemove={removable && onRemove}\n              // icon={icon === true ? \"home\" : undefined}\n              >\n                {props.object.acousticMaterial.name}\n              </Tag>\n              <Button icon=\"edit\" minimal small onClick={(e) => props.messenger.postMessage(\"OPEN_MATERIAL_SEARCH\", props.object)} />\n            </>\n          )}\n        </GridRow>\n        {props.object.hasOwnProperty(\"uuid\") && (\n          <GridRow label={\"uuid\"}>\n            <span className=\"muted-text\">{props.object.uuid}</span>\n          </GridRow>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\n\nexport interface GenericObjectPropertiesProps {\n\tobject: Source;\n    onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n\tonPropertyValueChangeAsNumber: (id: string, prop: string, valueAsNumber: number) => void;\n\tonPropertyValueChangeAsString: (id: string, prop: string, valueAsString: string) => void;\n}\n\n\n\nconst GenericObjectPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function GenericObjectProperties(props: GenericObjectPropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\t\n\treturn (\n\t\t<div>\n\t\t\t<div style={GenericObjectPropertiesContainerStyle}>\n\t\t\t\t{props.object.hasOwnProperty('name') && (\n\t\t\t\t\t<GridRow label={\"name\"}>\n\t\t\t\t\t\t<TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, {useState} from \"react\";\nimport TabUnselectedIcon from '@material-ui/icons/TabUnselected';\nimport FDTDProperties, { FDTDPropertiesProps } from './FDTDProperties';\nimport SourceProperties, { SourcePropertiesProps } from './SourceProperties';\nimport ReceiverProperties, { ReceiverPropertiesProps } from './ReceiverProperties';\nimport RayTracerProperties, {RayTracerPropertiesProps} from './RayTracerProperties';\nimport RoomProperties, { RoomPropertiesProps } from './RoomProperties';\nimport RT60Properties, { RT60PropertiesProps } from \"./RT60Properties\";\nimport SurfaceProperties, { SurfacePropertiesProps } from './SurfaceProperties';\nimport GenericObjectProperties, { GenericObjectPropertiesProps } from './GenericObjectProperties';\nimport Container from \"../../objects/container\";\nimport Solver from \"../../compute/solver\";\nimport Messenger from \"../../messenger\";\nimport { ObjectPropertyInputEvent } from \"../NumberInput\";\n\n\nexport interface ObjectPropertiesProps {\n  object: Container | Solver;\n  messenger?: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n\tonPropertyValueChangeAsNumber: (id: string, prop: string, valueAsNumber: number) => void;\n  onPropertyValueChangeAsString: (id: string, prop: string, valueAsString: string) => void;\n  onButtonClick?: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\nexport interface ObjectPropertiesState{\n}\n\nexport default class ObjectProperties extends React.Component<ObjectPropertiesProps, ObjectPropertiesState>{\n  constructor(props: ObjectPropertiesProps) {\n    super(props);\n    this.state = {\n    }\n  }\n  shouldComponentUpdate(nextProps: Readonly<ObjectPropertiesProps>, nextState: Readonly<ObjectPropertiesState>, nextContext: any) {\n    return true\n  }\n  render() {\n    switch (this.props.object.kind) {\n      case \"source\": return <SourceProperties {...this.props as SourcePropertiesProps} />;\n      case \"receiver\": return <ReceiverProperties {...this.props as ReceiverPropertiesProps} />;\n      case \"room\": return <RoomProperties {...this.props as RoomPropertiesProps} />;\n      case \"surface\": return <SurfaceProperties {...this.props as SurfacePropertiesProps} />;\n      case \"fdtd\": return <FDTDProperties {...this.props as FDTDPropertiesProps} />;\n      case \"ray-tracer\": return <RayTracerProperties {...this.props as RayTracerPropertiesProps} />;\n      case \"rt60\": return <RT60Properties {...(this.props as RT60PropertiesProps)} />;\n  \n      default: return <GenericObjectProperties {...this.props as GenericObjectPropertiesProps} />;\n    }\n  }\n}","import React from \"react\";\n\nimport { Drawer, Position, InputGroup, Button } from \"@blueprintjs/core\";\nimport { Setting } from \"../common/setting\";\n\nimport { KeyValuePair } from \"../common/key-value-pair\";\n\nimport \"./SettingsDrawer.css\";\n\nexport interface SettingsDrawerProps {\n  size: number | string;\n  onClose: (\n    event?: React.SyntheticEvent<HTMLElement, Event> | undefined\n  ) => void;\n  isOpen: boolean;\n  children?: React.ReactNode | React.ReactNode[];\n  onSubmit?: (((event: React.MouseEvent<HTMLElement, MouseEvent>) => void) & ((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void))\n}\n\n\nexport default function SettingsDrawer(props: SettingsDrawerProps) {\n  return (\n    <Drawer\n      position={Position.RIGHT}\n      size={props.size || \"35%\"}\n      autoFocus={true}\n      enforceFocus={true}\n      hasBackdrop={true}\n      onClose={props.onClose}\n      canOutsideClickClose={true}\n      canEscapeKeyClose={true}\n      isCloseButtonShown={true}\n      title={\n        <div className=\"settings-title-bar\">\n          <div className=\"settings-title-bar-title\">Settings</div>\n\t\t\t\t\t<div className=\"settings-title-bar-apply\">\n\t\t\t\t\t\t<Button text=\"Apply\" rightIcon=\"small-tick\" minimal intent=\"success\" style={{\n\t\t\t\t\t\t\tdisplay: \"inline\"\n\t\t\t\t\t\t}} onClick={props.onSubmit}/>\n\t\t\t\t\t</div>\n        </div>\n      }\n      isOpen={props.isOpen}>\n      {props.children}\n    </Drawer>\n  );\n}\n","import {uuid} from 'uuidv4';\n\n\n\n\nexport interface SolverParams{\n    [key: string]: any;\n    name?: string;\n}\n\nexport default class Solver{\n    params: SolverParams\n    name: string;\n    uuid: string;\n    kind: string;\n    running: boolean;\n    update!: () => void;\n    clearpass: boolean;\n    constructor(params?: SolverParams) {\n        this.params = params || {};\n        this.name = (params && params.name) || \"untitled solver\";\n        this.kind = \"solver\";\n        this.uuid = uuid();\n        this.running = false;\n        this.clearpass = false;\n        this.update = () => { };\n    }\n}","import React from 'react';\nimport { RT60 } from '../../compute/rt';\nimport \"./RT60Tab.css\"\n\nexport interface RT60TabProps {\n  solver: RT60\n}\n\nexport interface RT60TabState {\n  \n}\n\nexport default class RT60Tab extends React.Component<RT60TabProps, RT60TabState> {\n  constructor(props: RT60TabProps) {\n    super(props);\n    this.state = {\n      \n    }\n  }  \n  render() {\n    return (\n      <div>\n        {this.props.solver.name}\n      </div>\n    )\n  }\n}","import React from \"react\";\nimport \"./RayTracerTab.css\";\nimport RayTracer from \"../../compute/raytracer\";\nimport Plot from \"react-plotly.js\";\nimport { Button } from \"@blueprintjs/core\";\nimport ObjectProperties from \"../ObjectProperties\";\nimport Messenger from \"../../messenger\";\nimport { ObjectPropertyInputEvent } from \"../NumberInput\";\n\nexport interface RayTracerTabProps {\n  solver: RayTracer;\n  messenger: Messenger;\n}\n\nexport interface RayTracerTabState {\n\n}\nconst colors = [\"#66c2a5\", \"#fc8d62\", \"#8da0cb\", \"#e78ac3\", \"#a6d854\", \"#ffd92f\", \"#e5c494\", \"#b3b3b3\"];\nexport default class RayTracerTab extends React.Component<RayTracerTabProps, RayTracerTabState> {\n  constructor(props: RayTracerTabProps) {\n    super(props);\n    this.state = {\n      \n    };\n    this.handleObjectPropertyChange = this.handleObjectPropertyChange.bind(this);\n    this.handleObjectPropertyValueChangeAsNumber = this.handleObjectPropertyValueChangeAsNumber.bind(this);\n    this.handleObjectPropertyValueChangeAsString = this.handleObjectPropertyValueChangeAsString.bind(this);\n    this.handleObjectPropertyButtonClick = this.handleObjectPropertyButtonClick.bind(this);\n  }\n\n  handleObjectPropertyChange(e: ObjectPropertyInputEvent) {\n\t\tconst prop = e.name;\n\t\tswitch (e.type) {\n\t\t\tcase \"checkbox\":\n\t\t\t\tthis.props.solver[prop] = e.value;\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\tthis.props.solver[prop] = e.value;\n\t\t\t\tbreak;\n\t\t\tcase \"number\":\n\t\t\t\tthis.props.solver[prop] = Number(e.value);\n\t\t\t\tbreak;\n      default:\n\t\t\t\t  this.props.solver[prop] = e.value;\n\t\t\t\tbreak;\n    }\n    this.forceUpdate();\n\t}\n  handleObjectPropertyValueChangeAsNumber(\n\t\tid: string,\n\t\tprop: string,\n\t\tvalueAsNumber: number\n\t) {\n    this.props.solver[prop] = valueAsNumber;\n    this.forceUpdate();\n\t}\n\thandleObjectPropertyValueChangeAsString(\n\t\tid: string,\n\t\tprop: string,\n\t\tvalueAsString: string\n\t) {\n    this.props.solver[prop] = valueAsString;\n    this.forceUpdate();\n  }\n  handleObjectPropertyButtonClick(e: React.MouseEvent<HTMLInputElement, MouseEvent>) {\n    switch (e.currentTarget.name) {\n      case \"ray-tracer-play\":\n        this.props.messenger.postMessage(\"RAYTRACER_SHOULD_PLAY\", this.props.solver.uuid);\n        break;\n      case \"ray-tracer-pause\":\n        this.props.messenger.postMessage(\"RAYTRACER_SHOULD_PAUSE\", this.props.solver.uuid);\n        break;\n      case \"ray-tracer-clear\":\n        this.props.messenger.postMessage(\"RAYTRACER_SHOULD_CLEAR\", this.props.solver.uuid);\n        break;\n      default: break;\n    }\n    this.forceUpdate();\n\t}\n  render() {\n    return (\n      <div className=\"raytracer_tab\">\n        <ObjectProperties\n          messenger={this.props.messenger}\n          object={this.props.solver}\n          onPropertyChange={this.handleObjectPropertyChange}\n          onPropertyValueChangeAsNumber={this.handleObjectPropertyValueChangeAsNumber}\n          onPropertyValueChangeAsString={this.handleObjectPropertyValueChangeAsString}\n          onButtonClick={this.handleObjectPropertyButtonClick}\n        />\n      </div>\n    );\n  }\n  \n  // render() {\n  //   const receiverIntersectionData = this.getAllReceiverIntersectionData();\n  //   const chartdata = this.props.solver.chartdata.map((d, i) => {\n  //     return {\n  //       x: d.x,\n  //       y: d.y,\n  //       type: \"scatter\",\n  //       name: d.label,\n  //       mode: \"lines\",\n  //       marker: { color: colors[i % colors.length] }\n  //     };\n  //   });\n  //   return (\n  //     <div className=\"raytracer_tab\">\n  //       <Button onClick={e => this.forceUpdate()} text=\"refresh\" icon=\"refresh\" minimal />\n  //       <div className=\"raytracer_tab-plots-container\">\n  //         <div className=\"raytracer_tab-intersection_plot-container\">\n  //           {receiverIntersectionData && receiverIntersectionData.length > 0 && (\n  //             <Plot\n  //               data={receiverIntersectionData}\n  //               layout={{\n  //                 margin: {\n  //                   l: 5,\n  //                   r: 5,\n  //                   b: 5,\n  //                   t: 10\n  //                 },\n  //                 scene: {\n  //                   aspectratio: {\n  //                     x: 2,\n  //                     y: 2,\n  //                     z: 2\n  //                   },\n  //                   camera: {\n  //                     center: {\n  //                       x: 0,\n  //                       y: 0,\n  //                       z: 0\n  //                     },\n  //                     eye: {\n  //                       x: 2,\n  //                       y: 2,\n  //                       z: 2\n  //                     },\n  //                     up: {\n  //                       x: 0,\n  //                       y: 0,\n  //                       z: 1\n  //                     }\n  //                   },\n  //                   xaxis: {\n  //                     type: \"linear\",\n  //                     zeroline: false\n  //                   },\n  //                   yaxis: {\n  //                     type: \"linear\",\n  //                     zeroline: false\n  //                   },\n  //                   zaxis: {\n  //                     type: \"linear\",\n  //                     zeroline: false\n  //                   }\n  //                 }\n  //               }}\n  //               config={{\n  //                 responsive: true\n  //               }}\n  //               className=\"raytracer_tab-intersection_plot\"\n  //               style={{ width: \"100%\", height: \"300px\" }}\n  //             />\n  //           )}\n  //         </div>\n  //         <div className=\"raytracer_tab-response_plot-container\">\n  //           {chartdata && chartdata.length > 0 && (\n  //             <Plot\n  //               data={chartdata}\n  //               className=\"raytracer_tab-response_plot\"\n  //               layout={{ title: \"Energy Response\" }}\n  //               config={{ responsive: true }}\n  //               style={{ width: \"100%\", height: \"300px\" }}\n  //             />\n  //           )}\n  //         </div>\n  //       </div>\n  //     </div>\n  //   );\n  // }\n  \n}\n","import React, {useState} from \"react\";\nimport SliderInput from '../SliderInput';\nimport Messenger from \"../../messenger\";\nimport Renderer from \"../../render/renderer\";\nimport { clamp } from '../../common/clamp';\n\nexport interface RendererTabProps {\n  messenger: Messenger;\n}\n\nexport default function RendererTab(props: RendererTabProps) {\n  const renderer = props.messenger.postMessage(\"GET_RENDERER\")[0] as Renderer;\n  const [fov, setFov] = useState(renderer.fov as number|string);\n  const [zoom, setZoom] = useState(renderer.zoom as number | string);\n  const [isOrtho, setIsOrtho] = useState(renderer.isOrtho);\n  return (\n    <div>\n      {/* <SliderInput id=\"fov\" value={renderer.fov} onChange={(e: React.FormEvent<HTMLInputElement>)=>{renderer.fov = e.currentTarget.valueAsNumber}} min={1} max={90} step={0.001} /> */}\n      <div className=\"slider_with_number-container\">\n        <span className=\"slider_with_number-label\">FOV</span>\n        <input\n          type=\"range\"\n          id=\"fov-slider\"\n          className=\"slider_with_number-slider\"\n          value={fov}\n          onChange={(e: React.FormEvent<HTMLInputElement>) => {\n            renderer.fov = e.currentTarget.valueAsNumber;\n            renderer.camera.updateProjectionMatrix();\n            setFov(e.currentTarget.valueAsNumber);\n          }}\n          min={1}\n          max={90}\n          step={0.001}\n        />\n        <input\n          type=\"number\"\n          id=\"fov-number\"\n          className=\"slider_with_number-number\"\n          value={fov}\n          onChange={(e: React.FormEvent<HTMLInputElement>) => {\n            if (e.currentTarget.valueAsNumber > 0 && e.currentTarget.valueAsNumber < 100) {\n              renderer.fov = e.currentTarget.valueAsNumber;\n              renderer.camera.updateProjectionMatrix();\n            }\n            setFov(e.currentTarget.valueAsNumber || \"\");\n          }}\n        />\n      </div>\n      <div className=\"slider_with_number-container\">\n        <span className=\"slider_with_number-label\">Zoom</span>\n        <input\n          type=\"range\"\n          id=\"zoom-slider\"\n          className=\"slider_with_number-slider\"\n          value={zoom}\n          onChange={(e: React.FormEvent<HTMLInputElement>) => {\n            renderer.camera.zoom = e.currentTarget.valueAsNumber;\n            renderer.camera.updateProjectionMatrix();\n            setZoom(e.currentTarget.valueAsNumber);\n          }}\n          min={0.0001}\n          max={10}\n          step={0.001}\n        />\n        <input\n          type=\"number\"\n          id=\"zoom-number\"\n          value={zoom}\n          className=\"slider_with_number-number\"\n          onChange={(e: React.FormEvent<HTMLInputElement>) => {\n            if (e.currentTarget.valueAsNumber > 0.0001 && e.currentTarget.valueAsNumber < 10) {\n              renderer.camera.zoom = e.currentTarget.valueAsNumber;\n              renderer.camera.updateProjectionMatrix();\n            }\n            setZoom(e.currentTarget.valueAsNumber || \"\");\n          }}\n        />\n      </div>\n      <div className=\"ortho-button\">\n        <button onClick={e => {\n          setIsOrtho(!isOrtho);\n          props.messenger.postMessage(\"TOGGLE_CAMERA_ORTHO\");\n        }}>{isOrtho?\"Perspective\":\"Orthographic\"}</button>\n      </div>\n      <div className=\"orientation-buttons\">\n        <button onClick={(e) => props.messenger.postMessage(\"LOOK_ALONG_AXIS\", \"+x\")}>+X</button>\n        <button onClick={(e) => props.messenger.postMessage(\"LOOK_ALONG_AXIS\", \"-x\")}>-X</button>\n        <button onClick={(e) => props.messenger.postMessage(\"LOOK_ALONG_AXIS\", \"+y\")}>+Y</button>\n        <button onClick={(e) => props.messenger.postMessage(\"LOOK_ALONG_AXIS\", \"-y\")}>-Y</button>\n        <button onClick={(e) => props.messenger.postMessage(\"LOOK_ALONG_AXIS\", \"+z\")}>+Z</button>\n        <button onClick={(e) => props.messenger.postMessage(\"LOOK_ALONG_AXIS\", \"-z\")}>-Z</button>\n      </div>\n    </div>\n  );\n}","import React, {useState} from 'react';\nimport Messenger from '../../messenger';\n\n\nimport Stats, {StatsProps, Stat} from './Stats';\nimport { ParametersPanel } from './ParametersPanel';\nimport MaterialsPanel from './MaterialsPanel';\nimport { ChartTab } from './ChartTab';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\nimport { SvgIcon } from '@material-ui/core';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport CloseIcon from '@material-ui/icons/Close';\nimport './Gutter.css';\nimport { KeyValuePair } from '../../common/key-value-pair';\nimport Solver from '../../compute/solver';\nimport RT60Tab from './RT60Tab';\nimport { RT60 } from '../../compute/rt';\nimport RayTracerTab from './RayTracerTab';\nimport RayTracer from '../../compute/raytracer';\nimport RendererTab from './RendererTab';\n\n\nexport interface GutterProps {\n  solvers: KeyValuePair<Solver>;\n  messenger: Messenger;\n}\n\nexport interface GutterState {\n  selectedTabIndex: number;\n}\n\nexport default class Gutter extends React.Component<GutterProps, GutterState>{\n  constructor(props: GutterProps) {\n    super(props);\n    this.state = {\n      selectedTabIndex: 1\n    }\n    this.handleTabChange = this.handleTabChange.bind(this);\n    \n    // this.props.messenger.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\", ()=>this.forceUpdate());\n    \n  } \n  handleTabChange(tabIndex: number) {\n    this.setState({\n      selectedTabIndex: tabIndex\n    })\n  }\n  render() {\n    const keys = Object.keys(this.props.solvers);\n    \n    return (\n      <div\n        style={{\n          height: \"100%\",\n          margin: \"0\"\n        }}>\n        <Tabs selectedIndex={this.state.selectedTabIndex} onSelect={this.handleTabChange}>\n          <TabList>\n            <Tab disabled />\n              <Tab key={\"gutter-tabname-\" + keys.length}>\n                Renderer\n              </Tab>\n            {keys.map((x, i) => {\n              return (\n                <Tab key={\"gutter-tabname-\" + i}>\n                  <div className=\"tab-text-container\">\n                    {this.props.solvers[x].name}\n                  </div>\n                </Tab>\n              );\n            })}\n          </TabList>\n          <TabPanel />\n          <TabPanel key={\"gutter-tabpanel-\" + keys.length}>\n            <RendererTab messenger={this.props.messenger} />\n          </TabPanel>\n          {keys.map((x, i) => {\n            switch (this.props.solvers[x].kind) {\n              case \"ray-tracer\":\n                return (\n                  <TabPanel key={\"gutter-tabpanel-\" + i}>\n                    <RayTracerTab\n                      solver={this.props.solvers[x] as RayTracer}\n                      messenger={this.props.messenger}\n                    />\n                  </TabPanel>\n                );\n              case \"rt60\":\n                return (\n                  <TabPanel key={\"gutter-tabpanel-\" + i}>\n                    <RT60Tab solver={this.props.solvers[x] as RT60} />\n                  </TabPanel>\n                );\n              default:\n                return <TabPanel key={\"gutter-tabpanel-\" + i} />;\n            }\n          })}\n        </Tabs>\n      </div>\n    );\n  }\n  \n}","import chroma from 'chroma-js';\n\nexport type Absorption = {\n  \"63\": number;\n  \"125\": number;\n  \"250\": number;\n  \"500\": number;\n  \"1000\": number;\n  \"2000\": number;\n  \"4000\": number;\n  \"8000\": number;\n};\nexport const scale = chroma\n  .scale([\"black\", \"navy\", \"red\", \"yellow\", \"white\"])\n  .mode(\"lch\")\n  .correctLightness(true);\n\nexport function absorptionGradient(absorption: Absorption | number[]) {\n  if (absorption instanceof Array) {\n    const colors = absorption.map((x, i) => {\n      const percentage = (100 * (i + 1)) / 9;\n      const col = scale(absorption[i]);\n      return `${col} ${Math.round(percentage)}%`;\n    }).join(',');\n    return `linear-gradient(90deg, ${colors})`;\n  }\n  else {\n    const colors = [63, 125, 250, 500, 1000, 2000, 4000, 8000]\n      .map((x, i) => {\n        const percentage = (100 * (i + 1)) / 9;\n        const col = scale(absorption[String(x)]);\n        return `${col} ${Math.round(percentage)}%`;\n      })\n      .join(\",\");\n    return `linear-gradient(90deg, ${colors})`;\n  }\n}\n\nexport default absorptionGradient;","import React from 'react';\nimport Surface from '../objects/surface';\nimport Messenger from '../messenger';\nimport { AcousticMaterial } from '..';\nimport { uuid } from 'uuidv4';\nimport { absorptionGradient } from './AbsorptionGradient';\nimport MaterialSliders from './MaterialSliders';\nimport { clamp } from '../common/clamp';\nimport { Icon, Tag, IToaster } from '@blueprintjs/core';\nimport { ButtonGroup, Button } from '@blueprintjs/core';\nimport Room from '../objects/room';\nimport ObjectView from './ObjectView';\nimport { KeyValuePair } from '../common/key-value-pair';\nimport Container from '../objects/container';\n\nimport \"./MaterialDrawer.css\";\n\nconst max = (a: number, b: number) => (a > b ? a : b);\nconst min = (a: number, b: number) => (a < b ? a : b);\nconst none = <></>;\n\nexport interface MaterialDrawerProps {\n  object?: Surface;\n  bufferLength?: number;\n  messenger: Messenger;\n}\n\nexport interface MaterialDrawerState {\n  query: string;\n  selected_item: AcousticMaterial;\n  bufferLength: number;\n  selected_object: Surface;\n}\n\nexport default class MaterialDrawer extends React.Component<MaterialDrawerProps, MaterialDrawerState> {\n  listref: React.RefObject<HTMLDivElement>;\n  listScroll: number;\n  constructor(props: MaterialDrawerProps) {\n    super(props);\n    this.state = {\n      bufferLength: props.bufferLength || 30,\n      query: props.object ? props.object.acousticMaterial.material : \"\",\n      selected_item: props.object ? props.object.acousticMaterial : {} as AcousticMaterial,\n      selected_object: {} as Surface\n    };\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.handleObjectViewClick = this.handleObjectViewClick.bind(this);\n    this.handleListItemDoubleClick = this.handleListItemDoubleClick.bind(this);\n    this.listref = React.createRef<HTMLDivElement>();\n    this.listScroll = 0;\n  }\n  handleQueryChange(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      query: e.currentTarget.value\n    });\n  }\n  handleInput(event: React.FormEvent<HTMLInputElement>) {\n    // console.log(event);\n    \n  }\n  componentWillUpdate(nextProps, nextState, nextContext) {\n    if (this.listref.current) {\n      this.listScroll = this.listref.current.scrollTop;\n    }\n  }\n  componentDidUpdate() {\n    if (this.listref.current) {\n      this.listref.current.scrollTop = this.listScroll;\n      this.listref.current.focus();\n    }\n  }\n  handleListItemClick(item: AcousticMaterial) {\n    \n    this.setState({\n      selected_item: item\n    })\n  }\n  handleListItemDoubleClick(item: AcousticMaterial) {\n    console.log(item);\n  }\n  handleObjectViewClick(object, e: React.MouseEvent) {\n  if (object instanceof Container && object['kind']!==\"room\") {\n    if (e.shiftKey) {\n      this.props.messenger.postMessage(\"APPEND_SELECTION\", [object])\n    }\n    else {\n      this.props.messenger.postMessage(\"SET_SELECTION\", [object]);\n    }\n    if (object instanceof Surface) {\n      console.log(object);\n      this.setState({\n        query: object.acousticMaterial.name,\n        selected_object: object as Surface\n      });\n    }\n  }\n}\n  // handleObjectViewClick(e) {\n  //   console.log(e);\n  //   if (e instanceof Surface) {\n  //     this.setState({\n  //       query: e.acousticMaterial.name,\n  //       selected_object: e as Surface\n  //     });\n  //   }\n  // }\n  render() {\n    const filteredItems = this.state.query.length > 0\n      ? this.props.messenger.postMessage(\"SEARCH_ALL_MATERIALS\", this.state.query)[0] as AcousticMaterial[]\n      : this.props.messenger.postMessage(\"FETCH_ALL_MATERIALS\")[0] as AcousticMaterial[];\n    \n    const MaterialDrawerList = () => {\n      if (filteredItems && filteredItems.length > 0) {\n        const MaterialDrawerListArray = [] as React.ReactNode[];\n        for (let i = 0; i < min(this.state.bufferLength,filteredItems.length); i++) {\n          \n          const isSelected =\n            this.state.selected_item &&\n            this.state.selected_item._id &&\n            filteredItems[i]._id === this.state.selected_item._id;\n          const selectedClassname = \"material_drawer-list_item-selected\";\n          const normalClassname = \"material_drawer-list_item-container\";\n          const containerProps = {\n            className: isSelected ? selectedClassname : normalClassname,\n            onClick: e => this.handleListItemClick(filteredItems[i]),\n            onDoubleClick: e => console.log(filteredItems[i]),\n            key: filteredItems[i]._id\n          };\n          MaterialDrawerListArray.push(\n            <div {...containerProps}>\n              <div\n                className=\"material_drawer-list_item-material\"\n                key={filteredItems[i]._id + \"mat\"}\n                onDoubleClick={containerProps.onDoubleClick}>\n                {filteredItems[i].material}\n              </div>\n              <div className=\"material_drawer-list_item-right\">\n                {/* <div className=\"material_drawer-list_item-tags\">\n                  {filteredItems[i].tags.map(x => (\n                    <span key={uuid()} className=\"bp3-tag bp3-minimal material_drawer-list_item-tag\">\n                      {x}\n                    </span>\n                  ))}\n                </div> */}\n                <div\n                  className=\"material_drawer-list_item-absorption\"\n                  key={filteredItems[i]._id + \"grad\"}\n                  onDoubleClick={containerProps.onDoubleClick}\n                  style={{\n                    background: `${absorptionGradient(\n                      filteredItems[i].absorption\n                    )}`\n                  }}\n                />\n              </div>\n            </div>\n          );\n        }\n        return MaterialDrawerListArray;\n      }\n      else return <div></div>;\n    }\n\n    \n    const rooms = this.props.messenger.postMessage(\"FETCH_ROOMS\")[0];\n    \n    \n    \n    const absorption = this.state.selected_item._id && Object.keys(this.state.selected_item.absorption).map((x) => {\n      return (\n        <div key={uuid()}>\n          <div className=\"material_drawer-display-material_absorption-header\">{x}Hz</div>\n          <div className=\"material_drawer-display-material_absorption-value\">{this.state.selected_item.absorption[x]}</div>\n        </div>\n      );\n    })\n    const materialProperties = this.state.selected_item._id && (\n      <>\n        <div className={\"material_drawer-display-material_name\"}>\n          <span>\n            <span>{this.state.selected_item.name}</span>\n          </span>\n        </div>\n        <div className={\"material_drawer-display-material_material\"}>\n          <span>{this.state.selected_item.material}</span>\n          <span className=\"muted-text\" style={{ textAlign: \"right\" }}>\n            {this.state.selected_item._id}\n          </span>\n        </div>\n        <div className={\"material_drawer-display-material_id\"}></div>\n        <div className={\"material_drawer-display-material_absorption\"}>{absorption}</div>\n      </>\n    );\n    \n    return (\n      <div className=\"material_drawer-grid\">\n        <div className=\"material_drawer-surface-container\">\n          {rooms && (\n            <ObjectView\n              solvers={{}}\n              containers={rooms.reduce((a, b) => {\n                a[b.uuid] = b;\n                return a;\n              }, {} as KeyValuePair<Room>)}\n              onClick={this.handleObjectViewClick}\n            />\n          )}\n        </div>\n        <div className=\"material_drawer-container\">\n          <div className=\"material_drawer-searchbar-container\">\n            <div className=\"material_drawer-searchbar-input_container\">\n              <Icon icon=\"search\" iconSize={14} color=\"darkgray\" className=\"material_drawer-search_icon\" />\n              <input\n                type=\"text\"\n                className=\"material_drawer-searchbar-input\"\n                value={this.state.query}\n                onChange={this.handleQueryChange}\n                onInput={this.handleInput}\n              />\n            </div>\n          </div>\n          <div className=\"material_drawer-list\" ref={this.listref} key={uuid()}>\n            {MaterialDrawerList()}\n          </div>\n          <div>\n            <a\n              className=\"show-more\"\n              onClick={(e) =>\n                this.setState({\n                  bufferLength: clamp(15 + this.state.bufferLength, 1, filteredItems.length)\n                })\n              }>\n              show more...\n            </a>\n          </div>\n          <div className={\"material_drawer-display-container\"}>\n            {materialProperties}\n            <div className={\"material_drawer-display-assign_button\"}>\n              <Button\n                intent=\"success\"\n                text=\"assign\"\n                icon=\"tick\"\n                disabled={!this.state.selected_item || typeof this.state.selected_item._id === \"undefined\"}\n                onClick={(e) => {\n                  this.props.messenger.postMessage(\"ASSIGN_MATERIAL\", this.state.selected_item, this.state.selected_object.uuid || false);\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n","export function clamp(v, a, b) {\n  return v < a ? a : v > b ? b : v;\n}","import React from 'react';\n\nimport \"./SettingsPanelBlock.css\";\n\nexport interface SettingsPanelBlockProps{\n  title: React.ReactNode;\n  children?: React.ReactNode;\n};\n\nexport default function SettingsPanelBlock(props: SettingsPanelBlockProps) {\n  return (\n    <div className=\"settings-panel-block\">\n      <div className=\"settings-panel-block-title\">\n        {props.title}\n      </div>\n      <div className=\"settings-panel-block-content\">\n        {props.children}\n      </div>\n    </div>\n  )\n};","import React from 'react';\n\nimport \"./SettingsPanelSetting.css\";\n\nexport interface SettingsPanelSettingProps{\n  name: React.ReactNode;\n  description: React.ReactNode;\n  children?: React.ReactNode;\n  edited?: boolean;\n}\n\nexport default function SettingsPanelSetting(props: SettingsPanelSettingProps) {\n  return (\n    <div className=\"settings-panel-setting\">\n      <div className=\"settings-panel-setting-titleblock\">\n        {props.edited && <span className=\"settings-panel-setting-dot\">•</span>}\n        <div className=\"settings-panel-setting-name\">{props.name}</div>\n        <div className=\"settings-panel-setting-description\">\n          {props.description}\n        </div>\n      </div>\n      <div className=\"settings-panel-setting-content\">{props.children}</div>\n    </div>\n  );\n}","import React, {useState} from \"react\";\nimport {Setting} from '../../common/setting';\n\nimport \"./SettingsTextComponent.css\";\n\nexport interface SettingsTextComponentProps {\n  setting: Setting<string>;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport default function SettingsTextComponent(props: SettingsTextComponentProps) {\n  // const [stagedValue, setStagedValue] = useState(props.setting.value);\n  return (\n    <input\n      type=\"text\"\n      value={props.setting.staged_value}\n      onChange={props.onChange}\n      className=\"settings-text-component\"\n    />\n  );\n  }\n","import React, { useState } from \"react\";\nimport { Setting } from \"../../common/setting\";\n\nimport \"./SettingsNumberComponent.css\";\n\nexport interface SettingsNumberComponentProps {\n  setting: Setting<string>;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport default function SettingsNumberComponent(\n  props: SettingsNumberComponentProps\n) {\n  // const [stagedValue, setStagedValue] = useState(props.setting.value);\n  return (\n    <input\n      type=\"number\"\n      value={props.setting.staged_value}\n      onChange={props.onChange}\n      className=\"settings-number-component\"\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport { Setting } from \"../../common/setting\";\n\nimport \"./SettingsColorComponent.css\";\n\nexport interface SettingsColorComponentProps {\n  setting: Setting<string>;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport default function SettingsColorComponent(\n  props: SettingsColorComponentProps\n) {\n  // const [stagedValue, setStagedValue] = useState(props.setting.value);\n  return (\n    <input\n      type=\"color\"\n      value={props.setting.staged_value}\n      onChange={props.onChange}\n      className=\"settings-color-component\"\n    />\n  );\n}\n","import React from 'react';\nimport SettingsPanelBlock from './SettingsPanelBlock';\nimport Messenger from '../../messenger';\nimport SettingsPanelSetting from './SettingsPanelSetting';\nimport SettingsTextComponent from './SettingsTextComponent';\nimport './SettingsPanel.css';\nimport {KeyValuePair} from '../../common/key-value-pair';\nimport { Setting } from '../../common/setting';\nimport SettingsNumberComponent from './SettingsNumberComponent';\nimport SettingsColorComponent from './SettingsColorComponent';\n\n\nexport interface SettingsPanelProps{\n  messenger: Messenger;\n}\n\nexport class SettingsPanel extends React.Component<SettingsPanelProps, KeyValuePair<Setting<string|number|boolean>>>{\n  constructor(props: SettingsPanelProps) {\n    super(props);\n    this.state = this.props.messenger.postMessage(\"FETCH_SETTINGS\")[0] as KeyValuePair<Setting<string | number | boolean>>;\n    this.handleTextComponentChange = this.handleTextComponentChange.bind(this);\n    this.handleNumberComponentChange = this.handleNumberComponentChange.bind(this);\n    this.handleColorComponentChange = this.handleColorComponentChange.bind(this);\n    this.SettingInputComponent = this.SettingInputComponent.bind(this);\n  }\n  handleTextComponentChange(e: React.ChangeEvent<HTMLInputElement>, setting: Setting<string>) {\n    this.setState({\n      [setting.id]: setting.setStagedValue(e.target.value)\n    })\n  }\n  handleNumberComponentChange(e: React.ChangeEvent<HTMLInputElement>, setting: Setting<number>) {\n     this.setState({\n       [setting.id]: setting.setStagedValue(e.target.valueAsNumber)\n     });\n  }\n  \n  handleColorComponentChange(e: React.ChangeEvent<HTMLInputElement>, setting: Setting<string>) {\n     this.setState({\n       [setting.id]: setting.setStagedValue(e.target.value)\n     });\n  }\n  \n  SettingInputComponent(x: Setting<any>) {\n    switch (x.kind) {\n      case \"text\": {\n        return (\n          <SettingsTextComponent setting={x} onChange={e => {\n            this.handleTextComponentChange(e, x);\n          }\n        }/>)\n      }\n      case \"number\": {\n        return (\n          <SettingsNumberComponent setting={x} onChange={e => {\n            this.handleNumberComponentChange(e, x);\n          }\n        }/>)\n      }\n      case \"color\": {\n        return (\n          <SettingsColorComponent setting={x} onChange={e => {\n            this.handleColorComponentChange(e, x);\n          }\n        }/>)\n      }\n      default:\n        return (<div></div>)\n    }\n  }\n  render() {\n    return (\n      <SettingsPanelBlock title=\"General\">\n        {this.state && Object.keys(this.state).map(x => {\n          const setting = this.state[x];\n          return (\n            <SettingsPanelSetting\n              edited={setting.edited}\n              key={setting.id}\n              name={setting.name}\n              description={setting.description}>\n              {this.SettingInputComponent(setting)}\n            </SettingsPanelSetting>\n          );\n        })}\n      </SettingsPanelBlock>\n    )\n  }\n}\n\n","import React from \"react\";\nimport SplitterLayout from \"react-splitter-layout\";\nimport {\n  FocusStyleManager,\n  Navbar,\n  Alignment,\n  Button,\n  Menu,\n  MenuItem,\n  Popover,\n  ButtonGroup,\n  Position,\n  MenuDivider,\n  Drawer,\n  Classes,\n  Colors,\n  AnchorButton,\n  Overlay,\n  Alert,\n  Intent,\n  Toaster,\n  IToastProps\n} from \"@blueprintjs/core\";\nimport MenuItemText from '../components/MenuItemText';\nimport { ItemListRenderer, IItemListRendererProps } from \"@blueprintjs/select\";\nimport MaterialBar from '../components/MaterialBar';\nimport { Characters, EditorModes, ToolNames } from \"../constants\";\nimport ImportDialog from \"../components/ImportDialog\";\nimport ObjectView from \"../components/ObjectView\";\nimport resolve_svg from \"../svg/resolve.svg\";\nimport { set } from \"../common/set-at\";\nimport Container from \"../objects/container\";\nimport PanelContainer from \"./PanelContainer\";\nimport ObjectProperties from \"../components/ObjectProperties/index\";\nimport Messenger from \"../messenger\";\nimport Renderer from \"../render/renderer\";\nimport Receiver from \"../objects/receiver\";\nimport Source from \"../objects/source\";\nimport { KeyValuePair } from \"../common/key-value-pair\";\nimport SettingsDrawer from \"../components/SettingsDrawer\";\nimport { Setting } from \"../common/setting\";\nimport { Report } from \"../common/browser-report\";\n\nimport \"../css\";\nimport \"./App.css\";\nimport { ToolName } from \"../constants/tool-names\";\nimport { EditorMode } from \"../constants/editor-modes\";\n// import { Process, Task } from \"../common/process\";\nimport SettingsDrawerCheckBox from \"../components/setting-components/SettingsDrawerCheckbox\";\nimport Solver from \"../compute/solver\";\nimport RayTracer from \"../compute/raytracer\";\n\nimport Gutter from '../components/Gutter/Gutter';\nimport { Stat } from \"../components/Gutter/Stats\";\nimport { ObjectPropertyInputEvent } from \"../components/NumberInput\";\nimport Surface from \"../objects/surface\";\nimport { AcousticMaterial } from \"..\";\nimport { Searcher } from \"fast-fuzzy\";\nimport MaterialDrawer from \"../components/MaterialDrawer\";\nimport { SettingsPanel } from \"../components/setting-components/SettingsPanel\";\n\n\n\nconst AppToaster = Toaster.create({\n  className: \"app-toaster\",\n  position: Position.TOP,\n  \n});\n\n\nFocusStyleManager.onlyShowFocusOnTabs();\n\n\n\n\nexport interface AppProps {\n\tmessenger: Messenger;\n\tcontainers: KeyValuePair<Container>;\n\tsettings: KeyValuePair<any>;\n  browser: Report;\n}\n\n\n\n\n\ninterface AppState {\n\timportDialogVisible: boolean;\n\tcontainers: KeyValuePair<Container>;\n  selectedObject: Container;\n  \n\tsettingsDrawerVisible: boolean;\n\tsettings: KeyValuePair<any>;\n\tmode: EditorMode;\n\t// process: Process;\n\tsolvers: KeyValuePair<Solver>;\n\ttool: ToolName;\n\tsimulationRunning: boolean;\n\tdarkmode: boolean;\n\tstats: Stat[];\n\tlastUpdateReason: string;\n\tchartData?: {\n\t\tlabel: string;\n\t\tx: number[];\n\t\ty: number[];\n\t}[];\n\tmaterialDrawerOpen: boolean;\n\tterminalOpen: boolean;\n\tnewWarningVisible: boolean;\n}\n\nexport default class App extends React.Component<AppProps, AppState> {\n\tstate: AppState;\n\tcanvas: React.RefObject<HTMLCanvasElement>;\n\tstatsCanvas: React.RefObject<HTMLCanvasElement>;\n\tprog: any;\n\tconstructor(props: AppProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tterminalOpen: false,\n\t\t\tnewWarningVisible: false,\n\t\t\tmaterialDrawerOpen: false,\n      lastUpdateReason: \"\",\n      solvers: {} as KeyValuePair<Solver>,\n      simulationRunning: false,\n      importDialogVisible: false,\n      containers: {} as KeyValuePair<Container>,\n      selectedObject: {} as Container,\n      settingsDrawerVisible: false,\n      settings: props.settings,\n      mode: \"EDIT\",\n      tool: \"SELECT\",\n      darkmode: false,\n      stats: [] as Stat[],\n\t\t\tchartData: [{\n\t\t\t\tlabel: \"a\",\n\t\t\t\tx: [0],\n\t\t\t\ty: [0]\n\t\t\t}]\n      // process: new Process({name: \"base\", steps: [] as Task[]})\n    };\n\t\tthis.setupMessageHandlers = this.setupMessageHandlers.bind(this);\n\t\tthis.setupMessageHandlers();\n\n\t\tthis.canvas = React.createRef<HTMLCanvasElement>();\n\t\tthis.statsCanvas = React.createRef<HTMLCanvasElement>();\n\t\tthis.showImportDialog = this.showImportDialog.bind(this);\n\t\tthis.handleImportDialogClose = this.handleImportDialogClose.bind(this);\n\t\tthis.handleObjectViewClick = this.handleObjectViewClick.bind(this);\n\t\tthis.handleObjectViewDelete = this.handleObjectViewDelete.bind(this);\n\t\tthis.handleObjectPropertyChange = this.handleObjectPropertyChange.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.handleObjectPropertyValueChangeAsNumber = this.handleObjectPropertyValueChangeAsNumber.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.handleObjectPropertyValueChangeAsString = this.handleObjectPropertyValueChangeAsString.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.handleSettingsButtonClick = this.handleSettingsButtonClick.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.handleMaterialBarClose = this.handleMaterialBarClose.bind(this);\n\t\tthis.handleMaterialBarItemSelect = this.handleMaterialBarItemSelect.bind(this);\n\t\tthis.handleSettingChange = this.handleSettingChange.bind(this);\n\t\tthis.handleObjectPropertyButtonClick = this.handleObjectPropertyButtonClick.bind(this);\n\t\tthis.addMessageHandler = this.addMessageHandler.bind(this);\n\t}\n\taddMessageHandler(message: string, handler: (acc, ...args) => KeyValuePair<any>, cb?: ()=>void) {\n\t\tthis.props.messenger.addMessageHandler(message, (acc, ...args) => {\n\t\t\tconst nextState = handler(acc, ...args);\n\t\t\tthis.setState({\n\t\t\t\tlastUpdateReason: message,\n\t\t\t\t...nextState\n\t\t\t}, cb || (()=> {}))\n\t\t})\n\t}\n  setupMessageHandlers() {\n    \n    this.addMessageHandler(\"NEW\", () => {\n      return {\n        selectedObject: {} as Container,\n        containers: {} as KeyValuePair<Container>,\n        lastUpdateReason: \"NEW\"\n      }\n    });\n    this.addMessageHandler(\"DESELECT_ALL_OBJECTS\", () => {\n      return {\n        selectedObject: {} as Container,\n        lastUpdateReason: \"DESELECT_ALL_OBJECTS\"\n      }\n    });\n    \n    this.addMessageHandler(\"SET_SELECTION\", (acc, objects) => {\n      if (objects instanceof Array) {\n        return {\n          selectedObject: objects[objects.length - 1],\n          lastUpdateReason: \"SET_SELECTION\"\n        };\n      }\n      else return {}\n    })\n    \n    this.addMessageHandler(\"APPEND_SELECTION\", (acc, objects) => {\n      if (objects instanceof Array) {\n        return {\n          selectedObject: objects[objects.length - 1],\n          lastUpdateReason: \"APPEND_SELECTION\"\n        };\n      } else return {};\n    })\n    \n    this.addMessageHandler(\"SET_OBJECT_VIEW\", (acc, object) => {\n      if (!object.uuid) {\n        return {}\n      }\n      else {\n        return {\n          selectedObject: object,\n          lastUpdateReason: \"SET_OBJECT_VIEW\"\n        };\n      }\n    });\n        \n    this.addMessageHandler(\"SHOW_TOAST\", (acc, toastProps: IToastProps) => {\n      AppToaster.show(toastProps);\n      return {};\n    });\n    \n\t\tthis.addMessageHandler(\"SHOW_NEW_WARNING\",\n\t\t\t() => {\n\t\t\t\treturn ({\n\t\t\t\t\tnewWarningVisible: true\n\t\t\t})\n\t\t});\n\t\tthis.addMessageHandler(\"SHOW_TERMINAL\",\n\t\t\t() => {\n\t\t\treturn ({\n\t\t\t\tterminalOpen: true\n\t\t\t});\n\t\t});\n\t\tthis.addMessageHandler(\"TOGGLE_TERMINAL\",\n\t\t\t() => {\n      return {\n        terminalOpen: !this.state.terminalOpen\n      };\n    });\n\t\tthis.addMessageHandler(\"OPEN_MATERIAL_SEARCH\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn ({\n\t\t\t\tmaterialDrawerOpen: true\n\t\t\t});\n\t\t});\n    \n\n\t\t// this.addMessageHandler(\"ASSIGN_MATERIAL\",\n    //   (acc, material, id) => {\n    //     if (id) {\n    //       const surface = this.props.messenger.postMessage(\"FETCH_SURFACE\", id)[0] as Surface;\n    //       surface.acousticMaterial = material;\n    //     }\n    //     else if ((this.state.selectedObject) && (this.state.selectedObject instanceof Surface)) {\n\t\t// \t\t// this.state.selectedObject.acousticMaterial = material;\n\t\t// \t\tconst { selectedObject } = this.state;\n\t\t// \t\tselectedObject.acousticMaterial = material;\n\t\t// \t\treturn ({\n\t\t// \t\t\tselectedObject,\n\t\t// \t\t\tmaterialDrawerOpen: false\n\t\t// \t\t})\n\t\t// \t}\n\t\t// \treturn ({\n\t\t// \t\tselectedObject: this.state.selectedObject\n\t\t// \t})\n\t\t// });\n\t\t\n\t\tthis.addMessageHandler(\"TOGGLE_MATERIAL_SEARCH\",\n\t\t\t(acc, ...args) => {\n      return {\n        materialDrawerOpen: !this.state.materialDrawerOpen\n      };\n    });\n\t\tthis.addMessageHandler(\"UPDATE_CHART_DATA\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn ({\n\t\t\t\tchartData: args[0]\n\t\t\t})\n\t\t})\n\t\tthis.addMessageHandler(\"SHOW_IMPORT_DIALOG\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn {\n\t\t\t\timportDialogVisible: !this.state.importDialogVisible,\n\t\t\t};\n\t\t});\n\t\tthis.addMessageHandler(\"SHOW_IMPORT_DIALOG\",\n\t\t\t(acc, ...args) => {\n\t\t\t\treturn ({\n          importDialogVisible: !this.state.importDialogVisible,\n        });\n\t\t\t}\n    );\n    \n    this.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\",\n      (acc, ...args) => {\n      if (args[0] && this.state.containers[args[0]]) {\n        const containers = { ...this.state.containers };\n        const selectedObject = this.state.selectedObject;\n        delete containers[args[0]];\n        return {\n          selectedObject: selectedObject && selectedObject.uuid === args[0] ? {} as Container : selectedObject,\n          containers,\n          lastUpdateReason: \"SHOULD_REMOVE_CONTAINER\"\n        }\n      }\n      else {\n        return {}\n      }\n    })\n\t\tthis.addMessageHandler(\"SHOULD_ADD_SOURCE\",\n\t\t\t(acc, ...args) => {\n\t\t\t\tconst containers = { ...this.state.containers };\n\t\t\t\tcontainers[acc[0].uuid] = acc[0];\n\t\t\t\treturn ({\n          containers,\n          lastUpdateReason: \"SHOULD_ADD_SOURCE\"\n        });\n\t\t\t}\n\t\t);\n\t\tthis.addMessageHandler(\"SHOULD_ADD_RECEIVER\",\n\t\t\t(acc, ...args) => {\n\t\t\t\tconst containers = { ...this.state.containers };\n\t\t\t\tcontainers[acc[0].uuid] = acc[0];\n\t\t\t\treturn ({ containers });\n\t\t\t}\n\t\t);\n\t\tthis.addMessageHandler(\"SHOULD_ADD_RAYTRACER\",\n\t\t\t(acc, ...args) => {\n\t\t\t\tconst solvers = { ...this.state.solvers };\n\t\t\t\tsolvers[acc[0].uuid] = acc[0];\n\t\t\t\treturn ({ solvers });\n\t\t\t}\n    );\n    this.addMessageHandler(\"SHOULD_REMOVE_SOLVER\", (acc, ...args) => {\n      if (args[0] && this.state.solvers[args[0]]) {\n        const solvers = { ...this.state.solvers };\n        const selectedObject = this.state.selectedObject;\n        delete solvers[args[0]];\n        return {\n          selectedObject: selectedObject && selectedObject.uuid === args[0] ? ({} as Container) : selectedObject,\n          solvers,\n          lastUpdateReason: \"SHOULD_REMOVE_SOLVER\"\n        };\n      }\n      else {\n        return {}\n      }\n    });\n\t\tthis.addMessageHandler(\"SHOULD_ADD_RT60\",\n      (acc, ...args) => {\n        if (acc && acc[0]) {\n          const solvers = { ...this.state.solvers };\n          solvers[acc[0].uuid] = acc[0];\n          return ({ solvers });\n        }\n        else {\n          return ({});\n        }\n\t\t\t}\n\t\t);\n\t\tthis.addMessageHandler(\"SHOULD_ADD_FDTD\",\n\t\t\t(acc, ...args) => {\n\t\t\t\tconst solvers = { ...this.state.solvers };\n\t\t\t\tsolvers[acc[0].uuid] = acc[0];\n\t\t\t\treturn ({ solvers });\n\t\t\t}\n\t\t);\t\t\n\t\tthis.addMessageHandler(\"ADDED_ROOM\",\n\t\t\t(acc, ...args) => {\n\t\t\tconst containers = { ...this.state.containers };\n\t\t\tcontainers[args[0].uuid] = args[0];\n\t\t\treturn ({ containers });\n\t\t});\n\t\tthis.addMessageHandler(\"IMPORT_FILE\",\n\t\t\t(acc, ...args) => {\n\t\t\t\t// console.log(acc);\n\t\t\t\treturn {}\n\t\t\t}\n\t\t);\n\t\tthis.addMessageHandler(\"SIMULATION_DID_PLAY\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn ({\n\t\t\t\tsimulationRunning: true\n\t\t\t})\n\t\t});\n\t\tthis.addMessageHandler(\"SIMULATION_DID_PAUSE\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn({\n\t\t\t\tsimulationRunning: false\n\t\t\t})\n\t\t});\n\t\tthis.addMessageHandler(\"STATS_SETUP\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn({\n\t\t\t\tstats: Object.keys(args[0]).map(x => args[0][x]) as Stat[]\n\t\t\t});\n\t\t});\n\t\tthis.addMessageHandler(\"STATS_UPDATE\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn({\n\t\t\t\tstats: Object.keys(args[0]).map(x => args[0][x]) as Stat[]\n\t\t\t});\n    });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.canvas.current &&\n\t\t\tthis.props.messenger.postMessage(\n\t\t\t\t\"APP_MOUNTED\",\n\t\t\t\tthis.canvas.current\n\t\t\t);\n\t}\n\n\tshowImportDialog() {\n\t\tthis.setState({\n\t\t\timportDialogVisible: !this.state.importDialogVisible,\n\t\t\tlastUpdateReason: \"showImportDialog\"\n\t\t});\n\t}\n\thandleImportDialogClose(e?) {\n\t\tthis.setState({\n      importDialogVisible: !this.state.importDialogVisible,\n      lastUpdateReason: \"handleImportDialogClose\"\n    });\n\t}\n\thandleSettingsButtonClick(e?) {\n\t\tthis.setState({\n      settingsDrawerVisible: !this.state.settingsDrawerVisible,\n      lastUpdateReason: \"handleSettingsButtonClick\"\n    });\n\t}\n\n  handleObjectViewClick(object, e: React.MouseEvent) {\n    if (object instanceof Container && object['kind']!==\"room\") {\n      if (e.shiftKey) {\n        this.props.messenger.postMessage(\"APPEND_SELECTION\", [object])\n      }\n      else {\n        this.props.messenger.postMessage(\"SET_SELECTION\", [object]);\n      }\n    }\n    else if (object instanceof Solver) {\n      this.props.messenger.postMessage(\"SET_OBJECT_VIEW\", object)\n    }\n  }\n  handleObjectViewDelete(object: Container | Solver) {\n    if (object instanceof Container) {\n      this.props.messenger.postMessage(\"SHOULD_REMOVE_CONTAINER\", object.uuid);\n    }\n    else if (object instanceof Solver) {\n      this.props.messenger.postMessage(\"SHOULD_REMOVE_SOLVER\", object.uuid);\n    }\n  }\n\thandleObjectPropertyButtonClick(e: React.MouseEvent<HTMLInputElement, MouseEvent>) {\n\n\t}\n\thandleObjectPropertyValueChangeAsNumber(\n\t\tid: string,\n\t\tprop: string,\n\t\tvalueAsNumber: number\n\t) {\n\t\tconst { selectedObject } = this.state;\n\t\tselectedObject[prop] = valueAsNumber;\n\t\tthis.setState({\n\t\t\tselectedObject,\n\t\t\tlastUpdateReason: \"handleObjectPropertyValueChangeAsNumber\"\n\t\t\t\n\t\t});\n\t}\n\thandleObjectPropertyValueChangeAsString(\n\t\tid: string,\n\t\tprop: string,\n\t\tvalueAsString: string\n\t) {\n\t\tconst { selectedObject } = this.state;\n\t\tselectedObject[prop] = valueAsString;\n\t\tthis.setState({\n      selectedObject,\n      lastUpdateReason: \"handleObjectPropertyValueChangeAsString\"\n    });\n\t}\n\n\thandleObjectPropertyChange(e: ObjectPropertyInputEvent) {\n\t\tconst { selectedObject } = this.state;\n\t\tconst prop = e.name;\n\t\tswitch (e.type) {\n\t\t\tcase \"checkbox\":\n\t\t\t\tselectedObject[prop] = e.value;\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\tselectedObject[prop] = e.value;\n\t\t\t\tbreak;\n\t\t\tcase \"number\":\n\t\t\t\tselectedObject[prop] = Number(e.value);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tselectedObject[prop] = e.value;\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.setState({\n      selectedObject,\n      lastUpdateReason: \"handleObjectPropertyChange\"\n    });\n\t}\n\thandleSettingChange(e: React.ChangeEvent<HTMLInputElement>) {\n\t\tconst settings = { ...this.state.settings };\n\t\tconst id = e.currentTarget.id;\n\t\tsettings[id].value =\n\t\t\te.currentTarget.type === \"checkbox\"\n\t\t\t\t? e.currentTarget.checked\n\t\t\t\t: e.currentTarget.value;\n\t\tthis.setState(\n      {\n        settings,\n        lastUpdateReason: \"handleSettingChange\"\n      },\n      () => {\n        this.props.messenger.postMessage(\"SETTING_CHANGE\", {\n          setting: id,\n          value: settings[id].value\n        });\n      }\n    );\n\t}\n\n\t// shouldComponentUpdate(nextProps, nextState, nextContext) {\n\t// \tconsole.log(\"shouldComponentUpdate::nextState\", nextState);\n\t// \treturn true;\n\t// }\n\t\n\thandleMaterialBarClose(e) {\n\t\tthis.setState({\n\t\t\tmaterialDrawerOpen: false\n\t\t})\n\t}\n\thandleMaterialBarItemSelect(e) {\n\t}\n\t\n\tMaterialOptionListRenderer: ItemListRenderer<AcousticMaterial> = (props: IItemListRendererProps<AcousticMaterial>) => {\n\t\t\n\t\treturn (\n\t\t\t<div>\n\t\t\t{props.filteredItems.map((x, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div key={i}>\n\t\t\t\t\t\t{x.material}\n\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t\n\t\t\t})}\n\t\t\t</div>\n\t\t)\n\t};\n\t\n\trender() {\n\t\treturn (\n      <div>\n        <div>\n          <Navbar className=\"main-nav_bar\">\n            <Navbar.Group\n              align={Alignment.LEFT}\n              className=\"main-nav_bar-left_group\">\n              <Navbar.Group className=\"main-nav_bar-logo_text\">\n                cram.ui\n              </Navbar.Group>\n              <Navbar.Divider />\n              <Menu className=\"main-nav_bar-left_menu\">\n                <ButtonGroup minimal={true}>\n                  <Popover\n                    minimal={true}\n                    transitionDuration={20}\n                    position={Position.BOTTOM_LEFT}\n                    className=\"main-nav_bar-left_menu-popover-file\">\n                    <Button\n                      text=\"File\"\n                      className={\"main-nav_bar-left_menu-button\"}\n                    />\n                    <Menu>\n                      <MenuItem\n                        text={\n                          <MenuItemText\n                            text=\"New\"\n                            hotkey={Characters.SHIFT + \"N\"}\n                          />\n                        }\n                        onClick={e =>\n                          this.setState({ newWarningVisible: true })\n                        }\n                      />\n                      <MenuItem text=\"Save\" disabled></MenuItem>\n                      <MenuDivider />\n                      <MenuItem\n                        text=\"Import\"\n                        onClick={this.showImportDialog}></MenuItem>\n                    </Menu>\n                  </Popover>\n                  <Popover\n                    minimal={true}\n                    transitionDuration={10}\n                    position={Position.BOTTOM_LEFT}>\n                    <Button\n                      text=\"Edit\"\n                      className={\"main-nav_bar-left_menu-button\"}\n                    />\n                    <Menu>\n                      <MenuItem text=\"Undo\" disabled></MenuItem>\n                      <MenuItem text=\"Redo\" disabled></MenuItem>\n                      <MenuDivider />\n                      <MenuItem text=\"Cut\" disabled></MenuItem>\n                      <MenuItem text=\"Copy\" disabled></MenuItem>\n                      <MenuItem text=\"Paste\" disabled></MenuItem>\n                    </Menu>\n                  </Popover>\n                  <Popover\n                    minimal={true}\n                    transitionDuration={10}\n                    position={Position.BOTTOM_LEFT}>\n                    <Button\n                      text=\"Add\"\n                      className={\"main-nav_bar-left_menu-button\"}\n                    />\n                    <Menu>\n                      <MenuItem\n                        text={\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}>\n                            <div>Source</div>\n                            <div style={{ color: Colors.LIGHT_GRAY1 }}>\n                            </div>\n                          </div>\n                        }\n                        onClick={() =>\n                          this.props.messenger.postMessage(\"SHOULD_ADD_SOURCE\")\n                        }\n                      />\n                      <MenuItem\n                        text=\"Receiver\"\n                        onClick={() =>\n                          this.props.messenger.postMessage(\n                            \"SHOULD_ADD_RECEIVER\"\n                          )\n                        }></MenuItem>\n                      <MenuDivider />\n                      <MenuItem\n                        text={\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}>\n                            <div>Ray Tracer</div>\n                            <div style={{ color: Colors.LIGHT_GRAY1 }}>\n                            </div>\n                          </div>\n                        }\n                        onClick={() =>\n                          this.props.messenger.postMessage(\n                            \"SHOULD_ADD_RAYTRACER\"\n                          )\n                        }\n                      />\n\n                      <MenuItem\n                        text={\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}>\n                            <div>FDTD</div>\n                            <div style={{ color: Colors.LIGHT_GRAY1 }}>\n                            </div>\n                          </div>\n                        }\n                        disabled\n                        onClick={() =>\n                          this.props.messenger.postMessage(\"SHOULD_ADD_FDTD\")\n                        }\n                      />\n                      <MenuItem\n                        text={\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}>\n                            <div>RT60</div>\n                            <div style={{ color: Colors.LIGHT_GRAY1 }}>\n                            </div>\n                          </div>\n                        }\n                        onClick={() =>\n                          this.props.messenger.postMessage(\"SHOULD_ADD_RT60\")\n                        }\n                      />\n                    </Menu>\n                  </Popover>\n                </ButtonGroup>\n              </Menu>\n            </Navbar.Group>\n            <Navbar.Group\n              align={Alignment.RIGHT}\n\t\t\t\t\t\t\tclassName=\"main-nav_bar-right_group\"\n\t\t\t\t\t\t>\n              <Button\n                icon=\"cog\"\n                minimal={true}\n                className={\"main-nav_bar-right_menu-button\"}\n                disabled\n                onClick={this.handleSettingsButtonClick}></Button>\n            </Navbar.Group>\n          </Navbar>\n        </div>\n        <Alert\n          isOpen={this.state.newWarningVisible}\n          transitionDuration={100}\n          canOutsideClickCancel\n          canEscapeKeyCancel\n          cancelButtonText=\"No, cancel\"\n          confirmButtonText=\"Yes, start over\"\n          intent={Intent.DANGER}\n          onConfirm={e => {\n            this.props.messenger.postMessage(\"NEW\");\n            this.setState({\n              newWarningVisible: false\n            });\n          }}\n          onCancel={e => {\n            this.setState({\n              newWarningVisible: false\n            });\n          }}>\n          Are you sure you want to start over?\n        </Alert>\n        <SettingsDrawer\n          size={\"55%\"}\n          onClose={this.handleSettingsButtonClick}\n          isOpen={this.state.settingsDrawerVisible}\n          onSubmit={() => {\n            this.setState({\n              settings: this.props.messenger.postMessage(\"SUBMIT_ALL_SETTINGS\")[0]\n            });\n          }}\n        >\n          <SettingsPanel messenger={this.props.messenger}/>\n          <input\n            name=\"background\"\n            type=\"color\"\n            onChange={e =>\n              this.props.messenger.postMessage(\n                \"RENDERER_SHOULD_CHANGE_BACKGROUND\",\n                e.currentTarget.value\n              )\n            }\n          />\n          <input\n            name=\"fogColor\"\n            type=\"color\"\n            onChange={e =>\n              this.props.messenger.postMessage(\n                \"RENDERER_SHOULD_CHANGE_FOG_COLOR\",\n                e.currentTarget.value\n              )\n            }\n          />\n        </SettingsDrawer>\n\n        <Drawer\n          position={Position.RIGHT}\n          size=\"100%\"\n          autoFocus={true}\n          enforceFocus={true}\n          hasBackdrop={true}\n          onClose={this.handleMaterialBarClose}\n          canOutsideClickClose={true}\n          canEscapeKeyClose={true}\n          isCloseButtonShown={true}\n          title=\"Material Selection\"\n          isOpen={this.state.materialDrawerOpen}>\n          <MaterialDrawer\n            messenger={this.props.messenger}\n            object={\n              this.state.selectedObject &&\n              this.state.selectedObject instanceof Surface\n                ? this.state.selectedObject\n                : undefined\n            }\n          />\n        </Drawer>\n\n\n        <ImportDialog\n          onImport={file => {\n            this.props.messenger.postMessage(\"IMPORT_FILE\", file);\n            this.handleImportDialogClose();\n          }}\n          isOpen={this.state.importDialogVisible}\n          autoFocus={true}\n          canEscapeKeyClose={true}\n          canOutsideClickClose={true}\n          enforceFocus={false}\n          usePortal={true}\n          data={{ themeName: \"dark\" }}\n          onClose={this.handleImportDialogClose}\n          onDrop={file => {\n            this.props.messenger.postMessage(\"IMPORT_FILE\", file);\n          }}\n        />\n        <SplitterLayout\n          secondaryMinSize={5}\n          primaryMinSize={50}\n          secondaryInitialSize={200}\n          primaryIndex={1}\n          customClassName=\"modified-splitter-layout\">\n          \n          {/* object view */}\n          <PanelContainer>\n            <ObjectView\n                containers={this.state.containers}\n                solvers={this.state.solvers}\n                onClick={this.handleObjectViewClick}\n                onDelete={this.handleObjectViewDelete}\n            />\n          </PanelContainer>\n          \n\n          \n          {/* center and right */}\n          <SplitterLayout\n            secondaryMinSize={0}\n            primaryMinSize={50}\n            percentage={true}\n            secondaryInitialSize={35}\n            primaryIndex={0}>\n            \n            {/* webgl canvas & gutter*/}\n            <SplitterLayout\n              vertical={true}\n              primaryMinSize={40}\n              secondaryMinSize={1}\n              secondaryInitialSize={40}\n              percentage={true}\n              customClassName=\"canvas-gutter\"\n              onSecondaryPaneSizeChange={(value: number) => { }}>\n              \n              <div className=\"webgl-canvas\">\n                <canvas id=\"renderer-canvas\" ref={this.canvas} />\n              </div>\n              \n              <PanelContainer className=\"panel full-bottom gutter-panel\">\n                <Gutter\n                  messenger={this.props.messenger}\n                  solvers={this.state.solvers}\n                  key={\"gutter-panel\"}\n                />\n              </PanelContainer>\n              \n            </SplitterLayout>\n            \n            <PanelContainer>\n              {(() => {\n                if (Object.keys(this.state.selectedObject).length > 0) {\n                  return (\n                    <ObjectProperties\n                      messenger={this.props.messenger}\n                      object={this.state.selectedObject}\n                      onPropertyChange={this.handleObjectPropertyChange}\n                      onPropertyValueChangeAsNumber={\n                        this.handleObjectPropertyValueChangeAsNumber\n                      }\n                      onPropertyValueChangeAsString={\n                        this.handleObjectPropertyValueChangeAsString\n                      }\n                      onButtonClick={this.handleObjectPropertyButtonClick}\n                    />\n                  );\n                }\n              })()}\n            </PanelContainer>\n            \n          </SplitterLayout>\n        </SplitterLayout>\n      </div>\n    );\n\t}\n}\n","import { KeyValuePair } from \"./common/key-value-pair\";\nimport { uuid } from \"uuidv4\";\n\nexport type EventHandler = (...args) => void;\n\n\n\nexport default class Messenger{\n    private dictionary: KeyValuePair<KeyValuePair<EventHandler>>;\n    private messageListeners: KeyValuePair<EventHandler>;\n    lastMessage: string;\n    constructor() {\n        this.dictionary = {};\n        this.messageListeners = {};\n        this.lastMessage = \"\";\n    }\n    addMessageHandler(message: string, handler: EventHandler): string[] {\n        const id = uuid();\n        if (!this.dictionary[message]) {\n            this.dictionary[message] = {\n                [id]: handler\n            }\n            return [message, id];\n        } else {\n            this.dictionary[message][id] = handler;\n            return [message, id];\n        }\n    }\n    removeMessage(message: string) {\n        if (this.dictionary[message]) {\n            delete this.dictionary[message];\n        }\n    }\n    removeMessageHandler(message: string, id: string) {\n        if (this.dictionary[message][id]) {\n            delete this.dictionary[message][id];\n        }\n    }\n    postMessage(message: string, ...args) {\n        if (message != this.lastMessage) {\n            this.lastMessage = message;\n            // console.log(message);\n        }\n        // if message exists\n        if (this.dictionary[message]) {\n            // accumulates the results of each handler\n            let accumulator = [] as any[];\n            \n            // for each message handler\n            Object.keys(this.dictionary[message]).forEach(key => {\n                // call the message handler with the acculated results and the original arguments\n                const results = this.dictionary[message][key](accumulator, ...args);\n                accumulator.push(results);\n            })\n            return accumulator;\n        }\n        return [] as any[];\n    }\n    addMessageListener(callback: EventHandler) {\n        const id = uuid();\n        this.messageListeners[id] = callback;\n    }\n    removeMessageListener(id) {\n        if (this.messageListeners[id]) {\n            delete this.messageListeners[id];\n        }\n    }\n}","//@ts-ignore\nimport * as THREE from \"three\";\nimport matcapPorcelainWhite from \"../res/matcaps/matcap-porcelain-white.jpg\";\nimport matcapRazin from \"../res/matcaps/razin.png\";\nimport triPattern from \"../res/textures/tri_pattern.jpg\"\nimport matcapOverexposedOutline from \"../res/matcaps/overexposed-outline.png\";\nimport matcapOutline from \"../res/matcaps/outline.png\";\nimport matcapUnderShadow from \"../res/matcaps/undershadow.png\";\nimport checker from '../res/textures/checker.png';\n\nconst loader = new THREE.TextureLoader();\nexport const MATCAP_PORCELAIN_WHITE = loader.load(matcapPorcelainWhite);\nexport const MATCAP_OUTLINE = loader.load(matcapOutline);\nexport const MATCAP_OVEREXPOSED_OUTLINE = loader.load(matcapOverexposedOutline);\nexport const MATCAP_RAZIN = loader.load(matcapRazin);\nexport const MATCAP_UNDER_SHADOW = loader.load(matcapUnderShadow);\nexport const TEXTURE_TRI_PATTERN = loader.load(triPattern);\nexport const TEXTURE_CHECKER = loader.load(checker);","import * as THREE from \"three\";\nimport Container, { ContainerProps, ContainerSaveObject } from \"./container\";\nimport chroma from 'chroma-js';\nimport glow from '../render/shaders/glow';\nimport { MATCAP_PORCELAIN_WHITE, MATCAP_UNDER_SHADOW } from \"./asset-store\";\n\nconst defaults = {\n  color: 0xa2c982\n};\n\nexport interface SourceSaveObject extends ContainerSaveObject{\n  color: number;\n}\n\n\nexport interface SourceProps extends ContainerProps {\n  f?: (t: number) => number;\n  theta?: number;\n  phi?: number;\n}\n\n\nexport default class Source extends Container {\n  f: (t: number) => number;\n  theta: number;\n  phi: number;\n  numRays: number;\n  mesh: THREE.Mesh;\n  selectedMaterial: THREE.MeshMatcapMaterial;\n  normalMaterial: THREE.MeshMatcapMaterial;\n  constructor(name: string, props?: SourceProps) {\n    super(name);\n    this.kind = \"source\";\n\n\n    this.selectedMaterial = new THREE.MeshMatcapMaterial({\n      color: chroma(defaults.color).brighten(1).num(),\n      matcap: MATCAP_UNDER_SHADOW\n    });\n    \n    this.normalMaterial = new THREE.MeshMatcapMaterial({\n      color: defaults.color,\n      matcap: MATCAP_PORCELAIN_WHITE\n    });\n    this.mesh = new THREE.Mesh(\n      new THREE.SphereGeometry(0.1, 32, 16),\n      // pointsGeometry,\n      // pointsMaterial,\n      this.normalMaterial\n    );\n    this.mesh.userData[\"kind\"] = \"source\";\n    this.add(this.mesh);\n    \n   \n\n    \n    \n    this.f = (props && props.f) || ((t) => Math.sin(t));\n    this.theta = (props && props.theta) || Math.PI / 4;\n    this.phi = (props && props.phi) || Math.PI / 2;\n    this.numRays = 0;\n    this.select = () => {\n     if (!this.selected) {\n       this.selected = true;\n       let brighterColor = chroma((this.mesh.material as THREE.MeshMatcapMaterial).color.getHex())\n         .brighten(1)\n         .num();\n       this.selectedMaterial.color.setHex(brighterColor);\n       this.mesh.material = this.selectedMaterial;\n     }\n    };\n    this.deselect = () => {\n      if (this.selected) {\n        this.selected = false;\n        this.mesh.material = this.normalMaterial;\n      }\n    };\n    this.renderCallback = (time?: number) => { };\n    this.save = () => {\n      const name = this.name;\n      const visible = this.visible;\n      const position = this.position.toArray();\n      const scale = this.scale.toArray();\n      const rotation = this.rotation.toArray();\n      const color = this.getColorAsNumber();\n      const uuid = this.uuid;\n      return {\n        name,\n        visible,\n        position,\n        scale,\n        rotation,\n        color,\n        uuid\n      }\n    }\n    this.restore = (state: SourceSaveObject) => {\n      this.name = state.name;\n      this.visible = state.visible;\n      this.position.set(state.position[0], state.position[1], state.position[2]);\n      this.scale.set(state.scale[0], state.scale[1], state.scale[2]);\n      this.rotation.set(state.rotation[0], state.rotation[1], state.rotation[2]);\n      this.color = state.color;\n      this.uuid = state.uuid;\n    }\n  }\n  \n  getColorAsNumber() {\n    return (this.mesh.material as THREE.MeshBasicMaterial).color.getHex();\n  }\n  getColorAsString() {\n    return String.fromCharCode(35) + (this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\n  }\n  get color() {\n    return String.fromCharCode(35)+(this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\n  }\n  set color(col: string | number) {\n    if (typeof col === \"string\") {\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setStyle(col);\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\n    }\n    else {\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setHex(col);\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\n    }\n  }\n}\n","\nimport * as THREE from \"three\";\nimport Container, { ContainerProps, ContainerSaveObject } from \"./container\";\nimport chroma from \"chroma-js\";\nimport { MATCAP_PORCELAIN_WHITE, MATCAP_UNDER_SHADOW } from \"./asset-store\";\n\n// import { vs, fs } from '../render/shaders/glow';\n\n\nexport interface ReceiverSaveObject extends ContainerSaveObject {\n  color: number;\n}\n\nexport interface ReceiverProps extends ContainerProps{\n    \n}\n\nconst defaults = {\n  color: 0xdd6f6f,\n  selectedColor: 0x9fcbff\n};\n\nexport default class Receiver extends Container{\n  mesh: THREE.Mesh;\n  selectedMaterial: THREE.MeshMatcapMaterial;\n  normalMaterial: THREE.MeshMatcapMaterial;\n  constructor(name: string, props?: ReceiverProps) {\n    super(name);\n    this.kind = \"receiver\";\n//     const glowmaterial = new THREE.ShaderMaterial({\n//       uniforms: {\n//         c: { type: \"f\", value: 1.0 },\n//         p: { type: \"f\", value: 1.4 },\n//         glowColor: { type: \"c\", value: new THREE.Color(0xffff00) },\n//         viewVector: { type: \"v3\", value: camera.position }\n//       },\n//       vertexShader: vs,\n//       fragmentShader: fs,\n//       side: THREE.FrontSide,\n//       blending: THREE.AdditiveBlending,\n//       transparent: true\n// });\n     this.selectedMaterial = new THREE.MeshMatcapMaterial({\n       color: defaults.color,\n       matcap: MATCAP_UNDER_SHADOW\n     });\n\n     this.normalMaterial = new THREE.MeshMatcapMaterial({\n       color: defaults.color,\n       matcap: MATCAP_PORCELAIN_WHITE\n     });\n    this.mesh = new THREE.Mesh(\n      new THREE.SphereGeometry(0.1, 32, 16),\n      this.normalMaterial\n    );\n    this.mesh.userData['kind'] = 'receiver';\n    this.add(this.mesh);\n    this.select = () => {\n      if (!this.selected) {\n        this.selected = true;\n        let brighterColor = chroma((this.mesh.material as THREE.MeshMatcapMaterial).color.getHex()).brighten(1).num();\n        this.selectedMaterial.color.setHex(brighterColor);\n        this.mesh.material = this.selectedMaterial;\n      }\n    };\n    this.deselect = () => {\n      if (this.selected) {\n        this.selected = false;\n        this.mesh.material = this.normalMaterial;\n      }\n    };\n    this.renderCallback = (time?: number) => {};\n    this.save = () => {\n      const name = this.name;\n      const visible = this.visible;\n      const position = this.position.toArray();\n      const scale = this.scale.toArray();\n      const rotation = this.rotation.toArray();\n      const color = this.getColorAsNumber();\n      const uuid = this.uuid;\n      return {\n        name,\n        visible,\n        position,\n        scale,\n        rotation,\n        color,\n        uuid\n      };\n    };\n    this.restore = (state: ReceiverSaveObject) => {\n      this.name = state.name;\n      this.visible = state.visible;\n      this.position.set(state.position[0], state.position[1], state.position[2]);\n      this.scale.set(state.scale[0], state.scale[1], state.scale[2]);\n      this.rotation.set(state.rotation[0], state.rotation[1], state.rotation[2]);\n      this.color = state.color;\n      this.uuid = state.uuid;\n    };\n  }\n  getColorAsNumber() {\n    return (this.mesh.material as THREE.MeshBasicMaterial).color.getHex();\n  }\n  getColorAsString() {\n    return String.fromCharCode(35) + (this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\n  }\n  get color(){\n    return String.fromCharCode(35)+(this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\n  }\n  set color(col: string | number) {\n    if (typeof col === \"string\") {\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setStyle(col);\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\n    }\n    else {\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setHex(col);\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\n    }\n  }\n\n}","/* eslint-disable no-lone-blocks */\n\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * @author ScieCode / http://github.com/sciecode\n */\n\n \n \nimport { EventDispatcher, MOUSE, Quaternion, Spherical, TOUCH, Vector2, Vector3 } from \"three/build/three.module.js\";\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function (object, domElement) {\n  if (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n  if (domElement === document)\n    console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n\n  this.object = object;\n  this.domElement = domElement;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  // How far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0; // radians\n  this.maxPolarAngle = Math.PI; // radians\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = false;\n  this.dampingFactor = 0.05;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0;\n\n  // Set to false to disable panning\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = false; // if true, pan in screen-space\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n  // Set to false to disable use of the keys\n  this.enableKeys = false;\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  // Mouse buttons\n  this.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n  // Touch fingers\n  this.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n  this.keyMods = {\n    pan: \"shiftKey\",\n    dolly: \"metaKey\",\n    noMiddleButton: \"altKey\"\n  };\n  \n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return spherical.theta;\n  };\n\n  this.saveState = function () {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.reset = function () {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n\n    scope.update();\n\n    state = STATE.NONE;\n  };\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = (function () {\n    var offset = new Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new Vector3();\n    var lastQuaternion = new Quaternion();\n\n    return function update() {\n      var position = scope.object.position;\n\n      offset.copy(position).sub(scope.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // angle from z-axis around y-axis\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      if (scope.enableDamping) {\n        spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n        spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n      } else {\n        spherical.theta += sphericalDelta.theta;\n        spherical.phi += sphericalDelta.phi;\n      }\n\n      // restrict theta to be between desired limits\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n      // restrict phi to be between desired limits\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n      spherical.makeSafe();\n\n      spherical.radius *= scale;\n\n      // restrict radius to be between desired limits\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n      // move target to panned location\n\n      if (scope.enableDamping === true) {\n        scope.target.addScaledVector(panOffset, scope.dampingFactor);\n      } else {\n        scope.target.add(panOffset);\n      }\n\n      offset.setFromSpherical(spherical);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(scope.target).add(offset);\n\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n\n        panOffset.set(0, 0, 0);\n      }\n\n      scale = 1;\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n        scope.dispatchEvent(changeEvent);\n\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n\n        return true;\n      }\n\n      return false;\n    };\n  })();\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n    scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n    scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n\n    scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n    scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n    scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.domElement.removeEventListener(\"keydown\", onKeyDown, false);\n\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  };\n\n  //\n  // internals\n  //\n\n  var scope = this;\n  \n  if (!scope.keyMods) {\n    scope.keyMods = {\n      pan: \"shiftKey\",\n      dolly: \"metaKey\",\n      noMiddleButton: \"altKey\"\n    };\n  }\n\n  var changeEvent = { type: \"change\" };\n  var startEvent = { type: \"start\" };\n  var endEvent = { type: \"end\" };\n\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_PAN: 4,\n    TOUCH_DOLLY_PAN: 5,\n    TOUCH_DOLLY_ROTATE: 6\n  };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new Spherical();\n  var sphericalDelta = new Spherical();\n\n  var scale = 1;\n  var panOffset = new Vector3();\n  var zoomChanged = false;\n\n  var rotateStart = new Vector2();\n  var rotateEnd = new Vector2();\n  var rotateDelta = new Vector2();\n\n  var panStart = new Vector2();\n  var panEnd = new Vector2();\n  var panDelta = new Vector2();\n\n  var dollyStart = new Vector2();\n  var dollyEnd = new Vector2();\n  var dollyDelta = new Vector2();\n\n  function getAutoRotationAngle() {\n    return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft(angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = (function () {\n    var v = new Vector3();\n\n    return function panLeft(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n      v.multiplyScalar(-distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  var panUp = (function () {\n    var v = new Vector3();\n\n    return function panUp(distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = (function () {\n    var offset = new Vector3();\n\n    return function pan(deltaX, deltaY) {\n      var element = scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0);\n\n        // we use only clientHeight here so aspect ratio does not distort speed\n        panLeft((2 * deltaX * targetDistance) / element.clientHeight, scope.object.matrix);\n        panUp((2 * deltaY * targetDistance) / element.clientHeight, scope.object.matrix);\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft((deltaX * (scope.object.right - scope.object.left)) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n        panUp((deltaY * (scope.object.top - scope.object.bottom)) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\");\n        scope.enablePan = false;\n      }\n    };\n  })();\n\n  function dollyIn(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyOut(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n      scope.enableZoom = false;\n    }\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate(event) {\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n    rotateEnd.set(event.clientX, event.clientY);\n\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n\n    var element = scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n    dollyEnd.set(event.clientX, event.clientY);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyIn(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyOut(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n    panEnd.set(event.clientX, event.clientY);\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    scope.update();\n  }\n\n  function handleMouseUp(/*event*/) {\n    // no-op\n  }\n\n  function handleMouseWheel(event) {\n    if (event.deltaY < 0) {\n      dollyOut(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyIn(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown(event) {\n    var needsUpdate = false;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n      default: break;\n    }\n\n    if (needsUpdate) {\n      // prevent the browser from scrolling on cursor keys\n      event.preventDefault();\n\n      scope.update();\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n    if (event.touches.length === 1) {\n      rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      rotateStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartPan(event) {\n    if (event.touches.length === 1) {\n      panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyStart.set(0, distance);\n  }\n\n  function handleTouchStartDollyPan(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n\n    if (scope.enablePan) handleTouchStartPan(event);\n  }\n\n  function handleTouchStartDollyRotate(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n\n    if (scope.enableRotate) handleTouchStartRotate(event);\n  }\n\n  function handleTouchMoveRotate(event) {\n    if (event.touches.length === 1) {\n      rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      rotateEnd.set(x, y);\n    }\n\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n\n    var element = scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n  }\n\n  function handleTouchMovePan(event) {\n    if (event.touches.length === 1) {\n      panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panEnd.set(x, y);\n    }\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n  }\n\n  function handleTouchMoveDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyEnd.set(0, distance);\n\n    dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n    dollyIn(dollyDelta.y);\n\n    dollyStart.copy(dollyEnd);\n  }\n\n  function handleTouchMoveDollyPan(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n\n    if (scope.enablePan) handleTouchMovePan(event);\n  }\n\n  function handleTouchMoveDollyRotate(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n\n    if (scope.enableRotate) handleTouchMoveRotate(event);\n  }\n\n  function handleTouchEnd(/*event*/) {\n    // no-op\n  }\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown(event) {\n    if (scope.enabled === false) return;\n\n    // Prevent the browser from scrolling.\n\n    event.preventDefault();\n\n    // Manually set the focus since calling preventDefault above\n    // prevents the browser from setting it automatically.\n\n    scope.domElement.focus ? scope.domElement.focus() : window.focus();\n    switch (event.button) {\n      case 0:\n        {\n          if (event[scope.keyMods.noMiddleButton]) {\n            if (event[scope.keyMods.pan] && !event[scope.keyMods.dolly]) {\n              if (scope.enablePan === false) { return; }\n              handleMouseDownPan(event);\n              state = STATE.PAN;\n            }\n            else if (event[scope.keyMods.dolly]) {\n              if (scope.enableZoom === false) { return; }\n              handleMouseDownDolly(event);\n              state = STATE.DOLLY;\n            }\n            else {\n              if (scope.enableRotate === false) {\n                return;\n              }\n              handleMouseDownRotate(event);\n              state = STATE.ROTATE;\n            }\n          }\n          else {\n            state = STATE.NONE;\n          }\n        } break;\n      case 1: {\n        if (event[scope.keyMods.pan] && !event[scope.keyMods.dolly]) {\n          if (scope.enablePan === false) { return; }\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        }\n        else if (event[scope.keyMods.dolly]) {\n          if (scope.enableZoom === false) { return; }\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n        }\n        else {\n          if (scope.enableRotate === false) {\n            return;\n          }\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        }\n      }\n        break;\n\n      case 2: {\n        state = STATE.NONE;\n      }\n        break;\n      default: break;\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener(\"mousemove\", onMouseMove, false);\n      document.addEventListener(\"mouseup\", onMouseUp, false);\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleMouseMoveRotate(event);\n\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n\n        handleMouseMoveDolly(event);\n\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n\n        handleMouseMovePan(event);\n\n        break;\n      default: break;\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n\n    handleMouseUp(event);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    scope.dispatchEvent(startEvent);\n\n    handleMouseWheel(event);\n\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1:\n        switch (scope.touches.ONE) {\n          case TOUCH.ROTATE:\n            if (scope.enableRotate === false) return;\n\n            handleTouchStartRotate(event);\n\n            state = STATE.TOUCH_ROTATE;\n\n            break;\n\n          case TOUCH.PAN:\n            if (scope.enablePan === false) return;\n\n            handleTouchStartPan(event);\n\n            state = STATE.TOUCH_PAN;\n\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      case 2:\n        switch (scope.touches.TWO) {\n          case TOUCH.DOLLY_PAN:\n            if (scope.enableZoom === false && scope.enablePan === false) return;\n\n            handleTouchStartDollyPan(event);\n\n            state = STATE.TOUCH_DOLLY_PAN;\n\n            break;\n\n          case TOUCH.DOLLY_ROTATE:\n            if (scope.enableZoom === false && scope.enableRotate === false) return;\n\n            handleTouchStartDollyRotate(event);\n\n            state = STATE.TOUCH_DOLLY_ROTATE;\n\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (state) {\n      case STATE.TOUCH_ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleTouchMoveRotate(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_PAN:\n        if (scope.enablePan === false) return;\n\n        handleTouchMovePan(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_DOLLY_PAN:\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n\n        handleTouchMoveDollyPan(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_DOLLY_ROTATE:\n        if (scope.enableZoom === false && scope.enableRotate === false) return;\n\n        handleTouchMoveDollyRotate(event);\n\n        scope.update();\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd(event) {\n    if (scope.enabled === false) return;\n\n    handleTouchEnd(event);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n  }\n\n  //\n\n  scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n\n  scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n  scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n\n  scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n  scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n  scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n\n  scope.domElement.addEventListener(\"keydown\", onKeyDown, false);\n\n  // make sure element can receive keys.\n\n  if (scope.domElement.tabIndex === -1) {\n    scope.domElement.tabIndex = 0;\n  }\n\n  // force an update at start\n\n  this.update();\n};\n\nOrbitControls.prototype = Object.create(EventDispatcher.prototype);\nOrbitControls.prototype.constructor = OrbitControls;\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function (object, domElement) {\n  OrbitControls.call(this, object, domElement);\n\n  this.mouseButtons.LEFT = MOUSE.PAN;\n  this.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n  this.touches.ONE = TOUCH.PAN;\n  this.touches.TWO = TOUCH.DOLLY_ROTATE;\n};\n\nMapControls.prototype = Object.create(EventDispatcher.prototype);\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","export default class Timer {\n  private t1: number;\n  dt: number;\n  time: number;\n  progress: number;\n  length: number;\n  onFinish: (...args) => void\n  constructor(length: number, onFinish?: (...args) => void) {\n    this.length = length;\n    this.progress = 0;\n    this.time = 0;\n    this.dt = 0;\n    this.t1 = 0;\n    this.onFinish = onFinish || (() => { });\n  }\n  start() {\n    this.t1 = Date.now();\n  }\n  tick() {\n    const t2 = Date.now()\n    this.dt = t2 - this.t1;\n    this.time += this.dt;\n    this.progress = this.time / this.length;\n    this.t1 = t2;\n    if (this.progress > 1.0) {\n      this.progress = 1.0;\n      this.onFinish(this);\n    };\n    return this.progress;\n  }\n}\n","import { Vector3 } from 'three';\n\nexport function lerp(a: number, b: number, amt: number) {\n  return a + (b - a) * amt;\n}\n\nexport function lerp3(a: Vector3, b: Vector3, amt: number) {\n  return new Vector3(\n\t\tlerp(a.x, b.x, amt),\n\t\tlerp(a.y, b.y, amt),\n\t\tlerp(a.z, b.z, amt)\n  );\n}","/*\n * Easing Functions - inspired from http:\n * only considering the t value for the range [0, 1] => [0, 1]\n */\nexport const EasingFunctions = {\n\t/**\n\t * no easing, no acceleration\n\t */\n\tlinear: (t: number) => t,\n\n\t/**\n\t *accelerating from zero velocity\n\t */\n\teaseInQuad: (t: number) => t * t,\n\n\t/**\n\t *decelerating to zero velocity\n\t */\n\teaseOutQuad: (t: number) => t * (2 - t),\n\n\t/**\n\t *acceleration until halfway, then deceleration\n\t */\n\teaseInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n\n\t/**\n\t *accelerating from zero velocity\n\t */\n\teaseInCubic: (t: number) => t * t * t,\n\n\t/**\n\t *decelerating to zero velocity\n\t */\n  easeOutCubic: (t: number) => --t * t * t + 1,\n  \n\t/**\n\t * acceleration until halfway, then deceleration\n\t */\n\teaseInOutCubic: (t: number) =>\n    t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  \n\t/**\n\t * accelerating from zero velocity\n\t */\n  easeInQuart: (t: number) => t * t * t * t,\n  \n\t/**\n\t * decelerating to zero velocity\n\t */\n  easeOutQuart: (t: number) => 1 - --t * t * t * t,\n  \n\n\t/**\n\t * acceleration until halfway, then deceleration\n\t */\n\teaseInOutQuart: (t: number) =>\n    t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\n  \n\t/**\n\t *  accelerating from zero velocity\n\t */\n  easeInQuint: (t: number) => t * t * t * t * t,\n  \n\t/**\n\t * decelerating to zero velocity\n\t */\n  easeOutQuint: (t: number) => 1 + --t * t * t * t * t,\n  \n\t/**\n\t * acceleration until halfway, then deceleration\n\t */\n\teaseInOutQuint: (t: number) =>\n\t\tt < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t\n};\n\nexport default EasingFunctions;\n","import * as THREE from 'three';\nimport Container from '../../objects/container';\nimport { TEXTURE_CHECKER } from '../../objects/asset-store';\n\nexport interface GridProps {\n\tsize?: number;\n\tdivisions?: number;\n\tcolor1?: number;\n\tcolor2?: number;\n\tfill?: boolean;\n}\n\nexport default class Grid extends Container{\n\tgridHelper: THREE.GridHelper;\n  constructor(name?: string, props?: GridProps) {\n\t\tsuper(name || \"grid\");\n\n \n\t\t\n\t\tconst size = (props && props.size) || 1000;\n\t\tconst divisions = (props && props.divisions) || 100;\n\t\tconst color1 = (props && props.color1) || 0xd4d6d8;\n\t\tconst color2 = (props && props.color2) || 0xe4e7e8;\n\t\t\n\n\t\tTEXTURE_CHECKER.wrapS = THREE.RepeatWrapping;\n\t\tTEXTURE_CHECKER.wrapT = THREE.RepeatWrapping;\n\t\tTEXTURE_CHECKER.magFilter = THREE.NearestFilter;\n    TEXTURE_CHECKER.repeat.set(size/20, size/20);\n\n    const planeGeo = new THREE.PlaneBufferGeometry(size, size);\n    const planeMat = new THREE.MeshPhongMaterial({\n      map: TEXTURE_CHECKER,\n\t\t\tside: THREE.FrontSide,\n\t\t\ttransparent: true,\n\t\t\topacity: 0.05,\n\t\t});\n    const mesh = new THREE.Mesh(planeGeo, planeMat);\n\n\t\t\n\t\tthis.gridHelper = new THREE.GridHelper(size, divisions, color1, color2);\n\t\t((this.gridHelper.geometry as THREE.BufferGeometry).getAttribute(\"position\") as THREE.BufferAttribute).setXYZ(200, 0, 0, 0);\n\t\t((this.gridHelper.geometry as THREE.BufferGeometry).getAttribute(\"position\") as THREE.BufferAttribute).setXYZ(201, 0, 0, 0);\n\t\t((this.gridHelper.geometry as THREE.BufferGeometry).getAttribute(\"position\") as THREE.BufferAttribute).setXYZ(202, 0, 0, 0);\n\t\t((this.gridHelper.geometry as THREE.BufferGeometry).getAttribute(\"position\") as THREE.BufferAttribute).setXYZ(203, 0, 0, 0);\n\t\t\n\n\t\tthis.gridHelper.rotation.set(Math.PI / 2, 0, 0, \"XYZ\");\n\t\tthis.gridHelper.renderOrder = -1;\n\t  const material = this.gridHelper.material as THREE.LineBasicMaterial;\n\t  material.transparent = true;\n\t  material.opacity = 0.2;\n\t  material.color.setRGB(0, 0, 0);\n\t  this.add(this.gridHelper);\n\t  this.add(mesh);\n\t}\n\tget mesh() {\n\t\treturn this.children[1];\n\t}\n}\n","export const camera = {\n\tmetadata: {\n\t\tversion: 4.5,\n\t\ttype: \"Object\",\n\t\tgenerator: \"Object3D.toJSON\"\n\t},\n\tobject: {\n\t\ttype: \"PerspectiveCamera\",\n\t\tlayers: 1,\n\t\tpos: [-25, -5, 18],\n\t\tquat: [0.5107911926040906, -0.24667491182053727, -0.358141362070794, 0.741605427576213],\n\t\tfov: 25,\n\t\tzoom: 1,\n\t\tnear: 0.0001,\n\t\tfar: 500,\n\t\tfocus: 10,\n\t\taspect: 2.3666666666666667,\n\t\tfilmGauge: 35,\n\t\tfilmOffset: 0,\n\t\ttarget: [0,0,0]\n\t}\n};\n\nexport default {\n\tcamera: JSON.stringify(camera)\n};\n","import * as THREE from \"three\";\n\nimport Container from \"../../objects/container\";\n\nexport interface AxesProps {\n  Xaxis?: boolean;\n  Yaxis?: boolean;\n  Zaxis?: boolean;\n}\n\n\nexport default class Axes extends Container {\n  Xaxis: THREE.Line;\n  Yaxis: THREE.Line;\n  Zaxis: THREE.Line;\n\tconstructor(name?: string, props?: AxesProps) {\n\t\tsuper(name || \"axes\");\n\t\tthis.Xaxis = new THREE.Line(this.makeLine(\n\t\t\tnew THREE.Vector3(-1000, 0, 0),\n\t\t\tnew THREE.Vector3(+1000, 0, 0)\n    ), new THREE.LineBasicMaterial({\n      color: 0xff0000,\n      transparent: true,\n      opacity: 0.3,\n      visible: (props && props.Xaxis) || true\n    }));\n\n    this.Yaxis = new THREE.Line(\n\t\tthis.makeLine(\n\t\t\tnew THREE.Vector3(0, -1000, 0),\n\t\t\tnew THREE.Vector3(0, +1000, 0)\n\t\t),\n\t\tnew THREE.LineBasicMaterial({\n\t\t\tcolor: 0x38a10c,\n\t\t\ttransparent: true,\n\t\t\topacity: 0.3,\n\t\t\tvisible: (props && props.Yaxis) || true\n\t\t})\n\t);\n\n\t\tthis.Zaxis = new THREE.Line(\n\t\t\tthis.makeLine(\n\t\t\t\tnew THREE.Vector3(0, 0, -1000),\n\t\t\t\tnew THREE.Vector3(0, 0, +1000)\n\t\t\t),\n\t\t\tnew THREE.LineBasicMaterial({\n\t\t\t\tcolor: 0x0000ff,\n\t\t\t\ttransparent: true,\n\t\t\t\topacity: 0.3,\n\t\t\t\tvisible: (props && props.Zaxis) || false\n\t\t\t})\n\t\t);\n\t\t\n\t\tthis.renderOrder = -1;\n\t\tthis.add(this.Xaxis, this.Yaxis, this.Zaxis);\n\t\t\n  }\n  makeLine(start: THREE.Vector3, end: THREE.Vector3) {\n    const geometry = new THREE.Geometry();\n\t\tgeometry.vertices.push(start);\n    geometry.vertices.push(end);\n    return geometry;\n  }\n}\n","import * as THREE from \"three\";\nimport Container from \"../../objects/container\";\n\nexport default class Lights extends Container{\n  constructor(name?: string) {\n    super(name || \"lights\");\n\t\tthis.add(new Container(\"ambientLights\"));\n    this.add(new Container(\"geometryLights\"));\n    this.add(new Container(\"helpers\"));\n    let ambientLight = new THREE.AmbientLight(0xffffff, 1);\n    ambientLight.layers.enableAll();\n    this.ambientLights.add(ambientLight)\n    \n    const color = 0xffffff;\n    const intensity = 1;\n    const light = new THREE.DirectionalLight(color, intensity);\n    // this.geometryLights.add(light);\n      \n    const size = 1;\n    const helperColor = 0x000000;\n    const helper = new THREE.DirectionalLightHelper(light,size,helperColor);\n    // this.helpers.add(helper);\n  }\n  setHelpersVisible(visible) {\n    this.helpers.visible = visible;\n  }\n  get ambientLights() {\n    return this.children[0];\n  }\n  get geometryLights() {\n    return this.children[1];\n  }\n  get helpers() {\n    return this.children[2];\n  }\n}\n","import * as THREE from \"three\";\nimport Container from \"../objects/container\";\n\nexport default class PickHelper {\n  pickPosition: { x: number; y: number; };\n  raycaster: THREE.Raycaster;\n  pickedObject: any;\n  pickedObjectSavedColor: number;\n  hover: null;\n  scene: any;\n  camera: any;\n  objects: Container[];\n  mount: any;\n  constructor(scene, camera, mount) {\n    this.pickPosition = { x: 0, y: 0 };\n    this.raycaster = new THREE.Raycaster();\n    this.pickedObject = null;\n    this.pickedObjectSavedColor = 0;\n    this.hover = null;\n    this.scene = scene;\n    this.camera = camera;\n    this.objects = [] as Container[];\n    this.mount = mount;\n  }\n\n  pick(event, objects = this.objects, scene = this.scene, camera=this.camera, mount=this.mount) {\n    this.setPickPosition(event, mount);\n    this.raycaster.setFromCamera(this.pickPosition, this.camera);\n\n    const intersectedObjects = this.raycaster.intersectObjects(objects, true);\n    if (intersectedObjects.length) {\n      let i = 0;\n      let found = false;\n      while (!found && i < intersectedObjects.length) {\n        //@ts-ignore\n        if (intersectedObjects[i]?.object?.parent?.kind.match(/source|receiver/gmi)) {\n          this.pickedObject = intersectedObjects[i].object.parent;\n          found = true;\n        }\n        i++;\n      }\n      if (!found) {\n        this.pickedObject = intersectedObjects[0].object.parent;\n      }\n    } else {\n      this.pickedObject = false;\n    }\n    return this.pickedObject;\n  }\n\n  pickOnce(event, scene, camera, mount) {\n    this.setPickPosition(event, mount);\n    let normalizedPosition = this.pickPosition;\n\n    this.raycaster.setFromCamera(normalizedPosition, camera);\n\n    const intersectedObjects = this.raycaster.intersectObjects(scene.children, true);\n    if (intersectedObjects.length) {\n      if (intersectedObjects[0].object === this.pickedObject) {\n        return false;\n      }\n      this.pickedObject = intersectedObjects[0].object;\n    } else {\n      this.pickedObject = false;\n    }\n    return this.pickedObject;\n  }\n\n  pickCenter(scene, camera, mount) {\n    this.setPickPositionCenter(mount);\n    let normalizedPosition = this.pickPosition;\n\n    this.raycaster.setFromCamera(normalizedPosition, camera);\n\n    const intersectedObjects = this.raycaster.intersectObjects(scene.children, true);\n    if (intersectedObjects.length) {\n      this.pickedObject = intersectedObjects[0].object;\n    } else {\n      this.pickedObject = false;\n    }\n    return this.pickedObject;\n  }\n\n  setPickPosition(event, mount) {\n    const pos = this.getCanvasRelativePosition(event, mount);\n    // console.log(pos);\n    // console.log(mount.clientWidth, mount.clientHeight);\n    this.pickPosition.x = (pos.x / mount.clientWidth) * 2 - 1;\n    this.pickPosition.y = (pos.y / mount.clientHeight) * -2 + 1;\n  }\n\n  setPickPositionCenter(mount) {\n    const pos = { x: mount.clientWidth / 2, y: mount.clientHeight / 2 };\n    this.pickPosition.x = (pos.x / mount.clientWidth) * 2 - 1;\n    this.pickPosition.y = (pos.y / mount.clientHeight) * -2 + 1;\n  }\n\n  getCanvasRelativePosition(event, mount) {\n    const rect = mount.getBoundingClientRect();\n    return {\n      x: event.clientX - rect.left,\n      y: event.clientY - rect.top\n    };\n  }\n\n  clearPickPosition() {\n    this.pickPosition.x = -100000;\n    this.pickPosition.y = -100000;\n  }\n}\n","import * as THREE from \"three\";\n\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport { OutlinePass } from \"three/examples/jsm/postprocessing/OutlinePass\";\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\nimport { FXAAShader } from \"three/examples/jsm/shaders/FXAAShader\";\nimport { OrbitControls } from \"./OrbitControls\";\n\n//@ts-ignore\n// import fs from \"!raw-loader!./shaders/beam/shader.frag\";\n//@ts-ignore\n// import vs from \"!raw-loader!./shaders/beam/shader.vert\";\n// import { AudioRenderer } from './audio';\nimport { CameraStore } from \"../common/storage-schemas\";\n\nimport Timer from '../common/timer';\n\nimport { lerp, lerp3 } from \"../common/lerp\";\nimport EasingFunctions from '../common/easing';\nimport cubicBezier from '../common/cubic-bezier';\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\n\n//@ts-ignore\nimport speakerModel from \"!raw-loader!../res/models/speaker.gltf\";\n//@ts-ignore\nimport micModel from \"!raw-loader!../res/models/mic.gltf\";\n\nimport whitematcap from '../res/textures/matcap-porcelain-white.jpg';\nimport triPattern from '../res/textures/tri_pattern.jpg'\n\nimport Container from \"../objects/container\";\n\nimport Grid from \"./env/grid\";\nimport { KeyValuePair } from \"../common/key-value-pair\";\n\nimport defaults from './defaults';\nimport Axes from './env/axes';\nimport Lights from './env/lights';\nimport Room from '../objects/room';\nimport Messenger from \"../messenger\";\n\n\nimport PickHelper from './pick-helper';\n\n\n\nexport interface SmoothCameraParams {\n  /**\n   * Where the camera will end up\n   */\n  position: THREE.Vector3;\n\n  /**\n   * Where to look at while moving\n   */\n  target?: THREE.Vector3;\n\n  /**\n   * time in ms\n   */\n  duration?: number;\n\n  /**\n   * easing function which acts similar to a css function\n   */\n\teasingFunction?: (t: number) => number;\n\t\n\t/**\n\t * callback\n\t */\n  onFinish?: (...args) => void;\n}\n\n\n\nexport interface OrbitControlMouseConfig {\t\t\n\tLEFT: number;\n\tMIDDLE: number;\n\tRIGHT: number;\n}\n\nexport interface MouseConfigSet {\n  Default: OrbitControlMouseConfig;\n  Shift: OrbitControlMouseConfig;\n  Control: OrbitControlMouseConfig;\n  Alt: OrbitControlMouseConfig;\n  Meta: OrbitControlMouseConfig;\n}\n\nexport interface ModifierKeyState {\n\tShift: number;\n  Control: number;\n  Alt: number;\n  Meta: number;\n}\n\nexport interface RendererParams{\n\telt?: HTMLCanvasElement;\n\tmessenger: Messenger;\n}\n\nexport default class Renderer {\n\t\n\tmouseConfigSet!: MouseConfigSet;\n\tmodifierKeyState!: ModifierKeyState; \n\t\n\telt!: HTMLCanvasElement;\n\trenderer!: THREE.Renderer;\n\n\t_camera!: THREE.PerspectiveCamera|THREE.OrthographicCamera;\n\tperspectiveCamera!: THREE.PerspectiveCamera;\n\torthoCamera!: THREE.OrthographicCamera\n\n\tscene!: THREE.Scene;\n\tenv!: Container;\n\tworkspace!: Container;\n\n\tlights!: Lights;\n\taxes!: Axes;\n\tgrid!: Grid;\n\n\tstack!: Array<(...args)=>void>\n\n\n\tsettingHandlers!: KeyValuePair<((val: any)=>void)>;\n\t\n\tsourceGroup!: Container;\n\tsourceTemplate!: Container;\n\n\treceiverGroup!: Container;\n\treceiverTemplate!: Container;\n\n\tgeometryGroup!: Container;\n\tcontrols;\n\n\tworkspaceCursor!: THREE.Object3D;\n\tfog!: THREE.FogExp2 | THREE.Fog;\n\n\t_fov!: number;\n\n  textures!: KeyValuePair<THREE.Texture>\n\tsmoothingCameraCallback!: any;\n\tsmoothingCamera!: boolean;\n\tmessenger: Messenger;\n\tpickHelper!: PickHelper;\n\tcomposer!: EffectComposer;\n\toutlinePass!: OutlinePass;\n\trenderPass!: RenderPass;\n\teffectFXAA!: ShaderPass;\n\t\n\n\n\t\n\tconstructor(params: RendererParams) {\n\t\t[\n\t\t\t\"init\",\n\t\t\t\"render\",\n\t\t\t\"smoothCameraTo\",\n\t\t\t\"setOrtho\",\n\t\t\t\"storeCameraState\"\n\t\t].forEach(method => {\n\t\t\tthis[method] = this[method].bind(this);\n\t\t});\n\t\t\n\t\t\n\t\t\n\n\t\tthis.messenger = params.messenger;\n\t\t\n\t}\n\t\n\tinit(elt: HTMLCanvasElement) {\n\n\t\tthis.modifierKeyState = {\n\t\t\tShift: 0,\n\t\t\tControl: 0,\n\t\t\tAlt: 0,\n\t\t\tMeta: 0\n\t\t};\n\t\t\n\t\tthis.smoothingCamera = false;\n\t\tthis.smoothingCameraCallback = undefined;\n\t\tthis.elt = elt;\n\t\tthis.stack = [] as Array<(...args) => void>;\n\t\tthis.env = new Container(\"env\");\n\t\tthis.workspace = new Container(\"workspace\");\n\t\tthis.workspaceCursor = this.workspace;\n\t\t\n\t\tthis.lights = new Lights();\n\t\tthis.grid = new Grid();\n\t\tthis.axes = new Axes();\n\t\t\n\t\tthis.env.add(this.grid, this.lights, this.axes);\n\t\t\n\n\t\tconst background = 0xf5f8fa;\n\n\t\t// scene\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.scene.background = new THREE.Color(background);\n\t\tthis.scene.add(this.env, this.workspace);\n\t\t\n\t\t// renderer\n\t\tthis.renderer = new THREE.WebGLRenderer({\n\t\t\tcanvas: this.elt,\n\t\t\tcontext: this.elt.getContext(\"webgl2\", { alpha: false })!,\n\t\t\tantialias: true,\n\t\t\tdepth: true,\n\t\t\tprecision: \"mediump\"\n\t\t});\n\t\t//@ts-ignore\n\t\tthis.renderer.shadowMap.enabled = true;\n\t\t//@ts-ignore\n\t\tthis.renderer.shadowMapSoft = true;\n\n\t\tthis.renderer.setSize(this.clientWidth, this.clientHeight);\n\t\tconst pixelRatio = window.devicePixelRatio;\n\t\t//@ts-ignore\n\t\tthis.renderer.setPixelRatio(pixelRatio);\n\t\t\n\t\t\n\t\tthis._fov = 45;\n\t\tconst aspect = this.aspect;\n\t\tconst near = 0.01;\n\t\tconst far = 500;\n\t\tconst up = [0, 0, 1];\n\t\t\t\n\t\tthis._camera = new THREE.PerspectiveCamera(this._fov, aspect, near, far);\n\t\tthis._camera.layers.enableAll();\n\t\tthis._camera.up.set(up[0], up[1], up[2]);\n\n\t\t\n\n\n\t\tthis.mouseConfigSet = {\n\t\t\tDefault: {\n\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t},\n\t\t\tShift: {\n\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t},\n\t\t\tMeta: {\n\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t},\n\t\t\tAlt: {\n\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t},\n\t\t\tControl: {\n\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t}\n\t\t};\n\n\t\tthis.controls = new OrbitControls(this._camera, this.renderer.domElement);\n\t\tthis.controls.mouseButtons = this.mouseConfigSet.Default;\n\t\tthis.controls.screenSpacePanning = true;\n\t\t// console.log(this.controls)\n\t\t\n\n\t\n\t\tthis.pickHelper = new PickHelper(this.scene, this._camera, this.renderer.domElement);\n\t\n\t\tthis.fog = new THREE.Fog(background, far - 200, far);\n\t\tthis.scene.fog = this.fog;\n\n\t\tthis.composer = new EffectComposer(this.renderer as THREE.WebGLRenderer);\n\n\t\tthis.renderPass = new RenderPass(this.scene, this._camera);\n\t\tthis.composer.addPass(this.renderPass);\n\n\t\n\t\tthis.settingHandlers = {};\n\t\tthis.settingHandlers.lightHelpersVisible = (val: boolean) => {\n\t\t\tconsole.log(val);\n\t\t\tthis.lights.setHelpersVisible(val);\n\t\t};\n\n\t\tthis.messenger.addMessageHandler(\"RENDERER_SHOULD_CHANGE_BACKGROUND\", (acc, ...args) => (this.background = args[0]));\n\t\tthis.messenger.addMessageHandler(\"RENDERER_SHOULD_CHANGE_FOG_COLOR\", (acc, ...args) => (this.fogColor = args[0]));\n\t\tthis.messenger.addMessageHandler(\"TOGGLE_CAMERA_ORTHO\", (acc, ...args) => {\n\t\t\tthis.setOrtho(this.camera instanceof THREE.PerspectiveCamera);\n\t\t\tthis.storeCameraState();\n\t\t});\n\t\tthis.messenger.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\", (acc, ...args) => {\n\t\t\tconst id = args[0];\n\t\t\tconst object = this.scene.getObjectByProperty(\"uuid\", id);\n\t\t\tif (object) {\n\t\t\t\tconsole.log(object);\n\t\t\t\tobject.parent && object.parent.remove(object);\n\t\t\t\t// this.scene.remove(object);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.messenger.addMessageHandler(\"LOOK_ALONG_AXIS\", (acc, ...args) => {\n\t\t\tconst axis = args[0];\n\n\t\t\tconst onFinish = () => {\n        if (this.camera instanceof THREE.PerspectiveCamera) {\n          this.messenger.postMessage(\"TOGGLE_CAMERA_ORTHO\");\n        }\n\t\t\t};\n\t\t\tconst dist = this.camera.position.distanceTo(this.controls.target);\n\t\t\t\n\t\t\tconst duration = 1000;\n\t\t\tconst target = new THREE.Vector3(0,0,0);\n\t\t\tconst easingFunction = EasingFunctions.linear;\n\t\t\t\n\t\t\tconst adds = {\n        \"+x\": new THREE.Vector3(dist, 0, 0),\n        \"-x\": new THREE.Vector3(-dist, 0, 0),\n        \"+y\": new THREE.Vector3(0, dist, 0),\n        \"-y\": new THREE.Vector3(0, -dist, 0),\n        \"+z\": new THREE.Vector3(0, 0, dist),\n        \"-z\": new THREE.Vector3(0, 0, -dist)\n\t\t\t};\n\t\t\tif (!adds[axis]) {\n\t\t\t\tconsole.warn(\"invalid args\");\n      \treturn;\n      }\n\t\t\t// const position = this.controls.target.clone() as THREE.Vector3;\n\t\t\tconst position = adds[axis];\n      this.smoothCameraTo({ position, target, duration, onFinish, easingFunction });\n\t\t\t\n\t\t})\n\t\n\n\n\t\t// save the state of the camera\n\t\twindow.addEventListener(\"mouseup\", this.storeCameraState);\n\n\t\twindow.addEventListener(\"keydown\", (e) => {\n\t\t\tif (this.modifierKeyState.hasOwnProperty(e.key)) {\n\t\t\t\tthis.modifierKeyState[e.key] += 1;\n\t\t\t}\n\t\t\tif (e.key === \"Escape\") {\n\t\t\t\tthis.messenger.postMessage(\"DESELECT_ALL_OBJECTS\");\n\t\t\t}\n\t\t});\n\n\t\twindow.addEventListener(\"keyup\", (e) => {\n\t\t\tif (this.modifierKeyState.hasOwnProperty(e.key)) {\n\t\t\t\tthis.modifierKeyState[e.key] -= 1;\n\t\t\t}\n\t\t});\n\n\t\tthis.renderer.domElement.addEventListener(\"mousedown\", (e) => {\n\t\t\tconst selection = this.pickHelper.pick(e, [this.workspace]);\n\n\t\t\tif (selection) {\n\t\t\t\tif (e.button == 0) {\n\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\tthis.messenger.postMessage(\"APPEND_SELECTION\", [selection]);\n\t\t\t\t\t} else if (!e.altKey) {\n\t\t\t\t\t\tthis.messenger.postMessage(\"SET_SELECTION\", [selection]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e.button == 0) {\n\t\t\t\t\tif (!e.shiftKey && !e.altKey) {\n\t\t\t\t\t\tthis.messenger.postMessage(\"DESELECT_ALL_OBJECTS\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// console.log(this.pickHelper);\n\t\t});\n\t\t\n\t\tthis.render();\n\t\t// this.composer.render();\n\t\t\n\t\tconst storedState = JSON.parse(localStorage.getItem(\"camera\") || defaults.camera) as CameraStore;\n\t\t\n\t\tif (storedState) {\n\t\t\tif (storedState.object) {\n        this.camera.position.fromArray(storedState.object.pos);\n        this.camera.quaternion.fromArray(storedState.object.quat);\n\t\t\t\tthis.camera.near = storedState.object.near;\n\t\t\t\tthis.camera.far = storedState.object.far;\n\t\t\t\tif (storedState.object.type === \"PerspectiveCamera\") {\n\t\t\t\t\tthis.camera = new THREE.PerspectiveCamera((this.camera as THREE.PerspectiveCamera).fov, aspect, this.camera.near, this.camera.far);\n\t\t\t\t\tthis.camera.zoom = storedState.object.zoom;\n\t\t\t\t}\n\t\t\t\telse if (storedState.object.type === \"OrthographicCamera\") {\n\t\t\t\t\tthis.camera = new THREE.OrthographicCamera(storedState.object.left!, storedState.object.right!, storedState.object.top!, storedState.object.bottom!, this.camera.near, this.camera.far);\n\t\t\t\t\tthis.camera.zoom = storedState.object.zoom;\n\t\t\t\t}\n\t\t\t\tthis.controls.target.fromArray(storedState.object.target || [0, 0, 0]);\n\t\t\t\t// this.camera.layers.enableAll();\n\t\t\t\t// this.camera.up.set(0,0,1);\n      }\n    }\n\n\t\t// setInterval(this.render, 1000 / 20);\n\n\t}\n\t\n\tstoreCameraState() {\n\t\tconst obj = this.camera.toJSON();\n    obj.object.quat = this.camera.quaternion.toArray();\n\t\tobj.object.pos = this.camera.position.toArray();\n\t\tobj.object.zoom = this.camera.zoom;\n\t\tobj.object.target = this.controls.target.toArray();\n    localStorage.setItem(\"camera\", JSON.stringify(obj));\n\t}\n\t\n\tresetControls() {\n\t\tthis.controls.dispose();\n\t\tthis.controls = new OrbitControls(this.camera, this.renderer.domElement);\n    this.controls.mouseButtons = this.mouseConfigSet.Default;\n    this.controls.screenSpacePanning = true;\n    // console.log(this.controls)\n\t}\n\t\n\tsetOrtho(on: boolean) {\n\t\tconst near = this.camera.near;\n\t\tconst far = this.camera.far;\n\t\tconst fov = this.camera instanceof THREE.PerspectiveCamera && this.camera.fov || this.fov;\n\t\tconst filmWidth = (this.camera instanceof THREE.PerspectiveCamera && this.camera.getFilmWidth()) || 35;\n\t\tconst filmHeight = (this.camera instanceof THREE.PerspectiveCamera && this.camera.getFilmHeight()) || 35/this.aspect;\n\t\tconst target = this.controls.target.toArray();\n\t\tif (on) {\n\t\t\t// const { left, right, top, bottom } = this.getCenteredCanvasBounds();\n\t\t\t// const top = far * Math.tan((Math.PI / 360) * this.aspect * fov);\n\t\t\t// const right = far * Math.tan((Math.PI / 360) * fov);\n\t\t\t\n\t\t\tconst top = filmHeight / 2;\n\t\t\tconst right = filmWidth / 2;\n\t\t\tconst bottom = -top;\n\t\t\tconst left = -right;\n\t\t\tlet camera = new THREE.OrthographicCamera(left, right, top, bottom, near, far);\n\t\t\t// camera.zoom = 8.1;\n\t\t\tthis.camera = camera;\n\t\t\tthis.camera.layers.enableAll();\n\t\t}\n\t\telse {\n\t\t\tthis.camera = new THREE.PerspectiveCamera(fov, this.aspect, near, far);\n\t\t\tthis.camera.layers.enableAll();\n\t\t}\n\t\tthis.controls.target.fromArray(target);\n\t\t// this.resizeCanvasToDisplaySize(true);\n\t\t// this.camera.position.set(pos.x, pos.y, pos.z);\n\t\t// this.camera.applyQuaternion(quat);\n\t\t\n\t}\n\t\n\tget camera() {\n\t\treturn this._camera;\n\t}\n\t\n\tset camera(camera: THREE.PerspectiveCamera | THREE.OrthographicCamera) {\n\t\tconst quat = new THREE.Quaternion().copy(this._camera.quaternion);\n\t\tconst pos = new THREE.Vector3().copy(this._camera.position);\n\t\tthis._camera = camera;\n\t\tthis._camera.up.set(0, 0, 1);\n\t\t// this.controls.dispose();\n\t\t// this.controls = new OrbitControls(this._camera, this.renderer.domElement);\n  \t// this.controls.mouseButtons = this.mouseConfigSet.Default;\n\t\t// this.controls.screenSpacePanning = true;\n\t\tthis.controls.object = this._camera;\n\t\tthis.controls.update();\n\t\tthis._camera.position.set(pos.x, pos.y, pos.z);\n\t\tthis._camera.setRotationFromQuaternion(quat)\n\t\tthis._camera.quaternion.normalize();\n\t\tthis._camera.updateProjectionMatrix();\n\t\tif (this.renderPass.camera.uuid !== this._camera.uuid) {\n\t\t\tthis.renderPass.camera = this._camera;\n\t\t}\n\t\t\n\t\tthis.pickHelper = new PickHelper(this.scene, this._camera, this.renderer.domElement);\n\t}\n\t\n\tget zoom() {\n\t\treturn (this.camera && this.camera.zoom) || 1;\n\t}\n\t\n\tset zoom(zoom: number) {\n\t\tthis._camera.zoom = zoom;\n\t\tthis.camera.updateProjectionMatrix();\n\t}\n\t\n\tget isOrtho() {\n\t\treturn this.camera instanceof THREE.OrthographicCamera;\n\t}\n\t\n\tset isOrtho(ortho: boolean) {\n\t\tif (ortho != this.isOrtho) {\n\t\t\tthis.messenger.postMessage(\"TOGGLE_CAMERA_ORTHO\");\n\t\t}\n\t}\n\t\n\tget background() {\n\t\treturn (this.scene.background as THREE.Color).getHexString();\n\t}\n\tset background(color: string) {\n\t\t(this.scene.background as THREE.Color).setStyle(color);\n\t}\n\tget fogColor() {\n\t\treturn (this.scene.fog && this.scene.fog.color && this.scene.fog.color.getHexString()) || \"#000000\";\n\t}\n\tset fogColor(color: string) {\n\t\tthis.scene.fog?.color.setStyle(color);\n\t}\n\tget fov() {\n\t\treturn this.camera instanceof THREE.PerspectiveCamera ? this.camera.fov : this._fov;\n\t}\n\tset fov(fov: number) {\n\t\tthis._fov = fov;\n\t\tif (this.camera instanceof THREE.PerspectiveCamera) {\n\t\t\tthis.camera.fov = fov;\n\t\t}\n\t}\n\t\n\t\n\tprivate get clientWidth() {\n\t\treturn (this.elt.parentElement as HTMLDivElement).clientWidth;\n\t}\n\tprivate get clientHeight() {\n\t\treturn (this.elt.parentElement as HTMLDivElement).clientHeight;\n\t}\n\tprivate get aspect() {\n\t\treturn this.clientWidth / this.clientHeight;\n\t}\n\t\n\t\n\tresize() {\n\t\tthis.renderer.setSize(\n\t\t\tthis.renderer.domElement.parentElement?.clientWidth || 0,\n\t\t\tthis.renderer.domElement.parentElement?.clientHeight || 0\n\t\t);\n\t\tthis.composer.setSize(\n\t\t\tthis.renderer.domElement.parentElement?.clientWidth || 0,\n\t\t\tthis.renderer.domElement.parentElement?.clientHeight || 0\n\t\t);\n\n\t}\n\tresizeCanvasToDisplaySize(force?: boolean) {\n\t\tconst canvas = this.renderer.domElement;\n\t\t// look up the size the canvas is being displayed\n\t\tconst width = canvas.clientWidth;\n\t\tconst height = canvas.clientHeight;\n\t\n\t\t// adjust displayBuffer size to match\n\t\tif (canvas.width !== width || canvas.height !== height || force) {\n\t\t\t// you must pass false here or three.js sadly fights the browser\n\t\t\tthis.renderer.setSize(width, height, false);\n\t\t\tthis.composer.setSize(width, height);\n\t\t\t\tif (this.camera instanceof THREE.OrthographicCamera) {\n          this.camera.left = -canvas.width / 2;\n          this.camera.right = canvas.width / 2;\n          this.camera.top = canvas.height / 2;\n          this.camera.bottom = -canvas.height / 2;\n        } else {\n          (this.camera as THREE.PerspectiveCamera).aspect = canvas.width / canvas.height;\n\n        }\n\t\t\t\n\t\t\tthis.camera.updateProjectionMatrix();\n\n\t\t\t// update any render target sizes here\n\t\t}\n\t}\n\tcheckresize() {\n\t\tif (\n\t\t\tthis.renderer.domElement.width !==\n\t\t\t\tthis.renderer.domElement.parentElement?.clientWidth ||\n\t\t\t0 ||\n\t\t\tthis.renderer.domElement.height !==\n\t\t\t\t(this.renderer.domElement.parentElement?.clientHeight || 0)\n\t\t) {\n\t\t\tthis.resize();\n\t\t}\n\t}\n\tsettingChanged(setting: string, value: any) {\n\t\tthis.settingHandlers[setting](value);\n\t}\n\taddRays(rays: THREE.LineSegments) {\n\t\tthis.scene.add(rays);\n\t}\n\tadd(obj: THREE.Object3D) {\n\t\tthis.workspaceCursor.add(obj);\n\t}\n\tremove(obj: THREE.Object3D) {\n\t\tthis.workspace.getObjectByProperty('uuid', obj.uuid)?.remove();\n\t}\n\t\n\taddRoom(room: Room) {\n\t\tthis.workspaceCursor.add(room);\n\t\tconst near =\n\t\t\troom.boundingBox.max\n\t\t\t\t.clone()\n\t\t\t\t.sub(room.boundingBox.min)\n\t\t\t\t.length() * 4;\n\t\tconst far = near * 4;\n\t\tconst color = this.fog.color;\n\t\tthis.fog = new THREE.Fog(color.getHex(), near, far);\n    this.scene.fog = this.fog;\n\t}\n\n\t\n\t\n\n\t\n\tgetCenteredCanvasBounds() {\n\t\tconst halfheight = this.renderer.domElement.height / 2;\n\t\tconst halfwidth = this.renderer.domElement.width / 2;\n\t\treturn {\n\t\t\ttop: halfheight,\n\t\t\tbottom: -halfheight,\n\t\t\tleft: -halfwidth,\n\t\t\tright: halfwidth\n\t\t}\n\t}\n\tgetOrthoBounds() {\n\t\tif (this.camera instanceof THREE.OrthographicCamera) {\n\t\t\treturn [this.camera.top, this.camera.bottom, this.camera.left, this.camera.right];\n\t\t}\n\t\telse {\n\t\t\treturn [this.orthoCamera.top, this.orthoCamera.bottom, this.orthoCamera.left, this.orthoCamera.right];\n\t\t}\n\t}\n\n\tsmoothCameraTo(params: SmoothCameraParams) {\n\t\tconst originalPosition = this.camera.position.clone();\n\t\tconst originalTarget = this.controls.target.clone();\n\t\tconst target = params.target || originalTarget.clone();\n\t\tconst timer = new Timer(params.duration || 1000, (_timer) => {\n\t\t\tthis.smoothingCamera = false;\n\t\t\tconsole.log('finished');\n\t\t\tif (params.onFinish) {\n\t\t\t\tparams.onFinish(_timer);\n\t\t\t}\n\t\t});\n\t\tconst curveFunction = params.easingFunction || EasingFunctions.linear;\n\t\tthis.smoothingCamera = true;\n\t\tthis.smoothingCameraCallback = () => {\n\t\t\tconst progress = curveFunction(timer.tick());\n\t\t\tconst pos = lerp3(originalPosition, params.position, curveFunction(progress));\n\t\t\tconst tar = lerp3(originalTarget, target, curveFunction(progress));\n\t\t\tthis.camera.position.set(pos.x, pos.y, pos.z);\n\t\t\tthis.camera.lookAt(tar);\n\t\t\tthis.controls.target.set(tar.x, tar.y, tar.z);\n\t\t};\n\t\ttimer.start();\n\t}\n\tupdate() {\n\t\tthis.smoothingCamera && this.smoothingCameraCallback();\n\t\tthis.messenger.postMessage(\"RENDERER_UPDATED\");\n\t}\n\trender() {\n\t\t\n\t\tthis.update();\n\t\tthis.resizeCanvasToDisplaySize();\n\t\trequestAnimationFrame(this.render);\n\t\t// this.renderer.render(this.scene, this.camera);\n\t\tthis.composer.render();\n\t}\n\t\n\t\n\t\n\t\n\t\n}\n","export default function fullScreen() {\n  if (!document.fullscreenElement) {\n    document.documentElement.requestFullscreen();\n  } else {\n    if (document.exitFullscreen) {\n      document.exitFullscreen(); \n    }\n  }\n}","import * as THREE from \"three\";\n\nexport class STLLoader {\n\tconstructor() {}\n\tparse(data) {\n\t\tvar isBinary = function() {\n\t\t\tvar expect, face_size, n_faces, reader;\n\t\t\treader = new DataView(binData);\n\t\t\tface_size = (32 / 8) * 3 + (32 / 8) * 3 * 3 + 16 / 8;\n\t\t\tn_faces = reader.getUint32(80, true);\n\t\t\texpect = 80 + 32 / 8 + n_faces * face_size;\n\n\t\t\tif (expect === reader.byteLength) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// An ASCII STL data must begin with 'solid ' as the first six bytes.\n\t\t\t// However, ASCII STLs lacking the SPACE after the 'd' are known to be\n\t\t\t// plentiful.  So, check the first 5 bytes for 'solid'.\n\n\t\t\t// US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\n\t\t\tvar solid = [115, 111, 108, 105, 100];\n\n\t\t\tfor (var i = 0; i < 5; i++) {\n\t\t\t\t// If solid[ i ] does not match the i-th byte, then it is not an\n\t\t\t\t// ASCII STL; hence, it is binary and return true.\n\n\t\t\t\tif (solid[i] != reader.getUint8(i, false)) return true;\n\t\t\t}\n\n\t\t\t// First 5 bytes read \"solid\"; declare it to be an ASCII STL\n\t\t\treturn false;\n\t\t};\n\n\t\tvar binData = this.ensureBinary(data);\n\n\t\treturn isBinary()\n\t\t\t? this.parseBinary(binData)\n\t\t\t: this.parseASCII(this.ensureString(data));\n\t}\n\n\tparseBinary(data) {\n\t\tvar reader = new DataView(data);\n\t\tvar faces = reader.getUint32(80, true);\n\n\t\tvar r,\n\t\t\tg,\n\t\t\tb,\n\t\t\thasColors = false,\n\t\t\tcolors;\n\t\tvar defaultR, defaultG, defaultB, alpha;\n\n\t\t// process STL header\n\t\t// check for default color in header (\"COLOR=rgba\" sequence).\n\n\t\tfor (var index = 0; index < 80 - 10; index++) {\n\t\t\tif (\n\t\t\t\treader.getUint32(index, false) == 0x434f4c4f /*COLO*/ &&\n\t\t\t\treader.getUint8(index + 4) == 0x52 /*'R'*/ &&\n\t\t\t\treader.getUint8(index + 5) == 0x3d /*'='*/\n\t\t\t) {\n\t\t\t\thasColors = true;\n\t\t\t\tcolors = [];\n\n\t\t\t\tdefaultR = reader.getUint8(index + 6) / 255;\n\t\t\t\tdefaultG = reader.getUint8(index + 7) / 255;\n\t\t\t\tdefaultB = reader.getUint8(index + 8) / 255;\n\t\t\t\talpha = reader.getUint8(index + 9) / 255;\n\t\t\t}\n\t\t}\n\n\t\tvar dataOffset = 84;\n\t\tvar faceLength = 12 * 4 + 2;\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tvar vertices = [] as any[];\n\t\tvar normals = [] as any[];\n\n\t\tfor (var face = 0; face < faces; face++) {\n\t\t\tvar start = dataOffset + face * faceLength;\n\t\t\tvar normalX = reader.getFloat32(start, true);\n\t\t\tvar normalY = reader.getFloat32(start + 4, true);\n\t\t\tvar normalZ = reader.getFloat32(start + 8, true);\n\n\t\t\tif (hasColors) {\n\t\t\t\tvar packedColor = reader.getUint16(start + 48, true);\n\n\t\t\t\tif ((packedColor & 0x8000) === 0) {\n\t\t\t\t\t// facet has its own unique color\n\n\t\t\t\t\tr = (packedColor & 0x1f) / 31;\n\t\t\t\t\tg = ((packedColor >> 5) & 0x1f) / 31;\n\t\t\t\t\tb = ((packedColor >> 10) & 0x1f) / 31;\n\t\t\t\t} else {\n\t\t\t\t\tr = defaultR;\n\t\t\t\t\tg = defaultG;\n\t\t\t\t\tb = defaultB;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 1; i <= 3; i++) {\n\t\t\t\tvar vertexstart = start + i * 12;\n\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart, true));\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 4, true));\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 8, true));\n\n\t\t\t\tnormals.push(normalX, normalY, normalZ);\n\n\t\t\t\tif (hasColors) {\n\t\t\t\t\tcolors.push(r, g, b);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgeometry.addAttribute(\n\t\t\t\"position\",\n\t\t\tnew THREE.BufferAttribute(new Float32Array(vertices), 3)\n\t\t);\n\t\tgeometry.addAttribute(\n\t\t\t\"normal\",\n\t\t\tnew THREE.BufferAttribute(new Float32Array(normals), 3)\n\t\t);\n\n\t\tif (hasColors) {\n\t\t\tgeometry.addAttribute(\n\t\t\t\t\"color\",\n\t\t\t\tnew THREE.BufferAttribute(new Float32Array(colors), 3)\n\t\t\t);\n\t\t\t//@ts-ignore\n\t\t\tgeometry.hasColors = true;\n\t\t\t//@ts-ignore\n\t\t\tgeometry.alpha = alpha;\n\t\t}\n\n\t\treturn geometry;\n\t}\n\n\tparseASCII(data) {\n\t\tvar geometry,\n\t\t\tlength,\n\t\t\tpatternFace,\n\t\t\tpatternNormal,\n\t\t\tpatternVertex,\n\t\t\tresult,\n\t\t\ttext;\n\t\tgeometry = new THREE.BufferGeometry();\n\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\n\n\t\tvar vertices = [] as any[];\n\t\tvar normals = [] as any[];\n\n\t\tvar normal = new THREE.Vector3();\n\n\t\twhile ((result = patternFace.exec(data)) !== null) {\n\t\t\ttext = result[0];\n\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\twhile ((result = patternNormal.exec(text)) !== null) {\n\t\t\t\tnormal.x = parseFloat(result[1]);\n\t\t\t\tnormal.y = parseFloat(result[3]);\n\t\t\t\tnormal.z = parseFloat(result[5]);\n\t\t\t}\n\n\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\twhile ((result = patternVertex.exec(text)) !== null) {\n\t\t\t\tvertices.push(\n\t\t\t\t\tparseFloat(result[1]),\n\t\t\t\t\tparseFloat(result[3]),\n\t\t\t\t\tparseFloat(result[5])\n\t\t\t\t);\n\t\t\t\tnormals.push(normal.x, normal.y, normal.z);\n\t\t\t}\n\t\t}\n\n\t\tgeometry.addAttribute(\n\t\t\t\"position\",\n\t\t\tnew THREE.BufferAttribute(new Float32Array(vertices), 3)\n\t\t);\n\t\tgeometry.addAttribute(\n\t\t\t\"normal\",\n\t\t\tnew THREE.BufferAttribute(new Float32Array(normals), 3)\n\t\t);\n\n\t\treturn geometry;\n\t}\n\n\tensureString(buf) {\n\t\tif (typeof buf !== \"string\") {\n\t\t\tvar array_buffer = new Uint8Array(buf);\n\t\t\tvar strArray = [] as String[];\n\t\t\tfor (var i = 0; i < buf.byteLength; i++) {\n\t\t\t\tstrArray.push(String.fromCharCode(array_buffer[i])); // implicitly assumes little-endian\n\t\t\t}\n\t\t\treturn strArray.join(\"\");\n\t\t} else {\n\t\t\treturn buf;\n\t\t}\n\t}\n\n\tensureBinary(buf) {\n\t\tif (typeof buf === \"string\") {\n\t\t\tvar array_buffer = new Uint8Array(buf.length);\n\t\t\tfor (var i = 0; i < buf.length; i++) {\n\t\t\t\tarray_buffer[i] = buf.charCodeAt(i) & 0xff; // implicitly assumes little-endian\n\t\t\t}\n\t\t\treturn array_buffer.buffer || array_buffer;\n\t\t} else {\n\t\t\treturn buf;\n\t\t}\n\t}\n}\n","export class OBJLoader {\n\tprivate fileContents: string;\n\tprivate defaultModelName = \"untitled\";\n\tprivate currentMaterial = \"\";\n\tprivate currentGroup = \"\";\n\tprivate smoothingGroup = 0;\n\n\tprivate result: IResult = {\n\t\tmaterialLibraries: [],\n\t\tmodels: []\n\t};\n\n\tconstructor(fileContents: string, defaultModelName?: string) {\n\t\tthis.fileContents = fileContents;\n\n\t\tif (defaultModelName !== undefined) {\n\t\t\tthis.defaultModelName = defaultModelName;\n\t\t}\n\t}\n\n\tpublic parseAsync(): Promise<IResult> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tresolve(this.parse());\n\t\t\t} catch (theError) {\n\t\t\t\treject(theError);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic parse(): IResult {\n\t\tconst stripComments = (line: string) => {\n\t\t\tconst commentIndex = line.indexOf(\"#\");\n\t\t\tif (commentIndex > -1) {\n\t\t\t\treturn line.substring(0, commentIndex);\n\t\t\t}\n\t\t\treturn line;\n\t\t};\n\n\t\tconst lines = this.fileContents.split(\"\\n\");\n\t\tfor (const line of lines) {\n\t\t\tconst strippedline = stripComments(line);\n\n\t\t\tconst lineItems = strippedline\n\t\t\t\t.replace(/\\s\\s+/g, \" \")\n\t\t\t\t.trim()\n\t\t\t\t.split(\" \");\n\n\t\t\tswitch (lineItems[0].toLowerCase()) {\n\t\t\t\tcase \"o\": // Start A New Model\n\t\t\t\t\tthis.parseObject(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"g\": // Start a new polygon group\n\t\t\t\t\tthis.parseGroup(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"v\": // Define a vertex for the current model\n\t\t\t\t\tthis.parseVertexCoords(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vt\": // Texture Coords\n\t\t\t\t\tthis.parseTextureCoords(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vn\": // Define a vertex normal for the current model\n\t\t\t\t\tthis.parseVertexNormal(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"s\": // Smooth shading statement\n\t\t\t\t\tthis.parseSmoothShadingStatement(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\": // Define a Face/Polygon\n\t\t\t\t\tthis.parsePolygon(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"mtllib\": // Reference to a material library file (.mtl)\n\t\t\t\t\tthis.parseMtlLib(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"usemtl\": // Sets the current material to be applied to polygons defined from this point forward\n\t\t\t\t\tthis.parseUseMtl(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this.result;\n\t}\n\n\tprivate currentModel(): IModel {\n\t\tif (this.result.models.length === 0) {\n\t\t\tthis.result.models.push({\n\t\t\t\tfaces: [],\n\t\t\t\tname: this.defaultModelName,\n\t\t\t\ttextureCoords: [],\n\t\t\t\tvertexNormals: [],\n\t\t\t\tvertices: []\n\t\t\t});\n\t\t\tthis.currentGroup = \"\";\n\t\t\tthis.smoothingGroup = 0;\n\t\t}\n\n\t\treturn this.result.models[this.result.models.length - 1];\n\t}\n\n\tprivate parseObject(lineItems: string[]): void {\n\t\tconst modelName =\n\t\t\tlineItems.length >= 2 ? lineItems[1] : this.defaultModelName;\n\t\tthis.result.models.push({\n\t\t\tfaces: [],\n\t\t\tname: modelName,\n\t\t\ttextureCoords: [],\n\t\t\tvertexNormals: [],\n\t\t\tvertices: []\n\t\t});\n\t\tthis.currentGroup = \"\";\n\t\tthis.smoothingGroup = 0;\n\t}\n\n\tprivate parseGroup(lineItems: string[]): void {\n\t\tif (lineItems.length !== 2) {\n\t\t\tthrow \"Group statements must have exactly 1 argument (eg. g group_1)\";\n\t\t}\n\n\t\tthis.currentGroup = lineItems[1];\n\t}\n\n\tprivate parseVertexCoords(lineItems: string[]): void {\n\t\tconst x = lineItems.length >= 2 ? parseFloat(lineItems[1]) : 0.0;\n\t\tconst y = lineItems.length >= 3 ? parseFloat(lineItems[2]) : 0.0;\n\t\tconst z = lineItems.length >= 4 ? parseFloat(lineItems[3]) : 0.0;\n\n\t\tthis.currentModel().vertices.push({ x, y, z });\n\t}\n\n\tprivate parseTextureCoords(lineItems: string[]): void {\n\t\tconst u = lineItems.length >= 2 ? parseFloat(lineItems[1]) : 0.0;\n\t\tconst v = lineItems.length >= 3 ? parseFloat(lineItems[2]) : 0.0;\n\t\tconst w = lineItems.length >= 4 ? parseFloat(lineItems[3]) : 0.0;\n\n\t\tthis.currentModel().textureCoords.push({ u, v, w });\n\t}\n\n\tprivate parseVertexNormal(lineItems: string[]): void {\n\t\tconst x = lineItems.length >= 2 ? parseFloat(lineItems[1]) : 0.0;\n\t\tconst y = lineItems.length >= 3 ? parseFloat(lineItems[2]) : 0.0;\n\t\tconst z = lineItems.length >= 4 ? parseFloat(lineItems[3]) : 0.0;\n\n\t\tthis.currentModel().vertexNormals.push({ x, y, z });\n\t}\n\n\tprivate parsePolygon(lineItems: string[]): void {\n\t\tconst totalVertices = lineItems.length - 1;\n\t\tif (totalVertices < 3) {\n\t\t\tthrow `Face statement has less than 3 vertices`;\n\t\t}\n\n\t\tconst face: IFace = {\n\t\t\tgroup: this.currentGroup,\n\t\t\tmaterial: this.currentMaterial,\n\t\t\tsmoothingGroup: this.smoothingGroup,\n\t\t\tvertices: []\n\t\t};\n\n\t\tfor (let i = 0; i < totalVertices; i += 1) {\n\t\t\tconst vertexString = lineItems[i + 1];\n\t\t\tconst vertexValues = vertexString.split(\"/\");\n\n\t\t\tif (vertexValues.length < 1 || vertexValues.length > 3) {\n\t\t\t\tthrow `Two many values (separated by /) for a single vertex`;\n\t\t\t}\n\n\t\t\tlet vertexIndex = 0;\n\t\t\tlet textureCoordsIndex = 0;\n\t\t\tlet vertexNormalIndex = 0;\n\t\t\tvertexIndex = parseInt(vertexValues[0], 10);\n\t\t\tif (vertexValues.length > 1 && vertexValues[1] !== \"\") {\n\t\t\t\ttextureCoordsIndex = parseInt(vertexValues[1], 10);\n\t\t\t}\n\t\t\tif (vertexValues.length > 2) {\n\t\t\t\tvertexNormalIndex = parseInt(vertexValues[2], 10);\n\t\t\t}\n\n\t\t\tif (vertexIndex === 0) {\n\t\t\t\tthrow \"Faces uses invalid vertex index of 0\";\n\t\t\t}\n\n\t\t\t// Negative vertex indices refer to the nth last defined vertex\n\t\t\t// convert these to postive indices for simplicity\n\t\t\tif (vertexIndex < 0) {\n\t\t\t\tvertexIndex =\n\t\t\t\t\tthis.currentModel().vertices.length + 1 + vertexIndex;\n\t\t\t}\n\n\t\t\tface.vertices.push({\n\t\t\t\ttextureCoordsIndex,\n\t\t\t\tvertexIndex,\n\t\t\t\tvertexNormalIndex\n\t\t\t});\n\t\t}\n\t\tthis.currentModel().faces.push(face);\n\t}\n\n\tprivate parseMtlLib(lineItems: string[]): void {\n\t\tif (lineItems.length >= 2) {\n\t\t\tthis.result.materialLibraries.push(lineItems[1]);\n\t\t}\n\t}\n\n\tprivate parseUseMtl(lineItems: string[]): void {\n\t\tif (lineItems.length >= 2) {\n\t\t\tthis.currentMaterial = lineItems[1];\n\t\t}\n\t}\n\n\tprivate parseSmoothShadingStatement(lineItems: string[]): void {\n\t\tif (lineItems.length !== 2) {\n\t\t\tthrow \"Smoothing group statements must have exactly 1 argument (eg. s <number|off>)\";\n\t\t}\n\n\t\tconst groupNumber =\n\t\t\tlineItems[1].toLowerCase() === \"off\"\n\t\t\t\t? 0\n\t\t\t\t: parseInt(lineItems[1], 10);\n\t\tthis.smoothingGroup = groupNumber;\n\t}\n}\n\ninterface IResult {\n\tmodels: IModel[];\n\tmaterialLibraries: string[];\n}\n\ninterface IModel {\n\tname: string;\n\tvertices: IVertex[];\n\ttextureCoords: ITextureVertex[];\n\tvertexNormals: IVertex[];\n\tfaces: IFace[];\n}\n\ninterface IFace {\n\tmaterial: string;\n\tgroup: string;\n\tsmoothingGroup: number;\n\tvertices: IFaceVertexIndicies[];\n}\n\ninterface IFaceVertexIndicies {\n\tvertexIndex: number;\n\ttextureCoordsIndex: number;\n\tvertexNormalIndex: number;\n}\n\ninterface IVertex {\n\tx: number;\n\ty: number;\n\tz: number;\n}\n\ninterface ITextureVertex {\n\tu: number;\n\tv: number;\n\tw: number;\n}\n","import * as THREE from 'three';\nimport { STLLoader, OBJLoader } from \"../render/loaders\";\nconst STL = new STLLoader();\n\n\nexport function stl(data) {\n  return STL.parseASCII(data)\n};\nexport function obj(data) {\n    const loader = new OBJLoader(data);\n    const res = loader.parse();\n\n    const [vertices, vertexNormals, textureCoords] = res.models.reduce(\n      (a, b) => [a[0].concat(b.vertices), a[1].concat(b.vertexNormals), a[2].concat(b.textureCoords)],\n      [[] as any[], [] as any[], [] as any[]]\n    );\n    const models = res.models.map(model => {\n      const buffer = new THREE.BufferGeometry();\n      const verts = [] as number[];\n      const vertNormals = [] as number[];\n      const texCoords = [] as number[];\n      model.faces.forEach(face => {\n        face.vertices.forEach(vertex => {\n          const v = vertices[vertex.vertexIndex - 1];\n          v && verts.push(v.x, v.y, v.z);\n          const vn = vertexNormals[vertex.vertexNormalIndex - 1];\n          vn && vertNormals.push(vn.x, vn.y, vn.z);\n          const tc = textureCoords[vertex.textureCoordsIndex - 1];\n          tc && texCoords.push(tc.u, tc.v, tc.w);\n        });\n      });\n      buffer.setAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(verts), 3, false));\n      buffer.setAttribute(\"normals\", new THREE.BufferAttribute(new Float32Array(vertNormals), 3, false));\n      buffer.setAttribute(\"texCoords\", new THREE.BufferAttribute(new Float32Array(texCoords), 3, false));\n      return {\n        name: model.name,\n        geometry: buffer\n      };\n    });\n\n    return models;\n}\n","export default function expose(item: any, target=window) {\n    Object.assign(target, item);\n}","export type ConfigType = \"text\" | \"number\" | \"checkbox\" | \"radio\" | \"color\" | \"select\";\n\nexport interface SettingsProps<T> {\n  value: T;\n  kind: ConfigType;\n  id: string;\n  name: string;\n  description: string;\n}\n\nexport class Setting<T>{\n  private _value: T;\n  public kind: ConfigType;\n  public id: string;\n  public name: string;\n  public description: string;\n  public staged_value: T;\n  \n  constructor(props: SettingsProps<T>){\n    this._value = props.value;\n    this.kind = props.kind;\n    this.id = props.id;\n    this.name = props.name;\n    this.description = props.description;\n    this.staged_value = this.value;\n  }\n  setStagedValue(value: T) {\n    this.staged_value = value;\n    return this;\n  }\n  submit() {\n    this.value = this.staged_value;\n  }\n  get edited() {\n    switch (this.kind) {\n      case \"number\": return (this.value != this.staged_value);\n      case \"checkbox\": return (this.value != this.staged_value);\n      case \"text\": return (this.value !== this.staged_value);\n      case \"radio\": return (this.value !== this.staged_value);\n      case \"select\": return (this.value !== this.staged_value);\n      default: return JSON.stringify(this.value) !== JSON.stringify(this.staged_value)\n    }\n  }\n  get value() {\n    return this._value;\n  }\n  set value(newvalue: T) {\n    this._value = newvalue;\n  }\n}","export default \"# Blender v2.80 (sub 75) OBJ File: 'testthing.blend'\\n# www.blender.org\\nmtllib testthing.mtl\\no Cube.001_Cube.002\\nv 0.511582 -4.514263 8.068190\\nv 0.511582 19.514263 8.068190\\nv 18.387676 -4.514263 8.068190\\nv 18.387676 19.514263 8.068190\\nvt 0.776756 0.750000\\nvt 0.875000 0.500000\\nvt 0.776756 0.500000\\nvt 0.875000 0.750000\\nvn 0.0000 0.0000 -1.0000\\nusemtl None\\ns off\\nf 3/1/1 2/2/1 4/3/1\\nf 3/1/1 1/4/1 2/2/1\\no Cube.002_Cube.003\\nv 26.247158 17.990746 5.902935\\nv 26.247158 -2.990745 5.902935\\nv 18.387676 -4.514263 8.068190\\nv 18.387676 19.514263 8.068190\\nvt 0.678513 0.750000\\nvt 0.776756 0.500000\\nvt 0.678513 0.500000\\nvt 0.776756 0.750000\\nvn -0.2656 0.0000 -0.9641\\nusemtl None\\ns off\\nf 6/5/2 8/6/2 5/7/2\\nf 6/5/2 7/8/2 8/6/2\\no Cube.003_Cube.004\\nv 26.899284 0.100000 5.233099\\nv 26.899284 14.900000 5.233099\\nv 26.247158 17.990746 5.902935\\nv 26.247158 -2.990745 5.902935\\nvt 0.625000 0.750000\\nvt 0.678513 0.500000\\nvt 0.625000 0.500000\\nvt 0.678513 0.750000\\nvn -0.7165 0.0000 -0.6976\\nusemtl None\\ns off\\nf 9/9/3 11/10/3 10/11/3\\nf 9/9/3 12/12/3 11/10/3\\no Cube.004_Cube.005\\nv 26.899284 0.100000 5.233099\\nv 26.899284 14.900000 5.233099\\nv 30.235020 14.900000 5.233099\\nv 30.235020 0.100000 5.233099\\nvt 0.625000 0.500000\\nvt 0.625000 0.750000\\nvt 0.625000 0.500000\\nvt 0.625000 0.750000\\nvn 0.0000 0.0000 -1.0000\\nusemtl None\\ns off\\nf 15/13/4 13/14/4 14/15/4\\nf 15/13/4 16/16/4 13/14/4\\no Cube.005_Cube.006\\nv 30.235020 14.900000 5.233099\\nv 30.235020 14.900000 1.551984\\nv 30.235020 0.100000 1.551984\\nv 30.235020 0.100000 5.233099\\nvt 0.375000 0.750000\\nvt 0.625000 0.500000\\nvt 0.375000 0.500000\\nvt 0.625000 0.750000\\nvn -1.0000 0.0000 0.0000\\nusemtl None\\ns off\\nf 19/17/5 17/18/5 18/19/5\\nf 19/17/5 20/20/5 17/18/5\\no Cube.006_Cube.007\\nv 26.899284 14.900000 1.551984\\nv 26.899284 14.900000 5.233099\\nv 30.235020 14.900000 5.233099\\nv 30.235020 14.900000 1.551984\\nvt 0.375000 0.500000\\nvt 0.625000 0.500000\\nvt 0.375000 0.500000\\nvt 0.625000 0.500000\\nvn 0.0000 -1.0000 0.0000\\nusemtl None\\ns off\\nf 24/21/6 22/22/6 21/23/6\\nf 24/21/6 23/24/6 22/22/6\\no Cube.007_Cube.008\\nv 26.899284 14.900000 1.551984\\nv 26.899284 14.900000 5.233099\\nv 26.247158 17.990746 0.500000\\nv 26.247158 17.990746 5.902935\\nvt 0.375000 0.500000\\nvt 0.625000 0.446487\\nvt 0.375000 0.446487\\nvt 0.625000 0.500000\\nvn -0.9785 -0.2064 0.0000\\nusemtl None\\ns off\\nf 25/25/7 28/26/7 27/27/7\\nf 25/25/7 26/28/7 28/26/7\\no Cube.008_Cube.009\\nv 26.247158 17.990746 0.500000\\nv 26.247158 17.990746 5.902935\\nv 18.387676 19.514263 0.500000\\nv 18.387676 19.514263 8.068190\\nvt 0.375000 0.348244\\nvt 0.625000 0.446487\\nvt 0.625000 0.348244\\nvt 0.375000 0.446487\\nvn -0.1903 -0.9817 0.0000\\nusemtl None\\ns off\\nf 31/29/8 30/30/8 32/31/8\\nf 31/29/8 29/32/8 30/30/8\\no Cube.009_Cube.010\\nv 0.511582 19.514263 0.500000\\nv 0.511582 19.514263 8.068190\\nv 18.387676 19.514263 0.500000\\nv 18.387676 19.514263 8.068190\\nvt 0.375000 0.348244\\nvt 0.625000 0.250000\\nvt 0.375000 0.250000\\nvt 0.625000 0.348244\\nvn 0.0000 -1.0000 0.0000\\nusemtl None\\ns off\\nf 35/33/9 34/34/9 33/35/9\\nf 35/33/9 36/36/9 34/34/9\\no Cube.010_Cube.011\\nv 0.511582 -4.514263 0.500000\\nv 0.511582 -4.514263 8.068190\\nv 0.511582 19.514263 0.500000\\nv 0.511582 19.514263 8.068190\\nvt 0.375000 0.250000\\nvt 0.625000 0.000000\\nvt 0.375000 0.000000\\nvt 0.625000 0.250000\\nvn 1.0000 0.0000 0.0000\\nusemtl None\\ns off\\nf 39/37/10 38/38/10 37/39/10\\nf 39/37/10 40/40/10 38/38/10\\no Cube.011_Cube.012\\nv 0.511582 -4.514263 0.500000\\nv 0.511582 -4.514263 8.068190\\nv 18.387676 -4.514263 8.068190\\nv 18.387676 -4.514263 0.500000\\nvt 0.375000 1.000000\\nvt 0.625000 0.901756\\nvt 0.375000 0.901756\\nvt 0.625000 1.000000\\nvn 0.0000 1.0000 0.0000\\nusemtl None\\ns off\\nf 41/41/11 43/42/11 44/43/11\\nf 41/41/11 42/44/11 43/42/11\\no Cube.012_Cube.013\\nv 26.247158 -2.990745 0.500000\\nv 26.247158 -2.990745 5.902935\\nv 18.387676 -4.514263 8.068190\\nv 18.387676 -4.514263 0.500000\\nvt 0.375000 0.901756\\nvt 0.625000 0.803513\\nvt 0.375000 0.803513\\nvt 0.625000 0.901756\\nvn -0.1903 0.9817 0.0000\\nusemtl None\\ns off\\nf 48/45/12 46/46/12 45/47/12\\nf 48/45/12 47/48/12 46/46/12\\no Cube.013_Cube.014\\nv 26.899284 0.100000 1.551984\\nv 26.899284 0.100000 5.233099\\nv 26.247158 -2.990745 0.500000\\nv 26.247158 -2.990745 5.902935\\nvt 0.375000 0.750000\\nvt 0.625000 0.803513\\nvt 0.625000 0.750000\\nvt 0.375000 0.803513\\nvn -0.9785 0.2064 0.0000\\nusemtl None\\ns off\\nf 49/49/13 52/50/13 50/51/13\\nf 49/49/13 51/52/13 52/50/13\\no Cube.014_Cube.015\\nv 26.899284 0.100000 1.551984\\nv 26.899284 0.100000 5.233099\\nv 30.235020 0.100000 1.551984\\nv 30.235020 0.100000 5.233099\\nvt 0.625000 0.750000\\nvt 0.375000 0.750000\\nvt 0.625000 0.750000\\nvt 0.375000 0.750000\\nvn 0.0000 1.0000 0.0000\\nusemtl None\\ns off\\nf 56/53/14 53/54/14 54/55/14\\nf 56/53/14 55/56/14 53/54/14\\no Cube.015_Cube.016\\nv 26.899284 0.100000 1.551984\\nv 26.899284 14.900000 1.551984\\nv 30.235020 14.900000 1.551984\\nv 30.235020 0.100000 1.551984\\nvt 0.375000 0.750000\\nvt 0.375000 0.500000\\nvt 0.375000 0.750000\\nvt 0.375000 0.500000\\nvn 0.0000 0.0000 1.0000\\nusemtl None\\ns off\\nf 60/57/15 58/58/15 57/59/15\\nf 60/57/15 59/60/15 58/58/15\\no Cube.016_Cube.017\\nv 26.899284 0.100000 1.551984\\nv 26.899284 14.900000 1.551984\\nv 26.247158 17.990746 0.500000\\nv 26.247158 -2.990745 0.500000\\nvt 0.321487 0.750000\\nvt 0.375000 0.500000\\nvt 0.321487 0.500000\\nvt 0.375000 0.750000\\nvn -0.8499 0.0000 0.5269\\nusemtl None\\ns off\\nf 64/61/16 62/62/16 63/63/16\\nf 64/61/16 61/64/16 62/62/16\\no Cube.017_Cube.018\\nv 26.247158 17.990746 0.500000\\nv 26.247158 -2.990745 0.500000\\nv 18.387676 19.514263 0.500000\\nv 18.387676 -4.514263 0.500000\\nvt 0.223244 0.750000\\nvt 0.321487 0.500000\\nvt 0.223244 0.500000\\nvt 0.321487 0.750000\\nvn 0.0000 0.0000 1.0000\\nusemtl None\\ns off\\nf 68/65/17 65/66/17 67/67/17\\nf 68/65/17 66/68/17 65/66/17\\no Cube.018_Cube.019\\nv 0.511582 -4.514263 0.500000\\nv 0.511582 19.514263 0.500000\\nv 18.387676 19.514263 0.500000\\nv 18.387676 -4.514263 0.500000\\nvt 0.125000 0.750000\\nvt 0.223244 0.500000\\nvt 0.125000 0.500000\\nvt 0.223244 0.750000\\nvn 0.0000 0.0000 1.0000\\nusemtl None\\ns off\\nf 69/69/18 71/70/18 70/71/18\\nf 69/69/18 72/72/18 71/70/18\\n\";","import { FDTDParams } from './';\nimport Room from '../../objects/room';\nimport Receiver from '../../objects/receiver';\nimport Source from '../../objects/source';\n\nconst defaults = {\n  room: {} as Room,\n  gain: 500,\n  threshold: 0.001,\n  dx: 1,\n  dt: 1,\n  sources: [] as Source[],\n  receivers: [] as Receiver[],\n  q: 0.343,\n  r: 1.32,\n} as FDTDParams;\n\nexport default defaults","//@ts-ignore\nimport vs from \"!raw-loader!./shader.vert\";\n//@ts-ignore\nimport fs from \"!raw-loader!./shader.frag\";\n\nexport default {\n  vs,\n  fs\n};\n","export default \"precision highp float;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float time;\\n\\nuniform float gain;\\nattribute vec3 position;\\nattribute vec2 uv;\\nattribute vec3 translate;\\n\\nvarying vec2 vUv;\\nvarying float vScale;\\n\\nattribute float pressure;\\nvarying float vPressure;\\n\\n\\nfloat rand(vec2 co){\\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\n}\\n\\n\\n\\nvoid main() {\\n  vec4 mvPosition = modelViewMatrix * vec4( translate, 1.0 );\\n  vec3 ran = vec3(rand(translate.xy),rand(translate.xz),rand(translate.yz));\\n  vec3 trTime = ran+translate;\\n  float scale = abs(pressure) * 10.0;\\n  vScale = scale;\\n  scale = clamp(scale * gain + 10.0,0.0,100.0);\\n  mvPosition.xyz += position * scale;\\n  vUv = uv;\\n  vPressure = pressure;\\n  gl_Position = projectionMatrix * mvPosition;\\n\\n}\";","export default \"precision highp float;\\n\\nuniform sampler2D map;\\nuniform float threshold;\\nvarying vec2 vUv;\\nvarying float vScale;\\nvarying float vPressure;\\n\\n// HSL to RGB Convertion helpers\\nvec3 HUEtoRGB(float H){\\n  H = mod(H,1.0);\\n  float R = abs(H * 6.0 - 3.0) - 1.0;\\n  float G = 2.0 - abs(H * 6.0 - 2.0);\\n  float B = 2.0 - abs(H * 6.0 - 4.0);\\n  return clamp(vec3(R,G,B),0.0,1.0);\\n}\\n\\nvec3 HSLtoRGB(vec3 HSL){\\n  vec3 RGB = HUEtoRGB(HSL.x);\\n  float C = (1.0 - abs(2.0 * HSL.z - 1.0)) * HSL.y;\\n  return (RGB - 0.5) * C + HSL.z;\\n}\\n\\nvoid main() {\\n  vec4 diffuseColor = texture2D( map, vUv );\\n  if(abs(vPressure)<threshold){\\n    discard;\\n  }\\n  if(vPressure<0.0){\\n    gl_FragColor = vec4(vec3(1.0,0.0,0.0), clamp(abs(vPressure),0.0,1.0));\\n  }\\n  else{\\n    gl_FragColor = vec4(vec3(0.0,1.0,0.0), clamp(abs(vPressure),0.0,1.0));\\n  }\\n}\";","//@ts-nocheck\nimport { GPU, Kernel, Input, IKernelFunctionThis } from \"gpu.js\";\nimport Room from \"../../objects/room\";\nimport * as THREE from \"three\";\nimport Solver from \"../solver\";\nimport Surface from \"../../objects/surface\";\nimport Source from \"../../objects/source\";\nimport Receiver from \"../../objects/receiver\";\nimport defaults from './defaults';\n\nimport image from '../../res/sprites/circle.png';\nimport shader from './shader';\n\nconst { ceil, round, floor, abs } = Math;\n\ninterface Thread {\n\tx: number,\n\ty: number,\n\tz: number;\n}\n\n\n\nexport interface FDTDParams {\n\troom: Room;\n\tgain: number;\n\tthreshold: number;\n\tdx: number;\n\tdt: number;\n\tsources: Source[];\n\treceivers: Receiver[];\n\tq: number;\n\tr: number;\n}\n\nexport class FDTD extends Solver {\n\trunning: boolean;\n\tclearpass: boolean;\n\tn: number;\n\tt: number;\n\t\n\troom!: Room;\n\tprivate _gain!: number;\n\tprivate _threshold!: number;\n\tdx!: number;\n\tdt!: number;\n\tsources!: Source[];\n\treceivers!: Receiver[];\n\tq!: number;\n\tr!: number;\n\t\n\tu!: Float32Array[];\n\tf!: Float32Array;\n\tlx: number;\n\tly: number;\n\tlz: number;\n\tnz: number;\n\tny: number;\n\tnx: number;\n\tN: number;\n\t\n\tsourceLocations: number[][];\n\t\n\tgpu!: GPU;\n\tkernel!: Kernel;\n\t\n\tmesh!: THREE.Mesh;\n\tgeometry!: THREE.InstancedBufferGeometry;\n\tpressureAttribute!: THREE.InstancedBufferAttribute;\n\tmaterial!: THREE.RawShaderMaterial;\n\tconstructor(params?: FDTDParams) {\n\t\tsuper(params);\n\t\tthis.kind = \"fdtd\";\n\t\tthis.n = 0;\n\t\tthis.t = 0;\n\t\t\n\t\tthis.running = false;\n\t\tthis.clearpass = false;\n\t\t\n\t\tfor (const key in defaults) {\n\t\t\tthis[key] = (params && params[key]) || defaults[key];\n\t\t}\n\t\tconst { x: lx, y: ly, z: lz } = { ...this.room.boundingBox.getSize(new THREE.Vector3()) };\n\t\tthis.lx = lx;\n\t\tthis.ly = ly;\n\t\tthis.lz = lz;\n\t\tthis.nx = ceil(this.lx / this.dx);\n\t\tthis.ny = ceil(this.ly / this.dx);\n\t\tthis.nz = ceil(this.lz / this.dx);\n\t\tthis.N = this.nx * this.ny * this.nz;\n\t\tthis.sourceLocations = [];\n\t\tfor (let i = 0; i < this.sources.length; i++) {\n\t\t\tthis.sourceLocations.push([\n\t\t\t\tround((this.sources[i].x * this.nx) / this.lx),\n\t\t\t\tround((this.sources[i].y * this.ny) / this.ly),\n\t\t\t\tround((this.sources[i].z * this.nz) / this.lz)\n\t\t\t]);\n\t\t}\n\t\tthis.reset();\n\t\tthis.initKernel(params);\n\t\tthis.initRenderItems();\n\t}\n\tget threshold() {\n\t\treturn this._threshold;\n\t}\n\tset threshold(threshold: number) {\n\t\tthis._threshold = threshold;\n\t\tthis.material && (this.material.uniforms[\"threshold\"].value = this._threshold);\n\t}\n\tget gain() {\n\t\treturn this._gain;\n\t}\n\tset gain(gain: number) {\n\t\tthis._gain = gain;\n\t\tthis.material && (this.material.uniforms[\"gain\"].value = this._gain);\n\t}\n\tinitKernel() {\n\n\t\tthis.gpu = new GPU({\n\t\t\tmode: \"webgl2\",\n\n    });\n\t\n\t\tfunction kernelFunction(\n      this: IKernelFunctionThis,\n      prev: number[][][],\n      curr: number[][][],\n\t\t\tf: number[][][],\n      q: number,\n      r: number,\n      dx: number,\n      dt: number,\n      nx: number,\n      ny: number,\n      nz: number\n\t\t): number {\n\t\t\t\t\t\tlet u_prev = prev[this.thread.z][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet u_center = curr[this.thread.z][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet u_right = curr[this.thread.z][this.thread.y][this.thread.x + 1];\n\t\t\t\t\t\tlet u_left = curr[this.thread.z][this.thread.y][this.thread.x - 1];\n\t\t\t\t\t\tlet u_front = curr[this.thread.z][this.thread.y + 1][this.thread.x];\n\t\t\t\t\t\tlet u_back = curr[this.thread.z][this.thread.y - 1][this.thread.x];\n\t\t\t\t\t\tlet u_top = curr[this.thread.z + 1][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet u_bottom = curr[this.thread.z - 1][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet f_center = f[this.thread.z][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet grad_x = (q + q) * (u_right - u_center) - (q + q) * (u_center - u_left);\n\t\t\t\t\t\tlet grad_y = (q + q) * (u_front - u_center) - (q + q) * (u_center - u_back);\n\t\t\t\t\t\tlet grad_z = (q + q) * (u_top - u_center) - (q + q) * (u_center - u_bottom);\n\t\t\t\t\t\tlet grad = grad_x + grad_y + grad_z;\n\n\t\t\t\t\t\tlet coef = 1.0 / (2.0 * r * dx * dx);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn coef * grad + 2.0 * u_center - u_prev + dt * dt * f_center;\n\t\t\t\t}\n\t\tthis.kernel = this.gpu\n\t\t\t.createKernel<typeof kernelFunction>(kernelFunction)\n\n\t\t\t.setOutput([this.N])\n\n\t}\n\tsatisfyBounds() {\n\t\tfor (let i = 0; i < this.nx; i++){\n\t\t\tfor (let j = 0; j < this.ny; j++){\n\t\t\t\tthis.u[this.curr][this.getIndex(i, j, 0)] = 0;\n\t\t\t\tthis.u[this.curr][this.getIndex(i, j, this.nz-1)] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < this.nx; i++){\n\t\t\tfor (let k = 0; k < this.nz; k++){\n\t\t\t\tthis.u[this.curr][this.getIndex(i, 0, k)] = 0;\n\t\t\t\tthis.u[this.curr][this.getIndex(i, this.ny-1, k)] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (let j = 0; j < this.ny; j++){\n\t\t\tfor (let k = 0; k < this.nz; k++){\n\t\t\t\tthis.u[this.curr][this.getIndex(0, j, k)] = 0;\n\t\t\t\tthis.u[this.curr][this.getIndex(this.nx-1, j, k)] = 0;\n\t\t\t}\n\t\t}\n\t}\n\treset() {\n\t\tthis.t = 0;\n\t\tthis.n = 0;\n\t\tthis.u = [\n\t\t\tnew Float32Array(this.N),\n\t\t\tnew Float32Array(this.N),\n\t\t];\n\t\tthis.f = new Float32Array(this.N);\n\t\tfor (let i = 0; i < this.N; i++){\n\t\t\tthis.u[0][i] = 0;\n\t\t\tthis.u[1][i] = 0;\n\t\t\tthis.f[i] = 0;\n\t\t}\n\n\t\tfor (let i = 0; i < this.sourceLocations.length; i++){\n\t\t\tthis.f[\n\t\t\t\tthis.getIndex(\n\t\t\t\t\tthis.sourceLocations[i][0],\n\t\t\t\t\tthis.sourceLocations[i][1],\n\t\t\t\t\tthis.sourceLocations[i][2]\n\t\t\t\t)\n\t\t\t] = this.sources[i].f(0);\n\t\t}\n\t}\n\tgetIndex(i, j, k) {\n\t\treturn i * this.ny * this.nz + j * this.nz + k;\n\t}\n\tget3DIndex(i) {\n\t\treturn [\n\t\t\tfloor(i/(this.ny*this.nz))%this.nx,\n\t\t\tfloor(i/(this.nz))%this.ny,\n\t\t\ti%this.nz,\n\t\t]\n\t}\n\tget curr() {\n\t\treturn (this.n + 1) % 2;\n\t}\n\tget prev() {\n\t\treturn this.n % 2;\n\t}\n\tclear() {\n\t\tthis.clearpass = true;\n\t\tif (this.running) {\n\t\t}\n\t}\n\n\tupdate = () => {\n\t\tif (this.running || this.clearpass) {\n\t\t\tthis.satisfyBounds();\n\t\t\tthis.step();\n\t\t}\n\t\t// console.log(this.running);\n\t}\n\tupdateSources() {\n\t\tfor (let i = 0; i < this.sourceLocations.length; i++) {\n\t\t\t\t\t// console.log(this.sources[i].f(this.t))\n          this.f[\n            this.getIndex(\n              this.sourceLocations[i][2],\n              this.sourceLocations[i][1],\n              this.sourceLocations[i][0]\n            )\n\t\t\t\t\t] = this.sources[i].f(this.t);\n\t\t\t// console.log(\n      //   this.f[\n      //     this.getIndex(\n      //       this.sourceLocations[i][2],\n      //       this.sourceLocations[i][1],\n      //       this.sourceLocations[i][0]\n      //     )\n      //   ]\n\t\t\t// );\n\t\t\t// console.log(this.sourceLocations[i]);\n        }\n\t}\n\tstep() { \n\t\tif (this.clearpass) {\n\t\t\tthis.reset();\n\t\t\treturn\n\t\t}\n\t\t\n\t\t//@ts-ignore\n\t\tthis.u[this.prev] = this.kernel(\n      //@ts-ignore\n      new Input(this.u[this.prev], [this.nz, this.ny, this.nx]),\n      //@ts-ignore\n      new Input(this.u[this.curr], [this.nz, this.ny, this.nx]),\n      //@ts-ignore\n\t\t\tnew Input(this.f, [this.nz, this.ny, this.nx]),\n      this.q,\n      this.r,\n      this.dx,\n      this.dt,\n      this.nx,\n      this.ny,\n      this.nz\n\t\t);\n\t\t\n\t\tthis.t += this.dt;\n\t\t// console.log(this.sources[0].f(this.t))\n\t\tthis.n++;\n\n\t\t// this.gain = \n\t\t\n\t\tthis.updateSources();\n\t\t// this.satisfyBounds();\n\t\tthis.pressureAttribute.set(this.u[this.curr], 0);\n\t\t//@ts-ignore\n\t\tthis.room.getFDTDPressureAttribute().needsUpdate=true\n\t}\n\tinitRenderItems() {\n\t\tconst boxGeometry = new THREE.CircleBufferGeometry(.1, 6);\n\t\tthis.geometry = new THREE.InstancedBufferGeometry();\n\t\tthis.geometry.index = boxGeometry.index;\n\t\tthis.geometry.attributes = boxGeometry.attributes;\n\t\tconst translateArray = new Float32Array(this.N*3);\n\t\tlet c = 0;\n\t\tfor (let i = 0; i < this.nx; i++){\n\t\t\tfor (let j = 0; j < this.ny; j++){\n\t\t\t\tfor (let k = 0; k < this.nz; k++){\n\t\t\t\t\tlet index = this.getIndex(i,j,k) * 3;\n\t\t\t\t\ttranslateArray[index+0] = (i / this.nx) * this.lx + this.dx/2;\n\t\t\t\t\ttranslateArray[index+1] = (j / this.ny) * this.ly + this.dx/2;\n\t\t\t\t\ttranslateArray[index + 2] = (k / this.nz) * this.lz + this.dx/2;\n\t\t\t\t\tc++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.pressureAttribute = new THREE.InstancedBufferAttribute(this.u[this.curr],1);\n\t\tthis.pressureAttribute.setUsage(THREE.DynamicDrawUsage);\n\n\t\tthis.geometry.setAttribute(\"translate\", new THREE.InstancedBufferAttribute(translateArray, 3));\n\t\tthis.geometry.setAttribute(\"pressure\", new THREE.InstancedBufferAttribute(this.u[this.curr],1))\n\t\tthis.material = new THREE.RawShaderMaterial({\n      uniforms: {\n        map: {\n          value: new THREE.TextureLoader().load(image)\n        },\n\t\t\t\ttime: { value: 0.0 },\n\t\t\t\tthreshold: { value: this.threshold },\n\t\t\t\tgain: { value: this.gain }\n\t\t\t},\n\t\t\t\n\t\t\tvertexShader: shader.vs,\n\t\t\tfragmentShader: shader.fs,\n\t\t\ttransparent: true,\n\t\t\talphaTest: 1.0,\n\t\t\tdepthTest: true,\n      depthWrite: true\n\t\t});\n\t\t\n\t\tthis.mesh = new THREE.Mesh(this.geometry, this.material);\n\n\t\t\n\t\tthis.room.setFDTD(this.mesh);\n\n\t}\n\n\t// subdivide() {\n\t// \tconst { min, max } = this.room.boundingBox;\n\t// \tconst { x, y, z } = max.sub(min);\n\t// \tthis.N = [\n\t// \t\tMath.ceil(x / this.resolution),\n\t// \t\tMath.ceil(y / this.resolution),\n\t// \t\tMath.ceil(z / this.resolution)\n\t// \t];\n\t// \tfor (let i = 0; i < this.N[0]; i++) {\n\t// \t\tthis.elementBoxes.push([]);\n\t// \t\tthis.meshes.push([]);\n\n\t// \t\tthis.u[this.prev].push([]);\n\t// \t\tthis.u[this.curr].push([]);\n\t// \t\tthis.u[this.next].push([]);\n\n\t// \t\tthis.rho.push([]);\n\t// \t\tthis.q.push([]);\n\t// \t\tthis.f.push([]);\n\n\t// \t\tfor (let j = 0; j < this.N[1]; j++) {\n\t// \t\t\tthis.elementBoxes[i].push([]);\n\t// \t\t\tthis.meshes[i].push([]);\n\n\t// \t\t\tthis.u[this.prev][i].push([]);\n\t// \t\t\tthis.u[this.curr][i].push([]);\n\t// \t\t\tthis.u[this.next][i].push([]);\n\n\t// \t\t\tthis.rho[i].push([]);\n\t// \t\t\tthis.q[i].push([]);\n\t// \t\t\tthis.f[i].push([]);\n\n\t// \t\t\tfor (let k = 0; k < this.N[2]; k++) {\n\t// \t\t\t\tthis.u[this.prev][i][j][k] = 0;\n\t// \t\t\t\tthis.u[this.curr][i][j][k] = 0;\n\t// \t\t\t\tthis.u[this.next][i][j][k] = 0;\n\n\t// \t\t\t\tthis.rho[i][j][k] = 1.25;\n\t// \t\t\t\tthis.q[i][j][k] = 1000;\n\t// \t\t\t\tthis.f[i][j][k] = 0;\n\n\t// \t\t\t\tconst box = new THREE.Box3().setFromCenterAndSize(\n\t// \t\t\t\t\tnew THREE.Vector3(\n\t// \t\t\t\t\t\tmin.x + i * this.resolution,\n\t// \t\t\t\t\t\tmin.y + j * this.resolution,\n\t// \t\t\t\t\t\tmin.z + k * this.resolution\n\t// \t\t\t\t\t),\n\t// \t\t\t\t\tnew THREE.Vector3().setScalar(this.resolution)\n\t// \t\t\t\t);\n\t// \t\t\t\tthis.elementBoxes[i][j][k] = box;\n\t// \t\t\t\tthis.meshes[i][j][k] = new THREE.Mesh(\n\t// \t\t\t\t\tnew THREE.BoxBufferGeometry(\n\t// \t\t\t\t\t\tthis.resolution,\n\t// \t\t\t\t\t\tthis.resolution,\n\t// \t\t\t\t\t\tthis.resolution\n\t// \t\t\t\t\t),\n\t// \t\t\t\t\tnew THREE.MeshBasicMaterial({\n\t// \t\t\t\t\t\tcolor: 0,\n\t// \t\t\t\t\t\ttransparent: true,\n\t// \t\t\t\t\t\topacity: 0.0\n\t// \t\t\t\t\t})\n\t// \t\t\t\t);\n\n\t// \t\t\t\tconst center = box.getCenter(new THREE.Vector3());\n\t// \t\t\t\tthis.meshes[i][j][k].position.set(\n\t// \t\t\t\t\tcenter.x,\n\t// \t\t\t\t\tcenter.y,\n\t// \t\t\t\t\tcenter.z\n\t// \t\t\t\t);\n\t// \t\t\t\tthis.room.add(this.meshes[i][j][k]);\n\t// \t\t\t\tlet intersects = false;\n\t// \t\t\t\tfor (\n\t// \t\t\t\t\tlet s = 0;\n\t// \t\t\t\t\ts < this.room.surfaces.children.length;\n\t// \t\t\t\t\ts++\n\t// \t\t\t\t) {\n\t// \t\t\t\t\tif (this.room.surfaces.children[s] instanceof Surface) {\n\t// \t\t\t\t\t\tfor (\n\t// \t\t\t\t\t\t\tlet v = 0;\n\t// \t\t\t\t\t\t\tv <\n\t// \t\t\t\t\t\t\t(this.room.surfaces.children[s] as Surface)\n\t// \t\t\t\t\t\t\t\t._triangles.length;\n\t// \t\t\t\t\t\t\tv++\n\t// \t\t\t\t\t\t) {\n\t// \t\t\t\t\t\t\tif (\n\t// \t\t\t\t\t\t\t\tbox.intersectsTriangle(\n\t// \t\t\t\t\t\t\t\t\t(this.room.surfaces.children[\n\t// \t\t\t\t\t\t\t\t\t\ts\n\t// \t\t\t\t\t\t\t\t\t] as Surface)._triangles[v]\n\t// \t\t\t\t\t\t\t\t)\n\t// \t\t\t\t\t\t\t) {\n\t// \t\t\t\t\t\t\t\tintersects = true;\n\t// \t\t\t\t\t\t\t}\n\t// \t\t\t\t\t\t}\n\t// \t\t\t\t\t}\n\t// \t\t\t\t}\n\t// \t\t\t\tif (intersects) {\n\t// \t\t\t\t\t// this.C[i][j][k]=0\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// }\n}\n","import * as THREE from \"three\";\nimport Container, { ContainerProps } from \"./container\";\nimport Surface from './surface';\nimport { FDTD } from \"../compute/fdtd\";\n\nexport interface RoomProps extends ContainerProps {\n\tsurfaces: Surface[];\n\t// surfaceEdges: Surface[];\n\tshowBoundingBox?: boolean;\n\toriginalFileName?: string;\n\toriginalFileData?: string;\n}\n\nexport default class Room extends Container {\n\tboundingBox!: THREE.Box3;\n\tsurfaces: Container;\n\t_fdtdmeshid!: number;\n\tvolume: number;\n\toriginalFileName?: string;\n\toriginalFileData?: string;\n\tconstructor(name: string, props: RoomProps) {\n\t\tsuper(name);\n\t\tthis.originalFileName = props.originalFileName;\n\t\tthis.originalFileData = props.originalFileData;\n\t\tthis.kind = \"room\";\n\t\tthis.surfaces = new Container(\"surfaces\");\n\t\tprops.surfaces.forEach(surface => {\n\t\t\tthis.surfaces.add(surface);\n\t\t});\n\t\tthis.add(this.surfaces);\n\t\tthis.calculateBoundingBox();\n\t\tthis.deselect = () => {\n\t\t\tthis.surfaces.children.forEach((x: Container) => {\n\t\t\t\tx.deselect();\n\t\t\t});\n\t\t};\n\t\tthis.select = () => {\n\t\t\tthis.surfaces.children.forEach((x: Container) => {\n\t\t\t\tx.select();\n\t\t\t});\n\t\t};\n\t\tthis.volume = this.volumeOfMesh();\n\t}\n\tcalculateBoundingBox() {\n\t\tthis.boundingBox = this.surfaces.children.reduce((a: THREE.Box3, b: Container) => {\n\t\t\t\t(b as Surface).geometry.computeBoundingBox();\n\t\t\t\treturn (a as THREE.Box3).union((b as Surface).geometry.boundingBox);\n\t\t}, new THREE.Box3());\n\t\treturn this.boundingBox;\n\t}\n\tsetFDTD(mesh: THREE.Mesh) {\n\t\tthis._fdtdmeshid = mesh.id;\n\t\tthis.add(mesh);\n\t}\n\tgetFDTDPressureAttribute(): THREE.InstancedBufferAttribute {\n\t\treturn (((this.getObjectById(this._fdtdmeshid) as THREE.Mesh).geometry as THREE.InstancedBufferGeometry).getAttribute('pressure') as THREE.InstancedBufferAttribute)\n\t}\n\tsignedVolumeOfTriangle(p1: THREE.Vector3, p2: THREE.Vector3, p3: THREE.Vector3) {\n \t\treturn p1.dot(p2.clone().cross(p3)) / 6.0;\n\t}\n\tvolumeOfMesh() {\n\t\tlet sum = 0;\n\t\tthis.surfaces.children.forEach((surface: Surface) => {\n\t\t\tsurface._triangles.forEach((triangle: THREE.Triangle) => {\n\t\t\t\tsum+=this.signedVolumeOfTriangle(triangle.a, triangle.b, triangle.c);\t\n\t\t\t})\n\t\t})\n\t\treturn Math.abs(sum);\n\t}\n}\n","const {cos} = Math;\n\nexport function scatteredEnergy(\n  incomingEnergy: number,\n  absorptionCoefficient: number,\n  scatteringCoefficient: number,\n  /**\n   * fov angle of the receiver\n   */\n  gamma: number,\n  /**\n   * angle between the surface normal and the center of the receiver\n   */\n  theta: number,\n  \n) {\n  return incomingEnergy\n    * (1 - absorptionCoefficient)\n    * scatteringCoefficient\n    * (1 - cos(gamma / 2))\n    * 2\n    * cos(theta);\n}","export default \"attribute vec2 color;\\nvarying vec2 vColor;\\nuniform float pointScale;\\nvoid main() {\\n  vColor = color;\\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n  gl_PointSize = pointScale*(color.x/4.0+0.5);\\n  gl_Position = projectionMatrix * mvPosition;\\n  \\n}\";","//@ts-ignore\nimport vs from \"!raw-loader!./shader.vert\";\n//@ts-ignore\nimport fs from \"!raw-loader!./shader.frag\";\n\nexport default {\n  vs,\n  fs\n};\n","export default \"varying vec2 vColor;\\nuniform float drawStyle;\\nuniform int inverted;\\nvec3 hsl2rgb(vec3 c)\\n{\\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\\n\\n    return c.z + c.y * (rgb-0.5)*(1.0-abs(2.0*c.z-1.0));\\n}\\n\\nvec3 rgb2hsl( vec3 c ){\\n  float h = 0.0;\\n\\tfloat s = 0.0;\\n\\tfloat l = 0.0;\\n\\tfloat r = c.r;\\n\\tfloat g = c.g;\\n\\tfloat b = c.b;\\n\\tfloat cMin = min( r, min( g, b ) );\\n\\tfloat cMax = max( r, max( g, b ) );\\n\\n\\tl = ( cMax + cMin ) / 2.0;\\n\\tif ( cMax > cMin ) {\\n\\t\\tfloat cDelta = cMax - cMin;\\n        \\n        //s = l < .05 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) ); Original\\n\\t\\ts = l < .0 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) );\\n        \\n\\t\\tif ( r == cMax ) {\\n\\t\\t\\th = ( g - b ) / cDelta;\\n\\t\\t} else if ( g == cMax ) {\\n\\t\\t\\th = 2.0 + ( b - r ) / cDelta;\\n\\t\\t} else {\\n\\t\\t\\th = 4.0 + ( r - g ) / cDelta;\\n\\t\\t}\\n\\n\\t\\tif ( h < 0.0) {\\n\\t\\t\\th += 6.0;\\n\\t\\t}\\n\\t\\th = h / 6.0;\\n\\t}\\n\\treturn vec3( h, s, l );\\n}\\n\\nvoid main() {\\n  vec3 color = vec3(0.0);\\n\\tfloat alpha = vColor.x;\\n  if(drawStyle == 0.0){\\n    vec3 col = hsl2rgb(vec3(vColor.x/10.0,0.8, vColor.x));\\n    color = col;\\n\\t\\talpha = vColor.x;\\n  }\\n  else if(drawStyle == 1.0){\\n    vec3 col = hsl2rgb(vec3(vColor.y,vColor.x,vColor.y));\\n    vec3 col2 = vec3(vColor.x,vColor.x,1.0-vColor.y);\\n    color = col*col2;\\n\\t\\talpha = vColor.x;\\n  }\\n\\tif(inverted != 0){\\n\\t\\tcolor = vec3(1.0) - color;\\n\\t}\\n  gl_FragColor = vec4(color, alpha);\\n  \\n}\";","import Solver from \"../solver\";\nimport * as THREE from \"three\";\nimport Room from \"../../objects/room\";\nimport { KeyValuePair } from \"../../common/key-value-pair\";\nimport Container from \"../../objects/container\";\nimport enumerable from \"../../common/enumerable\";\nimport { computeBoundsTree, disposeBoundsTree, acceleratedRaycast } from \"three-mesh-bvh\";\nimport Source from \"../../objects/source\";\nimport Renderer from \"../../render/renderer\";\nimport Surface from \"../../objects/surface\";\nimport Receiver from \"../../objects/receiver\";\nimport { Stat } from \"../../components/Gutter/Stats\";\nimport Messenger from \"../../messenger\";\nimport sort from \"fast-sort\";\n// import * as ac from '../acoustics'\nimport FileSaver from \"file-saver\";\nimport { scatteredEnergy } from \"./scattered-energy\";\nimport PointShader from \"./shaders/points\";\n\nimport wasmInit from \"../../as/wasm-init\";\nimport loader from '@assemblyscript/loader';\n\n\n//@ts-ignore\nTHREE.BufferGeometry.prototype.computeBoundsTree = computeBoundsTree;\n//@ts-ignore\nTHREE.BufferGeometry.prototype.disposeBoundsTree = disposeBoundsTree;\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nexport interface Chain {\n  angle_in: number;\n  angle_out: number;\n  total_time: number;\n  time_rec: number;\n  angle_rec: number;\n  distance: number;\n  point: THREE.Vector3;\n  object: THREE.Object3D;\n  face: THREE.Face3;\n  faceIndex: number;\n}\nconst { abs, floor, asin } = Math;\n\n\nexport interface RayPath {\n  intersectedReceiver: boolean;\n  chain: Chain[];\n  energy: number;\n  time?: number;\n  source: string;\n}\nexport interface EnergyTime {\n  time: number;\n  energy: {\n    frequency: number;\n    value: number;\n  }[];\n}\n    // helper type\nexport type ChartData = {\n  label: string;\n  data: number[][];\n  x?: number[];\n  y?: number[];\n};\n\nexport interface ReceiverData {\n  id: string;\n  data: EnergyTime[];\n}\nexport class ReceiverData {\n  constructor(id: string) {\n    this.id = id;\n    this.data = [] as EnergyTime[];\n  }\n}\nexport interface RayTracerParams {\n  renderer;\n  name?: string;\n  roomID?: string;\n  sourceIDs?: string[];\n  surfaceIDs?: string[];\n  containers?: KeyValuePair<Container>;\n  receiverIDs?: string[];\n  updateInterval?: number;\n  passes?: number;\n  pointSize?: number;\n  reflectionOrder?: number;\n  isRunning?: boolean;\n  messenger: Messenger;\n  runningWithoutReceivers?: boolean;\n  raysVisible?: boolean;\n  invertedDrawStyle?: boolean;\n}\nexport const defaults = {\n  name: \"ray-tracer\",\n  roomID: \"\",\n  sourceIDs: [] as string[],\n  surfaceIDs: [] as string[],\n  containers: {} as KeyValuePair<Container>,\n  receiverIDs: [] as string[],\n  updateInterval: 20,\n  reflectionOrder: 200,\n  isRunning: false,\n  runningWithoutReceivers: false,\n  passes: 1,\n  pointSize: 2,\n  raysVisible: true,\n  invertedDrawStyle: false\n  \n};\nexport enum DRAWSTYLE {\n  ENERGY = 0.0,\n  ANGLE = 1.0,\n  ANGLE_ENERGY = 2.0\n}\nexport interface DrawStyle {\n  ANGLE: 0.0;\n  ENERGY: 1.0;\n  ANGLE_ENERGY: 2.0;\n}\nexport default class RayTracer extends Solver {\n  roomID: string;\n  sourceIDs: string[];\n  containers: KeyValuePair<Container | Room>;\n  surfaceIDs: string[];\n  receiverIDs: string[];\n  updateInterval: number;\n  reflectionOrder: number;\n  raycaster: THREE.Raycaster;\n  intersections: THREE.Intersection[];\n  _isRunning: boolean;\n  intervals: NodeJS.Timeout[];\n  rayBufferGeometry: THREE.BufferGeometry;\n  rayBufferAttribute: THREE.Float32BufferAttribute;\n  colorBufferAttribute: THREE.Float32BufferAttribute;\n  rays: THREE.LineSegments;\n  rayPositionIndex: number;\n  maxrays: number;\n  renderer: Renderer;\n  intersectableObjects: Array<THREE.Mesh | THREE.Object3D | Container>;\n  paths: KeyValuePair<RayPath[]>;\n  stats: KeyValuePair<Stat>;\n  messenger: Messenger;\n  messageHandlerIDs: string[][];\n  statsUpdatePeriod: number;\n  lastTime: number;\n  _runningWithoutReceivers: boolean;\n  reflectionLossFrequencies: number[];\n  allReceiverData!: ReceiverData[];\n  hits: THREE.Points;\n  _pointSize: number;\n  chartdata: ChartData[];\n  passes: number;\n  _raysVisible: boolean;\n  _invertedDrawStyle: boolean;\n  __start_time!: number;\n  __calc_time!: number;\n  __num_checked_paths!: number;\n  constructor(params: RayTracerParams) {\n    super(params);\n    this.kind = \"ray-tracer\";\n    this.sourceIDs = params.sourceIDs || defaults.sourceIDs;\n    this.surfaceIDs = params.surfaceIDs || defaults.surfaceIDs;\n    this.roomID = params.roomID || defaults.roomID;\n    this.containers = params.containers || defaults.containers;\n    this.receiverIDs = params.receiverIDs || defaults.receiverIDs;\n    this.updateInterval = params.updateInterval || defaults.updateInterval;\n    this.reflectionOrder = params.reflectionOrder || defaults.reflectionOrder;\n    this._isRunning = params.isRunning || defaults.isRunning;\n    this._runningWithoutReceivers = params.runningWithoutReceivers || defaults.runningWithoutReceivers;\n    this.renderer = params.renderer;\n    this.reflectionLossFrequencies = [4000];\n    this.intervals = [];\n    this.lastTime = Date.now();\n    this.statsUpdatePeriod = 100;\n    this._pointSize = params.pointSize || defaults.pointSize;\n    \n    const paramsHasRaysVisible = typeof params.raysVisible === \"boolean\";\n    this._raysVisible = paramsHasRaysVisible ? params.raysVisible! : defaults.raysVisible;\n\n    const paramsHasInvertedDrawStyle = typeof params.invertedDrawStyle === \"boolean\";\n    this._invertedDrawStyle = paramsHasInvertedDrawStyle ? params.invertedDrawStyle! : defaults.invertedDrawStyle;\n    \n    this.passes = params.passes || defaults.passes;\n    this.raycaster = new THREE.Raycaster();\n    this.rayBufferGeometry = new THREE.BufferGeometry();\n    this.maxrays = 1e7 - 1;\n    this.rayBufferAttribute = new THREE.Float32BufferAttribute(new Float32Array(this.maxrays), 3);\n    this.rayBufferAttribute.setUsage(THREE.DynamicDrawUsage);\n    this.rayBufferGeometry.setAttribute(\"position\", this.rayBufferAttribute);\n    this.rayBufferGeometry.setDrawRange(0, this.maxrays);\n    this.colorBufferAttribute = new THREE.Float32BufferAttribute(new Float32Array(this.maxrays), 2);\n    this.colorBufferAttribute.setUsage(THREE.DynamicDrawUsage);\n    this.rayBufferGeometry.setAttribute(\"color\", this.colorBufferAttribute);\n    this.chartdata = [] as ChartData[];\n    this.rays = new THREE.LineSegments(\n      this.rayBufferGeometry,\n      new THREE.LineBasicMaterial({\n        color: 0x282929,\n        transparent: true,\n        opacity: 0.2,\n        premultipliedAlpha: true,\n        blending: THREE.NormalBlending,\n        depthFunc: THREE.AlwaysDepth\n        // depthTest: false\n      })\n    );\n    this.rays.renderOrder = -0.5;\n    this.rays.frustumCulled = false;\n    this.renderer.scene.add(this.rays);\n    var shaderMaterial = new THREE.ShaderMaterial({\n      vertexShader: PointShader.vs,\n      fragmentShader: PointShader.fs,\n      transparent: true,\n      premultipliedAlpha: true,\n      uniforms: {\n        drawStyle: { value: DRAWSTYLE.ENERGY },\n        inverted: { value: 0.0 },\n        pointScale: { value: this._pointSize }\n      },\n      blending: THREE.NormalBlending\n    });\n    var pointsMaterial = new THREE.PointsMaterial({\n      color: 0xff0000,\n      transparent: true,\n      opacity: 0.2,\n      premultipliedAlpha: true,\n      blending: THREE.NormalBlending\n    });\n    this.hits = new THREE.Points(this.rayBufferGeometry, shaderMaterial);\n    this.hits.frustumCulled = false;\n    this.renderer.scene.add(this.hits);\n    this.rayPositionIndex = 0;\n    Object.defineProperty(this.raycaster, \"firstHitOnly\", {\n      value: true,\n      writable: true\n    });\n\n    // raycaster.intersectObjects([mesh]);\n    this.intersections = [] as THREE.Intersection[];\n    this.findIDs();\n    this.intersectableObjects = [] as Array<THREE.Mesh | THREE.Object3D | Container>;\n    this.paths = {} as KeyValuePair<RayPath[]>;\n    this.stats = {\n      numRaysShot: {\n        name: \"# of rays shot\",\n        value: 0\n      },\n      numValidRayPaths: {\n        name: \"# of valid rays\",\n        value: 0\n      }\n    };\n    this.messenger = params.messenger;\n    this.messageHandlerIDs = [] as string[][];\n    this.messenger.postMessage(\"STATS_SETUP\", this.stats);\n    this.messageHandlerIDs.push(this.messenger.addMessageHandler(\"RAYTRACER_SOURCE_CHANGE\", (acc, ...args) => {\n      console.log(args && args[0] && args[0] instanceof Array && args[1] && args[1] === this.uuid)\n      if (args && args[0] && args[0] instanceof Array && args[1] && args[1] === this.uuid) {\n        this.sourceIDs = args[0].map(x => x.id);\n      }\n    }));\n    this.messageHandlerIDs.push(this.messenger.addMessageHandler(\"RAYTRACER_RECEIVER_CHANGE\", (acc, ...args) => {\n      if (args && args[0] && args[0] instanceof Array && args[1] && args[1] === this.uuid) {\n        this.receiverIDs = args[0].map(x => x.id);\n      }\n    }));\n    this.messageHandlerIDs.push(this.messenger.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\", (acc, ...args) => {\n      const id = args[0];\n      if (id) {\n        console.log(id);\n        if (this.sourceIDs.includes(id)) {\n          this.sourceIDs = this.sourceIDs.filter(x => x != id);\n        }\n        else if (this.receiverIDs.includes(id)) {\n          this.receiverIDs = this.receiverIDs.filter(x => x != id);\n        }\n      }\n    }));\n    this.step = this.step.bind(this);\n  }\n  update = () => {};\n  get sources() {\n    if (this.sourceIDs.length > 0) {\n      return this.sourceIDs.map(x => this.containers[x]);\n    }\n    else {\n      return [];\n    }\n  }\n  get receivers() {\n    if (this.receiverIDs.length > 0 && Object.keys(this.containers).length > 0) {\n      if (this.containers) {\n        console.log(this.containers);\n      }\n      return this.receiverIDs.map(x => (this.containers[x] as Receiver).mesh) as THREE.Mesh[];\n    }\n    else return [];\n  }\n  get room(): Room {\n    return this.containers[this.roomID] as Room;\n  }\n  removeMessageHandlers() {\n    this.messageHandlerIDs.forEach(x => {\n      this.messenger.removeMessageHandler(x[0], x[1]);\n    });\n  }\n  addSource(source: Source) {\n    this.containers[source.uuid] = source;\n    this.findIDs();\n    this.mapIntersectableObjects();\n  }\n  addReceiver(rec: Receiver) {\n    this.containers[rec.uuid] = rec;\n    this.findIDs();\n    this.mapIntersectableObjects();\n  }\n  \n  mapIntersectableObjects() {\n    if (this.runningWithoutReceivers) {\n      this.intersectableObjects = this.room.surfaces.children.map((x: Surface) => x.mesh);\n    }\n    else {\n      this.intersectableObjects = this.room.surfaces.children.map((x: Surface) => x.mesh).concat(this.receivers);\n    }\n  }\n  \n  findIDs() {\n    this.sourceIDs = [];\n    this.receiverIDs = [];\n    this.surfaceIDs = [];\n    for (const key in this.containers) {\n      if (this.containers[key].kind === \"room\") {\n        this.roomID = key;\n      } else if (this.containers[key].kind === \"source\") {\n        this.sourceIDs.push(key);\n      } else if (this.containers[key].kind === \"receiver\") {\n        this.receiverIDs.push(key);\n      } else if (this.containers[key].kind === \"surface\") {\n        this.surfaceIDs.push(key);\n      }\n    }\n    this.mapIntersectableObjects();\n  }\n  get isRunning() {\n    return this.running;\n  }\n  set isRunning(isRunning: boolean) {\n    this.running = this.precheck && isRunning;\n    if (this.running) {\n      this.start();\n    } else {\n      this.stop();\n    }\n  }\n  \n  get raysVisible() {\n    return this._raysVisible\n  }\n  set raysVisible(visible: boolean) {\n    if (visible != this._raysVisible) {\n      this._raysVisible = visible;\n      this.rays.visible = visible;\n    }\n  }\n  \n  get invertedDrawStyle() {\n    return this._invertedDrawStyle;\n  }\n  set invertedDrawStyle(inverted: boolean) {\n    if (this._invertedDrawStyle != inverted) {\n      this._invertedDrawStyle = inverted;\n      (this.hits.material as THREE.ShaderMaterial).uniforms[\"inverted\"].value = Number(inverted);\n      (this.hits.material as THREE.ShaderMaterial).needsUpdate = true;\n    }\n  }\n  \n  get pointSize() {\n    return this._pointSize;\n  }\n  \n  set pointSize(size: number) {\n    if (Number.isFinite(size) && size > 0) {\n      this._pointSize = size;\n      (this.hits.material as THREE.ShaderMaterial).uniforms[\"pointScale\"].value = this._pointSize;\n      (this.hits.material as THREE.ShaderMaterial).needsUpdate = true;\n    }\n  }\n  \n  get runningWithoutReceivers() {\n    return this._runningWithoutReceivers;\n  }\n  \n  set runningWithoutReceivers(runningWithoutReceivers: boolean) {\n    this.mapIntersectableObjects();\n    this._runningWithoutReceivers = runningWithoutReceivers;\n  }\n  \n  \n  setDrawStyle(drawStyle: number) {\n    (this.hits.material as THREE.ShaderMaterial).uniforms[\"drawStyle\"].value = drawStyle;\n    (this.hits.material as THREE.ShaderMaterial).needsUpdate = true;\n  }\n  \n\n  \n  setPointScale(scale: number) {\n    this._pointSize = scale;\n    (this.hits.material as THREE.ShaderMaterial).uniforms[\"pointScale\"].value = this._pointSize;\n    (this.hits.material as THREE.ShaderMaterial).needsUpdate = true;\n  }\n  \n  clearRays() {\n    this.rayBufferGeometry.setDrawRange(0, 1);\n    this.rayPositionIndex = 0;\n    this.stats.numRaysShot.value = 0;\n    this.stats.numValidRayPaths.value = 0;\n    this.messenger.postMessage(\"STATS_UPDATE\", this.stats);\n    this.sourceIDs.forEach(x => {\n      (this.containers[x] as Source).numRays = 0;\n    });\n    this.paths = {} as KeyValuePair<RayPath[]>;\n    this.mapIntersectableObjects();\n  }\n  \n  \n  appendRay(p1: THREE.Vector3, p2: THREE.Vector3, energy: number = 1.0, angle: number = 1.0) {\n\n    // set p1\n    this.rayBufferAttribute.setXYZ(this.rayPositionIndex++, p1.x, p1.y, p1.z);\n\n    // set the color\n    this.colorBufferAttribute.setXY(this.rayPositionIndex, energy, angle);\n\n    // set p2\n    this.rayBufferAttribute.setXYZ(this.rayPositionIndex++, p2.x, p2.y, p2.z);\n\n    // set the color\n    this.colorBufferAttribute.setXY(this.rayPositionIndex, energy, angle);\n\n    //update the draw range\n    this.rayBufferGeometry.setDrawRange(0, this.rayPositionIndex);\n\n    // update three.js\n    this.rayBufferAttribute.needsUpdate = true;\n\n    //update version\n    this.rayBufferAttribute.version++;\n\n    // update three.js\n    this.colorBufferAttribute.needsUpdate = true;\n\n    //update version\n    this.colorBufferAttribute.version++;\n  }\n\n  inFrontOf(a: THREE.Triangle, b: THREE.Triangle) {\n    const plane = a.getPlane(new THREE.Plane());\n    const pleq = new THREE.Vector4(plane.normal.x, plane.normal.y, plane.normal.z, plane.constant);\n    const avec4 = new THREE.Vector4(b.a.x, b.a.y, b.a.z, 1);\n    const bvec4 = new THREE.Vector4(b.b.x, b.b.y, b.b.z, 1);\n    const cvec4 = new THREE.Vector4(b.c.x, b.c.y, b.c.z, 1);\n    return pleq.dot(avec4) > 0 || pleq.dot(bvec4) > 0 || pleq.dot(cvec4) > 0;\n  }\n\n  \n  traceRay(ro: THREE.Vector3, rd: THREE.Vector3, order: number, energy: number, source: string, iter: number = 1, chain: THREE.Intersection[] = [], frequency = 4000) {\n\n    // normalize the ray\n    rd = rd.normalize();\n\n    // set the starting position\n    this.raycaster.ray.origin = ro;\n\n    // set the direction\n    this.raycaster.ray.direction = rd;\n\n    // console.log(\"dir\",this.raycaster.ray.direction);\n\n    // find the surface that the ray intersects\n    const intersections = this.raycaster.intersectObjects(this.intersectableObjects, true);\n\n    // if there was an intersection\n    if (intersections.length > 0) {\n\n      // console.log(\"itx\",intersections[0].point)\n\n      //check to see if the intersection was with a receiver\n      if (intersections[0].object.userData?.kind === \"receiver\") {\n\n        // find the incident angle\n        const angle =\n          intersections[0].face &&\n          rd\n            .clone()\n            .multiplyScalar(-1)\n            .angleTo(intersections[0].face.normal);\n\n        // push the intersection data onto the chain\n        chain.push({\n          energy,\n          angle,\n          ...intersections[0]\n        } as THREE.Intersection);\n\n        // end the chain here\n        return {\n          chain,\n          intersectedReceiver: true,\n          energy,\n          source\n        } as RayPath;\n      } else {\n\n        // find the incident angle\n        const angle =\n          intersections[0].face &&\n          rd\n            .clone()\n            .multiplyScalar(-1)\n            .angleTo(intersections[0].face.normal);\n\n        // push the intersection onto the chain\n        chain.push({\n          energy,\n          angle,\n          ...intersections[0]\n        } as THREE.Intersection);\n\n        // get the normal direction of the intersection\n        const normal = intersections[0].face && intersections[0].face.normal.normalize();\n\n        // find the reflected direction\n        const rr =\n          normal &&\n          intersections[0].face &&\n          rd.clone().sub(\n            normal\n              .clone()\n              .multiplyScalar(rd.dot(normal.clone()))\n              .multiplyScalar(2)\n          );\n\n        // calulcate the losses due to reflection\n        const reflectionloss = energy * abs((intersections[0].object.parent as Surface).reflectionFunction(frequency, angle!));\n\n        // end condition\n        if (rr && normal && reflectionloss > 1 / 2 ** 16 && iter < order) {\n\n          // recurse\n          return this.traceRay(intersections[0].point.clone().addScaledVector(normal.clone(), 0.01), rr, order, reflectionloss, source, iter + 1, chain);\n        }\n      }\n      return { chain, source, intersectedReceiver: false } as RayPath;\n    }\n  }\n  startAllMonteCarlo() {\n    this.intervals.push(setInterval(() => {\n      for (let i = 0; i < this.passes; i++) {\n        this.step();\n      }\n    }, this.updateInterval));\n  }\n  step() {\n    for (let i = 0; i < this.sourceIDs.length; i++) {\n      \n      this.__num_checked_paths+=1;\n      \n      // random theta within the sources theta limits\n      const theta = 2 * (Math.random()-0.5) * (this.containers[this.sourceIDs[i]] as Source).theta;\n      \n      // random phi within the sources phi limits\n      const phi = 2 * (Math.random()) * (this.containers[this.sourceIDs[i]] as Source).phi;\n      \n      // source position\n      const position = (this.containers[this.sourceIDs[i]] as Source).position;\n      \n      // source rotation\n      const rotation = (this.containers[this.sourceIDs[i]] as Source).rotation;\n      \n      // random direction\n      const direction = new THREE.Vector3(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5);\n      // const direction = new THREE.Vector3().setFromSphericalCoords(1, 0, Math.PI);\n      direction.applyEuler(rotation);\n\n      // get the path traced by the ray\n      const path = this.traceRay(position, direction, this.reflectionOrder, 1.0, this.sourceIDs[i]);\n\n      // if path exists\n      if (path) {\n\n        //  ignoring receiver intersections\n        if (this._runningWithoutReceivers) {\n\n          // add the first ray onto the buffer\n          this.appendRay(position, (path.chain[0] as THREE.Intersection).point, path.chain[0].energy || 1.0, path.chain[0].angle);\n\n          // add the rest of the rays onto the buffer\n          for (let i = 1; i < path.chain.length; i++) {\n\n            // starting at i=1 to avoid an if statement in here\n            this.appendRay(\n\n              // the previous point\n              (path.chain[i - 1] as THREE.Intersection).point,\n\n              // the current point\n              (path.chain[i] as THREE.Intersection).point,\n\n              // the energy content displayed as a color + alpha\n              path.chain[i].energy || 1.0,\n              path.chain[i].angle\n            );\n          }\n\n          // get the uuid of the intersected receiver that way we can filter by receiver\n          const index = ((path.chain[path.chain.length - 1] as THREE.Intersection).object.parent as Receiver).uuid;\n\n          // if the receiver uuid is already defined, push the path on, else define it\n          this.paths[index] ? this.paths[index].push(path) : (this.paths[index] = [path]);\n        }\n\n        //  if we are checking receiver intersections\n        else if (path[\"intersectedReceiver\"]) {\n\n          // add the ray to the buffer\n          this.appendRay(position, (path.chain[0] as THREE.Intersection).point, path.chain[0].energy || 1.0, path.chain[0].angle);\n\n          // add the rest of the rays\n          for (let i = 1; i < path.chain.length; i++) {\n            this.appendRay(\n\n              // the previous point\n              (path.chain[i - 1] as THREE.Intersection).point,\n\n              // the current point\n              (path.chain[i] as THREE.Intersection).point,\n\n              // the energy content displayed as a color + alpha\n              path.chain[i].energy || 1.0,\n              path.chain[i].angle\n            );\n          }\n          (this.stats.numValidRayPaths.value as number)++;\n          const index = ((path.chain[path.chain.length - 1] as THREE.Intersection).object.parent as Receiver).uuid;\n          this.paths[index] ? this.paths[index].push(path) : (this.paths[index] = [path]);\n        }\n      }\n      (this.stats.numRaysShot.value as number)++;\n    }\n\n    // const t = Date.now();\n\n    // if (t - this.lastTime >= this.statsUpdatePeriod) {\n\n    // this.messenger.postMessage(\"STATS_UPDATE\", this.stats);\n\n    // this.lastTime = t;\n\n    // }\n  }\n  start() {\n    this.mapIntersectableObjects();\n    this.__start_time = Date.now();\n    this.__num_checked_paths=0;\n    this.startAllMonteCarlo();\n  }\n  stop() {\n    this.__calc_time = Date.now() - this.__start_time;\n    this.intervals.forEach(interval => {\n      window.clearInterval(interval);\n    });\n    this.intervals = [] as NodeJS.Timeout[];\n    Object.keys(this.paths).forEach(key => {\n      const calc_time = this.__calc_time / 1000;\n      const num_valid_rays = this.paths[key].length;\n      const valid_ray_rate = num_valid_rays / calc_time;\n      const num_checks = this.__num_checked_paths;\n      const check_rate = num_checks / calc_time;\n      console.log({\n        calc_time,\n        num_valid_rays,\n        valid_ray_rate,\n        num_checks,\n        check_rate\n      });\n      this.paths[key].forEach(p => {\n        this.calculateTotalPathTime(p);\n      });\n    });\n    this.mapIntersectableObjects();\n  }\n  calculateResponse(frequencies: number[] = this.reflectionLossFrequencies) {\n    this.paths;\n  }\n  calculateTotalPathTime(path: RayPath) {\n    path.time = 0;\n    for (let i = 0; i < path.chain.length; i++) {\n      path.time += path.chain[i].distance / 343.2;\n    }\n    return path;\n  }\n\n  calculateWithDiffuse(frequencies: number[] = this.reflectionLossFrequencies) {\n    this.allReceiverData = [] as ReceiverData[];\n    const keys = Object.keys(this.paths);\n    const receiverRadius = (this.containers[this.receiverIDs[0]] as Receiver).scale.x;\n    const receiverPosition = (this.containers[this.receiverIDs[0]] as Receiver).position;\n    keys.forEach(key => {\n      const receiverData = new ReceiverData(key);\n      this.paths[key].forEach(path => {\n        const energytime = {\n          time: 0,\n          energy: []\n        } as EnergyTime;\n        let intersectedReceiver = false;\n        path.chain.forEach(segment => {\n          const container = segment.object.parent as Container;\n          if (container && container.kind) {\n            if (container.kind === \"receiver\") {\n              intersectedReceiver = true;\n            } else if (container.kind === \"surface\") {\n\n              // hit surface\n              const surface = container as Surface;\n              const energytime_diffuse = {\n                time: segment.time_rec,\n                energy: []\n              } as EnergyTime;\n              frequencies.forEach((frequency, index) => {\n                const reflectionloss = abs(surface.reflectionFunction(frequency, segment.angle_in));\n                if (!energytime.energy[index]) {\n                  energytime.energy[index] = {\n                    frequency,\n                    value: reflectionloss\n                  };\n                } else {\n                  energytime.energy[index].value *= reflectionloss;\n                  energytime.time = segment.total_time;\n                  const d = new THREE.Vector3().subVectors(receiverPosition, segment.point);\n                  const theta = segment.face.normal.angleTo(d);\n                  const r = receiverRadius;\n                  energytime_diffuse.energy[index] = {\n                    frequency,\n                    value: scatteredEnergy(energytime.energy[index].value, surface.absorptionFunction(frequency), 0.1, asin(receiverRadius / d.length()), theta)\n                  };\n                }\n              });\n              if (energytime_diffuse.energy.length > 0) {\n                receiverData.data.push(energytime_diffuse);\n              }\n            } // end container === \"surface\"\n          } // end container && container.kind\n        }); // end path.chain for each\n        if (intersectedReceiver) {\n          receiverData.data.push(energytime);\n        }\n      });\n      receiverData.data = sort(receiverData.data).asc(x => x.time);\n      this.allReceiverData.push(receiverData);\n    });\n    const chartdata = this.allReceiverData.map(x => {\n      return frequencies.map(freq => {\n        return {\n          label: freq.toString(),\n          x: x.data.map(y => y.time),\n          y: x.data.map(y => y.energy.filter(z => z.frequency == freq)[0].value)\n        };\n      });\n    });\n    this.messenger.postMessage(\"UPDATE_CHART_DATA\", chartdata && chartdata[0]);\n    return this.allReceiverData;\n  }\n  \n  //TODO change this name to something more appropriate\n  calculateReflectionLoss(frequencies: number[] = this.reflectionLossFrequencies) {\n    \n    // reset the receiver data \n    this.allReceiverData = [] as ReceiverData[];\n    \n\n\n    // helper function\n    const dataset = (label, data) => ({ label, data });\n\n    // for the chart\n    const chartdata = [] as ChartData[];\n    if (frequencies) {\n      for (let i = 0; i < frequencies.length; i++) {\n        chartdata.push(dataset(frequencies[i].toString(), []));\n      }\n    }\n    \n    // pathkeys.length should equal the number of receivers in the scene\n    const pathkeys = Object.keys(this.paths);\n\n    // for each receiver's path in the total path array\n    for (let i = 0; i < pathkeys.length; i++) {\n\n      // init contribution array\n      this.allReceiverData.push({\n        id: pathkeys[i],\n        data: [] as EnergyTime[]\n      });\n\n      // for each paths chain of intersections\n      for (let j = 0; j < this.paths[pathkeys[i]].length; j++) {\n\n        // the individual ray path which holds intersection data\n        const raypath = this.paths[pathkeys[i]][j];\n        \n        /**\n         * calculates the loss due to reflection over the ray's path\n         */\n        function reflectionLossFunction(frequency: number): number {\n          const chain = raypath.chain.slice(0, -1);\n          if (chain && chain.length > 0) {\n            let magnitude = 1;\n            for (let k = 0; k < chain.length; k++) {\n              const intersection = chain[k] as THREE.Intersection;\n              const surface = intersection.object.parent as Surface;\n              const angle = intersection[\"angle\"] || 0;\n              magnitude = magnitude * abs(surface.reflectionFunction(frequency, angle));\n            }\n            return magnitude;\n          }\n          return 1; \n        }\n        \n        \n        let refloss;\n        // if there was a given frequency array\n        if (frequencies) {\n          // map the frequencies to reflection loss\n          refloss = frequencies.map(freq => ({\n            frequency: freq,\n            value: reflectionLossFunction(freq)\n          }));\n          frequencies.forEach((f, i) => {\n            chartdata[i].data.push([raypath.time!, reflectionLossFunction(f)]);\n          });\n        } else {\n          // if no frequencies given, just give back the function that calculates the reflection loss\n          refloss = reflectionLossFunction;\n        }\n        this.allReceiverData[this.allReceiverData.length - 1].data.push({\n          time: raypath.time!,\n          energy: refloss\n        });\n      }\n      this.allReceiverData[this.allReceiverData.length - 1].data =\n        this.allReceiverData[this.allReceiverData.length - 1].data.sort((a, b) => a.time - b.time);\n    }\n    for (let i = 0; i < chartdata.length; i++) {\n      chartdata[i].data = chartdata[i].data.sort((a, b) => a[0] - b[0]);\n      chartdata[i].x = chartdata[i].data.map(x => x[0]);\n      chartdata[i].y = chartdata[i].data.map(x => x[1]);\n    }\n    this.chartdata = chartdata;\n    return [this.allReceiverData, chartdata];\n  }\n  downloadImpulseResponse(index: number = 0, sample_rate: number = 44100) {\n    const data = this.saveImpulseResponse(index, sample_rate);\n    if (data) {\n      const blob = new Blob([data], {\n        type: \"text/plain;charset=utf-8\"\n      });\n      FileSaver.saveAs(blob, `ir${index}-fs${sample_rate}hz-t${Date.now()}.txt`);\n    } else return;\n  }\n  resampleResponse(index: number = 0, sampleRate: number = 44100) {\n\n    // if response has been calculated\n    if (this.allReceiverData && this.allReceiverData[index]) {\n\n      // the receivers temporal data\n      const receiverData = this.allReceiverData[index].data;\n\n      // length of the reponse in seconds\n      const maxTime = receiverData[receiverData.length - 1].time;\n\n      // number of samples the output array will have\n      const numSamples = floor(sampleRate * maxTime);\n\n      // initialize the sampled array\n      const sampledArray = [] as number[][];\n\n      // stick it in a for loop\n      for (let i = 0, j = 0; i < numSamples; i++) {\n\n        // the time given the current sample and sample rate (in seconds)\n        let sampleTime = (i / numSamples) * maxTime;\n\n        // if there exists data\n        if (receiverData[j] && receiverData[j].time) {\n\n          // get the actual time of the intersection\n          let actualTime = receiverData[j].time;\n\n          // ex. actual time of intersection is at t=3.5s but the sampled time is only at t=3.2s\n          if (actualTime > sampleTime) {\n\n            // add a 0.0 for the value at each frequency\n            sampledArray.push([sampleTime].concat(Array(receiverData[j].energy.length).fill(0.0)));\n\n            //continue to next iteration\n            continue;\n          }\n\n          // this will happen when one or more intersections occured in between a sampling period (1/sampleRate)\n          if (actualTime <= sampleTime) {\n\n            // sum array initialized to 0 (one for each frequency)\n            let sums = receiverData[j].energy.map(x => 0);\n\n            // counts the number of intersections that occured between samples\n            let sub_counter = 0;\n\n            // loop over all the missed intersections\n            while (actualTime <= sampleTime) {\n\n              // set the actual time = the current intersections time\n              actualTime = receiverData[j].time;\n\n              // sum the value at each frequency\n              sums.forEach((x, i, a) => (a[i] += receiverData[j].energy[i].value));\n\n              // increment the receiver data point index;\n              j++;\n\n              // increment the sub counter\n              sub_counter++;\n            } // exit the loop\n\n            // push another row onto the sampled array\n            sampledArray.push([sampleTime, ...sums.map(x => x / sub_counter)]);\n\n            // continue to next iteration\n            continue;\n          }\n        }\n      }\n\n      // return the sample array\n      return sampledArray;\n    }\n\n    // if reponse has not been calculated yet\n    else {\n      console.warn(\"no data yet\");\n    }\n  }\n  saveImpulseResponse(index: number = 0, sample_rate: number = 44100) {\n    const data = this.resampleResponse(index, sample_rate);\n    if (data) {\n      return data.map(x => x.join(\",\")).join(\"\\n\");\n    }\n    return;\n  }\n  get precheck() {\n    return this.sourceIDs.length > 0 && typeof this.room !== \"undefined\";\n  }\n  getReceiverIntersectionPoints(id: string) {\n    if (this.paths && this.paths[id] && this.paths[id].length > 0) {\n      return this.paths[id].map(x => x.chain[x.chain.length - 1].point) as THREE.Vector3[];\n    }\n    else return [] as THREE.Vector3[];\n  }\n  \n  \n  testWasm(value: number) {\n   \n   /*\n    const runWasm = async () => {\n      // Instantiate our wasm module\n      // And pass in a wasm module\n      const wasmModule = await wasmInit(\"wasm/index.wasm\", {\n        index: {\n          consoleLog: (value) => console.log(value)\n        }\n      });\n      \n      \n      return wasmModule;\n    };\n    runWasm().then((res) => {\n      const testmodule = res.instance.exports;\n      \n      console.log(res);\n      console.log(testmodule);\n      // const result = testmodule.testFunction(value);\n      // console.log(\"tested with a value of: \", result);\n    }).catch(console.error);\n    */\n    \n    async function loadWasm() {\n      return await loader.instantiate(fetch(\"wasm/index.wasm\"), {\n        index: {\n          consoleLog: (value) => console.log(value)\n        }\n      });\n    }\n    \n    loadWasm().then(wasm => {\n      console.log(wasm);\n      \n      const result = wasm['testFunction'](value);\n      \n      console.log(result);\n      \n    }).catch(console.error);\n    \n    \n    \n  }\n  \n  \n  \n}\n","import Solver, { SolverParams } from \"../solver\";\nimport Room from \"../../objects/room\";\nimport Surface from \"../../objects/surface\";\nimport { third_octave } from '../acoustics';\nexport interface RT60Props extends SolverParams{\n  room: Room;\n}\n\nexport class RT60 extends Solver{\n  room: Room;\n  constructor(props: RT60Props) {\n    super(props);\n    this.room = props.room; \n    this.kind = \"rt60\";\n  }\n  sabine(frequencies: number[] = third_octave) {\n    const v = this.room.volumeOfMesh();\n    const response = [] as number[];\n    frequencies.forEach(frequency => {\n      let sum = 0;\n      this.room.surfaces.children.forEach((surface: Surface) => {\n        sum += (surface.getArea() * surface.absorptionFunction(frequency));\n      });\n      response.push(0.161 * v / sum);\n    });\n    return [frequencies, response];\n  }\n  arauPuchades() {\n    \n  }\n}\n\nexport default RT60;","const scale = (arr, a) => arr.map(x => x * a);\nconst sum = (arrs) => arrs[0].map((x, i) => {\n  for (let j = 1; j < arrs.length; j++){\n    x += arrs[j][i];\n  }\n  return x;\n})\nexport default function cubicBezier(\n\tx1: number,\n\ty1: number,\n\tx2: number,\n\ty2: number\n) {\n\tconst p0 = [0, 0];\n\tconst p1 = [x1, y1];\n\tconst p2 = [x2, y2];\n\tconst p3 = [1, 1];\n\n\treturn function B(t: number) {\n\t\tconst c0 = (1 - t) ** 3;\n\t\tconst c1 = 3 * (1 - t) ** 2 * t;\n\t\tconst c2 = 3 * (1 - t) * t ** 2;\n\t\tconst c3 = t ** 3;\n\t\treturn sum([\n\t\t\tscale(p0, c0),\n\t\t\tscale(p1, c1),\n\t\t\tscale(p2, c2),\n\t\t\tscale(p3, c3)\n\t\t]);\n\t};\n}\n\n\nconst f = cubicBezier(1, 0, 0, 1)\n\nArray(21).fill(0).map((x, i) => f(i/20)); //?","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./containers/App\";\nimport browserReport from \"./common/browser-report\";\nimport Messenger from \"./messenger\";\nimport Source from \"./objects/source\";\nimport Receiver from \"./objects/receiver\";\nimport Renderer from \"./render/renderer\";\nimport { registerHotKeys } from \"./hotkeys\";\nimport { fileType, allowed } from \"./common/file-type\";\n\nimport * as importHandlers from './import-handlers';\nimport EasingFunctions from \"./common/easing\";\nimport * as THREE from \"three\";\nimport { KeyValuePair } from \"./common/key-value-pair\";\nimport expose from \"./common/expose\";\nimport Container from \"./objects/container\";\nimport { Setting } from \"./common/setting\";\nimport {randomInteger} from './common/random';\n\nimport { chunk } from \"./common/chunk\";\n//@ts-ignore\nimport triangleroom from \"!raw-loader!./res/triangle.stl\";\n//@ts-ignore\nimport testroom from \"!raw-loader!./res/models/testthing.obj\";\n\nimport Solver from \"./compute/solver\";\nimport { FDTD } from \"./compute/fdtd\";\nimport GLFDTD from \"./compute/gl-fdtd\";\nimport Room from \"./objects/room\";\nimport Surface from \"./objects/surface\";\nimport RayTracer from \"./compute/raytracer\";\nimport { uuid } from \"uuidv4\";\n// import { RT60 } from './compute/rt60';\nimport RT60 from './compute/rt';\nimport * as ac from \"./compute/acoustics\";\n\nimport materials from \"./db/material.json\";\nimport { Searcher } from \"fast-fuzzy\";\nimport { IToastProps } from \"@blueprintjs/core\";\n\nimport { CSG, CAG } from '@jscad/csg';\nimport cubicBezier from \"./common/cubic-bezier\";\n\nimport Timer from './common/timer';\n//@ts-ignore\n// window.CSG = CSG;\n//@ts-ignore\n// window.CAG = CAG;\n\nexpose({ CSG, CAG, cubicBezier, Timer, ac, chunk, THREE, EasingFunctions });\n\n// import Fuse from \"fuse.js\";\nexport interface AcousticMaterial {\n  tags: string[];\n  manufacturer: string;\n  name: string;\n  material: string;\n  absorption: {\n    \"63\": number;\n    \"125\": number;\n    \"250\": number;\n    \"500\": number;\n    \"1000\": number;\n    \"2000\": number;\n    \"4000\": number;\n    \"8000\": number;\n  };\n  nrc: number;\n  source: string;\n  description: string;\n  _id: string;\n}\n\n\n\n\nconst materialsIndex = {} as KeyValuePair<AcousticMaterial>;\n\nmaterials.forEach(x => {\n    materialsIndex[x._id] = x;\n});\n\nconst state = {\n  time: 0,\n  selectedObjects: [] as Container[],\n  materialsIndex,\n  materials,\n  materialSearcher: new Searcher(\n  materials,\n    {\n      keySelector: obj => obj.material\n    }\n  ),\n  browser: browserReport(navigator.userAgent),\n  sources: [] as string[],\n  receivers: [] as string[],\n  room: \"\" as string,\n  containers: {} as KeyValuePair<Container>,\n  solvers: {} as KeyValuePair<Solver>,\n  simulation: \"\",\n  glfdtd: {} as GLFDTD,\n  renderer: {} as Renderer,\n  messenger: new Messenger(),\n\n  settings: {\n    fog_color: new Setting<string>({\n      id: \"fog_color\",\n      name: \"Fog Color\",\n      description: \"Changes the color of the scene's fog\",\n      kind: \"color\",\n      value: \"#ffffff\"\n    }),\n    default_save_name: new Setting<string>({\n      id: \"default_save_name\",\n      name: \"Default Save Name\",\n      description: \"The default name when saving\",\n      kind: \"text\",\n      value: \"new-project.json\"\n    })\n  } as KeyValuePair<Setting<string|number|boolean>>\n};\n\nstate.renderer = new Renderer({\n  messenger: state.messenger\n});\n\nstate.messenger.addMessageHandler(\"SET_SELECTION\", (acc, objects) => {\n  state.messenger.postMessage(\"DESELECT_ALL_OBJECTS\");\n  state.messenger.postMessage(\"APPEND_SELECTION\", objects);\n});\n\nstate.messenger.addMessageHandler(\"DESELECT_ALL_OBJECTS\", (acc, ...args) => {\n  Object.keys(state.containers).forEach((x) => {\n    state.containers[x].deselect();\n  });\n  state.selectedObjects = [] as Container[];\n});\n\nstate.messenger.addMessageHandler(\"APPEND_SELECTION\", (acc, objects) => {\n  if (objects instanceof Array) {\n    for (let i = 0; i < objects.length; i++){\n      if (objects[i] instanceof Container) {\n        objects[i].select();\n        state.selectedObjects.push(objects[i]);\n      }\n    }\n  }\n})\n\nstate.messenger.addMessageHandler(\"FETCH_ROOMS\", () => {\n  const roomkeys = Object.keys(state.containers).filter(x => {\n    return state.containers[x].kind === \"room\";\n  });\n  if (roomkeys && roomkeys.length > 0) {\n    return roomkeys.map(x => state.containers[x] as Room);\n  }\n});\n\nstate.messenger.addMessageHandler(\"FETCH_SETTINGS\", () => {\n  return state.settings;\n})\n\nstate.messenger.addMessageHandler(\"SUBMIT_ALL_SETTINGS\", () => {\n  for (const key in state.settings) {\n    state.settings[key].submit();\n  }\n  return state.settings;\n});\n\nstate.messenger.addMessageHandler(\"FETCH_ALL_MATERIALS\", (acc, ...args) => {\n  return state.materials;\n});\n\nstate.messenger.addMessageHandler(\"SEARCH_ALL_MATERIALS\", (acc, ...args) => {\n  const res = state.materialSearcher.search(args[0]);\n  return res;\n});\n\n\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_RAYTRACER\", (acc, ...args) => {\n  const raytracer = new RayTracer({\n    messenger: state.messenger,\n    name: \"Ray Tracer\",\n    containers: state.containers,\n    reflectionOrder: 6,\n    updateInterval: 5,\n    passes: 500,\n    pointSize: 2,\n    renderer: state.renderer\n  });\n  state.solvers[raytracer.uuid] = raytracer;\n  raytracer.runningWithoutReceivers = false;\n  return raytracer;\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_REMOVE_SOLVER\", (acc, id) => {\n  if (state.solvers && state.solvers[id]) {\n    if (state.solvers[id].kind === \"ray-tracer\") {\n      (state.solvers[id] as RayTracer).removeMessageHandlers();\n    }\n   delete state.solvers[id];\n }\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_RT60\", (acc, ...args) => {\n  const rooms = Object.keys(state.containers).filter(x => state.containers[x] instanceof Room);\n  if (rooms.length>0) {\n    const rt60 = new RT60({\n      room: state.containers[rooms[0]] as Room,\n      name: 'rt60'\n    });\n    state.solvers[rt60.uuid] = rt60;\n    return rt60;\n  }\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_FDTD\", (acc, ...args) => {\n  const sources = [] as Source[];\n  const rooms = [] as Room[];\n  const receivers = [] as Receiver[];\n  for (const key in state.containers) {\n    switch (state.containers[key].kind) {\n      case \"source\":\n        sources.push(state.containers[key] as Source);\n        break;\n      case \"receiver\":\n        receivers.push(state.containers[key] as Receiver);\n        break;\n      case \"room\":\n        rooms.push(state.containers[key] as Room);\n        break;\n      default:\n        break;\n    }\n  }\n\n  state.simulation = uuid();\n  state.solvers[state.simulation] = new FDTD({\n    room: rooms[0],\n    dt: 0.0005,\n    dx: 2,\n    gain: 1,\n    threshold: 0.0001,\n    q: 0.43,\n    r: 1.33,\n    sources,\n    receivers\n  });\n  state.solvers[state.simulation].uuid = state.simulation;\n\n  return state.solvers[state.simulation];\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_CALCULATE_RESPONSE\", (acc, id, frequencies) => {\n  (state.solvers[id] instanceof RayTracer) && (state.solvers[id] as RayTracer).calculateReflectionLoss(frequencies);\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_TEST_WASM\", (acc, id, value) => {\n  (state.solvers[id] instanceof RayTracer) && (state.solvers[id] as RayTracer).testWasm(value);\n});\n\nstate.messenger.addMessageHandler(\"FETCH_ALL_SOURCES\", (acc, ...args) => {\n  return state.sources.map(x => {\n    if (args && args[0] && args[0] instanceof Array) {\n      return args[0].map(y => state.containers[x][y]);\n    } else return state.containers[x];\n  });\n});\n\nstate.messenger.addMessageHandler(\"FETCH_ALL_RECEIVERS\", (acc, ...args) => {\n  return state.receivers.map(x => {\n    if (args && args[0] && args[0] instanceof Array) {\n      return args[0].map(y => state.containers[x][y]);\n    } else return state.containers[x];\n  });\n});\n\nstate.messenger.addMessageHandler(\"FETCH_SOURCE\", (acc, ...args) => {\n  return state.containers[args[0]];\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_SOURCE\", (acc, ...args) => {\n  const source = new Source(\"new source\");\n  state.containers[source.uuid] = source;\n  state.sources.push(source.uuid);\n  state.renderer.add(source);\n  Object.keys(state.solvers).forEach(x => {\n    state.solvers[x] instanceof RayTracer &&\n      (state.solvers[x] as RayTracer).addSource(source);\n  });\n  return source;\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\", (acc, id) => {\n  if (state.containers[id]) {\n    switch (state.containers[id].kind) {\n      case \"source\": {\n        state.sources = state.sources.reduce((a, b) => {\n          if (b !== id) {\n            a.push(b);\n          }\n          return a;\n        }, [] as string[]);\n      } break;\n      case \"receiver\": {\n        state.receivers = state.receivers.reduce((a, b) => {\n          if (b !== id) {\n            a.push(b);\n          }\n          return a;\n        }, [] as string[]);\n      } break;\n    }\n    state.selectedObjects = state.selectedObjects.filter((x) => x.uuid !== id);\n    state.renderer.remove(state.containers[id]);\n    delete state.containers[id];\n  }\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_RECEIVER\", (acc, ...args) => {\n  const rec = new Receiver(\"new receiver\");\n  state.containers[rec.uuid] = rec;\n  state.receivers.push(rec.uuid);\n  state.renderer.add(rec);\n  Object.keys(state.solvers).forEach(x => {\n    state.solvers[x] instanceof RayTracer &&\n      (state.solvers[x] as RayTracer).addReceiver(rec);\n  });\n  return rec;\n});\n\nstate.messenger.addMessageHandler(\"ADDED_ROOM\", (acc, ...args) => {\n  args[0];\n});\n\nstate.messenger.addMessageHandler(\"IMPORT_FILE\", (acc, ...args) => {\n  const files = Array.from(args[0]);\n  files.forEach(async (file: File) => {\n    if (allowed[fileType(file.name)]) {\n      const objectURL = URL.createObjectURL(file);\n      switch (fileType(file.name)) {\n        case 'obj': {\n          const result = await(await fetch(objectURL)).text();\n          const models = importHandlers.obj(result);\n          const surfaces = models.map(\n            (model) =>\n              new Surface(model.name, {\n                geometry: model.geometry,\n                acousticMaterial: state.materials[0]\n              })\n          );\n          const room = new Room(\"new room\", {\n            surfaces,\n            originalFileName: file.name,\n            originalFileData: result\n          });\n          state.containers[room.uuid] = room;\n          state.room = room.uuid;\n          state.renderer.addRoom(room);\n          state.messenger.postMessage(\"ADDED_ROOM\", room);\n        } break\n        default: break\n      }\n    }\n  });\n});\n\nstate.messenger.addMessageHandler(\"APP_MOUNTED\", (acc, ...args) => {\n  state.renderer.init(args[0]);\n});\n\nstate.messenger.addMessageHandler(\"RENDERER_UPDATED\", (acc, ...args) => {\n  state.time += 0.01666666667;\n  if (state.simulation.length > 0) {\n    state.solvers[state.simulation].update();\n  }\n  if (state.selectedObjects.length > 0) {\n    state.selectedObjects.forEach(x => {\n      x.renderCallback(state.time);\n    })\n  }\n});\n\nstate.messenger.addMessageHandler(\"SIMULATION_SHOULD_PLAY\", (acc, ...args) => {\n  state.solvers[state.simulation].running = true;\n  state.messenger.postMessage(\"SIMULATION_DID_PLAY\");\n});\n\nstate.messenger.addMessageHandler(\"SIMULATION_SHOULD_PAUSE\", (acc, ...args) => {\n  state.solvers[state.simulation].running = false;\n  state.messenger.postMessage(\"SIMULATION_DID_PAUSE\");\n});\n\nstate.messenger.addMessageHandler(\"SIMULATION_SHOULD_CLEAR\", (acc, ...args) => {\n  (state.solvers[state.simulation] as FDTD).reset();\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_SHOULD_PLAY\", (acc, ...args) => {\n  if (state.solvers[args[0]] instanceof RayTracer) {\n    (state.solvers[args[0]] as RayTracer).isRunning = true;\n  }\n  return state.solvers[args[0]] && state.solvers[args[0]].running;\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_SHOULD_PAUSE\", (acc, ...args) => {\n  if (state.solvers[args[0]] instanceof RayTracer) {\n    (state.solvers[args[0]] as RayTracer).isRunning = false;\n  }\n  return state.solvers[args[0]].running;\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_SHOULD_CLEAR\", (acc, ...args) => {\n  if (state.solvers[args[0]] instanceof RayTracer) {\n    (state.solvers[args[0]] as RayTracer).clearRays();\n  }\n});\n\nstate.messenger.addMessageHandler(\"FETCH_SURFACE\", (acc, ...args) => {\n  const id = args[0];\n  if (id) {\n    const rooms = state.messenger.postMessage(\"FETCH_ROOMS\")[0];\n    if (rooms && rooms.length > 0) {\n      for (let i = 0; i < rooms.length; i++){\n        const room = (rooms[i] as Room);\n        const surface = room.surfaces.getObjectByProperty(\"uuid\", id);\n        if (surface && surface instanceof Surface) {\n          return surface;\n        }\n      }\n    }\n  }\n})\n\nstate.messenger.addMessageHandler(\"ASSIGN_MATERIAL\", (acc, material) => {\n  let surfaceCount = 0;\n  for (let i = 0; i < state.selectedObjects.length; i++){\n    if (state.selectedObjects[i] instanceof Surface) {\n      (state.selectedObjects[i] as Surface).acousticMaterial = material;\n      surfaceCount++;\n    }\n  }\n  if (surfaceCount > 0) {\n    state.messenger.postMessage(\"SHOW_TOAST\", {\n      message: `Assigned material to ${surfaceCount} surface${surfaceCount > 1 ? \"s\" : \"\"}.`,\n      intent: \"success\",\n      timeout: 1750,\n      icon: \"tick\"\n    } as IToastProps);\n  }\n  else {\n     state.messenger.postMessage(\"SHOW_TOAST\", {\n       message: `No surfaces are selected.`,\n       intent: \"warning\",\n       timeout: 1750,\n       icon: \"issue\"\n     } as IToastProps);\n  }\n});\n\n// for the settings drawer\nstate.messenger.addMessageHandler(\"SETTING_CHANGE\", (acc, ...args) => {\n  const { setting, value } = args[0];\n  console.log(setting, value);\n  state.renderer.settingChanged(setting, value);\n});\n\n// new project\nstate.messenger.addMessageHandler(\"NEW\", (acc, ...args) => {\n  Object.keys(state.solvers).forEach(x => {\n    state.messenger.postMessage(\"SHOULD_REMOVE_SOLVER\", x);\n  })\n  Object.keys(state.containers).forEach(x => {\n    state.messenger.postMessage('SHOULD_REMOVE_CONTAINER', x);\n  });\n  state.messenger.postMessage(\"DESELECT_ALL_OBJECTS\");\n  \n});\n\n\nregisterHotKeys(state.messenger);\n\n// remove this for prod\nexpose({ r: state.renderer }, window);\n\nstate.messenger.addMessageHandler(\"GET_RENDERER\", (acc, ...args) => {\n  return state.renderer;\n})\n\n// the main app\nReactDOM.render(<App {...state} />, document.getElementById(\"root\"));\n\n// This is to simulate user uploading a mesh file and adding source + receiver\nsetTimeout(() => {\n\n  const { uuid: sourceidL } = state.messenger.postMessage(\n    \"SHOULD_ADD_SOURCE\"\n  )[0];\n\n  const { uuid: sourceidR } = state.messenger.postMessage(\n    \"SHOULD_ADD_SOURCE\"\n  )[0];\n\n\n  const { uuid: receiverId } = state.messenger.postMessage(\n    \"SHOULD_ADD_RECEIVER\"\n  )[0];\n  const models = importHandlers.obj(testroom);\n\n  const surfaces = models.map(\n    (model) =>\n      new Surface(model.name, {\n        geometry: model.geometry,\n        acousticMaterial: state.materialsIndex[\"rhFUnadRAxTJgCU7\"]\n      })\n  );\n  const room = new Room(\"room\", {\n    surfaces,\n    originalFileData: testroom,\n    originalFileName: \"testthing.obj\"\n  });\n  state.containers[room.uuid] = room;\n  state.renderer.addRoom(room);\n\n  state.messenger.postMessage(\"ADDED_ROOM\", room);\n\n  (state.containers[sourceidL] as Source).position.set(28.5, 13, 3);\n  (state.containers[sourceidL] as Source).scale.set(3, 3, 3);\n  (state.containers[sourceidL] as Source).name = \"L\";\n\n  (state.containers[sourceidR] as Source).position.set(28.5, 2, 3);\n  (state.containers[sourceidR] as Source).scale.set(3, 3, 3);\n  (state.containers[sourceidR] as Source).name = \"R\";\n\n  (state.containers[receiverId] as Receiver).position.set(12, 7.5,  4);\n  (state.containers[receiverId] as Receiver).scale.set(8, 8, 8);\n\n\n  expose(\n    {\n      // fdtd: state.messenger.postMessage(\"SHOULD_ADD_FDTD\")[0],\n      raytracer: state.messenger.postMessage(\"SHOULD_ADD_RAYTRACER\")[0],\n      state,\n      THREE\n    },\n    window\n  );\n}, 200);\n","import hotkeys from \"hotkeys-js\";\nimport Messenger from \"./messenger\";\nimport fullscreen from './common/fullscreen';\n\nexport function registerHotKeys(messenger: Messenger) {\n  \n  hotkeys(\"ctrl+i, command+i\", function () { messenger.postMessage(\"SHOW_IMPORT_DIALOG\") });\n  hotkeys(\"shift+/\", function () { messenger.postMessage(\"SHOW_TERMINAL\") })\n  hotkeys(\"shift+m\", function () { messenger.postMessage(\"TOGGLE_MATERIAL_SEARCH\") })\n  hotkeys(\"shift+n\", function () { messenger.postMessage(\"SHOW_NEW_WARNING\"); })\n  hotkeys(\"shift+o\", function(){messenger.postMessage(\"TOGGLE_CAMERA_ORTHO\")})\n  hotkeys(\"ctrl+shift+f, command+shift+f\", fullscreen);\n}\n\n\n\n","/*\n* Report browser settings like whatsmybrowser.org\n* Inspired by\n* http://stackoverflow.com/questions/9514179/how-to-find-the-operating-system-version-using-javascript\n*/\n\nexport interface Browser {\n\t\tname: string;\n\t\tversion: string;\n}\n\nexport interface Flash {\n\t\tversion: any;\n}\n\nexport interface Java {\n\t\tversion: any;\n}\n\nexport interface Os {\n\t\tname: string;\n\t\tversion: string;\n}\n\nexport interface Screen {\n\t\tcolors: number;\n\t\tdppx: number;\n\t\theight: number;\n\t\twidth: number;\n}\n\nexport interface Layout {\n\t\theight: number;\n\t\twidth: number;\n}\n\nexport interface Viewport {\n\t\theight: number;\n\t\tlayout: Layout;\n\t\twidth: number;\n\t\tzoom: number;\n}\n\n\nexport interface Report {\n\tbrowser: Browser;\n\tcookies: boolean;\n\tflash: Flash;\n\tip: any;\n\tjava: Java;\n\tos: Os;\n\tscreen: Screen;\n\tscripts: boolean;\n\tuserAgent: string;\n\tviewport: Viewport;\n\twebsockets: boolean;\n\tlang: string[];\n\ttimestamp: string;\n}\n\nexport default function browerReport(userAgent) {\n  let definePropertySupported;\n\tlet match;\n\tlet uuid;\n\n\tuserAgent = userAgent || navigator.userAgent;\n\n\t// initialize object to store results\n\tconst report: Report = {\n\t\ttimestamp: \"\",\n\t\tbrowser: {\n\t\t\tname: \"\",\n\t\t\tversion: \"\"\n\t\t},\n\t\tcookies: true,\n\t\tflash: {\n\t\t\tversion: \"\"\n\t\t},\n\t\tip: \"\",\n\t\tjava: {\n\t\t\tversion: \"\"\n\t\t},\n\t\tos: {\n\t\t\tname: \"\",\n\t\t\tversion: \"\"\n\t\t},\n\t\tscreen: {\n\t\t\tcolors: 0,\n\t\t\tdppx: 0,\n\t\t\theight: 0,\n\t\t\twidth: 0\n\t\t},\n\t\tscripts: true,\n\t\tuserAgent: userAgent,\n\t\tviewport: {\n\t\t\theight: 0,\n\t\t\tlayout: {\n\t\t\t\theight: 0,\n\t\t\t\twidth: 0\n\t\t\t},\n\t\t\twidth: 0,\n\t\t\tzoom: 0\n\t\t},\n\t\tlang: [\"\"],\n\t\twebsockets: true\n\t};\n\n\t// extract browser name from user agent\n\tif (userAgent.indexOf(\"Trident\") >= 0 || userAgent.indexOf(\"MSIE\") >= 0) {\n\t\tif (userAgent.indexOf(\"Mobile\") >= 0) {\n\t\t\treport.browser.name = \"IE Mobile\";\n\t\t} else {\n\t\t\treport.browser.name = \"Internet Explorer\";\n\t\t}\n\t}\n\n\tif (\n\t\tuserAgent.indexOf(\"Firefox\") >= 0 &&\n\t\tuserAgent.indexOf(\"Seamonkey\") === -1\n\t) {\n\t\tif (userAgent.indexOf(\"Android\") >= 0) {\n\t\t\treport.browser.name = \"Firefox for Android\";\n\t\t} else {\n\t\t\treport.browser.name = \"Firefox\";\n\t\t}\n\t}\n\n\tif (\n\t\tuserAgent.indexOf(\"Safari\") >= 0 &&\n\t\tuserAgent.indexOf(\"Chrome\") === -1 &&\n\t\tuserAgent.indexOf(\"Chromium\") === -1 &&\n\t\tuserAgent.indexOf(\"Android\") === -1\n\t) {\n\t\tif (userAgent.indexOf(\"CriOS\") >= 0) {\n\t\t\treport.browser.name = \"Chrome for iOS\";\n\t\t} else if (userAgent.indexOf(\"FxiOS\") >= 0) {\n\t\t\treport.browser.name = \"Firefox for iOS\";\n\t\t} else {\n\t\t\treport.browser.name = \"Safari\";\n\t\t}\n\t}\n\n\tif (userAgent.indexOf(\"Chrome\") >= 0) {\n\t\tif (userAgent.match(/\\bChrome\\/[.0-9]* Mobile\\b/)) {\n\t\t\tif (\n\t\t\t\tuserAgent.match(/\\bVersion\\/\\d+\\.\\d+\\b/) ||\n\t\t\t\tuserAgent.match(/\\bwv\\b/)\n\t\t\t) {\n\t\t\t\treport.browser.name = \"WebView on Android\";\n\t\t\t} else {\n\t\t\t\treport.browser.name = \"Chrome for Android\";\n\t\t\t}\n\t\t} else {\n\t\t\treport.browser.name = \"Chrome\";\n\t\t}\n\t}\n\n\tif (\n\t\tuserAgent.indexOf(\"Android\") >= 0 &&\n\t\tuserAgent.indexOf(\"Chrome\") === -1 &&\n\t\tuserAgent.indexOf(\"Chromium\") === -1 &&\n\t\tuserAgent.indexOf(\"Trident\") === -1 &&\n\t\tuserAgent.indexOf(\"Firefox\") === -1\n\t) {\n\t\treport.browser.name = \"Android Browser\";\n\t}\n\n\tif (userAgent.indexOf(\"Edge\") >= 0) {\n\t\treport.browser.name = \"Edge\";\n\t}\n\n\tif (userAgent.indexOf(\"UCBrowser\") >= 0) {\n\t\treport.browser.name = \"UC Browser for Android\";\n\t}\n\n\tif (userAgent.indexOf(\"SamsungBrowser\") >= 0) {\n\t\treport.browser.name = \"Samsung Internet\";\n\t}\n\n\tif (userAgent.indexOf(\"OPR\") >= 0 || userAgent.indexOf(\"Opera\") >= 0) {\n\t\tif (userAgent.indexOf(\"Opera Mini\") >= 0) {\n\t\t\treport.browser.name = \"Opera Mini\";\n\t\t} else if (\n\t\t\tuserAgent.indexOf(\"Opera Mobi\") >= 0 ||\n\t\t\tuserAgent.indexOf(\"Opera Tablet\") >= 0 ||\n\t\t\tuserAgent.indexOf(\"Mobile\") >= 0\n\t\t) {\n\t\t\treport.browser.name = \"Opera Mobile\";\n\t\t} else {\n\t\t\treport.browser.name = \"Opera\";\n\t\t}\n\t}\n\n\tif (\n\t\tuserAgent.indexOf(\"BB10\") >= 0 ||\n\t\tuserAgent.indexOf(\"PlayBook\") >= 0 ||\n\t\tuserAgent.indexOf(\"BlackBerry\") >= 0\n\t) {\n\t\treport.browser.name = \"BlackBerry\";\n\t}\n\n\tif (userAgent.indexOf(\"MQQBrowser\") >= 0) {\n\t\treport.browser.name = \"QQ Browser\";\n\t}\n\n\t// extract browser version number from user agent\n\tmatch = null;\n\n\tswitch (report.browser.name) {\n\t\tcase \"Chrome\":\n\t\tcase \"Chrome for Android\":\n\t\tcase \"WebView on Android\":\n\t\t\tmatch = userAgent.match(/Chrome\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Firefox\":\n\t\tcase \"Firefox for Android\":\n\t\t\tmatch = userAgent.match(/Firefox\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Firefox for iOS\":\n\t\t\tmatch = userAgent.match(/FxiOS\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Edge\":\n\t\tcase \"Internet Explorer\":\n\t\tcase \"IE Mobile\":\n\t\t\tif (userAgent.indexOf(\"Edge\") >= 0) {\n\t\t\t\tmatch = userAgent.match(/Edge\\/((\\d+\\.)+\\d+)/);\n\t\t\t} else if (userAgent.indexOf(\"rv:11\") >= 0) {\n\t\t\t\tmatch = userAgent.match(/rv:((\\d+\\.)+\\d+)/);\n\t\t\t} else if (userAgent.indexOf(\"MSIE\") >= 0) {\n\t\t\t\tmatch = userAgent.match(/MSIE ((\\d+\\.)+\\d+)/);\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase \"Safari\":\n\t\t\tmatch = userAgent.match(/Version\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Android Browser\":\n\t\t\tmatch = userAgent.match(/Android ((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"UC Browser for Android\":\n\t\t\tmatch = userAgent.match(/UCBrowser\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Samsung Internet\":\n\t\t\tmatch = userAgent.match(/SamsungBrowser\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Opera Mini\":\n\t\t\tmatch = userAgent.match(/Opera Mini\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Opera\":\n\t\t\tif (userAgent.match(/OPR/)) {\n\t\t\t\tmatch = userAgent.match(/OPR\\/((\\d+\\.)+\\d+)/);\n\t\t\t} else if (userAgent.match(/Version/)) {\n\t\t\t\tmatch = userAgent.match(/Version\\/((\\d+\\.)+\\d+)/);\n\t\t\t} else {\n\t\t\t\tmatch = userAgent.match(/Opera\\/((\\d+\\.)+\\d+)/);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"BlackBerry\":\n\t\t\tmatch = userAgent.match(/Version\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"QQ Browser\":\n\t\t\tmatch = userAgent.match(/MQQBrowser\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tmatch = userAgent.match(/\\/((\\d+\\.)+\\d+)$/);\n\t\t\tbreak;\n\t}\n\n\tif (match && match[1]) {\n\t\treport.browser.version = match[1];\n\t}\n\n\t// pull in browser window size from the visual viewport\n\treport.viewport.width =\n\t\twindow.innerWidth || document.documentElement.clientWidth;\n\treport.viewport.height =\n\t\twindow.innerHeight || document.documentElement.clientHeight;\n\n\t/*\n\t * test if Object.defineProperty function is fully supported\n\t */\n\ttry {\n\t\tObject.defineProperty({}, \"x\", {});\n\t\tdefinePropertySupported = true;\n\t} catch (e) {\n\t\tdefinePropertySupported = false;\n\t}\n\n\t/*\n\t * helper function to safely log warning messages\n\t */\n\t/* eslint-disable no-console */\n\tfunction warning(msg) {\n\t\tif (window.console) {\n\t\t\tif (console.warn) {\n\t\t\t\tconsole.warn(msg);\n\t\t\t} else {\n\t\t\t\tconsole.log(msg);\n\t\t\t}\n\t\t}\n\t}\n\t/* eslint-enable no-console */\n\n\t// deprecate report.browser.size\n\tif (definePropertySupported) {\n\t\tObject.defineProperty(report.browser, \"size\", {\n\t\t\tget: function() {\n\t\t\t\twarning(\n\t\t\t\t\t\"browser.size is deprecated; use viewport.width and viewport.height\"\n\t\t\t\t);\n\t\t\t\treturn report.viewport.width + \" x \" + report.viewport.height;\n\t\t\t}\n\t\t});\n\t}\n\n\t// pull in raw values for layout viewport\n\treport.viewport.layout.width = document.documentElement.clientWidth;\n\treport.viewport.layout.height = document.documentElement.clientHeight;\n\n\t// define viewport zoom property\n\treport.viewport.zoom = report.viewport.layout.width / report.viewport.width;\n\n\t// are cookies enabled\n\t// can't trust this value (Microsoft Edge lies)\n\t// report.cookies = !!navigator.cookieEnabled;\n\n\t// truly check if cookies are enabled\n\t// generate UUID for cookie name\n\tuuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\";\n\tuuid = uuid.replace(/[xy]/g, function(c) {\n\t\tvar r, v;\n\n\t\tr = (Math.random() * 16) | 0;\n\t\tv = c === \"x\" ? r : (r & 0x3) | 0x8;\n\n\t\treturn v.toString(16);\n\t});\n\tdocument.cookie = uuid;\n\n\tif (document.cookie.indexOf(uuid) >= 0) {\n\t\treport.cookies = true;\n\t} else {\n\t\treport.cookies = false;\n\t}\n\t// delete temporary cookie\n\tdocument.cookie = uuid + \"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\n\n\t// check plugins\n\t(function(plugins) {\n\t\tvar i, l, plugin;\n\n\t\tif (plugins) {\n\t\t\tl = plugins.length;\n\n\t\t\tfor (i = 0; i < l; i += 1) {\n\t\t\t\tplugin = plugins.item(i);\n\n\t\t\t\t// what version of Adobe Flash\n\t\t\t\tif (plugin.name.indexOf(\"Flash\") >= 0) {\n\t\t\t\t\tmatch = plugin.description.match(/\\b((\\d+\\.)+\\d+)\\b/);\n\t\t\t\t\tif (match && match[1]) {\n\t\t\t\t\t\treport.flash.version = match[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// what version of Java\n\t\t\t\tif (plugin.name.indexOf(\"Java\") >= 0) {\n\t\t\t\t\tmatch = plugin.description.match(/\\b((\\d+\\.)+\\d+)\\b/);\n\t\t\t\t\tif (match && match[1]) {\n\t\t\t\t\t\treport.java.version = match[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})(navigator.plugins);\n\n\t// extract operating system name from user agent\n\tif (userAgent.indexOf(\"Windows\") >= 0) {\n\t\tif (userAgent.indexOf(\"Windows Phone\") >= 0) {\n\t\t\treport.os.name = \"Windows Phone\";\n\t\t} else {\n\t\t\treport.os.name = \"Windows\";\n\t\t}\n\t}\n\n\tif (userAgent.indexOf(\"OS X\") >= 0 && userAgent.indexOf(\"Android\") === -1) {\n\t\treport.os.name = \"OS X\";\n\t}\n\n\tif (userAgent.indexOf(\"Linux\") >= 0) {\n\t\treport.os.name = \"Linux\";\n\t}\n\n\tif (userAgent.indexOf(\"like Mac OS X\") >= 0) {\n\t\treport.os.name = \"iOS\";\n\t}\n\n\tif (\n\t\t(userAgent.indexOf(\"Android\") >= 0 || userAgent.indexOf(\"Adr\") >= 0) &&\n\t\tuserAgent.indexOf(\"Windows Phone\") === -1\n\t) {\n\t\treport.os.name = \"Android\";\n\t}\n\n\tif (userAgent.indexOf(\"BB10\") >= 0) {\n\t\treport.os.name = \"BlackBerry\";\n\t}\n\n\tif (userAgent.indexOf(\"RIM Tablet OS\") >= 0) {\n\t\treport.os.name = \"BlackBerry Tablet OS\";\n\t}\n\n\tif (userAgent.indexOf(\"BlackBerry\") >= 0) {\n\t\treport.os.name = \"BlackBerryOS\";\n\t}\n\n\tif (userAgent.indexOf(\"CrOS\") >= 0) {\n\t\treport.os.name = \"Chrome OS\";\n\t}\n\n\tif (userAgent.indexOf(\"KAIOS\") >= 0) {\n\t\treport.os.name = \"KaiOS\";\n\t}\n\n\t// extract operating system version from user agent\n\tmatch = null;\n\n\tswitch (report.os.name) {\n\t\tcase \"Windows\":\n\t\tcase \"Windows Phone\":\n\t\t\tif (userAgent.indexOf(\"Win16\") >= 0) {\n\t\t\t\treport.os.version = \"3.1.1\";\n\t\t\t} else if (userAgent.indexOf(\"Windows CE\") >= 0) {\n\t\t\t\treport.os.version = \"CE\";\n\t\t\t} else if (userAgent.indexOf(\"Windows 95\") >= 0) {\n\t\t\t\treport.os.version = \"95\";\n\t\t\t} else if (userAgent.indexOf(\"Windows 98\") >= 0) {\n\t\t\t\tif (userAgent.indexOf(\"Windows 98; Win 9x 4.90\") >= 0) {\n\t\t\t\t\treport.os.version = \"Millennium Edition\";\n\t\t\t\t} else {\n\t\t\t\t\treport.os.version = \"98\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmatch = userAgent.match(\n\t\t\t\t\t/Win(?:dows)?(?: Phone)?[ _]?(?:(?:NT|9x) )?((?:(\\d+\\.)*\\d+)|XP|ME|CE)\\b/\n\t\t\t\t);\n\n\t\t\t\tif (match && match[1]) {\n\t\t\t\t\tswitch (match[1]) {\n\t\t\t\t\t\tcase \"6.4\":\n\t\t\t\t\t\t\t// some versions of Firefox mistakenly used 6.4\n\t\t\t\t\t\t\tmatch[1] = \"10.0\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"6.3\":\n\t\t\t\t\t\t\tmatch[1] = \"8.1\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"6.2\":\n\t\t\t\t\t\t\tmatch[1] = \"8\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"6.1\":\n\t\t\t\t\t\t\tmatch[1] = \"7\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"6.0\":\n\t\t\t\t\t\t\tmatch[1] = \"Vista\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"5.2\":\n\t\t\t\t\t\t\tmatch[1] = \"Server 2003\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"5.1\":\n\t\t\t\t\t\t\tmatch[1] = \"XP\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"5.01\":\n\t\t\t\t\t\t\tmatch[1] = \"2000 SP1\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"5.0\":\n\t\t\t\t\t\t\tmatch[1] = \"2000\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"4.0\":\n\t\t\t\t\t\t\tmatch[1] = \"4.0\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t// nothing\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"OS X\":\n\t\t\tmatch = userAgent.match(/OS X ((\\d+[._])+\\d+)\\b/);\n\t\t\tbreak;\n\t\tcase \"Linux\":\n\t\t\t// linux user agent strings do not usually include the version\n\t\t\treport.os.version = \"\";\n\t\t\tbreak;\n\t\tcase \"iOS\":\n\t\t\tmatch = userAgent.match(/OS ((\\d+[._])+\\d+) like Mac OS X/);\n\t\t\tbreak;\n\t\tcase \"Android\":\n\t\t\tmatch = userAgent.match(/(?:Android|Adr) (\\d+([._]\\d+)*)/);\n\t\t\tbreak;\n\t\tcase \"BlackBerry\":\n\t\tcase \"BlackBerryOS\":\n\t\t\tmatch = userAgent.match(/Version\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"BlackBerry Tablet OS\":\n\t\t\tmatch = userAgent.match(/RIM Tablet OS ((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Chrome OS\":\n\t\t\treport.os.version = report.browser.version;\n\t\t\tbreak;\n\t\tcase \"KaiOS\":\n\t\t\tmatch = userAgent.match(/KAIOS\\/(\\d+(\\.\\d+)*)/);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t// no good default behavior\n\t\t\treport.os.version = \"\";\n\t\t\tbreak;\n\t}\n\n\tif (match && match[1]) {\n\t\t// replace underscores in version number with periods\n\t\tmatch[1] = match[1].replace(/_/g, \".\");\n\t\treport.os.version = match[1];\n\t}\n\n\t// handle Mac OS X / OS X / macOS naming conventions\n\tif (report.os.name === \"OS X\" && report.os.version) {\n\t\tvar versions = report.os.version.split(\".\");\n\t\tif (versions.length >= 2) {\n\t\t\tvar minorVersion = parseInt(versions[1], 10);\n\t\t\tif (minorVersion <= 7) {\n\t\t\t\treport.os.name = \"Mac OS X\";\n\t\t\t} else if (minorVersion >= 12) {\n\t\t\t\treport.os.name = \"macOS\";\n\t\t\t} else {\n\t\t\t\treport.os.name = \"OS X\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// pull in screen info from W3C standard properties\n\treport.screen.width = screen.width;\n\treport.screen.height = screen.height;\n\treport.screen.colors = screen.colorDepth;\n\tif (window.devicePixelRatio && !isNaN(window.devicePixelRatio)) {\n\t\treport.screen.dppx = window.devicePixelRatio;\n\t} else {\n\t\treport.screen.dppx = 1;\n\t}\n\n\t// deprecate report.screen.size\n\tif (definePropertySupported) {\n\t\tObject.defineProperty(report.screen, \"size\", {\n\t\t\tget: function() {\n\t\t\t\twarning(\n\t\t\t\t\t\"screen.size is deprecated; use screen.width and screen.height\"\n\t\t\t\t);\n\t\t\t\treturn report.screen.width + \" x \" + report.screen.height;\n\t\t\t}\n\t\t});\n\t}\n\n\t// deprecate report.screen.resolution\n\tif (definePropertySupported) {\n\t\tObject.defineProperty(report.screen, \"resolution\", {\n\t\t\tget: function() {\n\t\t\t\twarning(\n\t\t\t\t\t\"screen.resolution is deprecated; multiply screen.width and screen.height by screen.dppx\"\n\t\t\t\t);\n\t\t\t\treturn (\n\t\t\t\t\treport.screen.dppx * report.screen.width +\n\t\t\t\t\t\" x \" +\n\t\t\t\t\treport.screen.dppx * report.screen.height\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\t// are web sockets supported\n\treport.websockets = !!window.WebSocket;\n\n\t// preferred language(s) for displaying pages\n\treport.lang = [String(navigator.languages) || String(navigator.language)];\n\n\t// local date, time, and time zone\n\treport.timestamp = new Date().toString();\n\n\treturn report;\n};"],"sourceRoot":""}