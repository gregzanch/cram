{"version":3,"sources":["res/matcaps/matcap-porcelain-white.jpg","res/matcaps/razin.png","res/textures/tri_pattern.jpg","res/matcaps/overexposed-outline.png","res/matcaps/outline.png","res/matcaps/undershadow.png","res/sprites/circle.png","components/MenuItemText.tsx","constants/characters.ts","common/file-type.ts","components/ImportDialog.tsx","common/dayt.ts","common/proper-case.ts","components/ContextMenu.tsx","components/ObjectView.tsx","objects/container.ts","containers/PanelContainer.tsx","components/TextInput.tsx","components/NumberInput.tsx","components/GridRow.tsx","components/ObjectProperties/FDTDProperties.tsx","components/CheckboxInput.tsx","components/ColorInput.tsx","components/ObjectProperties/SourceProperties.tsx","components/ObjectProperties/ReceiverProperties.tsx","components/GridRowSeperator.tsx","components/ObjectProperties/RayTracerProperties.tsx","components/ObjectProperties/RoomProperties.tsx","compute/acoustics/util/nums.ts","compute/acoustics/std/bands.ts","compute/acoustics/bands.ts","compute/acoustics/util/allowMultiple.ts","compute/acoustics/std/constants.ts","compute/acoustics/convert.ts","compute/acoustics/util/linspace.ts","compute/acoustics/porous.ts","compute/acoustics/weight/index.ts","compute/acoustics/transmission/tau.ts","compute/acoustics/transmission/tl.ts","compute/acoustics/transmission/nr.ts","compute/acoustics/transmission/compositeTL.ts","compute/acoustics/std/weight.ts","compute/acoustics/complex.ts","compute/acoustics/fft/fft.ts","compute/acoustics/util/range.ts","compute/acoustics/util/chunk.ts","compute/acoustics/window/window-functions.ts","compute/acoustics/window/functions/hann.ts","compute/acoustics/window/applyWindow.ts","compute/acoustics/fft/index.ts","compute/acoustics/util/complex-array.ts","components/ObjectProperties/RT60Properties.tsx","common/chunk.ts","compute/acoustics/interpolate-log.ts","compute/acoustics/interpolate-alpha.ts","compute/acoustics/reflection-coefficient.ts","compute/raytracer/brdf.ts","common/discretize.ts","objects/surface.ts","components/ObjectProperties/SurfaceProperties.tsx","components/ObjectProperties/GenericObjectProperties.tsx","components/ObjectProperties/index.tsx","components/SettingsDrawer.tsx","compute/solver.ts","compute/raytracer/scattered-energy.ts","compute/raytracer/shaders/points/shader.vert","compute/raytracer/shaders/points/index.ts","compute/raytracer/shaders/points/shader.frag","compute/raytracer/index.ts","components/Gutter/RT60Tab.tsx","components/Gutter/RayTracerTab.tsx","components/Gutter/index.tsx","components/AbsorptionGradient.tsx","components/MaterialDrawer.tsx","common/clamp.ts","components/setting-components/SettingsPanelBlock.tsx","components/setting-components/SettingsPanelSetting.tsx","components/setting-components/SettingsTextComponent.tsx","components/setting-components/SettingsNumberComponent.tsx","components/setting-components/SettingsColorComponent.tsx","components/setting-components/SettingsPanel.tsx","containers/App.tsx","messenger.ts","objects/asset-store.ts","objects/source.ts","objects/receiver.ts","render/OrbitControls.js","common/lerp.ts","common/easing.ts","render/env/grid.ts","render/defaults.ts","render/env/axes.ts","render/env/lights.ts","render/pick-helper.ts","render/renderer.ts","common/fullscreen.ts","render/loaders/stl.ts","render/loaders/obj.ts","import-handlers/index.ts","common/expose.ts","common/setting.ts","compute/fdtd/defaults.ts","compute/fdtd/shader/index.ts","compute/fdtd/shader/shader.vert","compute/fdtd/shader/shader.frag","compute/fdtd/index.ts","objects/room.ts","compute/rt/index.ts","index.tsx","hotkeys.ts","common/browser-report.ts","res/models/testthing.obj"],"names":["module","exports","__webpack_require__","p","MenuItemText","props","react_default","a","createElement","style","display","justifyContent","text","color","Colors","LIGHT_GRAY1","hotkey","COMMAND","CONTROL","SHIFT","OPTION","DELETE","DELETE_FORWARDS","UP_ARROW","RIGHT_ARROW","LEFT_ARROW","DOWN_ARROW","TAB","ESCAPE","ICONS","FILE_FILLED","TEXT_FILLED","FILES","ARCHIVE","AUDIO","CODE","EXCEL","IMAGE","FILE","PDF","POWERPOINT","TEXT","VIDEO","WORD","allowed","stl","obj","gltf","fileType","name","split","slice","DROP_ALLOWED","file_type","assoc","html","js","png","css","txt","md","lock","ts","json","yml","abec","rtf","TXT","dxf","pdf","vips","vacs","asc","msh","stp","jpg","tmd","xls","skp","dae","svg","res","dpr","pas","dll","vsix","st","ico","step","py","sh","FOR","o","h","c","scss","map","cpp","mm","java","m","app","wav","sofa","bin","nib","rc","sln","LGPL","hh","main","cxx","dtd","cc","cu","dat","f","in","BSD","dox","MPL2","GPL","bz2","log","4","out","pc","dir","make","11","lib","pdb","el","toml","opts","mjs","yaml","foo","0","1","flow","idea","xml","iml","bnf","DOCS","hbs","pick","pyc","jsx","less","com","php","zip","csv","mp3","ttf","exe","chm","ppm","toy","hpp","ac","am","sub","deps","Po","m4","Plo","lol","err","3","glsl","dSYM","hmap","d","dia","doc","docx","bat","iss","ui","odt","bmp","PNG","md3","tga","ply","mtl","md2","3d","uc","pmx","jpeg","7z","mdl","MDL","ase","nff","mat","NFF","fbx","b3d","pk3","lws","JPG","lwo","m3","3DS","3ds","x3d","hmp","x","mdc","amf","glb","frag","vert","ogex","ASE","FBX","DAE","smd","off","raw","zgl","xgl","bvh","STL","max","q3o","q3s","ter","lxo","ms3d","3mf","csm","sib","irr","X","WRL","wrl","ifc","cob","inl","asm","adb","ads","gpr","mak","cs","def","S","pk","msc","686","bor","gcc","keep","pump","hlsl","xib","pch","exp","tpl","mk","i","rst","sty","f03","pl","dft","rdft","texi","eps","bfnn","refs","info","fig","tex","ml","mli","pde","hs","ipch","r","vst3","vst","room","icns","std","gyp","node","gypi","conf","targ","lcov","snyk","md~","crt","key","bak","tar","jade","cmd","MIT","tgz","jst","gz","test","tmpl","file","tlog","vs","suo","mov","db","user","htm","mode","pug","psd","asar","pak","snap","eot","woff","geo","finc","f90","F90","md5","swf","tail","stat","ejs","priv","pem","pub","bar","wmf","cfg","tsx","cert","un~","9","8","ls","uniq","gv","ps","env","keys","so","pac","erb","idl","omit","mkd","data","wasm","gif","lint","io","tags","jsm","rdoc","sage","tsv","rt","dmg","otf","scpt","jxa","mkb","icf","kbd","ini","docs","spec","rb","po","pot","LIB","l","y","c++","h++","2/m4","asv","mid","12","10","js~","remy","get","cnf","cub","wxs","swp","blob","pyd","pyx","vtu","mph","egg","mo","ogg","aac","asd","7","vrt","mp4","gpu","htc","item","base","npy","py3","pb","h5","tif","go","bats","fish","aiff","rej","orig","gnu","sql","wat","rs","useStyles","makeStyles","dropzone","height","width","backgroundColor","backgroundColors","ImportDialog","_useState","useState","IDK","_useState2","Object","slicedToArray","dropAllowed","setDropAllowed","_useState3","_useState4","filelist","setFilelist","components","assign","icon","title","transitionDuration","borderRadius","paddingBottom","minWidth","className","Classes","DIALOG_BODY","onDragEnter","e","_e$dataTransfer","dataTransfer","types","items","files","yes","length","_items$i","kind","type","YES","NO","onDragLeave","onDragOver","_e$dataTransfer2","_items$i2","stopPropagation","preventDefault","onDrop","_e$dataTransfer3","filearray","Array","from","onClick","input","document","querySelector","setAttribute","body","appendChild","addEventListener","target","push","remove","click","fontSize","textAlign","HTML_TABLE_BORDERED","HTML_TABLE_CONDENSED","HTML_TABLE_STRIPED","join","uuid","FileTypes","id","marginLeft","time","lastModified","Date","toString","DialogActions","BUTTON","intent","Intent","PRIMARY","disabled","onImport","properCase","str","replace","charAt","toUpperCase","substr","toLowerCase","ContextMenu","ContextMenuTarget","_class","_React$Component","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","value","children","handleMenuItemClick","React","Component","NodesIcon","SvgIcon","viewBox","fill","xmlns","stroke","RayTracerIcon","Timeline_default","RT60Icon","FDTDIcon","RoomIcon","data-name","points","SurfaceIcon","cx","cy","SourceIcon","Wifi_default","transform","fillOpacity","ReceiverIcon","Mic_default","createStyles","root","flexGrow","TreeItemLabel","label","meta","ObjectView","expanded","setExpanded","unselectable","containers","SolverTreeItem","TreeItem","nodeId","collapseIcon","ExpandMore_default","filter","expandIcon","ChevronRight_default","concat","fontWeight","LIGHT_GRAY3","solvers","solver","ContextMenuSharedProps","textContent","onDelete","components_ContextMenu","defaultChecked","draggable","mapsolver","ContainerTreeItem","mapchildren","container","selected","sharedProps","genericLabel","roomLabel","TreeViewProps","defaultExpanded","defaultExpandIcon","defaultCollapseIcon","TreeView","Container","_this","call","select","deselect","renderCallback","save","restore","visible","position","toArray","scale","rotation","state","set","val","setX","setY","z","setZ","THREE","PanelContainer","TextInput","basestyle","_props","onChange","currentTarget","NumberInput","min","GridRow","Fragment","span","gridColumnStart","gridColumnEnd","FDTDPropertiesContainerStyle","gridTemplateColumns","padding","gridRowGap","gridColumnGap","FDTDProperties","onPropertyChange","object","hasOwnProperty","components_TextInput","components_NumberInput","gain","threshold","dx","running","dt","q","CheckboxInput","checked","checkedNode","Visibility_default","uncheckedNode","VisibilityOff_default","ColorInput","SourcePropertiesContainerStyle","SourceProperties","XYZProps","messenger","postMessage","components_CheckboxInput","components_ColorInput","getColorAsString","undefined","ReceiverPropertiesContainerStyle","ReceiverProperties","GridRowSeperator","borderBottomStyle","borderBottomWidth","borderBottomColor","marginTop","marginBottom","RayTracerPropertiesContainerStyle","RayTracerProperties","sources","sourcesSelectOptions","sourceIDs","includes","sourceSelectedOptions","receivers","receiverSelectOptions","receiverIDs","receiverSelectedOptions","customStyles","indicatorsContainer","provided","objectSpread","clearIndicator","dropdownIndicator","control","minHeight","updateInterval","reflectionOrder","passes","pointSize","raysVisible","runWithoutReceiver","isRunning","onButtonClick","minimal","react_select_browser_esm","defaultValue","isMulti","options","classNamePrefix","styles","console","reflectionLossFrequencies","Math","random","RoomPropertiesContainerStyle","RoomProperties","boundingBoxHelper","nums","v","third_octave","whole_octave","whole_octave_all","Lower","Center","Upper","third_octave_all","Octave","start","end","Number","ThirdOctave","Flower","k","fc","pow","Fupper","allowMultiple","func","pref","units","Wref","Iref","Lw2Lp","Lw","Q","abs","log10","PI","Lp2Lw","Lp","P2Lp","P","Lp2P","lp","I2Li","I","Li2I","Li","li","W2Lw","W","w","Lw2W","lw","Lp2Ln","Ar","Ao","P_dB","dB_P","I_dB","dB_I","W_dB","dB_W","pi","tanh","coth","ccoth","complex","real","im","defaults","speed","density","flowResistivity","thickness","frequencies","arr","floor","linspace","rigidBackedPorousAbsorber","params","_Object$assign","ρ","σ","Z0","zc","γ","multiplier","R","clone","mult","add","divide","frequency","reflection","magnitude","phase","angle","absorption","A","freq","f2","sqrt","R_a","B","R_b","C","R_c","R_d","D","tau","TL","args","NR","area","offset","Lsource","Lreciever","compositeTL","wallElements","num","elt","reduce","b","den","weight","Complex","imag","Error","radius","cos","arg","sin","dd","product","multiply","conjugate","unit","FFT","bitReversalTable","previousArraySize","H","spectrum","row","fft1d","transpose","_this2","ifft1d","size","N","calcFactors","createBitReversalTable","updateArraySize","sortData","n","tmp","subtract","swap","_this3","_this3$power1d","power1d","_this3$power1d2","rowSpectrum","rowMax","powerSpectrum","absolute","sortedData","copy","exponential","power","getExponent2","reverseBits","ceil","bits","padStart","reversedBits","binaryRepresentation","parseInt","log2","isInteger","transposedData","init2DArray","centerX","centerY","shiftedData","u","chunk","_","range","WindowFunctions","Hann","hann","applyWindowComplex","window","default_fftoptions","buffersize","dim","fft","values","Float32Array","f32_array","makebuffer","makeComplexArray","RT60PropertiesContainerStyle","RT60Properties","sabine","toFixed","array","interpolateLog","x1","y1","x2","y2","xi","interpolateAlpha","alpha","reflectionCoefficient","α","θ","rootOneMinusAlpha","ξo_sinθ","BRDF","coefficients","steps","getIndex","j","stop","round","absorptionCoefficient","diffusionCoefficient","angle_in","angle_out","reflected","specularEnergy","diffusedEnergyPerSlot","incoming","outgoing","sum","materials","shader","vertexShader","_templateObject","fragmentShader","_templateObject2","depthTest","uniforms","side","emissiveIntensity","emissive","transparent","opacity","metalness","reflectivity","roughness","depthWrite","mesh","wire","wireframe","line","displayInternalEdges","displayEdges","fillSurface","_displayVertexNormals","Surface","edges","triangles","vertexNormals","_triangles","selectedMaterial","normalMaterial","normalColor","shaderMaterial","absorptionFunction","reflectionFunction","_acousticMaterial","brdf","geometry","computeBoundingBox","computeBoundingSphere","tempmesh","computeVertexNormals","getAttribute","construct","toConsumableArray","bind","assertThisInitialized","dict","forEach","tri","JSON","stringify","sort","segments","edge","vertices","theta","acousticMaterial","material","needsUpdate","getArea","String","displayVertexNormals","SurfacePropertiesContainerStyle","SurfaceProperties","small","GenericObjectPropertiesContainerStyle","GenericObjectProperties","ObjectProperties","nextProps","nextState","nextContext","RT60Properties_RT60Properties","SettingsDrawer","Position","RIGHT","autoFocus","enforceFocus","hasBackdrop","onClose","canOutsideClickClose","canEscapeKeyClose","isCloseButtonShown","rightIcon","onSubmit","isOpen","Solver","update","clearpass","scatteredEnergy","incomingEnergy","scatteringCoefficient","gamma","fs","prototype","computeBoundsTree","disposeBoundsTree","raycast","acceleratedRaycast","DRAWSTYLE","asin","ReceiverData","roomID","surfaceIDs","_isRunning","invertedDrawStyle","RayTracer","raycaster","intersections","intervals","rayBufferGeometry","rayBufferAttribute","colorBufferAttribute","rays","rayPositionIndex","maxrays","renderer","intersectableObjects","paths","stats","messageHandlerIDs","statsUpdatePeriod","lastTime","allReceiverData","hits","_pointSize","chartdata","_raysVisible","_invertedDrawStyle","__start_time","__calc_time","__num_checked_paths","now","paramsHasRaysVisible","paramsHasInvertedDrawStyle","setUsage","setDrawRange","premultipliedAlpha","blending","frustumCulled","scene","PointShader","drawStyle","ENERGY","inverted","pointScale","defineProperty","writable","findIDs","mapIntersectableObjects","numRaysShot","numValidRayPaths","addMessageHandler","acc","_len","_key","_len2","_key2","removeMessageHandler","source","rec","surfaces","numRays","p1","p2","energy","setXYZ","setXY","version","plane","getPlane","pleq","normal","constant","avec4","bvec4","cvec4","dot","ro","rd","order","iter","chain","normalize","ray","origin","direction","intersectObjects","_intersections$0$obje","userData","face","multiplyScalar","angleTo","intersectedReceiver","rr","reflectionloss","parent","traceRay","point","addScaledVector","_this4","setInterval","phi","applyEuler","path","appendRay","index","startAllMonteCarlo","_this5","interval","clearInterval","calc_time","num_valid_rays","valid_ray_rate","num_checks","check_rate","calculateTotalPathTime","distance","_this6","receiverRadius","receiverPosition","receiverData","energytime","segment","surface","energytime_diffuse","time_rec","total_time","subVectors","_this7","pathkeys","_loop","raypath","reflectionLossFunction","intersection","refloss","sample_rate","saveImpulseResponse","Blob","FileSaver","saveAs","_this8","sampleRate","_ret","maxTime","numSamples","sampledArray","_loop2","_j","sampleTime","actualTime","sums","sub_counter","warn","resampleResponse","_loadWasm","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","loader","instantiate","fetch","consoleLog","abrupt","sent","loadWasm","then","result","catch","error","_this9","_this10","precheck","isFinite","RT60Tab","colors","RayTracerTab","getAllReceiverIntersectionData","marker","getReceiverIntersectionPoints","receiverIntersectionData","forceUpdate","react_plotly_default","layout","margin","t","aspectratio","camera","center","eye","up","xaxis","zeroline","yaxis","zaxis","config","responsive","Gutter","selectedTabIndex","handleTabChange","tabIndex","setState","esm","selectedIndex","onSelect","RayTracerTab_RayTracerTab","RT60Tab_RT60Tab","chroma","correctLightness","absorptionGradient","percentage","col","MaterialDrawer","listref","listScroll","bufferLength","query","selected_item","selected_object","handleQueryChange","handleInput","handleObjectViewClick","handleListItemDoubleClick","createRef","event","current","scrollTop","focus","shiftKey","filteredItems","absorptionKeys","rooms","ObjectView_ObjectView","iconSize","onInput","ref","MaterialDrawerListArray","containerProps","_id","handleListItemClick","onDoubleClick","background","MaterialDrawerList","SettingsPanelBlock","SettingsPanelSetting","edited","description","SettingsTextComponent","setting","staged_value","SettingsNumberComponent","SettingsColorComponent","SettingsPanel","handleTextComponentChange","handleNumberComponentChange","handleColorComponentChange","SettingInputComponent","setStagedValue","valueAsNumber","SettingsTextComponent_SettingsTextComponent","SettingsNumberComponent_SettingsNumberComponent","SettingsColorComponent_SettingsColorComponent","SettingsPanelBlock_SettingsPanelBlock","SettingsPanelSetting_SettingsPanelSetting","AppToaster","Toaster","create","TOP","FocusStyleManager","onlyShowFocusOnTabs","App","canvas","statsCanvas","prog","MaterialOptionListRenderer","terminalOpen","newWarningVisible","materialDrawerOpen","lastUpdateReason","simulationRunning","importDialogVisible","selectedObject","settingsDrawerVisible","settings","tool","darkmode","chartData","setupMessageHandlers","showImportDialog","handleImportDialogClose","handleObjectViewDelete","handleObjectPropertyChange","handleObjectPropertyValueChangeAsNumber","handleObjectPropertyValueChangeAsString","handleSettingsButtonClick","handleMaterialBarClose","handleMaterialBarItemSelect","handleSettingChange","handleObjectPropertyButtonClick","message","handler","cb","objects","toastProps","show","_len3","_key3","_len4","_key4","_len5","_key5","_len6","_key6","prop","valueAsString","Group","align","Alignment","LEFT","Divider","BOTTOM_LEFT","Characters","canOutsideClickCancel","canEscapeKeyCancel","cancelButtonText","confirmButtonText","DANGER","onConfirm","onCancel","SettingsDrawer_SettingsDrawer","SettingsPanel_SettingsPanel","MaterialDrawer_MaterialDrawer","usePortal","themeName","lib_default","secondaryMinSize","primaryMinSize","secondaryInitialSize","primaryIndex","customClassName","vertical","ObjectProperties_ObjectProperties","onPropertyValueChangeAsNumber","onPropertyValueChangeAsString","onSecondaryPaneSizeChange","components_Gutter_Gutter","Messenger","dictionary","messageListeners","lastMessage","accumulator","_this$dictionary$mess2","results","callback","MATCAP_PORCELAIN_WHITE","load","matcapPorcelainWhite","MATCAP_UNDER_SHADOW","matcapOutline","matcapOverexposedOutline","matcapRazin","matcapUnderShadow","triPattern","Source","brighten","matcap","brighterColor","getHex","setHex","getColorAsNumber","fromCharCode","getHexString","setStyle","selectedColor","Receiver","OrbitControls","domElement","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","UP","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","keyMods","pan","dolly","noMiddleButton","target0","position0","zoom0","zoom","getPolarAngle","spherical","getAzimuthalAngle","saveState","scope","reset","updateProjectionMatrix","dispatchEvent","changeEvent","STATE","NONE","quat","Quaternion","setFromUnitVectors","quatInverse","inverse","lastPosition","lastQuaternion","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","makeSafe","panOffset","setFromSpherical","lookAt","zoomChanged","distanceToSquared","EPS","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","crossVectors","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dy","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","button","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","EventDispatcher","constructor","MapControls","lerp","amt","EasingFunctions","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","Grid","gridHelper","divisions","color1","color2","setRGB","render_defaults","metadata","generator","layers","near","far","aspect","filmGauge","filmOffset","Axes","Xaxis","Yaxis","Zaxis","makeLine","Lights","ambientLights","light","helpers","PickHelper","mount","pickPosition","pickedObject","pickedObjectSavedColor","hover","setPickPosition","setFromCamera","intersectedObjects","found","_intersectedObjects$i","_intersectedObjects$i2","_intersectedObjects$i3","match","normalizedPosition","setPickPositionCenter","pos","getCanvasRelativePosition","rect","getBoundingClientRect","Renderer","mouseConfigSet","modifierKeyState","_camera","perspectiveCamera","orthoCamera","workspace","lights","axes","grid","stack","settingHandlers","sourceGroup","sourceTemplate","receiverGroup","receiverTemplate","geometryGroup","controls","workspaceCursor","fog","textures","smoothingCameraFunction","smoothingCamera","pickHelper","composer","outlinePass","renderPass","effectFXAA","method","Shift","Control","Alt","Meta","context","getContext","antialias","depth","precision","shadowMap","shadowMapSoft","setSize","pixelRatio","devicePixelRatio","setPixelRatio","storedState","parse","localStorage","getItem","Default","EffectComposer","RenderPass","addPass","lightHelpersVisible","setHelpersVisible","fogColor","setOrtho","getObjectByProperty","setItem","toJSON","selection","altKey","render","on","_this$getCenteredCanv","getCenteredCanvasBounds","_this$renderer$domEle","_this$renderer$domEle2","_this$renderer$domEle3","_this$renderer$domEle4","parentElement","force","_this$renderer$domEle5","_this$renderer$domEle6","resize","_this$workspace$getOb","boundingBox","halfheight","halfwidth","duration","curve","getWorldPosition","timer","Ticker","_curve","_duration","tick","ticks","resizeCanvasToDisplaySize","requestAnimationFrame","setRotationFromQuaternion","_this$scene$fog","inc","fullScreen","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","STLLoader","binData","ensureBinary","reader","DataView","getUint32","byteLength","solid","getUint8","isBinary","parseBinary","parseASCII","ensureString","g","defaultR","defaultG","defaultB","faces","hasColors","normals","normalX","getFloat32","normalY","normalZ","packedColor","getUint16","vertexstart","addAttribute","patternFace","patternNormal","patternVertex","exec","parseFloat","buf","array_buffer","Uint8Array","strArray","charCodeAt","buffer","OBJLoader","fileContents","defaultModelName","currentMaterial","currentGroup","smoothingGroup","materialLibraries","models","Promise","resolve","reject","theError","stripComments","commentIndex","indexOf","substring","lines","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","lineItems","trim","parseObject","parseGroup","parseVertexCoords","parseTextureCoords","parseVertexNormal","parseSmoothShadingStatement","parsePolygon","parseMtlLib","parseUseMtl","return","textureCoords","modelName","currentModel","totalVertices","group","vertexValues","vertexIndex","textureCoordsIndex","vertexNormalIndex","groupNumber","_res$models$reduce","_res$models$reduce2","model","verts","vertNormals","texCoords","vertex","vn","tc","expose","Setting","_value","newvalue","fdtd_shader","FDTD","_Solver","_gain","_threshold","lx","ly","lz","nz","ny","nx","sourceLocations","kernel","pressureAttribute","satisfyBounds","_this$room$boundingBo","getSize","initKernel","initRenderItems","GPU","createKernel","curr","u_prev","thread","u_center","setOutput","Input","updateSources","getFDTDPressureAttribute","boxGeometry","attributes","translateArray","image","alphaTest","setFDTD","Room","_fdtdmeshid","volume","calculateBoundingBox","showBoundingBox","volumeOfMesh","union","getObjectById","p3","cross","triangle","signedVolumeOfTriangle","_showBoundingBox","RT60","response","materialsIndex","selectedObjects","materialSearcher","Searcher","keySelector","browser","userAgent","definePropertySupported","report","timestamp","cookies","flash","ip","os","screen","dppx","scripts","navigator","viewport","lang","websockets","innerWidth","innerHeight","warning","msg","cookie","plugins","plugin","versions","minorVersion","colorDepth","isNaN","WebSocket","languages","language","browserReport","simulation","glfdtd","fog_color","default_save_name","roomkeys","submit","search","raytracer","removeMessageHandlers","rt60","calculateReflectionLoss","testWasm","addSource","addReceiver","_ref","objectURL","URL","createObjectURL","importHandlers","addRoom","_x","init","clearRays","surfaceCount","timeout","_ref2","settingChanged","hotkeys","fullscreen","ReactDOM","App_App","getElementById","setTimeout","sourceidL","sourceidR","receiverId"],"mappings":"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A,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,gBACD,oBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBACC,kBACA,kBACA,kBACA,kBACA,kBACA,kBAEHK,EAAG,EACA,iBACA,gBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACD,mBACA,oBACC,mBACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBAEHE,EAAG,EACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,mBACA,kBACA,kBACD,kBACA,kBACA,kBACA,kBACA,kBACC,oBACA,mBACA,mBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBAEHG,EAAG,EACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,iBACD,qBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,gBACA,iBACA,iBACA,iBACA,iBACC,kBACA,mBCvJQiB,GAAb,WAOE,SAAAA,EAAY9C,GAAcnW,OAAAwF,EAAA,EAAAxF,CAAAyF,KAAAwT,GAAAxT,KALnB8P,UAKkB,EAAA9P,KAFlByT,UAEkB,EACvB,IAAI3D,EAAO,EACP2D,EAAO,EAGX,GAAI,SAAU/C,GAAU,SAAUA,EAChCZ,EAAOY,EAAOZ,KACd2D,EAAO/C,EAAO+C,SAIX,MAAI,WAAY/C,GAAU,QAASA,GAOtC,MAAMgD,QANN5D,EAAOY,EAAOiD,OAAS/H,KAAKgI,IAAIlD,EAAOmD,KACvCJ,EAAO/C,EAAOiD,OAAS/H,KAAKkI,IAAIpD,EAAOmD,KAQzC7T,KAAK8P,KA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","file":"static/js/main.b8577073.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/matcap-porcelain-white.1b992319.jpg\";","module.exports = __webpack_public_path__ + \"static/media/razin.7dc843ee.png\";","module.exports = __webpack_public_path__ + \"static/media/tri_pattern.d121adfc.jpg\";","module.exports = __webpack_public_path__ + \"static/media/overexposed-outline.7ffb3957.png\";","module.exports = __webpack_public_path__ + \"static/media/outline.b0ec2b15.png\";","module.exports = __webpack_public_path__ + \"static/media/undershadow.59382953.png\";","module.exports = \"data:image/png;base64,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\"","import React from 'react';\nimport { Colors } from '@blueprintjs/core';\nimport { Characters } from '../constants';\n\nexport interface MenuItemTextProps{\n  text: string;\n  hotkey: string;\n}\n\nexport default function MenuItemText(props: MenuItemTextProps) {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      }}>\n      <div>{props.text}</div>\n      <div style={{ color: Colors.LIGHT_GRAY1 }}>{props.hotkey||\"\"}</div>\n    </div>\n  );\n}","export const COMMAND = \"⌘\";\nexport const CONTROL = \"⌃\";\nexport const SHIFT = \"⇧\";\nexport const OPTION = \"⌥\";\nexport const DELETE = \"⌫\";\nexport const DELETE_FORWARDS = \"⌦\";\nexport const UP_ARROW = \"↑\";\nexport const RIGHT_ARROW = \"→\";\nexport const LEFT_ARROW = \"←\";\nexport const DOWN_ARROW = \"↓\";\nexport const TAB = \"⇥\";\nexport const ESCAPE = \"⎋\";\n\n","export const ICONS = {\n\tFILE_FILLED: \"icon-file\",\n\tTEXT_FILLED: \"icon-file-text\",\n\tFILES: \"icon-files-o\",\n\tARCHIVE: \"icon-file-archive-o\",\n\tAUDIO: \"icon-file-audio-o\",\n\tCODE: \"icon-file-code-o\",\n\tEXCEL: \"icon-file-excel-o\",\n\tIMAGE: \"icon-file-image-o\",\n\tFILE: \"icon-file-o\",\n\tPDF: \"icon-file-pdf-o\",\n\tPOWERPOINT: \"icon-file-powerpoint-o\",\n\tTEXT: \"icon-file-text-o\",\n\tVIDEO: \"icon-file-video-o\",\n\tWORD: \"file-word-o\"\n};\nexport const allowed = {\n\tstl: true,\n\tobj: true,\n\tgltf: true\n}\nexport const assoc = {\n\thtml: ICONS.CODE,\n\tjs: ICONS.CODE,\n\tpng: ICONS.IMAGE,\n\tcss: ICONS.CODE,\n\ttxt: ICONS.CODE,\n\tmd: ICONS.CODE,\n\tlock: ICONS.CODE,\n\tts: ICONS.CODE,\n\tjson: ICONS.CODE,\n\tyml: ICONS.CODE,\n\tabec: ICONS.TEXT,\n\trtf: ICONS.TEXT,\n\tTXT: ICONS.TEXT,\n\tdxf: ICONS.FILE,\n\tpdf: ICONS.PDF,\n\tvips: ICONS.FILE,\n\tvacs: ICONS.FILE,\n\tasc: ICONS.FILE,\n\tmsh: ICONS.TEXT,\n\tstp: ICONS.FILE,\n\tjpg: ICONS.IMAGE,\n\ttmd: ICONS.FILE,\n\txls: ICONS.EXCEL,\n\tskp: ICONS.FILE,\n\tdae: ICONS.FILE,\n\tsvg: ICONS.CODE,\n\tres: ICONS.FILE,\n\tdpr: ICONS.FILE,\n\tpas: ICONS.FILE,\n\tdll: ICONS.CODE,\n\tvsix: ICONS.FILE,\n\tst: ICONS.FILE,\n\tico: ICONS.FILE,\n\tstep: ICONS.FILE,\n\tpy: ICONS.CODE,\n\tsh: ICONS.CODE,\n\tFOR: ICONS.CODE,\n\to: ICONS.CODE,\n\th: ICONS.CODE,\n\tc: ICONS.CODE,\n\tscss: ICONS.CODE,\n\tmap: ICONS.CODE,\n\tcpp: ICONS.CODE,\n\tmm: ICONS.CODE,\n\tjava: ICONS.CODE,\n\tm: ICONS.CODE,\n\tapp: ICONS.FILE,\n\twav: ICONS.AUDIO,\n\tsofa: ICONS.FILE,\n\tbin: ICONS.FILE,\n\tnib: ICONS.FILE,\n\trc: ICONS.FILE,\n\tsln: ICONS.FILE,\n\tLGPL: ICONS.FILE,\n\thh: ICONS.CODE,\n\tmain: ICONS.CODE,\n\tcxx: ICONS.CODE,\n\tdtd: ICONS.CODE,\n\tcc: ICONS.CODE,\n\tcu: ICONS.CODE,\n\tdat: ICONS.CODE,\n\tf: ICONS.CODE,\n\tin: ICONS.FILE,\n\tBSD: ICONS.FILE,\n\tdox: ICONS.FILE,\n\tMPL2: ICONS.FILE,\n\tGPL: ICONS.FILE,\n\tbz2: ICONS.FILE,\n\tlog: ICONS.FILE,\n\t\"4\": ICONS.FILE,\n\tout: ICONS.FILE,\n\tpc: ICONS.FILE,\n\tdir: ICONS.FILE,\n\tmake: ICONS.FILE,\n\ta: ICONS.FILE,\n\t\"11\": ICONS.FILE,\n\tlib: ICONS.FILE,\n\tpdb: ICONS.FILE,\n\tel: ICONS.FILE,\n\ttoml: ICONS.FILE,\n\topts: ICONS.FILE,\n\tmjs: ICONS.FILE,\n\tyaml: ICONS.FILE,\n\tfoo: ICONS.FILE,\n\t\"0\": ICONS.FILE,\n\t\"1\": ICONS.FILE,\n\tflow: ICONS.FILE,\n\tidea: ICONS.FILE,\n\txml: ICONS.FILE,\n\timl: ICONS.FILE,\n\tbnf: ICONS.FILE,\n\tDOCS: ICONS.FILE,\n\thbs: ICONS.FILE,\n\tpick: ICONS.FILE,\n\tpyc: ICONS.FILE,\n\tjsx: ICONS.CODE,\n\tless: ICONS.CODE,\n\tcom: ICONS.FILE,\n\tphp: ICONS.CODE,\n\tzip: ICONS.FILE,\n\tcsv: ICONS.FILE,\n\tmp3: ICONS.FILE,\n\tttf: ICONS.FILE,\n\texe: ICONS.FILE,\n\tchm: ICONS.FILE,\n\tppm: ICONS.FILE,\n\ttoy: ICONS.FILE,\n\thpp: ICONS.FILE,\n\tac: ICONS.FILE,\n\tam: ICONS.FILE,\n\tsub: ICONS.FILE,\n\tdeps: ICONS.FILE,\n\tPo: ICONS.FILE,\n\tm4: ICONS.FILE,\n\tPlo: ICONS.FILE,\n\tlol: ICONS.FILE,\n\terr: ICONS.FILE,\n\t\"3\": ICONS.FILE,\n\tglsl: ICONS.FILE,\n\tdSYM: ICONS.FILE,\n\thmap: ICONS.FILE,\n\td: ICONS.FILE,\n\tdia: ICONS.FILE,\n\tdoc: ICONS.FILE,\n\tdocx: ICONS.FILE,\n\tbat: ICONS.FILE,\n\tiss: ICONS.FILE,\n\tui: ICONS.FILE,\n\todt: ICONS.FILE,\n\tbmp: ICONS.FILE,\n\tPNG: ICONS.FILE,\n\tstl: ICONS.FILE,\n\tmd3: ICONS.FILE,\n\ttga: ICONS.FILE,\n\tply: ICONS.FILE,\n\tobj: ICONS.FILE,\n\tmtl: ICONS.FILE,\n\tmd2: ICONS.FILE,\n\t\"3d\": ICONS.FILE,\n\tuc: ICONS.FILE,\n\tpmx: ICONS.FILE,\n\tjpeg: ICONS.IMAGE,\n\t\"7z\": ICONS.FILE,\n\tmdl: ICONS.FILE,\n\tMDL: ICONS.FILE,\n\tase: ICONS.FILE,\n\tnff: ICONS.FILE,\n\tmat: ICONS.FILE,\n\tNFF: ICONS.FILE,\n\tfbx: ICONS.FILE,\n\tb3d: ICONS.FILE,\n\tpk3: ICONS.FILE,\n\tlws: ICONS.FILE,\n\tJPG: ICONS.FILE,\n\tlwo: ICONS.FILE,\n\tm3: ICONS.FILE,\n\t\"3DS\": ICONS.FILE,\n\t\"3ds\": ICONS.FILE,\n\tx3d: ICONS.FILE,\n\thmp: ICONS.FILE,\n\tx: ICONS.FILE,\n\tmdc: ICONS.FILE,\n\tamf: ICONS.FILE,\n\tglb: ICONS.FILE,\n\tgltf: ICONS.FILE,\n\tfrag: ICONS.FILE,\n\tvert: ICONS.FILE,\n\togex: ICONS.FILE,\n\tASE: ICONS.FILE,\n\tFBX: ICONS.FILE,\n\tDAE: ICONS.FILE,\n\tsmd: ICONS.FILE,\n\toff: ICONS.FILE,\n\traw: ICONS.FILE,\n\tzgl: ICONS.FILE,\n\txgl: ICONS.FILE,\n\tbvh: ICONS.FILE,\n\tSTL: ICONS.FILE,\n\tmax: ICONS.FILE,\n\tq3o: ICONS.FILE,\n\tq3s: ICONS.FILE,\n\tter: ICONS.FILE,\n\tlxo: ICONS.FILE,\n\tms3d: ICONS.FILE,\n\t\"3mf\": ICONS.FILE,\n\tcsm: ICONS.FILE,\n\tsib: ICONS.FILE,\n\tirr: ICONS.FILE,\n\tX: ICONS.FILE,\n\tWRL: ICONS.FILE,\n\twrl: ICONS.FILE,\n\tifc: ICONS.FILE,\n\tcob: ICONS.FILE,\n\tinl: ICONS.FILE,\n\tasm: ICONS.FILE,\n\tadb: ICONS.FILE,\n\tads: ICONS.FILE,\n\tgpr: ICONS.FILE,\n\tmak: ICONS.FILE,\n\tcs: ICONS.FILE,\n\tdef: ICONS.FILE,\n\tS: ICONS.FILE,\n\tpk: ICONS.FILE,\n\tmsc: ICONS.FILE,\n\t\"686\": ICONS.FILE,\n\tbor: ICONS.FILE,\n\tgcc: ICONS.FILE,\n\tkeep: ICONS.FILE,\n\tpump: ICONS.FILE,\n\thlsl: ICONS.FILE,\n\txib: ICONS.FILE,\n\tpch: ICONS.FILE,\n\texp: ICONS.FILE,\n\ttpl: ICONS.FILE,\n\tmk: ICONS.FILE,\n\ti: ICONS.FILE,\n\trst: ICONS.FILE,\n\tsty: ICONS.FILE,\n\tf03: ICONS.FILE,\n\tpl: ICONS.FILE,\n\tdft: ICONS.FILE,\n\trdft: ICONS.FILE,\n\ttexi: ICONS.FILE,\n\teps: ICONS.FILE,\n\tbfnn: ICONS.FILE,\n\trefs: ICONS.FILE,\n\tinfo: ICONS.FILE,\n\tfig: ICONS.FILE,\n\ttex: ICONS.FILE,\n\tml: ICONS.FILE,\n\tmli: ICONS.FILE,\n\tpde: ICONS.FILE,\n\ths: ICONS.FILE,\n\tipch: ICONS.FILE,\n\tr: ICONS.FILE,\n\tvst3: ICONS.FILE,\n\tvst: ICONS.FILE,\n\troom: ICONS.FILE,\n\ticns: ICONS.FILE,\n\tstd: ICONS.FILE,\n\tgyp: ICONS.FILE,\n\tnode: ICONS.FILE,\n\tgypi: ICONS.FILE,\n\tconf: ICONS.FILE,\n\ttarg: ICONS.FILE,\n\tlcov: ICONS.FILE,\n\tsnyk: ICONS.FILE,\n\t\"md~\": ICONS.FILE,\n\tcrt: ICONS.FILE,\n\tkey: ICONS.FILE,\n\tbak: ICONS.FILE,\n\ttar: ICONS.FILE,\n\tjade: ICONS.FILE,\n\tcmd: ICONS.FILE,\n\tname: ICONS.FILE,\n\tMIT: ICONS.FILE,\n\ttgz: ICONS.FILE,\n\tjst: ICONS.FILE,\n\tgz: ICONS.FILE,\n\ttest: ICONS.FILE,\n\ttmpl: ICONS.FILE,\n\tfile: ICONS.FILE,\n\ttlog: ICONS.FILE,\n\tvs: ICONS.FILE,\n\tsuo: ICONS.FILE,\n\tmov: ICONS.VIDEO,\n\tdb: ICONS.FILE,\n\tuser: ICONS.FILE,\n\thtm: ICONS.FILE,\n\tmode: ICONS.FILE,\n\tpug: ICONS.FILE,\n\tpsd: ICONS.FILE,\n\tasar: ICONS.FILE,\n\tpak: ICONS.FILE,\n\tsnap: ICONS.FILE,\n\teot: ICONS.FILE,\n\twoff: ICONS.FILE,\n\tgeo: ICONS.FILE,\n\tfinc: ICONS.FILE,\n\tf90: ICONS.FILE,\n\tF90: ICONS.FILE,\n\tmd5: ICONS.FILE,\n\tswf: ICONS.FILE,\n\ttail: ICONS.FILE,\n\tstat: ICONS.FILE,\n\tejs: ICONS.FILE,\n\tpriv: ICONS.FILE,\n\tpem: ICONS.FILE,\n\tpub: ICONS.FILE,\n\tbar: ICONS.FILE,\n\twmf: ICONS.FILE,\n\tcfg: ICONS.FILE,\n\ttsx: ICONS.FILE,\n\tcert: ICONS.FILE,\n\t\"un~\": ICONS.FILE,\n\t\"9\": ICONS.FILE,\n\t\"8\": ICONS.FILE,\n\tls: ICONS.FILE,\n\tuniq: ICONS.FILE,\n\tgv: ICONS.FILE,\n\tps: ICONS.FILE,\n\tenv: ICONS.FILE,\n\tkeys: ICONS.FILE,\n\tso: ICONS.FILE,\n\tpac: ICONS.FILE,\n\terb: ICONS.FILE,\n\tidl: ICONS.FILE,\n\tomit: ICONS.FILE,\n\tmkd: ICONS.FILE,\n\tdata: ICONS.FILE,\n\twasm: ICONS.FILE,\n\tgif: ICONS.FILE,\n\tlint: ICONS.FILE,\n\tio: ICONS.FILE,\n\ttags: ICONS.FILE,\n\tjsm: ICONS.FILE,\n\trdoc: ICONS.FILE,\n\tsage: ICONS.FILE,\n\ttsv: ICONS.FILE,\n\trt: ICONS.FILE,\n\tdmg: ICONS.FILE,\n\totf: ICONS.FILE,\n\tscpt: ICONS.FILE,\n\tjxa: ICONS.FILE,\n\tmkb: ICONS.FILE,\n\ticf: ICONS.FILE,\n\tkbd: ICONS.FILE,\n\tini: ICONS.FILE,\n\tdocs: ICONS.FILE,\n\tspec: ICONS.FILE,\n\trb: ICONS.FILE,\n\tpo: ICONS.FILE,\n\tpot: ICONS.FILE,\n\tLIB: ICONS.FILE,\n\tl: ICONS.FILE,\n\ty: ICONS.FILE,\n\t\"c++\": ICONS.FILE,\n\t\"h++\": ICONS.FILE,\n\t\"2/m4\": ICONS.FILE,\n\tasv: ICONS.FILE,\n\tp: ICONS.FILE,\n\tmid: ICONS.FILE,\n\t\"12\": ICONS.FILE,\n\t\"10\": ICONS.FILE,\n\t\"js~\": ICONS.FILE,\n\tremy: ICONS.FILE,\n\tget: ICONS.FILE,\n\tcnf: ICONS.FILE,\n\tcub: ICONS.FILE,\n\twxs: ICONS.FILE,\n\tswp: ICONS.FILE,\n\tblob: ICONS.FILE,\n\tpyd: ICONS.FILE,\n\tpyx: ICONS.FILE,\n\tvtu: ICONS.FILE,\n\tmph: ICONS.FILE,\n\tegg: ICONS.FILE,\n\tmo: ICONS.FILE,\n\togg: ICONS.AUDIO,\n\taac: ICONS.AUDIO,\n\tasd: ICONS.FILE,\n\t\"7\": ICONS.FILE,\n\tvrt: ICONS.FILE,\n\tmp4: ICONS.VIDEO,\n\tgpu: ICONS.FILE,\n\thtc: ICONS.FILE,\n\titem: ICONS.FILE,\n\tbase: ICONS.FILE,\n\tnpy: ICONS.FILE,\n\tpy3: ICONS.CODE,\n\tpb: ICONS.FILE,\n\th5: ICONS.FILE,\n\ttif: ICONS.FILE,\n\tgo: ICONS.CODE,\n\tbats: ICONS.CODE,\n\tfish: ICONS.FILE,\n\taiff: ICONS.FILE,\n\trej: ICONS.FILE,\n\torig: ICONS.FILE,\n\tgnu: ICONS.FILE,\n\tsql: ICONS.CODE,\n\twat: ICONS.CODE,\n\trs: ICONS.CODE\n};\n\nexport function fileType(name: string) {\n  return name.split('.').slice(-1)[0];\n}\n\nexport default {\n\tICONS,\n\tassoc,\n  allowed,\n  fileType\n};","import React, {useState} from \"react\";\n\nimport { uuid } from 'uuidv4';\n\nimport { mmm_dd_yyyy } from \"../common/dayt\"; \nimport FileTypes from '../common/file-type';\n\nimport {\n\tAnchorButton,\n\tButton,\n\tClasses,\n\tCode,\n\tDialog,\n\tH5,\n\tIntent,\n\tSwitch,\n\tTooltip,\n\tCard,\n\tElevation,\n\tColors,\n\tHTMLTable,\n\tCheckbox\n} from \"@blueprintjs/core\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { DialogActions } from \"@material-ui/core\";\n\nexport interface IDialogExampleState {\n\tautoFocus: boolean;\n\tcanEscapeKeyClose: boolean;\n\tcanOutsideClickClose: boolean;\n\tenforceFocus: boolean;\n\tisOpen: boolean;\n\tusePortal: boolean;\n}\n\n\n\nexport interface ImportDialogProps {\n\tautoFocus: boolean;\n\tcanEscapeKeyClose: boolean;\n\tcanOutsideClickClose: boolean;\n\tenforceFocus: boolean;\n\tisOpen: boolean;\n\tusePortal: boolean;\n\tdata?: {\n\t\tthemeName?: string;\n\t};\n\tonImport: (...args) => void;\n\tonClose: (event?: React.SyntheticEvent<HTMLElement, Event> | undefined) => void;\n\tonDrop: (...args) => void;\n}\n\nconst useStyles = makeStyles({\n    dropzone: {\n        height: \"100%\",\n        width: \"100%\",\n        backgroundColor: \"#000000\"\n    }\n})\n\nexport const ACCEPTED_FILE_TYPES = [\n    \"\"\n]\n\nexport enum DROP_ALLOWED {\n    NO = 0,\n    IDK = 1,\n    YES = 2\n}\n\nconst backgroundColors = [\n\t\"rgba(255,0,0,.2)\",\n\t\"rgba(0,0,0,0)\",\n\t\"rgba(0,255,0,.2)\"\n];\n\nexport interface FileWithCheckbox{\n\tfile: File;\n\tchecked: boolean;\n}\n\nexport default function ImportDialog(props: ImportDialogProps) {\n    const classes = useStyles();\n\tconst [dropAllowed, setDropAllowed] = useState(DROP_ALLOWED.IDK);\n\tconst [filelist, setFilelist] = useState([] as File[]);\n\treturn (\n\t\t<Dialog\n\t\t\ticon=\"import\"\n\t\t\t// onClose={props.onClose}\n\t\t\ttitle=\"Import\"\n\t\t\ttransitionDuration={0}\n\t\t\tstyle={{\n\t\t\t\tborderRadius: \"2px\",\n\t\t\t\tpaddingBottom: \"0\",\n\t\t\t\twidth: \"auto\",\n\t\t\t\tminWidth: \"350px\"\n\t\t\t}}\n\t\t\t{...props}>\n\t\t\t<div\n\t\t\t\tclassName={Classes.DIALOG_BODY}\n\t\t\t\tonDragEnter={(e: React.DragEvent<HTMLElement>) => {\n\t\t\t\t\tconst { types, files, items } = e.dataTransfer;\n\t\t\t\t\tlet yes = true;\n\t\t\t\t\tfor (let i = 0; i < types.length; i++) {\n\t\t\t\t\t\tconst { kind, type } = items[i];\n\t\t\t\t\t\tif (kind !== \"file\") {\n\t\t\t\t\t\t\tyes = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (yes) {\n\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.YES);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.NO);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonDragLeave={e => {\n\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.IDK);\n\t\t\t\t}}\n\t\t\t\tonDragOver={(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\t\t\tconst { types, files, items } = e.dataTransfer;\n\t\t\t\t\tlet yes = true;\n\t\t\t\t\tfor (let i = 0; i < types.length; i++) {\n\t\t\t\t\t\tconst { kind, type } = items[i];\n\t\t\t\t\t\tif (kind !== \"file\") {\n\t\t\t\t\t\t\tyes = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (yes) {\n\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.YES);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.NO);\n\t\t\t\t\t}\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}\n\t\t\t\tonDrop={(e: React.DragEvent<HTMLDivElement>) => {\n\t\t\t\t\tconst { types, files, items } = e.dataTransfer;\n\t\t\t\t\tlet filearray = Array.from(files);\n\t\t\t\t\tsetFilelist(filearray);\n\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.IDK);\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}}>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: backgroundColors[dropAllowed]\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={\"drop-zone\"}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst input = (document.querySelector(\"#temp-file-import\") as HTMLInputElement) || document.createElement(\"input\");\n\t\t\t\t\t\tinput.type = \"file\";\n\t\t\t\t\t\tinput.setAttribute(\"style\", \"display: none;\");\n\t\t\t\t\t\tinput.setAttribute(\"id\", \"temp-file-import\");\n\t\t\t\t\t\tdocument.body.appendChild(input);\n\t\t\t\t\t\tinput.addEventListener(\"change\", (e: Event) => {\n\t\t\t\t\t\t\tconst target: HTMLInputElement = e.target as HTMLInputElement;\n\t\t\t\t\t\t\tconst filearray = [] as File[];\n\t\t\t\t\t\t\tif (target && target.files) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < target.files.length; i++) {\n\t\t\t\t\t\t\t\t\tfilearray.push(target.files[i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetFilelist(filearray);\n\t\t\t\t\t\t\t\tsetDropAllowed(DROP_ALLOWED.IDK);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinput.addEventListener(\"blur\", () => {\n\t\t\t\t\t\t\tinput.remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinput.click();\n\t\t\t\t\t}}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: \"gray\",\n\t\t\t\t\t\t\tfontSize: \"12pt\",\n\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\ttextAlign: \"center\"\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tDrag files or click to browse\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{filelist.length > 0 ? (\n\t\t\t\t\t<HTMLTable\n\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\tClasses.HTML_TABLE_BORDERED,\n\t\t\t\t\t\t\tClasses.HTML_TABLE_CONDENSED,\n\t\t\t\t\t\t\tClasses.HTML_TABLE_STRIPED\n\t\t\t\t\t\t].join(\" \")}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\ttextAlign: \"center\"\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>.ico</th>\n\t\t\t\t\t\t\t\t<th>name</th>\n\t\t\t\t\t\t\t\t<th>last-modified</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody style={{}}>\n\t\t\t\t\t\t\t{filelist.map((file,i,a) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<tr key={uuid()} className={\"table-hover\"}>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"icon \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tFileTypes.assoc[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\".\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(-1)[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t] ||\n\t\t\t\t\t\t\t\t\t\t\t\t\tFileTypes.ICONS.FILE\n\t\t\t\t\t\t\t\t\t\t\t\t}></div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tid={file.name}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\tmarginLeft: \"1em\"\n\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t{file.name}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td id={file.name + \"lastModified\"}>\n\t\t\t\t\t\t\t\t\t\t\t{mmm_dd_yyyy(file.lastModified)}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tFileTypes.allowed[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile.name\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\".\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.slice(-1)[0]]\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"✓\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"x\"\n\t\t\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</HTMLTable>\n\t\t\t\t) : (\n\t\t\t\t\t<div></div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tclassName={Classes.BUTTON}\n\t\t\t\t\tintent={Intent.PRIMARY}\n\t\t\t\t\tdisabled={filelist.length == 0}\n\t\t\t\t\ttext=\"Import\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tprops.onImport(filelist);\n\t\t\t\t\t\tsetFilelist([] as File[]);\n\t\t\t\t\t}}\n\t\t\t\t></Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","export function unix(){\n  return Date.now();\n}\n\nexport function mmddyyyy(t=Date.now()) {\n  const d = new Date(t);\n  const month = d.getMonth();\n  const day = d.getDay();\n  const year = d.getFullYear();\n  const time = d.getTime()\n  return `${month}-${day}-${year} at ${time}`;\n}\n\nexport function parse(time) {\n  return new Date(time)\n\t\t.toString()\n\t\t.split(/\\s+/gim)\n\t\t.filter(x =>\n\t\t\tx.match(/^(\\w{3}|\\d{1,2}|\\d{4}|(\\d{2}\\:\\d{2}\\:\\d{2}))$/gim)\n\t\t);\n}\n\nexport function mmm_dd_yyyy(time) {\n  return new Date(time)\n\t\t.toString()\n\t\t.split(/\\s+/gim)\n\t\t.slice(1, 5)\n\t\t.join(\" \");\n}","export default function properCase(str: string) {\n  return str.replace(/\\w\\S*/g, function(txt) {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n}","import React from 'react';\n\nimport { ContextMenuTarget, Menu, MenuItem } from \"@blueprintjs/core\";\n \n\nexport interface ContextMenuProps {\n  handleMenuItemClick: ((event: React.MouseEvent<HTMLElement, MouseEvent>) => void) & ((event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => void);\n}\n\n\n@ContextMenuTarget\nexport class ContextMenu extends React.Component<ContextMenuProps, {}> {\n    public render() {\n        // root element must support `onContextMenu`\n        return <div>{this.props.children}</div>;\n    }\n \n    public renderContextMenu() {\n        // return a single element, or nothing to use default browser behavior\n        return (\n            <Menu>\n                <MenuItem onClick={this.props.handleMenuItemClick} text=\"Delete\" />\n            </Menu>\n        );\n    }\n \n    public onContextMenuClose() {\n        // Optional method called once the context menu is closed.\n    }\n}\n\nexport default ContextMenu;","import React, { useState } from \"react\";\nimport { makeStyles, createStyles } from \"@material-ui/core/styles\";\nimport { SvgIcon } from \"@material-ui/core\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\nimport WifiIcon from \"@material-ui/icons/Wifi\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport HomeOutlinedIcon from \"@material-ui/icons/HomeOutlined\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport Source from \"../objects/source\";\nimport Receiver from \"../objects/receiver\";\nimport properCase from \"../common/proper-case\";\nimport { KeyValuePair } from \"../common/key-value-pair\";\nimport Container from \"../objects/container\";\nimport Surface from \"../objects/surface\";\nimport Solver from \"../compute/solver\";\nimport { Colors } from \"@blueprintjs/core\";\nimport { Icon } from \"@fortawesome/fontawesome-svg-core\";\nimport MicIcon from \"@material-ui/icons/Mic\";\nimport ContextMenu from \"./ContextMenu\";\n\nimport \"./ObjectView.css\";\n\n\nfunction NodesIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <svg width=\"24\" height=\"24\" viewBox=\"-4 -4 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M4 12C4 13.1046 3.10457 14 2 14C0.89543 14 0 13.1046 0 12C0 10.8954 0.89543 10 2 10C3.10457 10 4 10.8954 4 12Z\" fill=\"black\" />\n        <path d=\"M14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z\" fill=\"black\" />\n        <path d=\"M9 2C9 3.10457 8.10457 4 7 4C5.89543 4 5 3.10457 5 2C5 0.89543 5.89543 0 7 0C8.10457 0 9 0.89543 9 2Z\" fill=\"black\" />\n        <path d=\"M7 2L2 12H12L7 2Z\" stroke=\"black\" />\n      </svg>\n    </SvgIcon>\n  );\n}\n\nfunction RayTracerIcon(props) {\n  return <TimelineIcon {...props} />;\n}\n\nfunction RT60Icon(props) {\n  return <TimelineIcon {...props} />;\n}\n\nfunction FDTDIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <path id=\"a\" d=\"M0 0h24v24H0V0z\"></path>\n      <path d=\"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM8.5 15H7.3l-2.55-3.5V15H3.5V9h1.25l2.5 3.5V9H8.5v6zm5-4.74H11v1.12h2.5v1.26H11v1.11h2.5V15h-4V9h4v1.26zm7 3.74c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1V9h1.25v4.51h1.13V9.99h1.25v3.51h1.12V9h1.25v5z\"></path>\n    </SvgIcon>\n  );\n}\n\nfunction RoomIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer_1\" data-name=\"Layer 1\" viewBox=\"0 0 31 28\">\n        <polygon points=\"6.473 10.456 15.492 5.332 24.524 10.455 15.485 15.865 6.473 10.456\" fill=\"#ebebeb\" />\n        <polygon points=\"6.473 10.456 15.489 15.866 15.492 26.635 6.472 21.259 6.473 10.456\" fill=\"#90908f\" />\n        <polygon points=\"24.524 10.455 24.528 21.305 15.492 26.635 15.492 15.866 24.524 10.455\" fill=\"#c6c7c8\" />\n        <path\n          d=\"M24.49414,9.897l-8.5-4.83105a1.00013,1.00013,0,0,0-.98828,0l-8.5,4.83105A1.00006,1.00006,0,0,0,6,10.76642V20.99231a.99993.99993,0,0,0,.48816.85907L14.989,26.91681a1,1,0,0,0,1.021.00159l8.49915-5.02747A1.0001,1.0001,0,0,0,25,21.03027V10.76642A1.00006,1.00006,0,0,0,24.49414,9.897ZM15.5,5.93555l8.17548,4.6466L15.501,15.419l-8.14533-4.8545ZM7,20.99219V11.51678l8,4.76691V25.76Zm9,4.77118V16.28473l8-4.73181v9.47735Z\"\n          fill=\"#535353\"\n        />\n      </svg>\n    </SvgIcon>\n  );\n}\n\nexport function SurfaceIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <svg fill=\"none\" {...props}>\n        <path fill=\"#C0C1C1\" stroke=\"#303030\" d=\"M4.6 4.6h13.8v13.8H4.6z\" />\n        <circle cx={4.6} cy={4.6} r={1.84} fill=\"#303030\" />\n        <circle cx={18.4} cy={4.6} r={1.84} fill=\"#303030\" />\n        <circle cx={18.4} cy={18.4} r={1.84} fill=\"#303030\" />\n        <circle cx={4.6} cy={18.4} r={1.84} fill=\"#303030\" />\n      </svg>\n    </SvgIcon>\n  );\n}\nexport function SourceIcon(props) {\n  return <WifiIcon transform=\"rotate(45)\" fillOpacity={0.95} fontSize=\"small\" {...props} />;\n}\n\nexport function ReceiverIcon(props) {\n  // return <WifiIcon transform=\"rotate(135)\" fillOpacity={0.95} fontSize=\"small\" {...props} />\n  return <MicIcon fontSize=\"small\" {...props} />;\n}\n\nexport function GeometryTreeNode(props) {\n  return <TreeItem nodeId={props.id}></TreeItem>;\n}\nexport interface ObjectViewProps {\n  containers: KeyValuePair<Container>;\n  solvers?: KeyValuePair<Solver>;\n}\n\nconst useStyles = makeStyles(\n  createStyles({\n    root: {\n      height: 264,\n      flexGrow: 1\n    }\n  })\n);\n\ninterface TreeItemLabelProps {\n  label: React.ReactNode;\n  meta?: React.ReactNode;\n  icon?: React.ReactNode;\n}\n\nexport function TreeItemLabel(props: TreeItemLabelProps) {\n  return (\n    <div className=\"tree-item-label-container\">\n      <div className=\"tree-item-label-label\">\n        {props.icon && <div className=\"tree-item-label-icon\">{props.icon || \"\"}</div>}\n        {props.label}\n      </div>\n      <div className=\"tree-item-label-meta\">{props.meta || \"\"}</div>\n    </div>\n  );\n}\n\ntype ClickEvent = React.MouseEvent<HTMLElement, MouseEvent>;\n\nexport default function ObjectView(props) {\n  function mapchildren(container: Container | THREE.Object3D) {\n    if (container[\"kind\"]) {\n      if ((container as Container).selected) {\n        // console.log(\"selected\", container);\n      }\n      const sharedProps = {\n        draggable: true,\n        key: container.uuid,\n        nodeId: container.uuid\n      };\n      const className = (container as Container).selected ? \"container-selected\" : \"\";\n      const draggable = true;\n      const key = container.uuid;\n      const nodeId = container.uuid;\n      const meta = properCase(container[\"kind\"]);\n      const genericLabel = container.name || \"untitled\";\n      const onClick = (e: ClickEvent) => props.onClick(container, e);\n      const collapseIcon = <ExpandMoreIcon onClick={e => setExpanded(expanded.filter(x => x !== container.uuid))} fontSize=\"small\" />;\n      const expandIcon = <ChevronRightIcon onClick={e => setExpanded(expanded.concat(container.uuid))} fontSize=\"small\" />;\n\n      const label = <TreeItemLabel {...{ label: genericLabel, meta }} />;\n      const roomLabel = <TreeItemLabel icon={<RoomIcon fontSize=\"small\" />} {...{ label: genericLabel, meta }} />;\n      \n      const ContextMenuSharedProps = {\n        handleMenuItemClick: e => {\n          if (e.target.textContent) {\n            switch (e.target.textContent) {\n              case \"Delete\":\n                props.onDelete(container);\n                break;\n              default:\n                break;\n            }\n          }\n        },\n        key: key+\"context-menu\"\n      };\n\n      switch (container[\"kind\"]) {\n        case \"surface\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ icon: <NodesIcon />, className, label, onClick, draggable, key, nodeId }} />\n            </ContextMenu>\n          );\n\n        case \"source\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ icon: <SourceIcon />, className, label, onClick, draggable, key, nodeId }} />\n            </ContextMenu>\n          );\n\n        case \"receiver\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ icon: <ReceiverIcon />, className, label, onClick, draggable, key, nodeId }} />\n            </ContextMenu>\n          );\n\n        case \"room\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ label: roomLabel, onClick, draggable, key, nodeId, collapseIcon, className, expandIcon }}>\n                {container.children.map(x => mapchildren(x))}\n              </TreeItem>\n            </ContextMenu>\n          );\n\n        case \"fdtd\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem {...{ label: roomLabel, draggable, key, nodeId, collapseIcon, className, expandIcon }}>\n                {container.children.map(x => mapchildren(x))}\n              </TreeItem>\n            </ContextMenu>\n          );\n\n        case \"container\":\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem\n                label={<TreeItemLabel icon={<SurfaceIcon fontSize=\"small\" />} label={container.name || \"untitled\"} meta={properCase(container[\"kind\"])} />}\n                collapseIcon={<ExpandMoreIcon onClick={e => setExpanded(expanded.filter(x => x !== container.uuid))} fontSize=\"small\" />}\n                expandIcon={<ChevronRightIcon onClick={e => setExpanded(expanded.concat(container.uuid))} fontSize=\"small\" />}\n                className={className}\n                {...sharedProps}>\n                {container.children.map(x => mapchildren(x))}\n              </TreeItem>\n            </ContextMenu>\n          );\n\n        default:\n          return (\n            <ContextMenu {...ContextMenuSharedProps}>\n              <TreeItem\n                label={<TreeItemLabel label={container.name || \"untitled\"} meta={container[\"kind\"] || container.type} />}\n                {...sharedProps}\n                collapseIcon={<ExpandMoreIcon onClick={e => setExpanded(expanded.filter(x => x !== container.uuid))} fontSize=\"small\" />}\n                expandIcon={<ChevronRightIcon onClick={e => setExpanded(expanded.concat(container.uuid))} fontSize=\"small\" />}\n                {...sharedProps}>\n                {container.children instanceof Array && container.children.map(x => mapchildren(x))}\n              </TreeItem>\n            </ContextMenu>\n          );\n      }\n    }\n    return (\n      <ContextMenu handleMenuItemClick={e => {\n          if (e.target.textContent) {\n            switch (e.target.textContent) {\n              case \"Delete\":\n                props.onDelete(container);\n                break;\n              default:\n                break;\n            }\n          }\n        }} key={container.uuid + \"context-menu\"}>\n        <TreeItem\n          nodeId={container.uuid}\n          label={<TreeItemLabel label={container.name || \"untitled\"} meta={container.type} />}\n          key={container.uuid}\n          draggable={true}\n          onClick={e => props.onClick(container, e)}>\n          {container.children.map(x => mapchildren(x))}\n        </TreeItem>\n      </ContextMenu>\n    );\n  }\n\n  function mapsolver(solver: Solver) {\n    const ContextMenuSharedProps = {\n      handleMenuItemClick: e => {\n        if (e.target.textContent) {\n          switch (e.target.textContent) {\n            case \"Delete\":\n              props.onDelete(solver);\n              break;\n            default:\n              break;\n          }\n        }\n      },\n      key: solver.uuid + \"context-menu\"\n    };\n    switch (solver.kind) {\n      case \"ray-tracer\":\n        return (\n          <ContextMenu {...ContextMenuSharedProps}>\n            <TreeItem\n              defaultChecked\n              icon={<RayTracerIcon />}\n              draggable={true}\n              nodeId={solver.uuid}\n              label={<TreeItemLabel label={solver.name || \"untitled\" + solver.kind} meta={solver.kind} />}\n              key={solver.uuid+\"-tree-item\"}\n              onClick={e => props.onClick(solver, e)}\n            />\n          </ContextMenu>\n        );\n      case \"rt60\":\n        return (\n          <ContextMenu {...ContextMenuSharedProps}>\n            <TreeItem\n              defaultChecked\n              icon={<RT60Icon />}\n              draggable={true}\n              nodeId={solver.uuid}\n              label={<TreeItemLabel label={solver.name || \"untitled\" + solver.kind} meta={solver.kind} />}\n              key={solver.uuid+\"-tree-item\"}\n              onClick={e => props.onClick(solver, e)}\n            />\n          </ContextMenu>\n        );\n      case \"fdtd\":\n        return (\n          <ContextMenu {...ContextMenuSharedProps}>\n            <TreeItem\n              defaultChecked\n              icon={<FDTDIcon />}\n              draggable={true}\n              nodeId={solver.uuid}\n              label={<TreeItemLabel label={solver.name || \"untitled\" + solver.kind} meta={solver.kind} />}\n              key={solver.uuid+\"-tree-item\"}\n              onClick={e => props.onClick(solver, e)}\n            />\n          </ContextMenu>\n        );\n      default:\n        return (\n          <ContextMenu {...ContextMenuSharedProps}>\n            <TreeItem\n              defaultChecked\n              icon={<NodesIcon />}\n              draggable={true}\n              nodeId={solver.uuid}\n              label={<TreeItemLabel label={solver.name || \"untitled\" + solver.kind} meta={solver.kind} />}\n              key={solver.uuid+\"-tree-item\"}\n              onClick={e => props.onClick(solver, e)}\n            />\n          </ContextMenu>\n        );\n    }\n  }\n\n  const [expanded, setExpanded] = useState([\"solvers\", \"containers\"]);\n\n  const classes = useStyles();\n  const unselectable = {\n    unselectable: (Object.keys(props.containers).length == 0 ? \"on\" : \"off\") as \"on\" | \"off\"\n  };\n\n  const SolverTreeItem = (\n    <TreeItem\n      nodeId=\"solvers\"\n      collapseIcon={<ExpandMoreIcon onClick={e => setExpanded(expanded.filter(x => x !== \"solvers\"))} fontSize=\"small\" />}\n      expandIcon={<ChevronRightIcon onClick={e => setExpanded(expanded.concat(\"solvers\"))} fontSize=\"small\" />}\n      {...unselectable}\n      label={\n        <TreeItemLabel\n          label={<div style={{ fontWeight: 400, color: Object.keys(props.containers).length == 0 ? Colors.LIGHT_GRAY3 : \"#182026\" }}>Solvers</div>}\n        />\n      }>\n      {Object.keys(props.solvers).map((x: string) => mapsolver(props.solvers[x]))}\n    </TreeItem>\n  );\n\n  const ContainerTreeItem = (\n    <TreeItem\n      nodeId=\"containers\"\n      {...unselectable}\n      collapseIcon={<ExpandMoreIcon onClick={e => setExpanded(expanded.filter(x => x !== \"containers\"))} fontSize=\"small\" />}\n      expandIcon={<ChevronRightIcon onClick={e => setExpanded(expanded.concat(\"containers\"))} fontSize=\"small\" />}\n      label={\n        <TreeItemLabel\n          label={<div style={{ fontWeight: 400, color: Object.keys(props.containers).length == 0 ? Colors.LIGHT_GRAY3 : \"#182026\" }}>Objects</div>}\n        />\n      }>\n      {Object.keys(props.containers).map((x: string) => mapchildren(props.containers[x]))}\n    </TreeItem>\n  );\n\n  const TreeViewProps = {\n    expanded,\n    className: \"tree-view-root\",\n    defaultExpanded: [\"solvers\"],\n    defaultExpandIcon: <ExpandMoreIcon fontSize=\"small\" />,\n    defaultCollapseIcon: <ChevronRightIcon fontSize=\"small\" />\n  };\n\n  return (\n    <TreeView {...TreeViewProps}>\n      {props.solvers && SolverTreeItem}\n      {ContainerTreeItem}\n    </TreeView>\n  );\n}\n","import * as THREE from \"three\";\nimport Receiver from \"./receiver\";\nimport Surface from \"./surface\";\nimport Room from \"./room\";\nimport Source from \"./source\";\nimport { KeyValuePair } from \"../common/key-value-pair\";\n\ntype UserData = {\n\t[key: string]: any;\n};\n\nexport interface ContainerSaveObject {\n\tname: string;\n  visible: boolean;\n  position: number[];\n  scale: number[];\n  rotation: number[];\n  uuid: string;\n}\n\nexport interface ContainerProps {\n\tuserData?: UserData;\n\ttype?: string;\n\tchildren?: Array<THREE.Object3D | Container | THREE.Group>;\n}\n\nexport default class Container extends THREE.Group {\n\tkind: string;\n\tselected: boolean;\n\tselect!: () => void;\n\tdeselect!: () => void;\n\trenderCallback!: (time?: number) => void;\n\tsave: () => ContainerSaveObject;\n\trestore: (state: ContainerSaveObject) => void;\n\tconstructor(name: string, props?: ContainerProps) {\n\t\tsuper();\n\t\tthis.name = name;\n\t\tthis.kind = \"container\";\n\t\tprops &&\n\t\t\t(() => {\n\t\t\t\tfor (const key in props) {\n\t\t\t\t\tthis[key] = props[key];\n\t\t\t\t}\n\t\t\t})();\n\t\tthis.selected = false;\n\t\tthis.select = () => {\n\t\t\t// this.children.forEach((child: Receiver | Room | Source | Surface) => {\n\t\t\t// \tif (child['kind']) {\n\t\t\t// \t\tchild.select();\n\t\t\t// \t}\n\t\t\t// })\n\t\t\t// this.selected = true;\n\t\t};\n\t\tthis.deselect = () => {\n\t\t\t// this.children.forEach((child: Receiver | Room | Source | Surface) => {\n\t\t\t// \t\tif (child[\"kind\"]) {\n\t\t\t// \t\t\tchild.deselect();\n\t\t\t// \t\t}\n\t\t\t// });\n\t\t\t// this.selected = false;\n\t\t};\n\t\tthis.renderCallback = () => { };\n\t\tthis.save = () => {\n      const name = this.name;\n      const visible = this.visible;\n      const position = this.position.toArray();\n      const scale = this.scale.toArray();\n      const rotation = this.rotation.toArray();\n      const uuid = this.uuid;\n      return {\n        name,\n        visible,\n        position,\n        scale,\n        rotation,\n        uuid\n      };\n    };\n\t\tthis.restore = (state: ContainerSaveObject) => { \n\t\t\tthis.name = state.name;\n\t\t\tthis.visible = state.visible;\n\t\t\tthis.position.set(state.position[0], state.position[1], state.position[2]);\n\t\t\tthis.scale.set(state.scale[0], state.scale[1], state.scale[2]);\n\t\t\tthis.rotation.set(state.rotation[0], state.rotation[1], state.rotation[2]);\n\t\t\tthis.uuid = state.uuid;\n\t\t};\n\t}\n\n\tget x() {\n\t\treturn this.position.x;\n\t}\n\tset x(val) {\n\t\tthis.position.setX(val);\n\t}\n\tget y() {\n\t\treturn this.position.y;\n\t}\n\tset y(val) {\n\t\tthis.position.setY(val);\n\t}\n\tget z() {\n\t\treturn this.position.z;\n\t}\n\tset z(val) {\n\t\tthis.position.setZ(val);\n\t}\n\n\tget scalex() {\n\t\treturn this.scale.x;\n\t}\n\tset scalex(val) {\n\t\tthis.scale.setX(val);\n\t}\n\tget scaley() {\n\t\treturn this.scale.y;\n\t}\n\tset scaley(val) {\n\t\tthis.scale.setY(val);\n\t}\n\tget scalez() {\n\t\treturn this.scale.z;\n\t}\n\tset scalez(val) {\n\t\tthis.scale.setZ(val);\n\t}\n\n\tget rotationx() {\n\t\treturn this.rotation.x;\n\t}\n\tset rotationx(val) {\n\t\tthis.rotation.x = val;\n\t}\n\tget rotationy() {\n\t\treturn this.rotation.y;\n\t}\n\tset rotationy(val) {\n\t\tthis.rotation.y = val;\n\t}\n\tget rotationz() {\n\t\treturn this.rotation.z;\n\t}\n\tset rotationz(val) {\n\t\tthis.rotation.z = val;\n  }\n  \n\n}\n","import React from \"react\";\n\nexport interface PanelContainerProps {\n  children?: any;\n  className?: string;\n}\n\nexport default function PanelContainer(props: PanelContainerProps) {\n  const className = props.className || \"panel full\";\n  return (\n    <div className={className}>\n      <div className=\"panel-content\">{props.children}</div>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { ObjectPropertyInputEvent } from \"./NumberInput\";\n\nexport interface TextInputProps {\n  name: string;\n  className?: string;\n  value: string;\n  verifier?: (val: string) => boolean;\n  id?: string;\n  disabled?: boolean;\n  style?: React.CSSProperties;\n  onChange: (e: ObjectPropertyInputEvent) => void;\n}\n\n\n\n\nexport function TextInput(props: TextInputProps) {\n  \n   const basestyle: React.CSSProperties = {\n   };\n   let mergedStyles = props.style\n     ? Object.assign(basestyle, props.style)\n     : basestyle;\n\n\n  \n  const _props = {\n    value: props.value,\n    type: \"text\",\n    onChange: (e: React.ChangeEvent) => {\n      props.onChange({\n        name: props.name,\n        type: \"text\",\n        value: (e.currentTarget as HTMLInputElement).value,\n        id: props.id\n      })\n    },\n    name: props.name, \n    // className?: props.className;\n    // value: number|string;\n    style: basestyle,\n    disabled: props.disabled,\n    className: \"text-input\"\n  };\n\treturn (\n    <input {..._props}/>\n  );\n}\n\nexport default TextInput;\n","import React, { useState } from \"react\";\n\nexport interface NumberInputProps {\n  name: string;\n  className?: string;\n  value: number | string;\n  style?: React.CSSProperties;\n  disabled?: boolean;\n  step?: number;\n  min?: number;\n  max?: number;\n  id?: string;\n  onChange: (e: ObjectPropertyInputEvent) => void;\n  verifier?: (val: string | number) => boolean;\n}\n\nexport interface ObjectPropertyInputEvent {\n  name: string;\n  type: string;\n  value: any;\n  checked?: boolean;\n  id?: string;\n}\n\nexport function NumberInput(props: NumberInputProps) {\n  const _props = {\n    onChange: e =>\n      props.onChange({\n        value: e.currentTarget.value,\n        name: props.name,\n        id: props.id,\n        type: \"number\"\n      }),\n    name: props.name,\n    className: [\"number-input\", props.className || \"\"].join(\" \"),\n    value: props.value,\n    style: props.style,\n    disabled: props.disabled,\n    step: props.step,\n    min: props.min,\n    max: props.max,\n    id: props.id,\n    type: \"number\"\n  };\n  return <input {..._props} />;\n}\n\nexport default NumberInput;\n","import React from 'react';\n\nexport interface GridRowProps {\n  label?: React.ReactNode|React.ReactNode[];\n\tchildren?: React.ReactNode | React.ReactNode[];\n  span?: number;\n  style?: React.CSSProperties\n}\n\nexport default function GridRow(props: GridRowProps) {\n\treturn (\n    <>\n      {props.span && props.span == 2 ? (\n        <div\n          style={{ display: \"grid\", gridColumnStart: \"1\", gridColumnEnd: \"3\" }}>\n          {props.children}\n        </div>\n      ) : (\n        <>\n          <div\n            style={{\n              display: \"grid\",\n              gridColumnStart: \"1\",\n              gridColumnEnd: \"2\"\n            }}>\n            {props.label}\n          </div>\n          <div\n            style={{\n              display: \"grid\",\n              gridColumnStart: \"2\",\n              gridColumnEnd: \"3\"\n            }}>\n            <div\n              style={Object.assign({\n                display: \"flex\",\n                justifyContent: \"space-evenly\"\n              }, props.style || {})}>\n              {props.children}\n            </div>\n          </div>\n        </>\n      )}\n    </>\n  );\n}","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, {ObjectPropertyInputEvent} from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport GridRow from '../GridRow';\n\nimport Source from '../../objects/source';\nimport { FDTD } from \"../../compute/fdtd\";\nimport Receiver from \"../../objects/receiver\";\n\n\nexport interface FDTDPropertiesProps {\n\tobject: FDTD;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n\tonPropertyValueChangeAsNumber: (id: string, prop: string, valueAsNumber: number) => void;\n\tonPropertyValueChangeAsString: (id: string, prop: string, valueAsString: string) => void;\n}\n\n\n\nconst FDTDPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function FDTDProperties(props: FDTDPropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\t\n\treturn (\n\t\t<div>\n\t\t\t<div style={FDTDPropertiesContainerStyle}>\n\t\t\t\t\n\t\t\t\t{props.object.hasOwnProperty('name') && (\n\t\t\t\t\t<GridRow label={\"name\"}>\n\t\t\t\t\t\t<TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('_gain') && (\n\t\t\t\t\t<GridRow label={\"gain\"}>\n\t\t\t\t\t\t<NumberInput name=\"gain\" value={props.object.gain} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('_threshold') && (\n\t\t\t\t\t<GridRow label={\"threshold\"}>\n\t\t\t\t\t\t<NumberInput name=\"threshold\" value={props.object.threshold} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('dx') && (\n\t\t\t\t\t<GridRow label={\"dx\"}>\n\t\t\t\t\t\t<NumberInput name=\"dx\" value={props.object.dx} onChange={props.onPropertyChange} disabled={props.object.running}/>\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('dt') && (\n\t\t\t\t\t<GridRow label={\"dt\"}>\n\t\t\t\t\t\t<NumberInput name=\"dt\" value={props.object.dt} onChange={props.onPropertyChange} disabled={props.object.running}/>\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('q') && (\n\t\t\t\t\t<GridRow label={\"q\"}>\n\t\t\t\t\t\t<NumberInput name=\"q\" value={props.object.q} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t{props.object.hasOwnProperty('r') && (\n\t\t\t\t\t<GridRow label={\"r\"}>\n\t\t\t\t\t\t<NumberInput name=\"r\" value={props.object.r} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t\n\t\t\t\t{/* {props.object.hasOwnProperty('visible') && (\n\t\t\t\t\t<GridRow label={\"visible\"}>\n\t\t\t\t\t\t<CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t\t\n\t\t\t\t{props.object.hasOwnProperty('position') && (\n\t\t\t\t\t<GridRow label={\"position\"}>\n\t\t\t\t\t\t<NumberInput name=\"x\" value={props.object.position.x} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"y\" value={props.object.position.y} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"z\" value={props.object.position.z} {...XYZProps}/>\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\n\t\t\t\t{props.object.hasOwnProperty('scale') && (\n\t\t\t\t\t<GridRow label={\"scale\"}>\n\t\t\t\t\t\t<NumberInput name=\"scalex\" value={props.object.scale.x} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"scaley\" value={props.object.scale.y} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"scalez\" value={props.object.scale.z} {...XYZProps} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\n\t\t\t\t{props.object.hasOwnProperty('rotation') && (\n\t\t\t\t\t<GridRow label={\"rotation\"}>\n\t\t\t\t\t\t<NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps}/>\n\t\t\t\t\t\t<NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps}/>\n\t\t\t\t\t</GridRow>\n\t\t\t\t)} */}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport { ObjectPropertyInputEvent } from \"./NumberInput\";\n\nexport interface CheckboxInputProps {\n\tname: string;\n\tclassName?: string;\n\tchecked: boolean;\n\tcheckedNode?: React.ReactNode\n\tuncheckedNode?: React.ReactNode\n\tonChange: (e: ObjectPropertyInputEvent) => void;\n}\n\nexport function CheckboxInput(props: CheckboxInputProps) {\n\treturn (\n\t\t<label className=\"checkbox-container\">\n\t\t\t<input\n\t\t\t\tclassName={\"checkbox-input\"}\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\t\tprops.onChange({\n\t\t\t\t\tname: e.currentTarget.name,\n\t\t\t\t\ttype: e.currentTarget.type,\n\t\t\t\t\tvalue: e.currentTarget.checked,\n\t\t\t\t\tchecked: e.currentTarget.checked,\n\t\t\t\t\tid: e.currentTarget.id\n\t\t\t\t})\n\t\t\t\t}}\n\t\t\t\tname={props.name}\n\t\t\t\tchecked={props.checked}\n\t\t\t/>\n\t\t\t{props.checked ? (props.checkedNode || <VisibilityIcon fontSize=\"small\" className=\"checkbox-checkmark\"/>) : (props.uncheckedNode || <VisibilityOffIcon fontSize=\"small\" className=\"checkbox-checkmark\"/>)}\n\t\t</label> \n\t)\n}\n\nexport default CheckboxInput;\n","import React, {useState} from \"react\";\n\nexport interface ColorInputProps {\n  name: string;\n  className?: string;\n  value: string;\n  style?: React.CSSProperties;\n  disabled?: boolean;\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport function ColorInput(props: ColorInputProps) {\n  return (<div>\n    <input type=\"color\" onChange={props.onChange} name={props.name} className={props.className||\"\"} value={props.value} />\n  </div>)\n}\n\n\n\n\nexport default ColorInput;\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport Messenger from \"../../messenger\";\nimport ColorInput from \"../ColorInput\";\n\nexport interface SourcePropertiesProps {\n  object: Source;\n  messenger: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n}\n\n\n\nconst SourcePropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function SourceProperties(props: SourcePropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n\t\tonChange: props.onPropertyChange,\n\t}\n\t\n\tconst source = props.messenger.postMessage(\"FETCH_SOURCE\", props.object.uuid)[0];\n\t// console.log(source);\n\t\n\t\n\treturn (\n    <div>\n      <div style={SourcePropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"visible\"}>\n            <CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"position\") && (\n          <GridRow label={\"position\"}>\n            <NumberInput name=\"x\" value={props.object.position.x} {...XYZProps} />\n            <NumberInput name=\"y\" value={props.object.position.y} {...XYZProps} />\n            <NumberInput name=\"z\" value={props.object.position.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"scale\") && (\n          <GridRow label={\"scale\"}>\n            <NumberInput name=\"scalex\" value={props.object.scale.x} {...XYZProps} min={10e-10} />\n            <NumberInput name=\"scaley\" value={props.object.scale.y} {...XYZProps} min={10e-10} />\n            <NumberInput name=\"scalez\" value={props.object.scale.z} {...XYZProps} min={10e-10} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"rotation\") && (\n          <GridRow label={\"rotation\"}>\n            <NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps} />\n            <NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps} />\n            <NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {/* {props.object.hasOwnProperty(\"theta\") && (\n          <GridRow label={\"theta\"}>\n            <NumberInput name=\"theta\" value={props.object.theta} {...XYZProps} />\n          </GridRow>\n        )}\n        {props.object.hasOwnProperty(\"phi\") && (\n          <GridRow label={\"phi\"}>\n            <NumberInput name=\"phi\" value={props.object.phi} {...XYZProps} />\n          </GridRow>\n        )} */}\n        {props.object.hasOwnProperty(\"mesh\") && (\n          <GridRow label={\"color\"}>\n            <ColorInput\n              name=\"color\"\n              value={props.object.getColorAsString()}\n              onChange={(e) => {\n                props.onPropertyChange({\n                  value: e.currentTarget.value,\n                  name: e.currentTarget.name,\n                  id: e.currentTarget.id,\n                  type: e.currentTarget.type,\n                  checked: undefined\n                });\n              }}\n            />\n          </GridRow>\n        )}\n        {props.object.hasOwnProperty(\"uuid\") && (\n          <GridRow label={\"uuid\"}>\n            <span className=\"muted-text\">{props.object.uuid}</span>\n          </GridRow>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport Receiver from \"../../objects/receiver\";\nimport ColorInput from '../ColorInput';\n\nexport interface ReceiverPropertiesProps {\n  object: Receiver;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n}\n\n\n\nconst ReceiverPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function ReceiverProperties(props: ReceiverPropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\t\n\treturn (\n    <div>\n      <div style={ReceiverPropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"visible\"}>\n            <CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"position\") && (\n          <GridRow label={\"position\"}>\n            <NumberInput name=\"x\" value={props.object.position.x} {...XYZProps} />\n            <NumberInput name=\"y\" value={props.object.position.y} {...XYZProps} />\n            <NumberInput name=\"z\" value={props.object.position.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"scale\") && (\n          <GridRow label={\"scale\"}>\n            <NumberInput name=\"scalex\" value={props.object.scale.x} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scaley\" value={props.object.scale.y} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scalez\" value={props.object.scale.z} min={10e-10} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"rotation\") && (\n          <GridRow label={\"rotation\"}>\n            <NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps} />\n            <NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps} />\n            <NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"mesh\") && (\n          <GridRow label={\"color\"}>\n            <ColorInput\n              name=\"color\"\n              value={props.object.getColorAsString()}\n              onChange={(e) => {\n                props.onPropertyChange({\n                  value: e.currentTarget.value,\n                  name: e.currentTarget.name,\n                  id: e.currentTarget.id,\n                  type: e.currentTarget.type,\n                  checked: undefined\n                });\n              }}\n            />\n          </GridRow>\n        )}\n        {props.object.hasOwnProperty(\"uuid\") && (\n          <GridRow label={\"uuid\"}>\n            <span className=\"muted-text\">{props.object.uuid}</span>\n          </GridRow>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport interface GridRowSeperatorProps {\n  label?: React.ReactNode | React.ReactNode[];\n  children?: React.ReactNode | React.ReactNode[];\n  span?: number;\n  color?: string;\n  marginTop?: string;\n  marginBottom?: string;\n}\n\nexport default function GridRowSeperator(props: GridRowSeperatorProps) {\n  return (\n    <div style={{\n      display: \"grid\",\n      gridColumnStart: \"1\",\n      gridColumnEnd: \"3\"\n    }}>\n      <div style={{\n        borderBottomStyle: \"solid\",\n        borderBottomWidth: \"1px\",\n        borderBottomColor: props.color || \"rgba(0,0,0,0.2)\",\n        width: \"100%\",\n        marginTop: props.marginTop || \"1em\",\n        marginBottom: props.marginBottom || \"1em\"\n      }}/>\n    </div>\n  )\n}\n","import React, { Fragment } from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport GridRowSeperator from '../GridRowSeperator';\nimport RayTracer from \"../../compute/raytracer\";\nimport { Button } from \"@blueprintjs/core\";\nimport Select, { components } from \"react-select\";\nimport Messenger from \"../../messenger\";\n\n\nexport interface RayTracerPropertiesProps {\n  object: RayTracer;\n  messenger: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n\tonPropertyValueChangeAsNumber: (id: string, prop: string, valueAsNumber: number) => void;\n\tonPropertyValueChangeAsString: (id: string, prop: string, valueAsString: string) => void;\n\tonButtonClick: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\nconst RayTracerPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\nexport default function RayTracerProperties(props: RayTracerPropertiesProps) {\n  const XYZProps = {\n    style: {\n      width: \"30%\"\n    },\n    onChange: props.onPropertyChange,\n  };\n\n  const onSourceChange = (e) => {\n    console.log(e);\n    props.messenger.postMessage(\"RAYTRACER_SOURCE_CHANGE\", !e ? [] : e, props.object.uuid);\n    \n  }\n\n  const onReceiverChange = e => {\n    console.log(e);\n    props.messenger.postMessage(\"RAYTRACER_RECEIVER_CHANGE\", !e? [] : e, props.object.uuid);\n  };\n\n  let sources = props.messenger.postMessage(\"FETCH_ALL_SOURCES\")[0];\n  const sourcesSelectOptions = sources.map(x => {\n    return {\n      value: x.uuid,\n      label: x.name,\n      key: x.uuid,\n      id: x.uuid\n    };\n  });\n  if (sources.length > 0) {\n    sources = sources.filter(x => props.object.sourceIDs.includes(x.uuid))\n  }\n  const sourceSelectedOptions = sources.map(x => {\n     return {\n       value: x.uuid,\n       label: x.name,\n       key: x.uuid,\n       id: x.uuid\n     };\n  })\n  \n  let receivers = props.messenger.postMessage(\"FETCH_ALL_RECEIVERS\")[0]\n  const receiverSelectOptions = receivers.map(x => {\n    return {\n      value: x.uuid,\n      label: x.name,\n      key: x.uuid,\n      id: x.uuid\n    };\n  });    \n  if (receivers.length > 0) {\n    receivers = receivers.filter(x => props.object.receiverIDs.includes(x.uuid));\n  }\n  const receiverSelectedOptions = receivers.map(x => {\n    return {\n      value: x.uuid,\n      label: x.name,\n      key: x.uuid,\n      id: x.uuid\n    };\n  })\n   \n  const customStyles = {\n    indicatorsContainer: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    clearIndicator: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    dropdownIndicator: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    control: (provided, state) => ({\n      ...provided,\n      minHeight: 0\n    }),\n    container: (provided, state) => ({\n      ...provided,\n      width: \"100%\"\n    })\n  };\n  \n  return (\n    <div>\n      <div style={RayTracerPropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"updateInterval\") && (\n          <GridRow label={\"rate (ms)\"}>\n            <NumberInput name=\"updateInterval\" value={props.object.updateInterval} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"reflectionOrder\") && (\n          <GridRow label={\"order\"}>\n            <NumberInput name=\"reflectionOrder\" value={props.object.reflectionOrder} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"passes\") && (\n          <GridRow label={\"passes\"}>\n            <NumberInput name=\"passes\" value={props.object.passes} {...XYZProps} min={1} step={1} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"_pointSize\") && (\n          <GridRow label={\"point size\"}>\n            <NumberInput name=\"pointSize\" value={props.object.pointSize} {...XYZProps} min={1} step={1} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"_raysVisible\") && (\n          <GridRow label=\"show rays\">\n            <CheckboxInput\n              checkedNode={<div className=\"checked-icon\"></div>}\n              uncheckedNode={<div className=\"unchecked-icon\" />}\n              name={\"raysVisible\"}\n              onChange={props.onPropertyChange}\n              checked={props.object.raysVisible}\n            />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"runWithoutReceiver\") && (\n          <GridRow label=\"ignore receivers\">\n            <CheckboxInput\n              checkedNode={<div className=\"checked-icon\"></div>}\n              uncheckedNode={<div className=\"unchecked-icon\" />}\n              name={\"runWithoutReceiver\"}\n              onChange={props.onPropertyChange}\n              checked={props.object.runWithoutReceiver}\n            />\n          </GridRow>\n        )}\n        <GridRowSeperator />\n        <GridRow label={\"run\"}>\n          <Button\n            name={props.object.isRunning ? \"ray-tracer-pause\" : \"ray-tracer-play\"}\n            icon={props.object.isRunning ? \"pause\" : \"play\"}\n            onClick={props.onButtonClick}\n            minimal\n            className={\"bp3-small-icon-button\"}\n          />\n        </GridRow>\n        <GridRow label={\"clear\"}>\n          <Button name=\"ray-tracer-clear\" icon=\"cross\" onClick={props.onButtonClick} minimal className={\"bp3-small-icon-button\"} />\n        </GridRow>\n        <GridRowSeperator />\n        <GridRow label=\"sources\"></GridRow>\n        <GridRow span={2}>\n          <Select\n            defaultValue={sourceSelectedOptions}\n            isMulti\n            name=\"sources\"\n            options={sourcesSelectOptions}\n            className=\"basic-multi-select\"\n            classNamePrefix=\"select\"\n            key={\"sources\"}\n            styles={customStyles}\n            onChange={onSourceChange}\n          />\n        </GridRow>\n\n        <GridRow label=\"receivers\"></GridRow>\n        <GridRow span={2}>\n          <Select\n            defaultValue={receiverSelectedOptions}\n            isMulti\n            name=\"receivers\"\n            options={receiverSelectOptions}\n            className=\"basic-multi-select\"\n            classNamePrefix=\"select\"\n            key={\"receievers\"}\n            styles={customStyles}\n            onChange={onReceiverChange}\n          />\n        </GridRow>\n\n        <GridRowSeperator />\n        <GridRow span={2}>\n          <Button\n            text=\"Calulate Response\"\n            onClick={(e) => props.messenger.postMessage(\"RAYTRACER_CALCULATE_RESPONSE\", props.object.uuid, props.object.reflectionLossFrequencies)}\n          />\n        </GridRow>\n        <GridRow span={2}>\n          <Button text=\"Test WASM\" onClick={(e) => props.messenger.postMessage(\"RAYTRACER_TEST_WASM\", props.object.uuid, Math.random())} />\n        </GridRow>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport Room from '../../objects/room';\n\nexport interface RoomPropertiesProps {\n  object: Room;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n}\n\n\n\nconst RoomPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function RoomProperties(props: RoomPropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\t\n\treturn (\n    <div>\n      <div style={RoomPropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"visible\"}>\n            <CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n        {props.object.boundingBoxHelper.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"bounding box\"}>\n            <CheckboxInput name=\"showBoundingBox\" checked={props.object.boundingBoxHelper.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"position\") && (\n          <GridRow label={\"position\"}>\n            <NumberInput name=\"x\" value={props.object.position.x} {...XYZProps} />\n            <NumberInput name=\"y\" value={props.object.position.y} {...XYZProps} />\n            <NumberInput name=\"z\" value={props.object.position.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"scale\") && (\n          <GridRow label={\"scale\"}>\n            <NumberInput name=\"scalex\" value={props.object.scale.x} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scaley\" value={props.object.scale.y} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scalez\" value={props.object.scale.z} min={10e-10} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"rotation\") && (\n          <GridRow label={\"rotation\"}>\n            <NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps} />\n            <NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps} />\n            <NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps} />\n          </GridRow>\n        )}\n      </div>\n    </div>\n  );\n}\n","export function nums(f: Function, v: number | number[]): number | number[] {\n  if (typeof v === 'number') {\n    return f(v);\n  } else {\n    return v.map(x => f(x));\n  }\n}\n","export const third_octave: number[] = [\n  6.3,\n  8,\n  10,\n  12.5,\n  16,\n  20,\n  25,\n  31.5,\n  40,\n  50,\n  63,\n  80,\n  100,\n  125,\n  160,\n  200,\n  250,\n  315,\n  400,\n  500,\n  630,\n  800,\n  1000,\n  1250,\n  1600,\n  2000,\n  2500,\n  3150,\n  4000,\n  5000,\n  6300,\n  8000,\n  10000,\n  12500,\n  16000,\n  20000,\n];\nexport const whole_octave: number[] = [\n  8,\n  16,\n  31.5,\n  63,\n  125,\n  250,\n  500,\n  1000,\n  2000,\n  4000,\n  8000,\n  16000,\n];\nexport const whole_octave_all = [\n  {\n    Lower: 11,\n    Center: 16,\n    Upper: 22,\n  },\n  {\n    Lower: 22,\n    Center: 31.5,\n    Upper: 44,\n  },\n  {\n    Lower: 44,\n    Center: 63,\n    Upper: 88,\n  },\n  {\n    Lower: 88,\n    Center: 125,\n    Upper: 177,\n  },\n  {\n    Lower: 177,\n    Center: 250,\n    Upper: 355,\n  },\n  {\n    Lower: 355,\n    Center: 500,\n    Upper: 710,\n  },\n  {\n    Lower: 710,\n    Center: 1000,\n    Upper: 1420,\n  },\n  {\n    Lower: 1420,\n    Center: 2000,\n    Upper: 2840,\n  },\n  {\n    Lower: 2840,\n    Center: 4000,\n    Upper: 5680,\n  },\n  {\n    Lower: 5680,\n    Center: 8000,\n    Upper: 11360,\n  },\n  {\n    Lower: 11360,\n    Center: 16000,\n    Upper: 22720,\n  },\n];\n\nexport const third_octave_all = [\n  {\n    Lower: 11.2,\n    Center: 12.5,\n    Upper: 14.1,\n  },\n  {\n    Lower: 14.1,\n    Center: 16,\n    Upper: 17.8,\n  },\n  {\n    Lower: 17.8,\n    Center: 20,\n    Upper: 22.4,\n  },\n  {\n    Lower: 22.4,\n    Center: 25,\n    Upper: 28.2,\n  },\n  {\n    Lower: 28.2,\n    Center: 31.5,\n    Upper: 35.5,\n  },\n  {\n    Lower: 35.5,\n    Center: 40,\n    Upper: 44.7,\n  },\n  {\n    Lower: 44.7,\n    Center: 50,\n    Upper: 56.2,\n  },\n  {\n    Lower: 56.2,\n    Center: 63,\n    Upper: 70.8,\n  },\n  {\n    Lower: 70.8,\n    Center: 80,\n    Upper: 89.1,\n  },\n  {\n    Lower: 89.1,\n    Center: 100,\n    Upper: 112,\n  },\n  {\n    Lower: 112,\n    Center: 125,\n    Upper: 141,\n  },\n  {\n    Lower: 141,\n    Center: 160,\n    Upper: 178,\n  },\n  {\n    Lower: 178,\n    Center: 200,\n    Upper: 224,\n  },\n  {\n    Lower: 224,\n    Center: 250,\n    Upper: 282,\n  },\n  {\n    Lower: 282,\n    Center: 315,\n    Upper: 355,\n  },\n  {\n    Lower: 355,\n    Center: 400,\n    Upper: 447,\n  },\n  {\n    Lower: 447,\n    Center: 500,\n    Upper: 562,\n  },\n  {\n    Lower: 562,\n    Center: 630,\n    Upper: 708,\n  },\n  {\n    Lower: 708,\n    Center: 800,\n    Upper: 891,\n  },\n  {\n    Lower: 891,\n    Center: 1000,\n    Upper: 1122,\n  },\n  {\n    Lower: 1122,\n    Center: 1250,\n    Upper: 1413,\n  },\n  {\n    Lower: 1413,\n    Center: 1600,\n    Upper: 1778,\n  },\n  {\n    Lower: 1778,\n    Center: 2000,\n    Upper: 2239,\n  },\n  {\n    Lower: 2239,\n    Center: 2500,\n    Upper: 2818,\n  },\n  {\n    Lower: 2818,\n    Center: 3150,\n    Upper: 3548,\n  },\n  {\n    Lower: 3548,\n    Center: 4000,\n    Upper: 4467,\n  },\n  {\n    Lower: 4467,\n    Center: 5000,\n    Upper: 5623,\n  },\n  {\n    Lower: 5623,\n    Center: 6300,\n    Upper: 7079,\n  },\n  {\n    Lower: 7079,\n    Center: 8000,\n    Upper: 8913,\n  },\n  {\n    Lower: 8913,\n    Center: 10000,\n    Upper: 11220,\n  },\n  {\n    Lower: 11220,\n    Center: 12500,\n    Upper: 14130,\n  },\n  {\n    Lower: 14130,\n    Center: 16000,\n    Upper: 17780,\n  },\n  {\n    Lower: 17780,\n    Center: 20000,\n    Upper: 22390,\n  },\n];\n","import { nums } from './util/nums';\n\nimport { third_octave_all, whole_octave_all } from './std/bands';\n\n/**\n * @description Returns the nominal octave band frequencies between a given range (inclusive)\n * @function Octave\n * @param {number} [start] start frequency\n * @param {number} [end] end frequency\n */\nexport function Octave(start: number, end: number): number[] {\n  return whole_octave_all\n    .map(x => x.Center)\n    .filter(x => x >= Number(start || 0) && x <= Number(end || 20000));\n}\n\n/**\n * @description Returns the nominal third octave band frequencies between a given range (inclusive)\n * @function ThirdOctave\n * @param {number} [start] start frequency\n * @param {number} [end] end frequency\n */\nexport function ThirdOctave(start?: number, end?: number): number[] {\n  return third_octave_all\n    .map(x => x.Center)\n    .filter(x => x >= Number(start || 0) && x <= Number(end || 22000));\n}\n\n/**\n * @description Returns the lower band limit of a frequency band\n * @function Flower\n * @param {number} k inverse fraction (i.e. third = 3, sixth = 6, etc.)\n * @param {number | number[]} fc center frequency\n */\nexport function Flower(k: number, fc: number | number[]) {\n  return nums((f: number) => f / Math.pow(2, 1 / (2 * k)), fc);\n}\n\n/**\n * @description Returns the upper band limit of a frequency band\n * @function Fupper\n * @param {number} k inverse fraction (i.e. third = 3, sixth = 6, etc.)\n * @param {number | number[]} fc center frequency\n */\nexport function Fupper(k: number, fc: number | number[]) {\n  return nums((f: number) => f * Math.pow(2, 1 / (2 * k)), fc);\n}\n\n// const Bands = {\n//   Octave: {\n//     Nominal: whole_octave_all.map(x => x.Center),\n//     fromRange: (start: number, end: number): number[] => whole_octave_all.map(x => x.Center).filter(x => x >= Number(start) && x <= Number(end)),\n//     withLimits: whole_octave_all,\n//   },\n//   ThirdOctave: {\n//     Nominal: third_octave_all.map(x => x.Center),\n//     fromRange: (start: number, end: number): number[] => {\n//       return third_octave_all.map(x => x.Center).filter(x => x >= Number(start) && x <= Number(end));\n//     },\n//     withLimits: third_octave_all\n//   },\n//   Flower: (k, fc) => {\n//     if (typeof fc === \"number\")\n//       fc = [fc];\n//     return fc.map(f => f / Math.pow(2, 1 / (2 * k)));\n//   },\n//   Fupper: (k, fc) => {\n//     if (typeof fc === \"number\")\n//       fc = [fc];\n//     return fc.map(f => f * Math.pow(2, 1 / (2 * k)));\n//   }\n// };\n","export function allowMultiple(\n  func: Function,\n  val: number | number[]\n): number | number[] {\n  if (val instanceof Array) {\n    return val.map(x => func(x));\n  } else return func(val);\n}\n","export const pref = {\n  value: 2e-5,\n  units: 'Pa',\n};\n\nexport const Wref = {\n  value: 1e-12,\n  units: 'W',\n};\n\nexport const Iref = {\n  value: 1e-12,\n  units: 'W/m2',\n};\n","import { allowMultiple } from './util/allowMultiple';\nimport { pref, Wref, Iref } from './std/constants';\n\n/**\n * Convert sound power level to sound pressure level\n * @param Lw sound power level\n * @param r radius\n * @param Q directivity\n */\nexport function Lw2Lp(\n  Lw: number | number[],\n  r: number = 1,\n  Q: number = 1\n): number | number[] {\n  return allowMultiple(\n    (x: number) => x - Math.abs(10 * Math.log10(Q / (4 * Math.PI * r * r))),\n    Lw\n  );\n}\n\n\n\n/**\n * Convert sound pressure level to sound power level\n * @param Lp sound pressure level\n * @param r radius\n * @param Q directivity\n */\nexport function Lp2Lw(\n  Lp: number | number[],\n  r: number = 1,\n  Q: number = 1\n): number | number[] {\n  return allowMultiple(\n    (x: number) => Math.abs(10 * Math.log10(Q / (4 * Math.PI * r * r))) + x,\n    Lp\n  );\n}\n\n/**\n * Convert pressure to sound pressure level\n * @param P pressure\n */\nexport function P2Lp(P: number | number[]): number | number[] {\n  return allowMultiple((p: number) => 20 * Math.log10(p / pref.value), P);\n}\n/**\n * Convert sound pressure level to pressure\n * @param Lp sound pressure level\n */\nexport function Lp2P(Lp: number | number[]): number | number[] {\n  return allowMultiple((lp: number) => Math.pow(10, lp / 20) * pref.value, Lp);\n}\n\n/**\n * Convert Intensity to sound intensity level\n * @param I Intensity\n */\nexport function I2Li(I: number | number[]): number | number[] {\n  return allowMultiple((i: number) => 10 * Math.log10(i / Iref.value), I);\n}\n/**\n * Convert sound intensity level to Intensity\n * @param Li sound intensity level\n */\nexport function Li2I(Li: number | number[]): number | number[] {\n  return allowMultiple((li: number) => Math.pow(10, li / 10) * Iref.value, Li);\n}\n\n/**\n * Convert Power to sound power level\n * @param W Power\n */\nexport function W2Lw(W: number | number[]): number | number[] {\n  return allowMultiple((w: number) => 10 * Math.log10(w / Wref.value), W);\n}\n/**\n * Convert sound power level to Power\n * @param Lw sound power level\n */\nexport function Lw2W(Lw: number | number[]): number | number[] {\n  return allowMultiple((lw: number) => Math.pow(10, lw / 10) * Wref.value, Lw);\n}\n\nexport function Lp2Ln(\n  Lp: number | number[],\n  Ar: number,\n  Ao: number = 108\n): number | number[] {\n  return allowMultiple((lp: number) => lp - 10 * Math.log10(Ao / Ar), Lp);\n}\n\n/**\n * Converts pressure to sound pressure level\n * @param P pressure\n * @deprecated use P2Lp() instead\n */\nexport function P_dB(P: number | number[]): number | number[] {\n  return allowMultiple((p: number) => 20 * Math.log10(p / pref.value), P);\n}\n/**\n * Convert sound pressure level to pressure\n * @param Lp sound pressure level\n * @deprecated use Lp2P() instead\n */\nexport function dB_P(Lp: number | number[]): number | number[] {\n  return allowMultiple((lp: number) => Math.pow(10, lp / 20) * pref.value, Lp);\n}\n/**\n * Convert Intensity to sound intensity level\n * @param I Intensity\n * @deprecated use I2Li() instead\n */\nexport function I_dB(I: number | number[]): number | number[] {\n  return allowMultiple((i: number) => 10 * Math.log10(i / Iref.value), I);\n}\n/**\n * Convert sound intensity level to Intensity\n * @param Li sound intensity level\n * @deprecated use Li2I() instead\n */\nexport function dB_I(Li: number | number[]): number | number[] {\n  return allowMultiple((li: number) => Math.pow(10, li / 10) * Iref.value, Li);\n}\n/**\n * Convert Power to sound power level\n * @param W Power\n * @deprecated use W2Lw() instead\n */\nexport function W_dB(W: number | number[]): number | number[] {\n  return allowMultiple((w: number) => 10 * Math.log10(w / Wref.value), W);\n}\n/**\n * Convert sound power level to Power\n * @param Lw sound power level\n * @deprecated use Lw2W() instead\n */\nexport function dB_W(Lw: number | number[]): number | number[] {\n  return allowMultiple((lw: number) => Math.pow(10, lw / 10) * Wref.value, Lw);\n}\n","export const linspace = (start: number, step: number, end: number): number[] => {\n    const arr = [start];\n    for (let i = 0; i < Math.floor((end - start) / step); i++){\n        arr.push(arr[i]+step)\n    }\n    return arr;\n}\n\n","import { linspace } from './util/linspace';\nimport complex from 'complex';\n\nconst { PI: pi, tanh } = Math;\nconst coth = (x: number) => 1 / tanh(x);\nconst ccoth = (x: complex) => new complex(coth(x.real), coth(x.im));\n\nexport interface RigidBackedPorousAbsorberParams {\n    speed?: number;\n    density?: number;\n    flowResistivity?: number;\n    thickness?: number;\n    frequencies?: number[];\n}\n\nconst defaults = {\n    speed: 340,\n    density: 1.21,\n    flowResistivity: 50000,\n    thickness: 0.0254,\n    frequencies: linspace(100, 50, 10000)\n}\n\nexport function rigidBackedPorousAbsorber(params: RigidBackedPorousAbsorberParams) {\n    const {\n        speed: c,\n        density: ρ,\n        flowResistivity: σ,\n        thickness: l,\n        frequencies: f\n    } = Object.assign(defaults, params); \n    \n    const Z0 = c * ρ; \n    \n    // dimensionless quantity for Delany and Bazley\n    const X = f.map(f => ρ * f / σ); \n    \n    // characteristic impedance\n    const zc = X.map(X => new complex(ρ * c * (1 + 0.0571 * X ** -0.754), ρ * c * (-0.087 * X ** -0.732))); \n    \n    // complex wave number\n    const k = X.map((X, i) => {\n        const multiplier = 2 * pi / c * f[i];\n        return new complex(\n            multiplier * +(1 + 0.0978 * X ** -0.700),\n            multiplier * -(0 + 0.1890 * X ** -0.595)\n        );\n    }); \n    \n    // propogation constant\n    const γ = k.map(k => new complex(-k.im, k.real)); \n    \n    // surface impedance\n    const z = zc.map((zc, i) => zc.clone().mult(ccoth(γ[i].clone().mult(l)))); \n    \n    // reflection factor\n    const R = z.map(z => {\n        // return z.sub(Z0).divide(z.add(Z0));\n        let sub = z.clone().sub(Z0);\n        let add = z.clone().add(Z0);\n        return sub.divide(add)\n    });\n    \n    // normal incidence absorption coefficient\n    const a = R.map(R => 1 - R.abs() ** 2);\n    \n    return {\n        frequency: f,\n        reflection: {\n            magnitude: R.map(R => R.abs()),\n            phase: R.map(R => R.angle())\n        },\n        absorption: a\n    }\n}","function R_a(f: number): number {\n  const f2: number = f * f;\n  const f4: number = f2 * f2;\n  return (\n    (148693636 * f4) /\n    ((f2 + 424.36) *\n      Math.sqrt((f2 + 11599.29) * (f2 + 544496.41)) *\n      (f2 + 148693636))\n  );\n}\n\nexport function A(f: number[]): number[] {\n  return f.map((freq: number) => 20 * Math.log10(R_a(freq)) + 2.0);\n}\n\nfunction R_b(f: number): number {\n  const f2: number = f * f;\n  const f3: number = f * f * f;\n  return (\n    (148693636 * f3) /\n    ((f2 + 424.36) * Math.sqrt(f2 + 24964) * (f2 + 148693636))\n  );\n}\n\nexport function B(f: number[]): number[] {\n  return f.map((freq: number) => 20 * Math.log10(R_b(freq)) + 0.17);\n}\n\nfunction R_c(f: number): number {\n  const f2: number = f * f;\n  return (148693636 * f2) / ((f2 + 424.36) * (f2 + 148693636));\n}\n\nexport function C(f: number[]): number[] {\n  return f.map((freq: number) => 20 * Math.log10(R_c(freq)) + 0.06);\n}\n\nfunction h(f: number): number {\n  const f2: number = f * f;\n  return (\n    (Math.pow(1037918.48 - f2, 2) + 1080768.16 * f2) /\n    (Math.pow(9837328 - f2, 2) + 11723776 * f2)\n  );\n}\nfunction R_d(f: number): number {\n  const f2: number = f * f;\n  return (\n    f *\n    14499.711699348261 *\n    Math.sqrt(h(f) / ((f2 + 79919.29) * (f2 + 1345600)))\n  );\n}\n\nexport function D(f: number[]): number[] {\n  return f.map((freq: number) => 20 * Math.log10(R_d(freq)));\n}\n","export function tau(TL: number): number {\n  return 1 / Math.pow(10, TL / 10);\n}\n","type dB = number;\n\n/**\n * @interface TLArgs Args to TL function\n */\ninterface TLArgs {\n  /**\n   * @property {tau} number Transmission Coefficient (dB)\n   */\n  tau?: number;\n  /**\n   * @property {NR} number Noise Reduction in (dB) (i.e. Lsource-Lreciever)\n   */\n  NR?: number;\n  /**\n   * @property {area} number surface area of test wall (m^2)\n   */\n  area?: number;\n  /**\n   *  @property {absorption} number total absorption of reciever room (sabins)\n   */\n  absorption?: number;\n  /**\n   * @property {m} number surface density of wall (density * thickness) (if metric, specify the units \"metric\")\n   */\n  m?: number;\n  /**\n   * @property {f} number frequency\n   */\n  f?: number;\n  /**\n   * @property {units} string can be either \"english\" or \"metric\"\n   */\n  units?: string;\n}\n\nexport function TL(args: TLArgs): dB {\n  if (args.tau) return 10 * Math.log10(1 / args.tau);\n  else if (args.NR && args.area && args.absorption)\n    return args.NR + 10 * Math.log10(args.area / args.absorption);\n  else if (args.m && args.f) {\n    const offset: number =\n      args.units === 'metric' ? 47 : args.units === 'english' ? 33 : 33;\n    return 20 * Math.log10(args.m) + 20 * Math.log10(args.f) - offset;\n  } else throw 'Not enough input parameters';\n}\n","/**\n * @interface NRARgs Args to NR function\n */\ninterface NRArgs {\n  /**\n   * @property {TL} number Transmission Loss between two spaces\n   */\n  TL?: number;\n  /**\n   * @property {absorption} number Transmission Loss between two spaces\n   */\n  absorption?: number;\n  /**\n   * @property {area} number surface area of target\n   */\n  area?: number;\n  /**\n   *  @property {Lsource} number Source sound pressure level\n   */\n  Lsource?: number;\n  /**\n   * @property {Lreciever} number Reciever sound pressure level\n   */\n  Lreciever?: number;\n}\n\n/**\n * @description Returns the noise reduction between two spaces\n * @param {} args function arguments\n */\nexport function NR(args: NRArgs): number {\n  if (args.Lsource && args.Lreciever) {\n    return args.Lsource - args.Lreciever;\n  } else if (args.TL && args.area && args.absorption) {\n    return args.TL + 10 * Math.log10(args.absorption / args.area);\n  } else {\n    throw 'Not enough input parameters';\n  }\n}\n","interface WallElement {\n  tau?: number;\n  area: number;\n  TL?: number;\n}\n\nimport { tau } from './tau';\n\nexport function compositeTL(wallElements: WallElement[]): number {\n  let num = wallElements\n    .map((elt: WallElement): number => elt.area)\n    .reduce((a: number, b: number): number => a + b);\n  let den = wallElements\n    .map((elt: WallElement): number => elt.tau || tau(elt.TL || 0) * elt.area)\n    .reduce((a: number, b: number): number => a + b);\n  return 10 * Math.log10(num / den);\n}\n","export const weight = {\n  A: [\n    -85.4034698850268,\n    -77.5562778645859,\n    -70.4349397360756,\n    -63.5885204340496,\n    -56.4263051990417,\n    -50.3946568624623,\n    -44.8204947281104,\n    -39.528865426248,\n    -34.5392479351003,\n    -30.2749794369672,\n    -26.2228250531521,\n    -22.3976662589003,\n    -19.1449537169269,\n    -16.1896524750703,\n    -13.2443259342764,\n    -10.8470531184781,\n    -8.67482370061268,\n    -6.64376365442129,\n    -4.77388185229179,\n    -3.24779317273975,\n    -1.90842948831609,\n    -0.79456996812772,\n    0.000198587069132782,\n    0.576374772966456,\n    0.993290735808623,\n    1.20189793149763,\n    1.27130247251845,\n    1.20197961642606,\n    0.964427742304929,\n    0.555663621971461,\n    -0.113752729259771,\n    -1.14430883708883,\n    -2.48813423968903,\n    -4.24962009557738,\n    -6.70071363772358,\n    -9.34056481158524,\n  ],\n  B: [\n    -49.208306113318,\n    -43.43104131534,\n    -38.2404351920707,\n    -33.3206115663136,\n    -28.2822081424028,\n    -24.1597513987061,\n    -20.4794345629446,\n    -17.1252478920128,\n    -14.100979065641,\n    -11.625152845811,\n    -9.36335830697656,\n    -7.31238492438451,\n    -5.64739487352881,\n    -4.22644841671248,\n    -2.94388111978705,\n    -2.04069126484729,\n    -1.35976619173359,\n    -0.853007465570098,\n    -0.495725170373744,\n    -0.275165404168238,\n    -0.128955524908155,\n    -0.0402409590007389,\n    0.00039617873700315,\n    0.00766193175540189,\n    -0.0219751820658593,\n    -0.088459629081859,\n    -0.20529416042174,\n    -0.401918593842549,\n    -0.723902944782478,\n    -1.18311046629893,\n    -1.88605703953169,\n    -2.93843379477163,\n    -4.29513839421593,\n    -6.0648880342395,\n    -8.52171566365969,\n    -11.1648038539027,\n  ],\n  C: [\n    -21.2976758782129,\n    -17.5912059564357,\n    -14.3325969315565,\n    -11.3412988285716,\n    -8.42999108268896,\n    -6.22116172767383,\n    -4.44092623702249,\n    -3.03264181725982,\n    -1.98344866500175,\n    -1.30196241646831,\n    -0.822545470844991,\n    -0.498012573602325,\n    -0.30157157474052,\n    -0.173665638169078,\n    -0.0842956702037082,\n    -0.033997206228342,\n    -0.0024223554062643,\n    0.0171433094194731,\n    0.0276612041829675,\n    0.0306916547919759,\n    0.0275869718807538,\n    0.016974064280032,\n    -0.00184722261806047,\n    -0.0330665606947445,\n    -0.0895639788923799,\n    -0.171268790492428,\n    -0.297872423593498,\n    -0.500936819071135,\n    -0.827089258514049,\n    -1.28874847577318,\n    -1.99330899139503,\n    -3.04672937074981,\n    -4.40404748578577,\n    -6.1741898212771,\n    -8.63128949493934,\n    -11.2745311011041,\n  ],\n  D: [\n    -30.6383852062861,\n    -28.5648839429673,\n    -26.6288857172578,\n    -24.6941243590872,\n    -22.5560179656796,\n    -20.6266016442763,\n    -18.7020980827224,\n    -16.716969788925,\n    -14.6786576497467,\n    -12.7943238315598,\n    -10.8737157555414,\n    -8.93943811512999,\n    -7.20326487669535,\n    -5.56680768983859,\n    -3.92112702908293,\n    -2.63434438365631,\n    -1.58970047648788,\n    -0.809962001690756,\n    -0.362425595175375,\n    -0.278188711058589,\n    -0.460054251644556,\n    -0.610738498473274,\n    7.71461973242629e-15,\n    1.92086080501645,\n    5.04909508006931,\n    7.94981039655113,\n    10.3188436856191,\n    11.5426572632177,\n    11.1040386116406,\n    9.6114134969742,\n    7.62904658499927,\n    5.46321126933522,\n    3.43709339935925,\n    1.4306869963152,\n    -0.765768653645567,\n    -2.73513742749999,\n  ],\n};\n","export class Complex {\n  // Real part\n  public real: number;\n\n  // Imaginary part\n  public imag: number;\n\n  constructor(params: any) {\n    let real = 0;\n    let imag = 0;\n\n    // Euclidean\n    if ('real' in params && 'imag' in params) {\n      real = params.real;\n      imag = params.imag;\n    }\n\n    // Polar\n    else if ('radius' in params && 'arg' in params) {\n      real = params.radius * Math.cos(params.arg);\n      imag = params.radius * Math.sin(params.arg);\n    }\n\n    // Error\n    else {\n      throw Error();\n    }\n\n    this.real = real;\n    this.imag = imag;\n  }\n\n  /**\n   * Conjugates the complex number.\n   */\n  public conjugate(): Complex {\n    return new Complex({ real: this.real, imag: -this.imag });\n  }\n\n  /**\n   * Calculates the absolute value of the complex number;\n   */\n  public absolute(): number {\n    const abs = this.real ** 2 + this.imag ** 2;\n    return Math.sqrt(abs);\n  }\n\n  /**\n   * Swaps the real part and the imaginary part.\n   */\n  public swap(): Complex {\n    return new Complex({ real: this.imag, imag: this.real });\n  }\n\n  /**\n   * Adds a complex number.\n   * @param c Complex number to add\n   */\n  public add(c: Complex): Complex {\n    const real = this.real + c.real;\n    const imag = this.imag + c.imag;\n    return new Complex({ real: real, imag: imag });\n  }\n\n  /**\n   * Subtracts a complex number.\n   * @param c Complex number to subtract\n   */\n  public subtract(c: Complex): Complex {\n    const real = this.real - c.real;\n    const imag = this.imag - c.imag;\n    return new Complex({ real: real, imag: imag });\n  }\n\n  /**\n   * Multiplies a complex number.\n   * @param c Complex number to multiply\n   */\n  public multiply(c: Complex): Complex {\n    const real = this.real * c.real - this.imag * c.imag;\n    const imag = this.real * c.imag + this.imag * c.real;\n    return new Complex({ real: real, imag: imag });\n  }\n\n  /**\n   * Divides a complex number.\n   * @param c Complex number to devide by.\n   */\n  public divide(c: Complex): Complex {\n    const cc = c.real ** 2;\n    const dd = c.imag ** 2;\n    const product = this.multiply(c.conjugate());\n    const real = product.real / (cc + dd);\n    const imag = product.imag / (cc + dd);\n    return new Complex({ real: real, imag: imag });\n  }\n\n  /**\n   * Converts the complex number to a string.\n   * @param unit Imaginary unit ('i' or 'j').\n   */\n  public toString(unit: string = 'i'): string {\n    if (this.imag >= 0) {\n      return `${this.real} + ${unit}${this.imag}`;\n    } else {\n      return `${this.real} + ${unit}${-this.imag}`;\n    }\n  }\n\n  /**\n   * Converts the complex number to an array ([real, imag] format).\n   */\n  public toArray(): [number, number] {\n    return [this.real, this.imag];\n  }\n\n  /**\n   * Copies the complex number object.\n   */\n  public copy(): Complex {\n    return new Complex({ real: this.real, imag: this.imag });\n  }\n}\n\nexport function makeComplexArray(arr: number[]): Complex[] {\n  return arr.map(\n    (x: number) =>\n      new Complex({\n        real: x,\n        imag: 0,\n      })\n  );\n}\n","import { Complex } from '../complex';\n\nexport type ArrayOfValues =\n  | Complex[]\n  | Float32Array\n  | Float64Array\n  | Uint16Array\n  | Uint32Array\n  | Uint8Array\n  | BigUint64Array\n  | number[];\n\nexport class FFT {\n  // W factors\n  private w: Complex[] = [];\n\n  // Bit reversal table\n  private bitReversalTable: number[] = [];\n\n  // Previous array size\n  private previousArraySize: number = 0;\n\n  /**\n   * Operates a 2D Cooley-Tukey FFT.\n   * @param data\n   * @param width\n   * @param height\n   */\n  public fft2d(data: Complex[][], width: number, height: number): Complex[][] {\n    const [W, H] = [width, height];\n\n    let spectrum: Complex[][] = new Array(H);\n\n    // Apply a 1D FFT to each row\n    spectrum = data.map(row => this.fft1d(row, W));\n    spectrum = this.transpose(spectrum, W, H);\n\n    // Apply a 1D FFT to each column\n    spectrum = spectrum.map(row => this.fft1d(row, H));\n    spectrum = this.transpose(spectrum, H, W);\n\n    return spectrum;\n  }\n\n  /**\n   * Operates a 2D Cooley-Tukey IFFT.\n   * @param spectrum\n   * @param width\n   * @param height\n   */\n  public ifft2d(\n    spectrum: Complex[][],\n    width: number,\n    height: number\n  ): Complex[][] {\n    const [W, H] = [width, height];\n\n    let data: Complex[][] = new Array(H);\n\n    // Apply a 1D IFFT to each column\n    data = this.transpose(spectrum, W, H);\n    data = data.map(row => this.ifft1d(row, H));\n\n    // Apply a 1D IFFT to each row\n    data = this.transpose(data, H, W);\n    data = data.map(row => this.ifft1d(row, W));\n\n    return data;\n  }\n\n  /**\n   * Operates a 1D Cooley-Tukey FFT.\n   * @param data\n   * @param size\n   */\n  public fft1d(data: Complex[], size: number): Complex[] {\n    const N = size;\n\n    this.calcFactors(N);\n    this.createBitReversalTable(N);\n    this.updateArraySize(N);\n\n    let spectrum = this.sortData(data, N);\n\n    for (let a = 1, b = N / 2; a < N; a *= 2, b /= 2) {\n      for (let k = 0; k < a; k++) {\n        for (let n = k; n < N; n += 2 * a) {\n          let tmp = spectrum[n + a].multiply(this.w[b * k]);\n          spectrum[n + a] = spectrum[n].subtract(tmp);\n          spectrum[n] = spectrum[n].add(tmp);\n        }\n      }\n    }\n\n    return spectrum;\n  }\n\n  /**\n   * Operates a 1D Cooley-Tukey IFFT.\n   * @param data\n   * @param size\n   */\n  public ifft1d(spectrum: Complex[], size: number): Complex[] {\n    const N = size;\n\n    let data: Complex[] = spectrum.map(c => c.swap());\n    data = this.fft1d(data, N);\n    data = data.map(c => c.swap().divide(new Complex({ real: N, imag: 0 })));\n\n    return data;\n  }\n\n  /**\n   * Calculates the power spectrum of the given 2D spectrum and finds the max value.\n   * @param spectrum\n   * @param width\n   * @param height\n   */\n  public power2d(\n    spectrum: Complex[][],\n    width: number,\n    height: number\n  ): [number[][], number] {\n    let powerSpectrum: number[][] = new Array(height);\n    let max: number = 0;\n\n    powerSpectrum = spectrum.map(row => {\n      let [rowSpectrum, rowMax] = this.power1d(row, width);\n      max = Math.max(max, rowMax);\n      return rowSpectrum;\n    });\n\n    return [powerSpectrum, max];\n  }\n\n  /**\n   * Calculates the power spectrum of the given 1D spectrum and finds the max value.\n   * @param spectrum\n   * @param size\n   */\n  public power1d(spectrum: Complex[], size: number): [number[], number] {\n    let powerSpectrum = new Array(size);\n    let max = 0;\n\n    for (let x = 0; x < size; x++) {\n      powerSpectrum[x] = spectrum[x].absolute() ** 2;\n      max = Math.max(max, powerSpectrum[x]);\n    }\n\n    return [powerSpectrum, max];\n  }\n\n  /**\n   * Sorts the given data array depending on the bit reversal table.\n   * @param data Data array\n   * @param size Array size\n   */\n  private sortData(data: Complex[], size: number): Complex[] {\n    const N = size;\n    let sortedData: Complex[] = new Array(N);\n\n    for (let k = 0; k < N; k++) {\n      let l = this.bitReversalTable[k];\n      sortedData[k] = data[l].copy();\n    }\n\n    return sortedData;\n  }\n\n  /**\n   * Calculates W factors.\n   * @param size Array size (1D)\n   */\n  private calcFactors(size: number) {\n    const N = size;\n    if (size != this.previousArraySize) {\n      this.w = new Array(N);\n      for (let k = 0; k < N / 2; k++) {\n        let c = this.exponential((-2 * Math.PI * k) / N);\n        this.w[k] = c;\n      }\n    }\n  }\n\n  /**\n   * Creates a bit reversal table of the given array size `size`.\n   * @param size Array size\n   */\n  private createBitReversalTable(size: number) {\n    if (size != this.previousArraySize) {\n      const N = size;\n      const power = this.getExponent2(size);\n      this.bitReversalTable = new Array(N);\n      for (let n = 0; n < N; n++) {\n        this.bitReversalTable[n] = this.reverseBits(n, power);\n      }\n    }\n  }\n\n  /**\n   * Operates bit reversal to a given number.\n   * @param n Number to operate bit reversal\n   * @param power Number of bits\n   */\n  private reverseBits(n: number, power: number): number {\n    const N = Math.ceil(power / 2);\n    const bits = n.toString(2).padStart(power, '0');\n    let reversedBits: string[] = new Array(power);\n\n    for (let k = 0; k < N; k++) {\n      reversedBits[k] = bits[power - k];\n      reversedBits[power - k] = bits[k];\n    }\n\n    const binaryRepresentation: string = reversedBits.join('');\n    return parseInt(binaryRepresentation, 2);\n  }\n\n  /**\n   * Operates log2(n) to the given number `n`.\n   * @param n number\n   */\n  private getExponent2(n: number): number {\n    let p = Math.log2(n);\n    if (Number.isInteger(p) == false) {\n      throw Error();\n    }\n    return p;\n  }\n\n  /**\n   * Initializes a 2D array with the given size.\n   * @param width Number of columns\n   * @param height Number of rows\n   */\n  private init2DArray(width: number, height: number): any[][] {\n    let array = new Array(height).fill(null).map(() => new Array(width));\n    return array;\n  }\n\n  /**\n   * Exponential function.\n   * @param arg Argument of e\n   */\n  private exponential(arg: number): Complex {\n    return new Complex({ radius: 1, arg: arg });\n  }\n\n  /**\n   * Updates previous array size.\n   * @param size New array size\n   */\n  private updateArraySize(size: number) {\n    if (size != this.previousArraySize) {\n      this.previousArraySize = size;\n    }\n  }\n\n  /**\n   * Transposes the given 2D data array.\n   * @param data\n   * @param width\n   * @param height\n   */\n  private transpose(\n    data: Complex[][],\n    width: number,\n    height: number\n  ): Complex[][] {\n    const [W, H] = [width, height];\n    let transposedData: Complex[][] = this.init2DArray(W, H);\n\n    for (let y = 0; y < H; y++) {\n      for (let x = 0; x < W; x++) {\n        transposedData[y][x] = data[x][y].copy();\n      }\n    }\n\n    return transposedData;\n  }\n\n  /**\n   * Shifts coordinates.\n   * @param x\n   * @param y\n   * @param width\n   * @param height\n   */\n  public shift(data: Complex[][], width: number, height: number): Complex[][] {\n    const [W, H] = [width, height];\n    const centerX = W / 2;\n    const centerY = H / 2;\n\n    let shiftedData: Complex[][] = this.init2DArray(W, H);\n\n    for (let y = 0; y < H; y++) {\n      for (let x = 0; x < W; x++) {\n        let u = (x + centerX) % W;\n        let v = (y + centerY) % H;\n        shiftedData[v][u] = data[y][x].copy();\n      }\n    }\n\n    return shiftedData;\n  }\n}\n","export const range = (n: number) => {\n  return Array(n)\n    .fill(0)\n    .map((_: number, i: number) => i);\n};\n\n","import { range } from './range';\nexport const chunk = (n: number) => (arr: any[]) => {\n  return range(Math.ceil(arr.length / n)).map((_: number, i: number) =>\n    arr.slice(i * n, i * n + n)\n  );\n};\n","import { Hann } from './functions/hann';\n\nexport interface WindowFunctionDictionary {\n  [index: string]: (N: number) => number[];\n}\n\nexport const WindowFunctions = {\n  Hann,\n} as WindowFunctionDictionary;\n\nexport { Hann };\n","const hann = (n: number, N: number) =>\n  Math.pow(Math.sin((Math.PI * n) / (N - 1)), 2);\n\n/** Hann window\n * @function Hann\n * @param  {number} N Length of the window\n * @returns {number[]} a Hann window of length N\n */\nexport const Hann = (N: number): number[] => {\n  return Object.keys(Array(N).fill(0)).map(x => hann(Number(x), N));\n};\n","import { WindowFunctions } from './window-functions';\nimport { Complex } from '../complex';\nexport const applyWindow = (window: string) => (arr: []) => {\n  if (WindowFunctions[window]) {\n    return WindowFunctions[window](arr.length).map(\n      (x: number, i: number) => arr[i] * x\n    );\n  } else throw new Error(`'${window}' does not exist`);\n};\n\nexport const applyWindowComplex = (window: string) => (arr: Complex[]) => {\n  if (WindowFunctions[window]) {\n    return WindowFunctions[window](arr.length).map(\n      (x: number, i: number) =>\n        new Complex({ real: arr[i].real * x, imag: arr[i].imag })\n    );\n  } else throw new Error(`'${window}' does not exist`);\n};\n","import { FFT } from './fft';\nimport { Complex, makeComplexArray } from '../complex';\nimport { Float32Array_to_ComplexArray } from '../util/complex-array';\nimport { chunk } from '../util/chunk';\nimport * as window from '../window/applyWindow';\n\nexport interface fftoptions {\n  buffersize?: number;\n  dim?: number;\n  absolute?: boolean;\n  window?: string;\n}\n\nconst default_fftoptions: fftoptions = {\n  buffersize: 0,\n  dim: 1,\n  absolute: false,\n  window: 'Hann',\n};\n\nexport function fft(\n  values: number[] | Complex[] | Float32Array,\n  opts: fftoptions = default_fftoptions\n) {\n  opts = Object.assign(default_fftoptions, opts || default_fftoptions);\n  // console.log(opts);\n\n  if (!(values instanceof Array || values instanceof Float32Array))\n    throw new Error('need to pass in an array');\n\n  // let n = Math.pow(2, Math.floor(Math.log(values.length) / Math.LN2));\n  const makebuffer = chunk(opts.buffersize || 1024);\n  let arr: Complex[][] = [[]];\n\n  if (values[0] instanceof Complex) {\n    arr = makebuffer(values as Complex[]).map((x: Complex[]) => {\n      return window.applyWindowComplex(opts.window || 'Hann')(x);\n    });\n  }\n\n  if (values instanceof Float32Array) {\n    arr = makebuffer(Float32Array_to_ComplexArray(values)).map(\n      (x: Complex[]) => {\n        return window.applyWindowComplex(opts.window || 'Hann')(x);\n      }\n    );\n  }\n\n  if (values[0] instanceof Number) {\n    arr = makebuffer(makeComplexArray(values as number[])).map(\n      (x: Complex[]) => {\n        return window.applyWindowComplex(opts.window || 'Hann')(x);\n      }\n    );\n  }\n\n  return (arr as Complex[][]).map(x => {\n    if (x.length == opts.buffersize) {\n      return new FFT().fft1d(x, opts.buffersize || 1024);\n    } else {\n      return new FFT().fft1d(\n        x.concat(\n          Array((opts.buffersize || 1024) - x.length).fill(\n            new Complex({\n              real: 0,\n              imag: 0,\n            })\n          )\n        ),\n        opts.buffersize || 1024\n      );\n    }\n  });\n}\n","import { Complex } from '../complex';\n\nexport function Float32Array_to_ComplexArray(\n  f32_array: Float32Array\n): Complex[] {\n  return Array.from(f32_array).map(x => new Complex({ real: x, imag: 0 }));\n}\n\nexport function Float64Array_to_ComplexArray(\n  f64_array: Float64Array\n): Complex[] {\n  return Array.from(f64_array).map(x => new Complex({ real: x, imag: 0 }));\n}\n","import React, { Fragment } from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from \"../../objects/source\";\nimport GridRow from \"../GridRow\";\nimport GridRowSeperator from \"../GridRowSeperator\";\nimport {RT60} from \"../../compute/rt\";\nimport { Button } from \"@blueprintjs/core\";\nimport Select, { components } from \"react-select\";\nimport Messenger from \"../../messenger\";\nimport * as ac from '../../compute/acoustics';\nimport \"./RT60Properties.css\";\n\nexport interface RT60PropertiesProps {\n  object: RT60;\n  messenger: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n  onButtonClick: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\nconst RT60PropertiesContainerStyle: React.CSSProperties = {\n  display: \"grid\",\n  gridTemplateColumns: \"auto auto\",\n  padding: \".25em\",\n  gridRowGap: \".25em\",\n  gridColumnGap: \".25em\"\n};\n\nexport default function RT60Properties(props: RT60PropertiesProps) {\n  const XYZProps = {\n    style: {\n      width: \"30%\"\n    },\n    onChange: props.onPropertyChange\n  };\n\n\n\n  const customStyles = {\n    indicatorsContainer: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    clearIndicator: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    dropdownIndicator: (provided, state) => ({\n      ...provided,\n      padding: 0\n    }),\n    control: (provided, state) => ({\n      ...provided,\n      minHeight: 0\n    }),\n    container: (provided, state) => ({\n      ...provided,\n      width: \"100%\"\n    })\n  };\n\n  // console.log(sources, receivers);\n  const sabine = props.object.sabine(ac.whole_octave);\n  return (\n    <div>\n      <div style={RT60PropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput\n              name=\"name\"\n              value={props.object.name}\n              onChange={props.onPropertyChange}\n            />\n          </GridRow>\n        )}\n        <GridRow label={\"sabine\"}>\n          <table>\n            <thead>\n              <tr>\n                <th>Frequency</th>\n                <th>Time</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                sabine[0].map((x,i) => (\n                  <tr key={\"sabine-row-\"+i}>\n                    <td>{x}</td>\n                    <td>{sabine[1][i].toFixed(2)}</td>\n                  </tr>\n                ))\n              }\n            </tbody>\n         </table>\n        </GridRow>\n      </div>\n    </div>\n  );\n}\n","export function chunk(array: Array<any>, size: number) {\n\tvar R = [] as any[];\n\tfor (var i = 0; i < array.length; i += size)\n\t\tR.push(array.slice(i, i + size));\n\treturn R;\n}\n","export function interpolateLog(x1, y1, x2, y2, xi) {\n  return y1 + (Math.log10(xi) - Math.log10(x1)) / (Math.log10(x2) - Math.log10(x1)) * (y2 - y1);\n}\n\nexport default interpolateLog;","import interpolateLog from './interpolate-log';\n\nexport function interpolateAlpha(alpha: number[], freq: number[]) {\n  return function (f: number) {\n    let i = 0;\n    while (f > freq[i] && i < freq.length) {\n      i++;\n    }\n    if (i > 0 && i<freq.length) {\n      const x1 = freq[i - 1];\n      const y1 = alpha[i - 1];\n      const x2 = freq[i];\n      const y2 = alpha[i];\n      const xi = f;\n      return interpolateLog(x1,y1,x2,y2,xi);\n    }\n    \n    else {\n      return i == 0 ? alpha[i] : alpha[freq.length-1];\n    }\n  }\n}\n\n\n\nexport default interpolateAlpha;","/**\n * Calcualtes the *reflection coefficient* **R**\n * of a surface with *absorption coefficient* **α**\n * at an *angle* **θ**\n *\n * @export\n * @param {number} α absorption coefficient **α ∈ [0,1]**\n * @param {number} θ angle of incidence **θ ∈ [0,π/2]**\n * @returns {number} R reflection coefficient **R ∈ [0,1]**\n */\n\nexport function reflectionCoefficient(α: number, θ: number) {\n  const rootOneMinusAlpha = Math.sqrt(1 - α);\n  const ξo = (1 - rootOneMinusAlpha) / (1 + rootOneMinusAlpha);\n  const ξo_sinθ = ξo * Math.sin(θ);\n  const R = (ξo_sinθ - 1) / (ξo_sinθ + 1);\n  return R;\n}\n\nexport default reflectionCoefficient;\n\n\n","import { discretize } from '../../common/discretize';\n\nexport interface BRDFProps {\n  /**\n   * the number of discrete chunks in the BRDF\n   */\n  steps?: number;\n\n  absorptionCoefficient: number;\n  diffusionCoefficient: number;\n}\n\nexport class BRDF {\n  coefficients: number[][];\n  steps: number;\n  getIndex: (v: number) => number;\n  constructor(props: BRDFProps) {\n    //set member variables;\n    this.steps = (props && props.steps) || 10;\n    this.coefficients = [] as number[][];\n    for (let j = 0; j < this.steps; j++) {\n      this.coefficients.push([] as number[]);\n    }\n    this.getIndex = discretize(this.steps, 0, Math.PI);\n    this.set(props.absorptionCoefficient, props.diffusionCoefficient);\n  }\n\n  get(angle_in: number, angle_out: number) {\n    return this.coefficients[this.getIndex(angle_in)][this.getIndex(angle_out)];\n  }\n  \n  set(absorptionCoefficient: number, diffusionCoefficient: number) {\n    const reflected = 1 - absorptionCoefficient;\n    const specularEnergy = reflected * (1 - diffusionCoefficient);\n    const diffuse = reflected - specularEnergy;\n    const diffusedEnergyPerSlot = diffuse / this.steps; // Other than the specular direction\n    \n    // for each incoming slot\n    for (let incoming = 0; incoming < this.steps; incoming++) {\n      \n      // for each outgoing slot\n      for (let outgoing = 0; outgoing < this.steps; outgoing++) {\n        \n        // set the coefficient to the diffuse energy per slot\n        this.coefficients[incoming][outgoing] = diffusedEnergyPerSlot;\n        \n        \n        let specular = this.steps - incoming - 1;\n        if (outgoing == specular)\n          this.coefficients[incoming][outgoing] += specularEnergy;\n      }\n    }\n    return this;\n  }\n\n  randomize() {\n    let sum;\n    for (let incoming = 0; incoming < this.steps; incoming++) {\n      sum = 0;\n      for (let outgoing = 0; outgoing < this.steps; outgoing++) {\n        this.coefficients[incoming][outgoing] = Math.random();\n        sum += this.coefficients[incoming][outgoing];\n      }\n      for (let outgoing = 0; outgoing < this.steps; outgoing++)\n        this.coefficients[incoming][outgoing] =\n          this.coefficients[incoming][outgoing] / sum;\n    }\n    return this;\n  }\n}\n\n","export function discretize(n: number, start: number, stop: number) {\n  return function (v: number) {\n    return Math.round((stop - start) / n * v);\n  }\n}","import * as THREE from \"three\";\nimport Container, { ContainerProps } from \"./container\";\nimport {chunk} from '../common/chunk';\nimport hash from 'object-hash';\nimport { KeyValuePair } from \"../common/key-value-pair\";\nimport Renderer from \"../render/renderer\";\nimport interpolateAlpha from '../compute/acoustics/interpolate-alpha';\nimport reflectionCoefficient from '../compute/acoustics/reflection-coefficient';\nimport { AcousticMaterial } from \"..\";\nimport sprite from '../res/sprites/kramer.png';\nimport { BRDF } from '../compute/raytracer/brdf';\n\n\nconst glsl = x => x[0];\nconst defaults = {\n  materials: {\n    shader: new THREE.ShaderMaterial({\n      vertexShader: glsl`\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main()\n\t\t\t{\n\t\t\t\tvUv = uv;\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t\t}\n\n\t\t\t`,\n      fragmentShader: glsl`\n\t\t\t\t\t\tuniform float time;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main( void ) {\n\n\t\t\t\tvec2 position = - 1.0 + 2.0 * vUv;\n\n\t\t\t\tfloat red = abs( sin( position.x * position.y + time / 5.0 ) );\n\t\t\t\tfloat green = abs( sin( position.x * position.y + time / 4.0 ) );\n\t\t\t\tfloat blue = abs( sin( position.x * position.y + time / 3.0 ) );\n\t\t\t\tgl_FragColor = vec4( red, green, blue, 1.0 );\n\n\t\t\t}\n\t\t\t`,\n\n\t\t\tdepthTest: true,\n\t\t\t\t\t\t\n      uniforms: {\n        time: { value: 10.0 }\n      },\n      visible: true,\n      side: THREE.FrontSide\n    }),\n    selected: new THREE.MeshPhysicalMaterial({\n      color: new THREE.Color(1, 1, 1),\n      emissiveIntensity: 2,\n      emissive: new THREE.Color(1, 1, 0),\n      transparent: true,\n      opacity: 0.5,\n      side: THREE.DoubleSide,\n      metalness: 0.05,\n      reflectivity: 0.15,\n      roughness: 0.3,\n      depthWrite: true,\n      depthTest: false\n    }),\n\n    mesh: new THREE.MeshPhysicalMaterial({\n      transparent: true,\n      opacity: 0.1,\n      side: THREE.DoubleSide,\n      emissive: new THREE.Color(0xffffff),\n      emissiveIntensity: 0,\n      metalness: 0.05,\n      reflectivity: 0.15,\n      roughness: 0.3,\n      color: 0xaaaaaa,\n      depthWrite: true,\n      depthTest: false\n    }),\n\n    wire: new THREE.MeshBasicMaterial({\n      side: THREE.FrontSide,\n      wireframe: true,\n      color: 0x2c2d2d\n    }),\n    line: new THREE.LineBasicMaterial({\n      color: 0xaaaaaa\n    })\n  },\n  displayInternalEdges: false,\n  displayEdges: true,\n  fillSurface: true,\n  _displayVertexNormals: false\n};\n\nexport interface SurfaceProps extends ContainerProps {\n\tacousticMaterial: AcousticMaterial;\n  geometry: THREE.BufferGeometry;\n  displayInternalEdges?: boolean;\n  displayEdges?: boolean;\n  fillSurface?: boolean;\n  _displayVertexNormals?: boolean;\n}\n\ninterface KeepLine{\n\tkeep: boolean;\n\tline: number[][];\n}\n\nexport default class Surface extends Container {\n\t// for render\n\tmesh: THREE.Mesh;\n\twire: THREE.Mesh;\n\tedges: THREE.LineSegments;\n\tdisplayInternalEdges: boolean;\n\tdisplayEdges: boolean;\n\ttriangles: number[][][];\n\tfillSurface: boolean;\n\t_displayVertexNormals: boolean;\n\tvertexNormals: THREE.VertexNormalsHelper;\n\t_triangles: THREE.Triangle[];\n\tselectedMaterial: THREE.MeshPhysicalMaterial;\n\tnormalMaterial: THREE.MeshPhysicalMaterial;\n\tnormalColor: THREE.Color;\n\tshaderMaterial: THREE.ShaderMaterial;\n\t\n\t// for acoustics\n\tabsorption!: number[];\n\tabsorptionFunction: (freq: number) => number;\n\treflection!: number[];\n\treflectionFunction: (freq: number, theta: number) => number;\n\t_acousticMaterial!: AcousticMaterial;\n\tbrdf: BRDF[];\n\tarea!: number;\n\t// renderer: Renderer;\n\tconstructor(name: string, props: SurfaceProps) {\n\t\tsuper(name);\n\t\tthis.kind = \"surface\";\n\t\tthis.displayInternalEdges = props.displayInternalEdges || defaults.displayInternalEdges;\n\t\tthis.displayEdges = props.displayEdges || defaults.displayEdges;\n\t\tthis.fillSurface = props.fillSurface || defaults.fillSurface;\n\t\tthis._displayVertexNormals = props._displayVertexNormals || defaults._displayVertexNormals;\n\t\tthis.shaderMaterial = defaults.materials.shader;\n\t\tthis.wire = new THREE.Mesh(props.geometry, defaults.materials.wire);\n\t\tthis.mesh = new THREE.Mesh(props.geometry, defaults.materials.mesh);\n\t\tthis.mesh.geometry.computeBoundingBox();\n\t\tthis.mesh.geometry.computeBoundingSphere();\n\t\t// this.mesh.geometry.computeVertexNormals();\n\t\tconst tempmesh = new THREE.Mesh(props.geometry.clone(), undefined);\n\t\ttempmesh.geometry.computeVertexNormals()\n\t\tthis.vertexNormals = new THREE.VertexNormalsHelper(tempmesh, 0.25, 0xff0000, 1);\n\t\t\n\t\tthis.triangles = chunk(chunk(Array.from((props.geometry.getAttribute('position') as THREE.BufferAttribute).array), 3), 3);\n\t\tthis._triangles = this.triangles.map(x => new THREE.Triangle(\n\t\t\tnew THREE.Vector3(...x[0]),\n\t\t\tnew THREE.Vector3(...x[1]),\n\t\t\tnew THREE.Vector3(...x[2]),\n\t\t));\n\t\t\n\t\tthis.selectedMaterial = defaults.materials.selected;\n\t\tthis.normalMaterial = defaults.materials.mesh;\n\t\tthis.normalColor = new THREE.Color(0xaaaaaa);\n\t\tthis.select = this.select.bind(this);\n\t\tthis.select = this.deselect.bind(this);\n\t\t\n\t\t// console.log(this.triangles);\n\t\tconst dict = {} as KeyValuePair<KeepLine>;\n\t\tthis.triangles.forEach(tri => {\n\t\t\tfor (let i = 0; i < 3; i++) {\n\t\t\t\tconst line = [tri[i], tri[(i + 1) % 3]];\n\t\t\t\tconst key = JSON.stringify(line.sort());\n\t\t\t\tif (!dict[key]) {\n\t\t\t\t\tdict[key] = {\n\t\t\t\t\t\tkeep: true,\n\t\t\t\t\t\tline: line\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdict[key].keep = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst segments = new THREE.Geometry();\n\t\tconst edges = Object.keys(dict).reduce((a, b: string) => {\n\t\t\tif (dict[b].keep) {\n\t\t\t\ta.push(dict[b].line);\n\t\t\t}\n\t\t\treturn a;\n\t\t}, [] as number[][][]).forEach(edge => {\n\t\t\tedge.forEach(vert => {\n\t\t\t\tsegments.vertices.push(new THREE.Vector3(vert[0], vert[1], vert[2]));\n\t\t\t});\n\t\t});\n\t\tthis.edges = new THREE.LineSegments(segments, defaults.materials.line);\n\n\t\t\n\t\tthis.add(this.mesh);\n\t\tthis.mesh.visible = this.fillSurface;\n\t\tthis.add(this.wire);\n\t\tthis.wire.visible = this.displayInternalEdges;\n\t\tthis.add(this.edges);\n\t\tthis.edges.visible = this.displayEdges;\n\t\tthis.add(this.vertexNormals);\n\t\tthis.vertexNormals.visible = this._displayVertexNormals;\n\t\t\n\t\t// this.absorption = [0.05, 0.15, 0.10, 0.05, 0.04, 0.07, 0.09, 0.09];\n\t\tthis.absorption = [0.00,0.04,0.23,0.52,0.90,0.94,0.66,0.66];\n\t\tconst freq = [63, 125, 250, 500, 1000., 2000, 4000, 8000];\n\t\tthis.absorptionFunction = interpolateAlpha(this.absorption, freq);\n\t\tthis.reflectionFunction = (freq, theta) => reflectionCoefficient(this.absorptionFunction(freq), theta);\n\t\tthis.acousticMaterial = props.acousticMaterial;\n\t\tthis.brdf = [] as BRDF[];\n\t\tfor (const key in this.acousticMaterial.absorption){\n\t\t\tthis.brdf.push(new BRDF({\n\t\t\t\tabsorptionCoefficient: this.acousticMaterial.absorption[key],\n\t\t\t\tdiffusionCoefficient: 0.1\n\t\t\t}));\t\n\t\t}\n\t\t\n\t\tthis.select = () => {\n\t\t\tthis.selected = true;\n\t\t\t(this.mesh\n\t\t\t\t.material as THREE.MeshPhysicalMaterial | THREE.ShaderMaterial) = this.selectedMaterial;\n\t\t\t(this.mesh.material as THREE.MeshPhysicalMaterial).needsUpdate = true;\n\t\t\t// setInterval(() => {\n\t\t\t// \t//@ts-ignore\n\t\t\t// \t(this.mesh.material as THREE.ShaderMaterial).uniforms[\"time\"] += 1;\n\t\t\t// }, 16);\n\t\t};\n\t\tthis.deselect = () => {\n\t\t\tthis.selected = false;\n\t\t\t(this.mesh\n\t\t\t\t.material as THREE.MeshPhysicalMaterial) = this.normalMaterial;\n\t\t\t(this.mesh.material as THREE.MeshPhysicalMaterial).needsUpdate = true;\n\t\t};\n\t\tthis.getArea();\n\t}\n\tget acousticMaterial() {\n\t\treturn this._acousticMaterial;\n\t}\n\tset acousticMaterial(material: AcousticMaterial) {\n\t\tthis._acousticMaterial = material;\n\t\tconst freq = Object.keys(this._acousticMaterial.absorption).map(x => Number(x));\n\t\tthis.absorption = freq.map(x => this._acousticMaterial.absorption[String(x)]);\n\t\tthis.absorptionFunction = interpolateAlpha(this.absorption, freq);\n    this.reflectionFunction = (freq, theta) =>\n      reflectionCoefficient(this.absorptionFunction(freq), theta);\n    this.brdf = [] as BRDF[];\n    for (const key in this.acousticMaterial.absorption) {\n      this.brdf.push(\n        new BRDF({\n          absorptionCoefficient: this.acousticMaterial.absorption[key],\n          diffusionCoefficient: 0.1\n        })\n      );\n    }\n\t}\n\tgetArea() {\n\t\tthis.area = 0;\n\t\tfor (let i = 0; i < this._triangles.length; i++){\n\t\t\tthis.area += this._triangles[i].getArea();\n\t\t}\n\t\treturn this.area;\n\t}\n\tgetEdges() {\n\t\treturn this.edges;\n\t}\n\tget displayVertexNormals() {\n\t\treturn this.vertexNormals.visible;\n\t}\n\tset displayVertexNormals(displayVertexNormals: boolean) {\n\t\tthis.vertexNormals.visible = displayVertexNormals\n\t}\n\tget geometry() {\n\t\treturn this.mesh.geometry;\n\t}\n\tget faces() {\n\t\treturn this._triangles;\n\t}\n}\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\nimport Surface from '../../objects/surface';\nimport GridRowSeperator from \"../GridRowSeperator\";\n\nimport AutoCompleteTextInput from '../AutoCompleteTextInput';\nimport Messenger from \"../../messenger\";\nimport { Button, Tag } from \"@blueprintjs/core\";\n\n\n\nexport interface SurfacePropertiesProps {\n\tobject: Surface;\n\tmessenger: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n  onPropertyValueChangeAsNumber: (\n    id: string,\n    prop: string,\n    valueAsNumber: number\n  ) => void;\n  onPropertyValueChangeAsString: (\n    id: string,\n    prop: string,\n    valueAsString: string\n  ) => void;\n}\n\n\n// const MaterialMultiSelect = MultiSelect.ofType<AcousticMaterial>();\n\nconst SurfacePropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\nconst customStyles = {\n  indicatorsContainer: (provided, state) => ({\n    ...provided,\n    padding: 0\n  }),\n  clearIndicator: (provided, state) => ({\n    ...provided,\n    padding: 0\n  }),\n  dropdownIndicator: (provided, state) => ({\n    ...provided,\n    padding: 0\n  }),\n  control: (provided, state) => ({\n    ...provided,\n    minHeight: 0\n  }),\n  container: (provided, state) => ({\n    ...provided,\n    width: \"100%\"\n  })\n};\n\n\n\n\n\n\nexport default function SurfaceProperties(props: SurfacePropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\tasync function getMaterialSuggestions(value: string) {\n\t\tconst materials = props.messenger.postMessage(\"SEARCH_ALL_MATERIALS\", value)[0];\n\n\t\treturn new Promise<any[]>((resolve, reject) => { \n\t\t\tlet res = materials;\n\t\t\tif (res) {\n\t\t\t\tresolve(res);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treject(\"problem occured\")\n\t\t\t}\n\t\t})\n\t}\n\n\t\n\treturn (\n    <div>\n      <div style={SurfacePropertiesContainerStyle}>\n        {props.object.hasOwnProperty(\"name\") && (\n          <GridRow label={\"name\"}>\n            <TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"visible\") && (\n          <GridRow label={\"visible\"}>\n            <CheckboxInput name=\"visible\" checked={props.object.visible} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"_displayVertexNormals\") && (\n          <GridRow label={\"vertex normals\"}>\n            <CheckboxInput name=\"displayVertexNormals\" checked={props.object.displayVertexNormals} onChange={props.onPropertyChange} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"position\") && (\n          <GridRow label={\"position\"}>\n            <NumberInput name=\"x\" value={props.object.position.x} {...XYZProps} />\n            <NumberInput name=\"y\" value={props.object.position.y} {...XYZProps} />\n            <NumberInput name=\"z\" value={props.object.position.z} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"scale\") && (\n          <GridRow label={\"scale\"}>\n            <NumberInput name=\"scalex\" value={props.object.scale.x} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scaley\" value={props.object.scale.y} min={10e-10} {...XYZProps} />\n            <NumberInput name=\"scalez\" value={props.object.scale.z} min={10e-10} {...XYZProps} />\n          </GridRow>\n        )}\n\n        {props.object.hasOwnProperty(\"rotation\") && (\n          <GridRow label={\"rotation\"}>\n            <NumberInput name=\"rotationx\" value={props.object.rotation.x} {...XYZProps} />\n            <NumberInput name=\"rotationy\" value={props.object.rotation.y} {...XYZProps} />\n            <NumberInput name=\"rotationz\" value={props.object.rotation.z} {...XYZProps} />\n          </GridRow>\n        )}\n        <GridRowSeperator marginBottom={\".125em\"} />\n        <GridRow\n          label=\"material\"\n          style={{\n            display: \"unset\"\n          }}>\n          {/* <AutoCompleteTextInput\n\t\t\t\t\t\tgetSuggestions={async (value: string) => {\n\t\t\t\t\t\t\treturn await getMaterialSuggestions(value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tgetSuggestionValue={(suggestion => suggestion.name)}\n\t\t\t\t\t\trenderSuggestion={suggestion => (\n\t\t\t\t\t\t\t<div className=\"material-suggestion\">{suggestion.material}</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tonChange={(value: string) => console.log(value)}\n\t\t\t\t\t/> */}\n          {props.object instanceof Surface && (props.object as Surface) && (\n            // (<Button text={props.object.acousticMaterial.name} minimal={true} />)\n            <>\n              <Tag\n              // onRemove={removable && onRemove}\n              // icon={icon === true ? \"home\" : undefined}\n              >\n                {props.object.acousticMaterial.name}\n              </Tag>\n              <Button icon=\"edit\" minimal small onClick={(e) => props.messenger.postMessage(\"OPEN_MATERIAL_SEARCH\", props.object)} />\n            </>\n          )}\n        </GridRow>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport TextInput from \"../TextInput\";\nimport NumberInput, { ObjectPropertyInputEvent } from \"../NumberInput\";\nimport CheckboxInput from \"../CheckboxInput\";\nimport Source from '../../objects/source';\nimport GridRow from '../GridRow';\n\nexport interface GenericObjectPropertiesProps {\n\tobject: Source;\n    onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n\tonPropertyValueChangeAsNumber: (id: string, prop: string, valueAsNumber: number) => void;\n\tonPropertyValueChangeAsString: (id: string, prop: string, valueAsString: string) => void;\n}\n\n\n\nconst GenericObjectPropertiesContainerStyle: React.CSSProperties = {\n\tdisplay: \"grid\",\n\tgridTemplateColumns: \"auto auto\",\n\tpadding: \".25em\",\n\tgridRowGap: \".25em\",\n\tgridColumnGap: \".25em\"\n};\n\n\nexport default function GenericObjectProperties(props: GenericObjectPropertiesProps) {\n\n\tconst XYZProps = {\n    style: {\n\t\t  width: \"30%\"\n\t  },\n    onChange: props.onPropertyChange\n\t}\n\t\n\t\n\treturn (\n\t\t<div>\n\t\t\t<div style={GenericObjectPropertiesContainerStyle}>\n\t\t\t\t{props.object.hasOwnProperty('name') && (\n\t\t\t\t\t<GridRow label={\"name\"}>\n\t\t\t\t\t\t<TextInput name=\"name\" value={props.object.name} onChange={props.onPropertyChange} />\n\t\t\t\t\t</GridRow>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, {useState} from \"react\";\nimport TabUnselectedIcon from '@material-ui/icons/TabUnselected';\nimport FDTDProperties, { FDTDPropertiesProps } from './FDTDProperties';\nimport SourceProperties, { SourcePropertiesProps } from './SourceProperties';\nimport ReceiverProperties, { ReceiverPropertiesProps } from './ReceiverProperties';\nimport RayTracerProperties, {RayTracerPropertiesProps} from './RayTracerProperties';\nimport RoomProperties, { RoomPropertiesProps } from './RoomProperties';\nimport RT60Properties, { RT60PropertiesProps } from \"./RT60Properties\";\nimport SurfaceProperties, { SurfacePropertiesProps } from './SurfaceProperties';\nimport GenericObjectProperties, { GenericObjectPropertiesProps } from './GenericObjectProperties';\nimport Container from \"../../objects/container\";\nimport Solver from \"../../compute/solver\";\nimport Messenger from \"../../messenger\";\nimport { ObjectPropertyInputEvent } from \"../NumberInput\";\n\n\nexport interface ObjectPropertiesProps {\n  object: Container | Solver;\n  messenger?: Messenger;\n  onPropertyChange: (e: ObjectPropertyInputEvent) => void;\n\tonPropertyValueChangeAsNumber: (id: string, prop: string, valueAsNumber: number) => void;\n  onPropertyValueChangeAsString: (id: string, prop: string, valueAsString: string) => void;\n  onButtonClick?: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n}\n\nexport interface ObjectPropertiesState{\n}\n\nexport default class ObjectProperties extends React.Component<ObjectPropertiesProps, ObjectPropertiesState>{\n  constructor(props: ObjectPropertiesProps) {\n    super(props);\n    this.state = {\n    }\n  }\n  shouldComponentUpdate(nextProps: Readonly<ObjectPropertiesProps>, nextState: Readonly<ObjectPropertiesState>, nextContext: any) {\n    return true\n  }\n  render() {\n    switch (this.props.object.kind) {\n      case \"source\": return <SourceProperties {...this.props as SourcePropertiesProps} />;\n      case \"receiver\": return <ReceiverProperties {...this.props as ReceiverPropertiesProps} />;\n      case \"room\": return <RoomProperties {...this.props as RoomPropertiesProps} />;\n      case \"surface\": return <SurfaceProperties {...this.props as SurfacePropertiesProps} />;\n      case \"fdtd\": return <FDTDProperties {...this.props as FDTDPropertiesProps} />;\n      case \"ray-tracer\": return <RayTracerProperties {...this.props as RayTracerPropertiesProps} />;\n      case \"rt60\": return <RT60Properties {...(this.props as RT60PropertiesProps)} />;\n  \n      default: return <GenericObjectProperties {...this.props as GenericObjectPropertiesProps} />;\n    }\n  }\n}","import React from \"react\";\n\nimport { Drawer, Position, InputGroup, Button } from \"@blueprintjs/core\";\nimport { Setting } from \"../common/setting\";\n\nimport { KeyValuePair } from \"../common/key-value-pair\";\n\nimport \"./SettingsDrawer.css\";\n\nexport interface SettingsDrawerProps {\n  size: number | string;\n  onClose: (\n    event?: React.SyntheticEvent<HTMLElement, Event> | undefined\n  ) => void;\n  isOpen: boolean;\n  children?: React.ReactNode | React.ReactNode[];\n  onSubmit?: (((event: React.MouseEvent<HTMLElement, MouseEvent>) => void) & ((event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void))\n}\n\n\nexport default function SettingsDrawer(props: SettingsDrawerProps) {\n  return (\n    <Drawer\n      position={Position.RIGHT}\n      size={props.size || \"35%\"}\n      autoFocus={true}\n      enforceFocus={true}\n      hasBackdrop={true}\n      onClose={props.onClose}\n      canOutsideClickClose={true}\n      canEscapeKeyClose={true}\n      isCloseButtonShown={true}\n      title={\n        <div className=\"settings-title-bar\">\n          <div className=\"settings-title-bar-title\">Settings</div>\n\t\t\t\t\t<div className=\"settings-title-bar-apply\">\n\t\t\t\t\t\t<Button text=\"Apply\" rightIcon=\"small-tick\" minimal intent=\"success\" style={{\n\t\t\t\t\t\t\tdisplay: \"inline\"\n\t\t\t\t\t\t}} onClick={props.onSubmit}/>\n\t\t\t\t\t</div>\n        </div>\n      }\n      isOpen={props.isOpen}>\n      {props.children}\n    </Drawer>\n  );\n}\n","import {uuid} from 'uuidv4';\n\n\n\n\nexport interface SolverParams{\n    [key: string]: any;\n    name?: string;\n}\n\nexport default class Solver{\n    params: SolverParams\n    name: string;\n    uuid: string;\n    kind: string;\n    running: boolean;\n    update!: () => void;\n    clearpass: boolean;\n    constructor(params?: SolverParams) {\n        this.params = params || {};\n        this.name = (params && params.name) || \"untitled solver\";\n        this.kind = \"solver\";\n        this.uuid = uuid();\n        this.running = false;\n        this.clearpass = false;\n        this.update = () => { };\n    }\n}","const {cos} = Math;\n\nexport function scatteredEnergy(\n  incomingEnergy: number,\n  absorptionCoefficient: number,\n  scatteringCoefficient: number,\n  /**\n   * fov angle of the receiver\n   */\n  gamma: number,\n  /**\n   * angle between the surface normal and the center of the receiver\n   */\n  theta: number,\n  \n) {\n  return incomingEnergy\n    * (1 - absorptionCoefficient)\n    * scatteringCoefficient\n    * (1 - cos(gamma / 2))\n    * 2\n    * cos(theta);\n}","export default \"attribute vec2 color;\\nvarying vec2 vColor;\\nuniform float pointScale;\\nvoid main() {\\n  vColor = color;\\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n  gl_PointSize = pointScale*(color.x/4.0+0.5);\\n  gl_Position = projectionMatrix * mvPosition;\\n  \\n}\";","//@ts-ignore\nimport vs from \"!raw-loader!./shader.vert\";\n//@ts-ignore\nimport fs from \"!raw-loader!./shader.frag\";\n\nexport default {\n  vs,\n  fs\n};\n","export default \"varying vec2 vColor;\\nuniform float drawStyle;\\nuniform int inverted;\\nvec3 hsl2rgb(vec3 c)\\n{\\n    vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\\n\\n    return c.z + c.y * (rgb-0.5)*(1.0-abs(2.0*c.z-1.0));\\n}\\n\\nvec3 rgb2hsl( vec3 c ){\\n  float h = 0.0;\\n\\tfloat s = 0.0;\\n\\tfloat l = 0.0;\\n\\tfloat r = c.r;\\n\\tfloat g = c.g;\\n\\tfloat b = c.b;\\n\\tfloat cMin = min( r, min( g, b ) );\\n\\tfloat cMax = max( r, max( g, b ) );\\n\\n\\tl = ( cMax + cMin ) / 2.0;\\n\\tif ( cMax > cMin ) {\\n\\t\\tfloat cDelta = cMax - cMin;\\n        \\n        //s = l < .05 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) ); Original\\n\\t\\ts = l < .0 ? cDelta / ( cMax + cMin ) : cDelta / ( 2.0 - ( cMax + cMin ) );\\n        \\n\\t\\tif ( r == cMax ) {\\n\\t\\t\\th = ( g - b ) / cDelta;\\n\\t\\t} else if ( g == cMax ) {\\n\\t\\t\\th = 2.0 + ( b - r ) / cDelta;\\n\\t\\t} else {\\n\\t\\t\\th = 4.0 + ( r - g ) / cDelta;\\n\\t\\t}\\n\\n\\t\\tif ( h < 0.0) {\\n\\t\\t\\th += 6.0;\\n\\t\\t}\\n\\t\\th = h / 6.0;\\n\\t}\\n\\treturn vec3( h, s, l );\\n}\\n\\nvoid main() {\\n  vec3 color = vec3(0.0);\\n\\tfloat alpha = vColor.x;\\n  if(drawStyle == 0.0){\\n    vec3 col = hsl2rgb(vec3(vColor.x/10.0,0.8, vColor.x));\\n    color = col;\\n\\t\\talpha = vColor.x;\\n  }\\n  else if(drawStyle == 1.0){\\n    vec3 col = hsl2rgb(vec3(vColor.y,vColor.x,vColor.y));\\n    vec3 col2 = vec3(vColor.x,vColor.x,1.0-vColor.y);\\n    color = col*col2;\\n\\t\\talpha = vColor.x;\\n  }\\n\\tif(inverted != 0){\\n\\t\\tcolor = vec3(1.0) - color;\\n\\t}\\n  gl_FragColor = vec4(color, alpha);\\n  \\n}\";","import Solver from \"../solver\";\nimport * as THREE from \"three\";\nimport Room from \"../../objects/room\";\nimport { KeyValuePair } from \"../../common/key-value-pair\";\nimport Container from \"../../objects/container\";\nimport enumerable from \"../../common/enumerable\";\nimport { computeBoundsTree, disposeBoundsTree, acceleratedRaycast } from \"three-mesh-bvh\";\nimport Source from \"../../objects/source\";\nimport Renderer from \"../../render/renderer\";\nimport Surface from \"../../objects/surface\";\nimport Receiver from \"../../objects/receiver\";\nimport { Stat } from \"../../components/Gutter/Stats\";\nimport Messenger from \"../../messenger\";\nimport sort from \"fast-sort\";\n// import * as ac from '../acoustics'\nimport FileSaver from \"file-saver\";\nimport { scatteredEnergy } from \"./scattered-energy\";\nimport PointShader from \"./shaders/points\";\n\nimport wasmInit from \"../../as/wasm-init\";\nimport loader from '@assemblyscript/loader';\n\n\n//@ts-ignore\nTHREE.BufferGeometry.prototype.computeBoundsTree = computeBoundsTree;\n//@ts-ignore\nTHREE.BufferGeometry.prototype.disposeBoundsTree = disposeBoundsTree;\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nexport interface Chain {\n  angle_in: number;\n  angle_out: number;\n  total_time: number;\n  time_rec: number;\n  angle_rec: number;\n  distance: number;\n  point: THREE.Vector3;\n  object: THREE.Object3D;\n  face: THREE.Face3;\n  faceIndex: number;\n}\nconst { abs, floor, asin } = Math;\n\n\nexport interface RayPath {\n  intersectedReceiver: boolean;\n  chain: Chain[];\n  energy: number;\n  time?: number;\n  source: string;\n}\nexport interface EnergyTime {\n  time: number;\n  energy: {\n    frequency: number;\n    value: number;\n  }[];\n}\n    // helper type\nexport type ChartData = {\n  label: string;\n  data: number[][];\n  x?: number[];\n  y?: number[];\n};\n\nexport interface ReceiverData {\n  id: string;\n  data: EnergyTime[];\n}\nexport class ReceiverData {\n  constructor(id: string) {\n    this.id = id;\n    this.data = [] as EnergyTime[];\n  }\n}\nexport interface RayTracerParams {\n  renderer;\n  name?: string;\n  roomID?: string;\n  sourceIDs?: string[];\n  surfaceIDs?: string[];\n  containers?: KeyValuePair<Container>;\n  receiverIDs?: string[];\n  updateInterval?: number;\n  passes?: number;\n  pointSize?: number;\n  reflectionOrder?: number;\n  _isRunning?: boolean;\n  messenger: Messenger;\n  runWithoutReceiver?: boolean;\n  raysVisible?: boolean;\n  invertedDrawStyle?: boolean;\n}\nexport const defaults = {\n  name: \"ray-tracer\",\n  roomID: \"\",\n  sourceIDs: [] as string[],\n  surfaceIDs: [] as string[],\n  containers: {} as KeyValuePair<Container>,\n  receiverIDs: [] as string[],\n  updateInterval: 20,\n  reflectionOrder: 200,\n  _isRunning: false,\n  runWithoutReceiver: false,\n  passes: 1,\n  pointSize: 2,\n  raysVisible: true,\n  invertedDrawStyle: false\n  \n};\nexport enum DRAWSTYLE {\n  ENERGY = 0.0,\n  ANGLE = 1.0,\n  ANGLE_ENERGY = 2.0\n}\nexport interface DrawStyle {\n  ANGLE: 0.0;\n  ENERGY: 1.0;\n  ANGLE_ENERGY: 2.0;\n}\nexport default class RayTracer extends Solver {\n  roomID: string;\n  sourceIDs: string[];\n  containers: KeyValuePair<Container | Room>;\n  surfaceIDs: string[];\n  receiverIDs: string[];\n  updateInterval: number;\n  reflectionOrder: number;\n  raycaster: THREE.Raycaster;\n  intersections: THREE.Intersection[];\n  _isRunning: boolean;\n  intervals: NodeJS.Timeout[];\n  rayBufferGeometry: THREE.BufferGeometry;\n  rayBufferAttribute: THREE.Float32BufferAttribute;\n  colorBufferAttribute: THREE.Float32BufferAttribute;\n  rays: THREE.LineSegments;\n  rayPositionIndex: number;\n  maxrays: number;\n  renderer: Renderer;\n  intersectableObjects: Array<THREE.Mesh | THREE.Object3D | Container>;\n  paths: KeyValuePair<RayPath[]>;\n  stats: KeyValuePair<Stat>;\n  messenger: Messenger;\n  messageHandlerIDs: string[][];\n  statsUpdatePeriod: number;\n  lastTime: number;\n  runWithoutReceiver: boolean;\n  reflectionLossFrequencies: number[];\n  allReceiverData!: ReceiverData[];\n  hits: THREE.Points;\n  _pointSize: number;\n  chartdata: ChartData[];\n  passes: number;\n  _raysVisible: boolean;\n  _invertedDrawStyle: boolean;\n  __start_time!: number;\n  __calc_time!: number;\n  __num_checked_paths!: number;\n  constructor(params: RayTracerParams) {\n    super(params);\n    this.kind = \"ray-tracer\";\n    this.sourceIDs = params.sourceIDs || defaults.sourceIDs;\n    this.surfaceIDs = params.surfaceIDs || defaults.surfaceIDs;\n    this.roomID = params.roomID || defaults.roomID;\n    this.containers = params.containers || defaults.containers;\n    this.receiverIDs = params.receiverIDs || defaults.receiverIDs;\n    this.updateInterval = params.updateInterval || defaults.updateInterval;\n    this.reflectionOrder = params.reflectionOrder || defaults.reflectionOrder;\n    this._isRunning = params._isRunning || defaults._isRunning;\n    this.runWithoutReceiver = params.runWithoutReceiver || defaults.runWithoutReceiver;\n    this.renderer = params.renderer;\n    this.reflectionLossFrequencies = [4000];\n    this.intervals = [];\n    this.lastTime = Date.now();\n    this.statsUpdatePeriod = 100;\n    this._pointSize = params.pointSize || defaults.pointSize;\n    \n    const paramsHasRaysVisible = typeof params.raysVisible === \"boolean\";\n    this._raysVisible = paramsHasRaysVisible ? params.raysVisible! : defaults.raysVisible;\n\n    const paramsHasInvertedDrawStyle = typeof params.invertedDrawStyle === \"boolean\";\n    this._invertedDrawStyle = paramsHasInvertedDrawStyle ? params.invertedDrawStyle! : defaults.invertedDrawStyle;\n    \n    this.passes = params.passes || defaults.passes;\n    this.raycaster = new THREE.Raycaster();\n    this.rayBufferGeometry = new THREE.BufferGeometry();\n    this.maxrays = 1e6 - 1;\n    this.rayBufferAttribute = new THREE.Float32BufferAttribute(new Float32Array(this.maxrays), 3);\n    this.rayBufferAttribute.setUsage(THREE.DynamicDrawUsage);\n    this.rayBufferGeometry.setAttribute(\"position\", this.rayBufferAttribute);\n    this.rayBufferGeometry.setDrawRange(0, this.maxrays);\n    this.colorBufferAttribute = new THREE.Float32BufferAttribute(new Float32Array(this.maxrays), 2);\n    this.colorBufferAttribute.setUsage(THREE.DynamicDrawUsage);\n    this.rayBufferGeometry.setAttribute(\"color\", this.colorBufferAttribute);\n    this.chartdata = [] as ChartData[];\n    this.rays = new THREE.LineSegments(\n      this.rayBufferGeometry,\n      new THREE.LineBasicMaterial({\n        color: 0x282929,\n        transparent: true,\n        opacity: 0.2,\n        premultipliedAlpha: true,\n        blending: THREE.NormalBlending\n\n        // depthTest: false\n      })\n    );\n    this.rays.frustumCulled = false;\n    this.renderer.scene.add(this.rays);\n    var shaderMaterial = new THREE.ShaderMaterial({\n      vertexShader: PointShader.vs,\n      fragmentShader: PointShader.fs,\n      transparent: true,\n      premultipliedAlpha: true,\n      uniforms: {\n        drawStyle: { value: DRAWSTYLE.ENERGY },\n        inverted: { value: 0.0 },\n        pointScale: { value: this._pointSize }\n      },\n      blending: THREE.NormalBlending\n    });\n    var pointsMaterial = new THREE.PointsMaterial({\n      color: 0xff0000,\n      transparent: true,\n      opacity: 0.2,\n      premultipliedAlpha: true,\n      blending: THREE.NormalBlending\n    });\n    this.hits = new THREE.Points(this.rayBufferGeometry, shaderMaterial);\n    this.hits.frustumCulled = false;\n    this.renderer.scene.add(this.hits);\n    this.rayPositionIndex = 0;\n    Object.defineProperty(this.raycaster, \"firstHitOnly\", {\n      value: true,\n      writable: true\n    });\n\n    // raycaster.intersectObjects([mesh]);\n    this.intersections = [] as THREE.Intersection[];\n    this.findIDs();\n    this.intersectableObjects = this.mapIntersectableObjects();\n    this.paths = {} as KeyValuePair<RayPath[]>;\n    this.stats = {\n      numRaysShot: {\n        name: \"# of rays shot\",\n        value: 0\n      },\n      numValidRayPaths: {\n        name: \"# of valid rays\",\n        value: 0\n      }\n    };\n    this.messenger = params.messenger;\n    this.messageHandlerIDs = [] as string[][];\n    this.messenger.postMessage(\"STATS_SETUP\", this.stats);\n    this.messageHandlerIDs.push(this.messenger.addMessageHandler(\"RAYTRACER_SOURCE_CHANGE\", (acc, ...args) => {\n      console.log(args && args[0] && args[0] instanceof Array && args[1] && args[1] === this.uuid)\n      if (args && args[0] && args[0] instanceof Array && args[1] && args[1] === this.uuid) {\n        this.sourceIDs = args[0].map(x => x.id);\n      }\n    }));\n    this.messageHandlerIDs.push(this.messenger.addMessageHandler(\"RAYTRACER_RECEIVER_CHANGE\", (acc, ...args) => {\n      if (args && args[0] && args[0] instanceof Array && args[1] && args[1] === this.uuid) {\n        this.receiverIDs = args[0].map(x => x.id);\n      }\n    }));\n    this.messageHandlerIDs.push(this.messenger.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\", (acc, ...args) => {\n      const id = args[0];\n      if (id) {\n        console.log(id);\n        if (this.sourceIDs.includes(id)) {\n          this.sourceIDs = this.sourceIDs.filter(x => x != id);\n        }\n        else if (this.receiverIDs.includes(id)) {\n          this.receiverIDs = this.receiverIDs.filter(x => x != id);\n        }\n      }\n    }));\n    this.step = this.step.bind(this);\n  }\n  update = () => {};\n  get sources() {\n    if (this.sourceIDs.length > 0) {\n      return this.sourceIDs.map(x => this.containers[x]);\n    }\n    else {\n      return [];\n    }\n  }\n  get receivers() {\n    if (this.receiverIDs.length > 0 && Object.keys(this.containers).length > 0) {\n      if (this.containers) {\n        console.log(this.containers);\n      }\n      return this.receiverIDs.map(x => (this.containers[x] as Receiver).mesh) as THREE.Mesh[];\n    }\n    else return [];\n  }\n  get room(): Room {\n    return this.containers[this.roomID] as Room;\n  }\n  removeMessageHandlers() {\n    this.messageHandlerIDs.forEach(x => {\n      this.messenger.removeMessageHandler(x[0], x[1]);\n    });\n  }\n  addSource(source: Source) {\n    this.containers[source.uuid] = source;\n    this.findIDs();\n    this.intersectableObjects = this.mapIntersectableObjects();\n  }\n  addReceiver(rec: Receiver) {\n    this.containers[rec.uuid] = rec;\n    this.findIDs();\n    this.intersectableObjects = this.mapIntersectableObjects();\n  }\n  mapIntersectableObjects() {\n    return this.room.surfaces.children.map((x: Surface) => x.mesh).concat(this.receivers);\n  }\n  findIDs() {\n    this.sourceIDs = [];\n    this.receiverIDs = [];\n    this.surfaceIDs = [];\n    for (const key in this.containers) {\n      if (this.containers[key].kind === \"room\") {\n        this.roomID = key;\n      } else if (this.containers[key].kind === \"source\") {\n        this.sourceIDs.push(key);\n      } else if (this.containers[key].kind === \"receiver\") {\n        this.receiverIDs.push(key);\n      } else if (this.containers[key].kind === \"surface\") {\n        this.surfaceIDs.push(key);\n      }\n    }\n  }\n  get isRunning() {\n    return this.running;\n  }\n  set isRunning(isRunning: boolean) {\n    this.running = this.precheck && isRunning;\n    if (this.running) {\n      this.start();\n    } else {\n      this.stop();\n    }\n  }\n  \n  get raysVisible() {\n    return this._raysVisible\n  }\n  set raysVisible(visible: boolean) {\n    if (visible != this._raysVisible) {\n      this._raysVisible = visible;\n      this.rays.visible = visible;\n    }\n  }\n  \n  get invertedDrawStyle() {\n    return this._invertedDrawStyle;\n  }\n  set invertedDrawStyle(inverted: boolean) {\n    if (this._invertedDrawStyle != inverted) {\n      this._invertedDrawStyle = inverted;\n      (this.hits.material as THREE.ShaderMaterial).uniforms[\"inverted\"].value = Number(inverted);\n      (this.hits.material as THREE.ShaderMaterial).needsUpdate = true;\n    }\n  }\n  \n  get pointSize() {\n    return this._pointSize;\n  }\n  \n  set pointSize(size: number) {\n    if (Number.isFinite(size) && size > 0) {\n      this._pointSize = size;\n      (this.hits.material as THREE.ShaderMaterial).uniforms[\"pointScale\"].value = this._pointSize;\n      (this.hits.material as THREE.ShaderMaterial).needsUpdate = true;\n    }\n  }\n  \n  setDrawStyle(drawStyle: number) {\n    (this.hits.material as THREE.ShaderMaterial).uniforms[\"drawStyle\"].value = drawStyle;\n    (this.hits.material as THREE.ShaderMaterial).needsUpdate = true;\n  }\n  \n\n  \n  setPointScale(scale: number) {\n    this._pointSize = scale;\n    (this.hits.material as THREE.ShaderMaterial).uniforms[\"pointScale\"].value = this._pointSize;\n    (this.hits.material as THREE.ShaderMaterial).needsUpdate = true;\n  }\n  \n  clearRays() {\n    this.rayBufferGeometry.setDrawRange(0, 1);\n    this.rayPositionIndex = 0;\n    this.stats.numRaysShot.value = 0;\n    this.stats.numValidRayPaths.value = 0;\n    this.messenger.postMessage(\"STATS_UPDATE\", this.stats);\n    this.sourceIDs.forEach(x => {\n      (this.containers[x] as Source).numRays = 0;\n    });\n    this.paths = {} as KeyValuePair<RayPath[]>;\n  }\n  \n  \n  appendRay(p1: THREE.Vector3, p2: THREE.Vector3, energy: number = 1.0, angle: number = 1.0) {\n\n    // set p1\n    this.rayBufferAttribute.setXYZ(this.rayPositionIndex++, p1.x, p1.y, p1.z);\n\n    // set the color\n    this.colorBufferAttribute.setXY(this.rayPositionIndex, energy, angle);\n\n    // set p2\n    this.rayBufferAttribute.setXYZ(this.rayPositionIndex++, p2.x, p2.y, p2.z);\n\n    // set the color\n    this.colorBufferAttribute.setXY(this.rayPositionIndex, energy, angle);\n\n    //update the draw range\n    this.rayBufferGeometry.setDrawRange(0, this.rayPositionIndex);\n\n    // update three.js\n    this.rayBufferAttribute.needsUpdate = true;\n\n    //update version\n    this.rayBufferAttribute.version++;\n\n    // update three.js\n    this.colorBufferAttribute.needsUpdate = true;\n\n    //update version\n    this.colorBufferAttribute.version++;\n  }\n\n  inFrontOf(a: THREE.Triangle, b: THREE.Triangle) {\n    const plane = a.getPlane(new THREE.Plane());\n    const pleq = new THREE.Vector4(plane.normal.x, plane.normal.y, plane.normal.z, plane.constant);\n    const avec4 = new THREE.Vector4(b.a.x, b.a.y, b.a.z, 1);\n    const bvec4 = new THREE.Vector4(b.b.x, b.b.y, b.b.z, 1);\n    const cvec4 = new THREE.Vector4(b.c.x, b.c.y, b.c.z, 1);\n    return pleq.dot(avec4) > 0 || pleq.dot(bvec4) > 0 || pleq.dot(cvec4) > 0;\n  }\n\n  \n  traceRay(ro: THREE.Vector3, rd: THREE.Vector3, order: number, energy: number, source: string, iter: number = 1, chain: THREE.Intersection[] = [], frequency = 4000) {\n\n    // normalize the ray\n    rd = rd.normalize();\n\n    // set the starting position\n    this.raycaster.ray.origin = ro;\n\n    // set the direction\n    this.raycaster.ray.direction = rd;\n\n    // console.log(\"dir\",this.raycaster.ray.direction);\n\n    // find the surface that the ray intersects\n    const intersections = this.raycaster.intersectObjects(this.intersectableObjects, true);\n\n    // if there was an intersection\n    if (intersections.length > 0) {\n\n      // console.log(\"itx\",intersections[0].point)\n\n      //check to see if the intersection was with a receiver\n      if (intersections[0].object.userData?.kind === \"receiver\") {\n\n        // find the incident angle\n        const angle =\n          intersections[0].face &&\n          rd\n            .clone()\n            .multiplyScalar(-1)\n            .angleTo(intersections[0].face.normal);\n\n        // push the intersection data onto the chain\n        chain.push({\n          energy,\n          angle,\n          ...intersections[0]\n        } as THREE.Intersection);\n\n        // end the chain here\n        return {\n          chain,\n          intersectedReceiver: true,\n          energy,\n          source\n        } as RayPath;\n      } else {\n\n        // find the incident angle\n        const angle =\n          intersections[0].face &&\n          rd\n            .clone()\n            .multiplyScalar(-1)\n            .angleTo(intersections[0].face.normal);\n\n        // push the intersection onto the chain\n        chain.push({\n          energy,\n          angle,\n          ...intersections[0]\n        } as THREE.Intersection);\n\n        // get the normal direction of the intersection\n        const normal = intersections[0].face && intersections[0].face.normal.normalize();\n\n        // find the reflected direction\n        const rr =\n          normal &&\n          intersections[0].face &&\n          rd.clone().sub(\n            normal\n              .clone()\n              .multiplyScalar(rd.dot(normal.clone()))\n              .multiplyScalar(2)\n          );\n\n        // calulcate the losses due to reflection\n        const reflectionloss = energy * abs((intersections[0].object.parent as Surface).reflectionFunction(frequency, angle!));\n\n        // end condition\n        if (rr && normal && reflectionloss > 1 / 2 ** 16 && iter < order) {\n\n          // recurse\n          return this.traceRay(intersections[0].point.clone().addScaledVector(normal.clone(), 0.01), rr, order, reflectionloss, source, iter + 1, chain);\n        }\n      }\n      return { chain, source, intersectedReceiver: false } as RayPath;\n    }\n  }\n  startAllMonteCarlo() {\n    this.intervals.push(setInterval(() => {\n      for (let i = 0; i < this.passes; i++) {\n        this.step();\n      }\n    }, this.updateInterval));\n  }\n  step() {\n    for (let i = 0; i < this.sourceIDs.length; i++) {\n      \n      this.__num_checked_paths+=1;\n      \n      // random theta within the sources theta limits\n      const theta = 2 * (Math.random()-0.5) * (this.containers[this.sourceIDs[i]] as Source).theta;\n      \n      // random phi within the sources phi limits\n      const phi = 2 * (Math.random()) * (this.containers[this.sourceIDs[i]] as Source).phi;\n      \n      // source position\n      const position = (this.containers[this.sourceIDs[i]] as Source).position;\n      \n      // source rotation\n      const rotation = (this.containers[this.sourceIDs[i]] as Source).rotation;\n      \n      // random direction\n      const direction = new THREE.Vector3(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5);\n      // const direction = new THREE.Vector3().setFromSphericalCoords(1, 0, Math.PI);\n      direction.applyEuler(rotation);\n\n      // get the path traced by the ray\n      const path = this.traceRay(position, direction, this.reflectionOrder, 1.0, this.sourceIDs[i]);\n\n      // if path exists\n      if (path) {\n\n        //  ignoring receiver intersections\n        if (this.runWithoutReceiver) {\n\n          // add the first ray onto the buffer\n          this.appendRay(position, (path.chain[0] as THREE.Intersection).point, path.chain[0].energy || 1.0, path.chain[0].angle);\n\n          // add the rest of the rays onto the buffer\n          for (let i = 1; i < path.chain.length; i++) {\n\n            // starting at i=1 to avoid an if statement in here\n            this.appendRay(\n\n              // the previous point\n              (path.chain[i - 1] as THREE.Intersection).point,\n\n              // the current point\n              (path.chain[i] as THREE.Intersection).point,\n\n              // the energy content displayed as a color + alpha\n              path.chain[i].energy || 1.0,\n              path.chain[i].angle\n            );\n          }\n\n          // get the uuid of the intersected receiver that way we can filter by receiver\n          const index = ((path.chain[path.chain.length - 1] as THREE.Intersection).object.parent as Receiver).uuid;\n\n          // if the receiver uuid is already defined, push the path on, else define it\n          this.paths[index] ? this.paths[index].push(path) : (this.paths[index] = [path]);\n        }\n\n        //  if we are checking receiver intersections\n        else if (path[\"intersectedReceiver\"]) {\n\n          // add the ray to the buffer\n          this.appendRay(position, (path.chain[0] as THREE.Intersection).point, path.chain[0].energy || 1.0, path.chain[0].angle);\n\n          // add the rest of the rays\n          for (let i = 1; i < path.chain.length; i++) {\n            this.appendRay(\n\n              // the previous point\n              (path.chain[i - 1] as THREE.Intersection).point,\n\n              // the current point\n              (path.chain[i] as THREE.Intersection).point,\n\n              // the energy content displayed as a color + alpha\n              path.chain[i].energy || 1.0,\n              path.chain[i].angle\n            );\n          }\n          (this.stats.numValidRayPaths.value as number)++;\n          const index = ((path.chain[path.chain.length - 1] as THREE.Intersection).object.parent as Receiver).uuid;\n          this.paths[index] ? this.paths[index].push(path) : (this.paths[index] = [path]);\n        }\n      }\n      (this.stats.numRaysShot.value as number)++;\n    }\n\n    // const t = Date.now();\n\n    // if (t - this.lastTime >= this.statsUpdatePeriod) {\n\n    // this.messenger.postMessage(\"STATS_UPDATE\", this.stats);\n\n    // this.lastTime = t;\n\n    // }\n  }\n  start() {\n\n    // this.raycaster.ray.origin = this.sources[0].position;\n\n    // this.raycaster.ray.direction = new THREE.Vector3(Math.random(), Math.random(), Math.random());\n\n    // this.intersections = [] as THREE.Intersection[];\n\n    // this.raycaster.intersectObjects([this.surfaces], true, this.intersections);\n    this.__start_time = Date.now();\n    this.__num_checked_paths=0;\n    this.startAllMonteCarlo();\n  }\n  stop() {\n    this.__calc_time = Date.now() - this.__start_time;\n    this.intervals.forEach(interval => {\n\n      // console.log(this.intervals[key]);\n      window.clearInterval(interval);\n    });\n    Object.keys(this.paths).forEach(key => {\n      const calc_time = this.__calc_time / 1000;\n      const num_valid_rays = this.paths[key].length;\n      const valid_ray_rate = num_valid_rays / calc_time;\n      const num_checks = this.__num_checked_paths;\n      const check_rate = num_checks / calc_time;\n      console.log({\n        calc_time,\n        num_valid_rays,\n        valid_ray_rate,\n        num_checks,\n        check_rate\n      });\n      this.paths[key].forEach(p => {\n        this.calculateTotalPathTime(p);\n      });\n    });\n\n    // console.log(this.paths);\n  }\n  calculateResponse(frequencies: number[] = this.reflectionLossFrequencies) {\n    this.paths;\n  }\n  calculateTotalPathTime(path: RayPath) {\n    path.time = 0;\n    for (let i = 0; i < path.chain.length; i++) {\n      path.time += path.chain[i].distance / 343.2;\n    }\n    return path;\n  }\n\n  calculateWithDiffuse(frequencies: number[] = this.reflectionLossFrequencies) {\n    this.allReceiverData = [] as ReceiverData[];\n    const keys = Object.keys(this.paths);\n    const receiverRadius = (this.containers[this.receiverIDs[0]] as Receiver).scale.x;\n    const receiverPosition = (this.containers[this.receiverIDs[0]] as Receiver).position;\n    keys.forEach(key => {\n      const receiverData = new ReceiverData(key);\n      this.paths[key].forEach(path => {\n        const energytime = {\n          time: 0,\n          energy: []\n        } as EnergyTime;\n        let intersectedReceiver = false;\n        path.chain.forEach(segment => {\n          const container = segment.object.parent as Container;\n          if (container && container.kind) {\n            if (container.kind === \"receiver\") {\n              intersectedReceiver = true;\n            } else if (container.kind === \"surface\") {\n\n              // hit surface\n              const surface = container as Surface;\n              const energytime_diffuse = {\n                time: segment.time_rec,\n                energy: []\n              } as EnergyTime;\n              frequencies.forEach((frequency, index) => {\n                const reflectionloss = abs(surface.reflectionFunction(frequency, segment.angle_in));\n                if (!energytime.energy[index]) {\n                  energytime.energy[index] = {\n                    frequency,\n                    value: reflectionloss\n                  };\n                } else {\n                  energytime.energy[index].value *= reflectionloss;\n                  energytime.time = segment.total_time;\n                  const d = new THREE.Vector3().subVectors(receiverPosition, segment.point);\n                  const theta = segment.face.normal.angleTo(d);\n                  const r = receiverRadius;\n                  energytime_diffuse.energy[index] = {\n                    frequency,\n                    value: scatteredEnergy(energytime.energy[index].value, surface.absorptionFunction(frequency), 0.1, asin(receiverRadius / d.length()), theta)\n                  };\n                }\n              });\n              if (energytime_diffuse.energy.length > 0) {\n                receiverData.data.push(energytime_diffuse);\n              }\n            } // end container === \"surface\"\n          } // end container && container.kind\n        }); // end path.chain for each\n        if (intersectedReceiver) {\n          receiverData.data.push(energytime);\n        }\n      });\n      receiverData.data = sort(receiverData.data).asc(x => x.time);\n      this.allReceiverData.push(receiverData);\n    });\n    const chartdata = this.allReceiverData.map(x => {\n      return frequencies.map(freq => {\n        return {\n          label: freq.toString(),\n          x: x.data.map(y => y.time),\n          y: x.data.map(y => y.energy.filter(z => z.frequency == freq)[0].value)\n        };\n      });\n    });\n    this.messenger.postMessage(\"UPDATE_CHART_DATA\", chartdata && chartdata[0]);\n    return this.allReceiverData;\n  }\n  \n  //TODO change this name to something more appropriate\n  calculateReflectionLoss(frequencies: number[] = this.reflectionLossFrequencies) {\n    \n    // reset the receiver data \n    this.allReceiverData = [] as ReceiverData[];\n    \n\n\n    // helper function\n    const dataset = (label, data) => ({ label, data });\n\n    // for the chart\n    const chartdata = [] as ChartData[];\n    if (frequencies) {\n      for (let i = 0; i < frequencies.length; i++) {\n        chartdata.push(dataset(frequencies[i].toString(), []));\n      }\n    }\n    \n    // pathkeys.length should equal the number of receivers in the scene\n    const pathkeys = Object.keys(this.paths);\n\n    // for each receiver's path in the total path array\n    for (let i = 0; i < pathkeys.length; i++) {\n\n      // init contribution array\n      this.allReceiverData.push({\n        id: pathkeys[i],\n        data: [] as EnergyTime[]\n      });\n\n      // for each paths chain of intersections\n      for (let j = 0; j < this.paths[pathkeys[i]].length; j++) {\n\n        // the individual ray path which holds intersection data\n        const raypath = this.paths[pathkeys[i]][j];\n        \n        /**\n         * calculates the loss due to reflection over the ray's path\n         */\n        function reflectionLossFunction(frequency: number): number {\n          const chain = raypath.chain.slice(0, -1);\n          if (chain && chain.length > 0) {\n            let magnitude = 1;\n            for (let k = 0; k < chain.length; k++) {\n              const intersection = chain[k] as THREE.Intersection;\n              const surface = intersection.object.parent as Surface;\n              const angle = intersection[\"angle\"] || 0;\n              magnitude = magnitude * abs(surface.reflectionFunction(frequency, angle));\n            }\n            return magnitude;\n          }\n          return 1; \n        }\n        \n        \n        let refloss;\n        // if there was a given frequency array\n        if (frequencies) {\n          // map the frequencies to reflection loss\n          refloss = frequencies.map(freq => ({\n            frequency: freq,\n            value: reflectionLossFunction(freq)\n          }));\n          frequencies.forEach((f, i) => {\n            chartdata[i].data.push([raypath.time!, reflectionLossFunction(f)]);\n          });\n        } else {\n          // if no frequencies given, just give back the function that calculates the reflection loss\n          refloss = reflectionLossFunction;\n        }\n        this.allReceiverData[this.allReceiverData.length - 1].data.push({\n          time: raypath.time!,\n          energy: refloss\n        });\n      }\n      this.allReceiverData[this.allReceiverData.length - 1].data =\n        this.allReceiverData[this.allReceiverData.length - 1].data.sort((a, b) => a.time - b.time);\n    }\n    for (let i = 0; i < chartdata.length; i++) {\n      chartdata[i].data = chartdata[i].data.sort((a, b) => a[0] - b[0]);\n      chartdata[i].x = chartdata[i].data.map(x => x[0]);\n      chartdata[i].y = chartdata[i].data.map(x => x[1]);\n    }\n    this.chartdata = chartdata;\n    return [this.allReceiverData, chartdata];\n  }\n  downloadImpulseResponse(index: number = 0, sample_rate: number = 44100) {\n    const data = this.saveImpulseResponse(index, sample_rate);\n    if (data) {\n      const blob = new Blob([data], {\n        type: \"text/plain;charset=utf-8\"\n      });\n      FileSaver.saveAs(blob, `ir${index}-fs${sample_rate}hz-t${Date.now()}.txt`);\n    } else return;\n  }\n  resampleResponse(index: number = 0, sampleRate: number = 44100) {\n\n    // if response has been calculated\n    if (this.allReceiverData && this.allReceiverData[index]) {\n\n      // the receivers temporal data\n      const receiverData = this.allReceiverData[index].data;\n\n      // length of the reponse in seconds\n      const maxTime = receiverData[receiverData.length - 1].time;\n\n      // number of samples the output array will have\n      const numSamples = floor(sampleRate * maxTime);\n\n      // initialize the sampled array\n      const sampledArray = [] as number[][];\n\n      // stick it in a for loop\n      for (let i = 0, j = 0; i < numSamples; i++) {\n\n        // the time given the current sample and sample rate (in seconds)\n        let sampleTime = (i / numSamples) * maxTime;\n\n        // if there exists data\n        if (receiverData[j] && receiverData[j].time) {\n\n          // get the actual time of the intersection\n          let actualTime = receiverData[j].time;\n\n          // ex. actual time of intersection is at t=3.5s but the sampled time is only at t=3.2s\n          if (actualTime > sampleTime) {\n\n            // add a 0.0 for the value at each frequency\n            sampledArray.push([sampleTime].concat(Array(receiverData[j].energy.length).fill(0.0)));\n\n            //continue to next iteration\n            continue;\n          }\n\n          // this will happen when one or more intersections occured in between a sampling period (1/sampleRate)\n          if (actualTime <= sampleTime) {\n\n            // sum array initialized to 0 (one for each frequency)\n            let sums = receiverData[j].energy.map(x => 0);\n\n            // counts the number of intersections that occured between samples\n            let sub_counter = 0;\n\n            // loop over all the missed intersections\n            while (actualTime <= sampleTime) {\n\n              // set the actual time = the current intersections time\n              actualTime = receiverData[j].time;\n\n              // sum the value at each frequency\n              sums.forEach((x, i, a) => (a[i] += receiverData[j].energy[i].value));\n\n              // increment the receiver data point index;\n              j++;\n\n              // increment the sub counter\n              sub_counter++;\n            } // exit the loop\n\n            // push another row onto the sampled array\n            sampledArray.push([sampleTime, ...sums.map(x => x / sub_counter)]);\n\n            // continue to next iteration\n            continue;\n          }\n        }\n      }\n\n      // return the sample array\n      return sampledArray;\n    }\n\n    // if reponse has not been calculated yet\n    else {\n      console.warn(\"no data yet\");\n    }\n  }\n  saveImpulseResponse(index: number = 0, sample_rate: number = 44100) {\n    const data = this.resampleResponse(index, sample_rate);\n    if (data) {\n      return data.map(x => x.join(\",\")).join(\"\\n\");\n    }\n    return;\n  }\n  get precheck() {\n    return this.sourceIDs.length > 0 && typeof this.room !== \"undefined\";\n  }\n  getReceiverIntersectionPoints(id: string) {\n    if (this.paths && this.paths[id] && this.paths[id].length > 0) {\n      return this.paths[id].map(x => x.chain[x.chain.length - 1].point) as THREE.Vector3[];\n    }\n    else return [] as THREE.Vector3[];\n  }\n  \n  \n  testWasm(value: number) {\n   \n   /*\n    const runWasm = async () => {\n      // Instantiate our wasm module\n      // And pass in a wasm module\n      const wasmModule = await wasmInit(\"wasm/index.wasm\", {\n        index: {\n          consoleLog: (value) => console.log(value)\n        }\n      });\n      \n      \n      return wasmModule;\n    };\n    runWasm().then((res) => {\n      const testmodule = res.instance.exports;\n      \n      console.log(res);\n      console.log(testmodule);\n      // const result = testmodule.testFunction(value);\n      // console.log(\"tested with a value of: \", result);\n    }).catch(console.error);\n    */\n    \n    async function loadWasm() {\n      return await loader.instantiate(fetch(\"wasm/index.wasm\"), {\n        index: {\n          consoleLog: (value) => console.log(value)\n        }\n      });\n    }\n    \n    loadWasm().then(wasm => {\n      console.log(wasm);\n      \n      const result = wasm['testFunction'](value);\n      \n      console.log(result);\n      \n    }).catch(console.error);\n    \n    \n    \n  }\n  \n  \n  \n}\n","import React from 'react';\nimport { RT60 } from '../../compute/rt';\nimport \"./RT60Tab.css\"\n\nexport interface RT60TabProps {\n  solver: RT60\n}\n\nexport interface RT60TabState {\n  \n}\n\nexport default class RT60Tab extends React.Component<RT60TabProps, RT60TabState> {\n  constructor(props: RT60TabProps) {\n    super(props);\n    this.state = {\n      \n    }\n  }  \n  render() {\n    return (\n      <div>\n        {this.props.solver.name}\n      </div>\n    )\n  }\n}","import React from \"react\";\nimport \"./RayTracerTab.css\";\nimport RayTracer from \"../../compute/raytracer\";\nimport Plot from \"react-plotly.js\";\nimport { Button } from \"@blueprintjs/core\";\n\nexport interface RayTracerTabProps {\n  solver: RayTracer;\n}\n\nexport interface RayTracerTabState {\n\n}\nconst colors = [\"#66c2a5\", \"#fc8d62\", \"#8da0cb\", \"#e78ac3\", \"#a6d854\", \"#ffd92f\", \"#e5c494\", \"#b3b3b3\"];\nexport default class RayTracerTab extends React.Component<RayTracerTabProps, RayTracerTabState> {\n  constructor(props: RayTracerTabProps) {\n    super(props);\n    this.state = {\n      \n    };\n    this.getAllReceiverIntersectionData = this.getAllReceiverIntersectionData.bind(this);\n  }\n  getAllReceiverIntersectionData() {\n    var trace1 = {\n      mode: \"markers\",\n      marker: {\n        size: 12,\n        line: {\n          color: \"rgba(217, 217, 217, 0.14)\",\n          width: 0.5\n        },\n        opacity: 0.8\n      },\n      type: \"scatter3d\"\n    };\n    return this.props.solver.receiverIDs.length > 0 && this.props.solver.receiverIDs.map(id => {\n      const data = {\n        id,\n        x: [] as number[],\n        y: [] as number[],\n        z: [] as number[],\n        mode: \"markers\",\n        marker: {\n          size: 4,\n          line: {\n            color: \"rgba(0,0,0,1)\",\n            width: 0.5\n          },\n          opacity: 1\n        },\n        type: \"scatter3d\",\n      }\n      this.props.solver.getReceiverIntersectionPoints(id).forEach(point => {\n        data.x.push(point.x);\n        data.y.push(point.y);\n        data.z.push(point.z);\n      });\n      return data\n    });\n  }\n  \n  render() {\n    const receiverIntersectionData = this.getAllReceiverIntersectionData();\n    const chartdata = this.props.solver.chartdata.map((d, i) => {\n      return {\n        x: d.x,\n        y: d.y,\n        type: \"scatter\",\n        name: d.label,\n        mode: \"lines\",\n        marker: { color: colors[i % colors.length] }\n      };\n    });\n    return (\n      <div className=\"raytracer_tab\">\n        <Button onClick={e => this.forceUpdate()} text=\"refresh\" icon=\"refresh\" minimal />\n        <div className=\"raytracer_tab-plots-container\">\n          <div className=\"raytracer_tab-intersection_plot-container\">\n            {receiverIntersectionData && receiverIntersectionData.length > 0 && (\n              <Plot\n                data={receiverIntersectionData}\n                layout={{\n                  margin: {\n                    l: 5,\n                    r: 5,\n                    b: 5,\n                    t: 10\n                  },\n                  scene: {\n                    aspectratio: {\n                      x: 2,\n                      y: 2,\n                      z: 2\n                    },\n                    camera: {\n                      center: {\n                        x: 0,\n                        y: 0,\n                        z: 0\n                      },\n                      eye: {\n                        x: 2,\n                        y: 2,\n                        z: 2\n                      },\n                      up: {\n                        x: 0,\n                        y: 0,\n                        z: 1\n                      }\n                    },\n                    xaxis: {\n                      type: \"linear\",\n                      zeroline: false\n                    },\n                    yaxis: {\n                      type: \"linear\",\n                      zeroline: false\n                    },\n                    zaxis: {\n                      type: \"linear\",\n                      zeroline: false\n                    }\n                  }\n                }}\n                config={{\n                  responsive: true\n                }}\n                className=\"raytracer_tab-intersection_plot\"\n                style={{ width: \"100%\", height: \"300px\" }}\n              />\n            )}\n          </div>\n          <div className=\"raytracer_tab-response_plot-container\">\n            {chartdata && chartdata.length > 0 && (\n              <Plot\n                data={chartdata}\n                className=\"raytracer_tab-response_plot\"\n                layout={{ title: \"Energy Response\" }}\n                config={{ responsive: true }}\n                style={{ width: \"100%\", height: \"300px\" }}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, {useState} from 'react';\nimport Messenger from '../../messenger';\n\nimport {  Icon } from \"@blueprintjs/core\";\nimport Stats, {StatsProps, Stat} from './Stats';\nimport { ParametersPanel } from './ParametersPanel';\nimport MaterialsPanel from './MaterialsPanel';\nimport { ChartTab } from './ChartTab';\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\n\nimport './Gutter.css';\nimport { KeyValuePair } from '../../common/key-value-pair';\nimport Solver from '../../compute/solver';\nimport RT60Tab from './RT60Tab';\nimport { RT60 } from '../../compute/rt';\nimport RayTracerTab from './RayTracerTab';\nimport RayTracer from '../../compute/raytracer';\n\n\nexport interface GutterProps {\n  solvers: KeyValuePair<Solver>;\n  messenger: Messenger;\n}\n\nexport interface GutterState {\n  selectedTabIndex: number;\n}\n\nexport default class Gutter extends React.Component<GutterProps, GutterState>{\n  constructor(props: GutterProps) {\n    super(props);\n    this.state = {\n      selectedTabIndex: 1\n    }\n    this.handleTabChange = this.handleTabChange.bind(this);\n  } \n  handleTabChange(tabIndex: number) {\n    this.setState({\n      selectedTabIndex: tabIndex\n    })\n  }\n  render() {\n    const keys = Object.keys(this.props.solvers);\n    return (\n      <div\n        style={{\n          height: \"100%\",\n          margin: \"0\"\n        }}>\n        <Tabs selectedIndex={this.state.selectedTabIndex} onSelect={this.handleTabChange}>\n          <TabList>\n            <Tab disabled />\n            {keys.map((x, i) => {\n              return <Tab key={\"gutter-tabname-\" + i}>{this.props.solvers[x].name}</Tab>\n            })}\n          </TabList>\n          <TabPanel/>\n          {\n            keys.map((x, i) => {\n              switch (this.props.solvers[x].kind) {\n                case \"ray-tracer\": return (\n                  <TabPanel key={\"gutter-tabpanel-\" + i}>\n                    <RayTracerTab solver={this.props.solvers[x] as RayTracer}/>\n                  </TabPanel>\n                );\n                case \"rt60\": return (\n                  <TabPanel key={\"gutter-tabpanel-\" + i}>\n                    <RT60Tab solver={this.props.solvers[x] as RT60}/>\n                  </TabPanel>\n                );\n                default: return <TabPanel key={\"gutter-tabpanel-\" + i}/>;\n              }\n            })\n          }\n        </Tabs>\n      </div>\n    );\n  }\n  \n}","import chroma from 'chroma-js';\n\nexport type Absorption = {\n  \"63\": number;\n  \"125\": number;\n  \"250\": number;\n  \"500\": number;\n  \"1000\": number;\n  \"2000\": number;\n  \"4000\": number;\n  \"8000\": number;\n};\nexport const scale = chroma\n  .scale([\"black\", \"navy\", \"red\", \"yellow\", \"white\"])\n  .mode(\"lch\")\n  .correctLightness(true);\n\nexport function absorptionGradient(absorption: Absorption | number[]) {\n  if (absorption instanceof Array) {\n    const colors = absorption.map((x, i) => {\n      const percentage = (100 * (i + 1)) / 9;\n      const col = scale(absorption[i]);\n      return `${col} ${Math.round(percentage)}%`;\n    }).join(',');\n    return `linear-gradient(90deg, ${colors})`;\n  }\n  else {\n    const colors = [63, 125, 250, 500, 1000, 2000, 4000, 8000]\n      .map((x, i) => {\n        const percentage = (100 * (i + 1)) / 9;\n        const col = scale(absorption[String(x)]);\n        return `${col} ${Math.round(percentage)}%`;\n      })\n      .join(\",\");\n    return `linear-gradient(90deg, ${colors})`;\n  }\n}\n\nexport default absorptionGradient;","import React from 'react';\nimport Surface from '../objects/surface';\nimport Messenger from '../messenger';\nimport { AcousticMaterial } from '..';\nimport { uuid } from 'uuidv4';\nimport { absorptionGradient } from './AbsorptionGradient';\nimport MaterialSliders from './MaterialSliders';\nimport { clamp } from '../common/clamp';\nimport { Icon, Tag, IToaster } from '@blueprintjs/core';\nimport { ButtonGroup, Button } from '@blueprintjs/core';\nimport Room from '../objects/room';\nimport ObjectView from './ObjectView';\nimport { KeyValuePair } from '../common/key-value-pair';\nimport Container from '../objects/container';\n\n\nconst max = (a: number, b: number) => (a > b ? a : b);\nconst min = (a: number, b: number) => (a < b ? a : b);\n\nexport interface MaterialDrawerProps {\n  object?: Surface;\n  bufferLength?: number;\n  messenger: Messenger;\n}\n\nexport interface MaterialDrawerState {\n  query: string;\n  selected_item: AcousticMaterial;\n  bufferLength: number;\n  selected_object: Surface;\n}\n\nexport default class MaterialDrawer extends React.Component<MaterialDrawerProps, MaterialDrawerState> {\n  listref: React.RefObject<HTMLDivElement>;\n  listScroll: number;\n  constructor(props: MaterialDrawerProps) {\n    super(props);\n    this.state = {\n      bufferLength: props.bufferLength || 30,\n      query: props.object ? props.object.acousticMaterial.material : \"\",\n      selected_item: props.object ? props.object.acousticMaterial : {} as AcousticMaterial,\n      selected_object: {} as Surface\n    };\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.handleObjectViewClick = this.handleObjectViewClick.bind(this);\n    this.handleListItemDoubleClick = this.handleListItemDoubleClick.bind(this);\n    this.listref = React.createRef<HTMLDivElement>();\n    this.listScroll = 0;\n  }\n  handleQueryChange(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      query: e.currentTarget.value\n    });\n  }\n  handleInput(event: React.FormEvent<HTMLInputElement>) {\n    // console.log(event);\n    \n  }\n  componentWillUpdate(nextProps, nextState, nextContext) {\n    if (this.listref.current) {\n      this.listScroll = this.listref.current.scrollTop;\n    }\n  }\n  componentDidUpdate() {\n    if (this.listref.current) {\n      this.listref.current.scrollTop = this.listScroll;\n      this.listref.current.focus();\n    }\n  }\n  handleListItemClick(item: AcousticMaterial) {\n    \n    this.setState({\n      selected_item: item\n    })\n  }\n  handleListItemDoubleClick(item: AcousticMaterial) {\n    console.log(item);\n  }\n  handleObjectViewClick(object, e: React.MouseEvent) {\n  if (object instanceof Container && object['kind']!==\"room\") {\n    if (e.shiftKey) {\n      this.props.messenger.postMessage(\"APPEND_SELECTION\", [object])\n    }\n    else {\n      this.props.messenger.postMessage(\"SET_SELECTION\", [object]);\n    }\n    if (object instanceof Surface) {\n      console.log(object);\n      this.setState({\n        query: object.acousticMaterial.name,\n        selected_object: object as Surface\n      });\n    }\n  }\n}\n  // handleObjectViewClick(e) {\n  //   console.log(e);\n  //   if (e instanceof Surface) {\n  //     this.setState({\n  //       query: e.acousticMaterial.name,\n  //       selected_object: e as Surface\n  //     });\n  //   }\n  // }\n  render() {\n    const filteredItems = this.state.query.length > 0\n      ? this.props.messenger.postMessage(\"SEARCH_ALL_MATERIALS\", this.state.query)[0] as AcousticMaterial[]\n      : this.props.messenger.postMessage(\"FETCH_ALL_MATERIALS\")[0] as AcousticMaterial[];\n    \n    const MaterialDrawerList = () => {\n      if (filteredItems && filteredItems.length > 0) {\n        const MaterialDrawerListArray = [] as React.ReactNode[];\n        for (let i = 0; i < min(this.state.bufferLength,filteredItems.length); i++) {\n          \n          const isSelected =\n            this.state.selected_item &&\n            this.state.selected_item._id &&\n            filteredItems[i]._id === this.state.selected_item._id;\n          const selectedClassname = \"material_drawer-list_item-selected\";\n          const normalClassname = \"material_drawer-list_item-container\";\n          const containerProps = {\n            className: isSelected ? selectedClassname : normalClassname,\n            onClick: e => this.handleListItemClick(filteredItems[i]),\n            onDoubleClick: e => console.log(filteredItems[i]),\n            key: filteredItems[i]._id\n          };\n          MaterialDrawerListArray.push(\n            <div {...containerProps}>\n              <div\n                className=\"material_drawer-list_item-material\"\n                key={filteredItems[i]._id + \"mat\"}\n                onDoubleClick={containerProps.onDoubleClick}>\n                {filteredItems[i].material}\n              </div>\n              <div className=\"material_drawer-list_item-right\">\n                {/* <div className=\"material_drawer-list_item-tags\">\n                  {filteredItems[i].tags.map(x => (\n                    <span key={uuid()} className=\"bp3-tag bp3-minimal material_drawer-list_item-tag\">\n                      {x}\n                    </span>\n                  ))}\n                </div> */}\n                <div\n                  className=\"material_drawer-list_item-absorption\"\n                  key={filteredItems[i]._id + \"grad\"}\n                  onDoubleClick={containerProps.onDoubleClick}\n                  style={{\n                    background: `${absorptionGradient(\n                      filteredItems[i].absorption\n                    )}`\n                  }}\n                />\n              </div>\n            </div>\n          );\n        }\n        return MaterialDrawerListArray;\n      }\n      else return <div></div>;\n    }\n    const absorptionKeys =\n      this.state.selected_item &&\n      this.state.selected_item.absorption &&\n      Object.keys(this.state.selected_item.absorption);\n    \n    const rooms = this.props.messenger.postMessage(\"FETCH_ROOMS\")[0];\n    \n    return (\n      <div className=\"material_drawer-grid\">\n        <div className=\"material_drawer-surface-container\">\n          {rooms && (\n            <ObjectView\n              solvers={{}}\n              containers={rooms.reduce((a, b) => {\n                a[b.uuid] = b;\n                return a;\n              }, {} as KeyValuePair<Room>)}\n              onClick={this.handleObjectViewClick}\n            />\n          )}\n        </div>\n        <div className=\"material_drawer-container\">\n          <div className=\"material_drawer-searchbar-container\">\n            <div className=\"material_drawer-searchbar-input_container\">\n              <Icon icon=\"search\" iconSize={14} color=\"darkgray\" className=\"material_drawer-search_icon\" />\n              <input\n                type=\"text\"\n                className=\"material_drawer-searchbar-input\"\n                value={this.state.query}\n                onChange={this.handleQueryChange}\n                onInput={this.handleInput}\n              />\n            </div>\n          </div>\n          <div className=\"material_drawer-list\" ref={this.listref} key={uuid()}>\n            {MaterialDrawerList()}\n          </div>\n          <div>\n            <a\n              className=\"show-more\"\n              onClick={e =>\n                this.setState({\n                  bufferLength: clamp(15 + this.state.bufferLength, 1, filteredItems.length)\n                })\n              }>\n              show more...\n            </a>\n          </div>\n          <div className={\"material_drawer-display-container\"}>\n            <div className={\"material_drawer-display-material_name\"}>\n              {this.state.selected_item && this.state.selected_item.name && <span>{this.state.selected_item.name}</span>}\n            </div>\n            <div className={\"material_drawer-display-material_material\"}>\n              {this.state.selected_item && this.state.selected_item.material && <em>{this.state.selected_item.material}</em>}\n            </div>\n            <div className={\"material_drawer-display-material_absorption\"}>\n              {this.state.selected_item &&\n                this.state.selected_item.absorption &&\n                absorptionKeys.map(x => {\n                  return (\n                    <div key={uuid()}>\n                      <div className=\"material_drawer-display-material_absorption-header\">{x}Hz</div>\n                      <div className=\"material_drawer-display-material_absorption-value\">{this.state.selected_item.absorption[x]}</div>\n                    </div>\n                  );\n                })}\n            </div>\n            {\n              <div className={\"material_drawer-display-assign_button\"}>\n                <Button\n                  intent=\"success\"\n                  text={\"assign\"}\n                  icon={\"tick\"}\n                  disabled={!this.state.selected_item || typeof this.state.selected_item._id === \"undefined\"}\n                  onClick={e => {\n                    this.props.messenger.postMessage(\"ASSIGN_MATERIAL\", this.state.selected_item, this.state.selected_object.uuid || false);\n                    }\n                  }\n                />\n              </div>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n","export function clamp(v, a, b) {\n  return v < a ? a : v > b ? b : v;\n}","import React from 'react';\n\nimport \"./SettingsPanelBlock.css\";\n\nexport interface SettingsPanelBlockProps{\n  title: React.ReactNode;\n  children?: React.ReactNode;\n};\n\nexport default function SettingsPanelBlock(props: SettingsPanelBlockProps) {\n  return (\n    <div className=\"settings-panel-block\">\n      <div className=\"settings-panel-block-title\">\n        {props.title}\n      </div>\n      <div className=\"settings-panel-block-content\">\n        {props.children}\n      </div>\n    </div>\n  )\n};","import React from 'react';\n\nimport \"./SettingsPanelSetting.css\";\n\nexport interface SettingsPanelSettingProps{\n  name: React.ReactNode;\n  description: React.ReactNode;\n  children?: React.ReactNode;\n  edited?: boolean;\n}\n\nexport default function SettingsPanelSetting(props: SettingsPanelSettingProps) {\n  return (\n    <div className=\"settings-panel-setting\">\n      <div className=\"settings-panel-setting-titleblock\">\n        {props.edited && <span className=\"settings-panel-setting-dot\">•</span>}\n        <div className=\"settings-panel-setting-name\">{props.name}</div>\n        <div className=\"settings-panel-setting-description\">\n          {props.description}\n        </div>\n      </div>\n      <div className=\"settings-panel-setting-content\">{props.children}</div>\n    </div>\n  );\n}","import React, {useState} from \"react\";\nimport {Setting} from '../../common/setting';\n\nimport \"./SettingsTextComponent.css\";\n\nexport interface SettingsTextComponentProps {\n  setting: Setting<string>;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport default function SettingsTextComponent(props: SettingsTextComponentProps) {\n  // const [stagedValue, setStagedValue] = useState(props.setting.value);\n  return (\n    <input\n      type=\"text\"\n      value={props.setting.staged_value}\n      onChange={props.onChange}\n      className=\"settings-text-component\"\n    />\n  );\n  }\n","import React, { useState } from \"react\";\nimport { Setting } from \"../../common/setting\";\n\nimport \"./SettingsNumberComponent.css\";\n\nexport interface SettingsNumberComponentProps {\n  setting: Setting<string>;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport default function SettingsNumberComponent(\n  props: SettingsNumberComponentProps\n) {\n  // const [stagedValue, setStagedValue] = useState(props.setting.value);\n  return (\n    <input\n      type=\"number\"\n      value={props.setting.staged_value}\n      onChange={props.onChange}\n      className=\"settings-number-component\"\n    />\n  );\n}\n","import React, { useState } from \"react\";\nimport { Setting } from \"../../common/setting\";\n\nimport \"./SettingsColorComponent.css\";\n\nexport interface SettingsColorComponentProps {\n  setting: Setting<string>;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport default function SettingsColorComponent(\n  props: SettingsColorComponentProps\n) {\n  // const [stagedValue, setStagedValue] = useState(props.setting.value);\n  return (\n    <input\n      type=\"color\"\n      value={props.setting.staged_value}\n      onChange={props.onChange}\n      className=\"settings-color-component\"\n    />\n  );\n}\n","import React from 'react';\nimport SettingsPanelBlock from './SettingsPanelBlock';\nimport Messenger from '../../messenger';\nimport SettingsPanelSetting from './SettingsPanelSetting';\nimport SettingsTextComponent from './SettingsTextComponent';\nimport './SettingsPanel.css';\nimport {KeyValuePair} from '../../common/key-value-pair';\nimport { Setting } from '../../common/setting';\nimport SettingsNumberComponent from './SettingsNumberComponent';\nimport SettingsColorComponent from './SettingsColorComponent';\n\n\nexport interface SettingsPanelProps{\n  messenger: Messenger;\n}\n\nexport class SettingsPanel extends React.Component<SettingsPanelProps, KeyValuePair<Setting<string|number|boolean>>>{\n  constructor(props: SettingsPanelProps) {\n    super(props);\n    this.state = this.props.messenger.postMessage(\"FETCH_SETTINGS\")[0] as KeyValuePair<Setting<string | number | boolean>>;\n    this.handleTextComponentChange = this.handleTextComponentChange.bind(this);\n    this.handleNumberComponentChange = this.handleNumberComponentChange.bind(this);\n    this.handleColorComponentChange = this.handleColorComponentChange.bind(this);\n    this.SettingInputComponent = this.SettingInputComponent.bind(this);\n  }\n  handleTextComponentChange(e: React.ChangeEvent<HTMLInputElement>, setting: Setting<string>) {\n    this.setState({\n      [setting.id]: setting.setStagedValue(e.target.value)\n    })\n  }\n  handleNumberComponentChange(e: React.ChangeEvent<HTMLInputElement>, setting: Setting<number>) {\n     this.setState({\n       [setting.id]: setting.setStagedValue(e.target.valueAsNumber)\n     });\n  }\n  \n  handleColorComponentChange(e: React.ChangeEvent<HTMLInputElement>, setting: Setting<string>) {\n     this.setState({\n       [setting.id]: setting.setStagedValue(e.target.value)\n     });\n  }\n  \n  SettingInputComponent(x: Setting<any>) {\n    switch (x.kind) {\n      case \"text\": {\n        return (\n          <SettingsTextComponent setting={x} onChange={e => {\n            this.handleTextComponentChange(e, x);\n          }\n        }/>)\n      }\n      case \"number\": {\n        return (\n          <SettingsNumberComponent setting={x} onChange={e => {\n            this.handleNumberComponentChange(e, x);\n          }\n        }/>)\n      }\n      case \"color\": {\n        return (\n          <SettingsColorComponent setting={x} onChange={e => {\n            this.handleColorComponentChange(e, x);\n          }\n        }/>)\n      }\n      default:\n        return (<div></div>)\n    }\n  }\n  render() {\n    return (\n      <SettingsPanelBlock title=\"General\">\n        {this.state && Object.keys(this.state).map(x => {\n          const setting = this.state[x];\n          return (\n            <SettingsPanelSetting\n              edited={setting.edited}\n              key={setting.id}\n              name={setting.name}\n              description={setting.description}>\n              {this.SettingInputComponent(setting)}\n            </SettingsPanelSetting>\n          );\n        })}\n      </SettingsPanelBlock>\n    )\n  }\n}\n\n","import React from \"react\";\nimport SplitterLayout from \"react-splitter-layout\";\nimport {\n  FocusStyleManager,\n  Navbar,\n  Alignment,\n  Button,\n  Menu,\n  MenuItem,\n  Popover,\n  ButtonGroup,\n  Position,\n  MenuDivider,\n  Drawer,\n  Classes,\n  Colors,\n  AnchorButton,\n  Overlay,\n  Alert,\n  Intent,\n  Toaster,\n  IToastProps\n} from \"@blueprintjs/core\";\nimport MenuItemText from '../components/MenuItemText';\nimport { ItemListRenderer, IItemListRendererProps } from \"@blueprintjs/select\";\nimport MaterialBar from '../components/MaterialBar';\nimport { Characters, EditorModes, ToolNames } from \"../constants\";\nimport ImportDialog from \"../components/ImportDialog\";\nimport ObjectView from \"../components/ObjectView\";\nimport resolve_svg from \"../svg/resolve.svg\";\nimport { set } from \"../common/set-at\";\nimport Container from \"../objects/container\";\nimport PanelContainer from \"./PanelContainer\";\nimport ObjectProperties from \"../components/ObjectProperties/index\";\nimport Messenger from \"../messenger\";\nimport Renderer from \"../render/renderer\";\nimport Receiver from \"../objects/receiver\";\nimport Source from \"../objects/source\";\nimport { KeyValuePair } from \"../common/key-value-pair\";\nimport SettingsDrawer from \"../components/SettingsDrawer\";\nimport { Setting } from \"../common/setting\";\nimport { Report } from \"../common/browser-report\";\n\nimport \"../css\";\nimport \"./App.css\";\nimport { ToolName } from \"../constants/tool-names\";\nimport { EditorMode } from \"../constants/editor-modes\";\n// import { Process, Task } from \"../common/process\";\nimport SettingsDrawerCheckBox from \"../components/setting-components/SettingsDrawerCheckbox\";\nimport Solver from \"../compute/solver\";\nimport RayTracer from \"../compute/raytracer\";\n\nimport Gutter from '../components/Gutter';\nimport { Stat } from \"../components/Gutter/Stats\";\nimport { ObjectPropertyInputEvent } from \"../components/NumberInput\";\nimport Surface from \"../objects/surface\";\nimport { AcousticMaterial } from \"..\";\nimport { Searcher } from \"fast-fuzzy\";\nimport MaterialDrawer from \"../components/MaterialDrawer\";\nimport { SettingsPanel } from \"../components/setting-components/SettingsPanel\";\n\n\n\nconst AppToaster = Toaster.create({\n  className: \"app-toaster\",\n  position: Position.TOP\n});\n\n\nFocusStyleManager.onlyShowFocusOnTabs();\n\n\n\n\nexport interface AppProps {\n\tmessenger: Messenger;\n\tcontainers: KeyValuePair<Container>;\n\tsettings: KeyValuePair<any>;\n\tbrowser: Report;\n}\n\n\n\n\n\ninterface AppState {\n\timportDialogVisible: boolean;\n\tcontainers: KeyValuePair<Container>;\n  selectedObject: Container;\n  \n\tsettingsDrawerVisible: boolean;\n\tsettings: KeyValuePair<any>;\n\tmode: EditorMode;\n\t// process: Process;\n\tsolvers: KeyValuePair<Solver>;\n\ttool: ToolName;\n\tsimulationRunning: boolean;\n\tdarkmode: boolean;\n\tstats: Stat[];\n\tlastUpdateReason: string;\n\tchartData?: {\n\t\tlabel: string;\n\t\tx: number[];\n\t\ty: number[];\n\t}[];\n\tmaterialDrawerOpen: boolean;\n\tterminalOpen: boolean;\n\tnewWarningVisible: boolean;\n}\n\nexport default class App extends React.Component<AppProps, AppState> {\n\tstate: AppState;\n\tcanvas: React.RefObject<HTMLCanvasElement>;\n\tstatsCanvas: React.RefObject<HTMLCanvasElement>;\n\tprog: any;\n\tconstructor(props: AppProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tterminalOpen: false,\n\t\t\tnewWarningVisible: false,\n\t\t\tmaterialDrawerOpen: false,\n      lastUpdateReason: \"\",\n      solvers: {} as KeyValuePair<Solver>,\n      simulationRunning: false,\n      importDialogVisible: false,\n      containers: {} as KeyValuePair<Container>,\n      selectedObject: {} as Container,\n      settingsDrawerVisible: false,\n      settings: props.settings,\n      mode: \"EDIT\",\n      tool: \"SELECT\",\n      darkmode: false,\n      stats: [] as Stat[],\n\t\t\tchartData: [{\n\t\t\t\tlabel: \"a\",\n\t\t\t\tx: [0],\n\t\t\t\ty: [0]\n\t\t\t}]\n      // process: new Process({name: \"base\", steps: [] as Task[]})\n    };\n\t\tthis.setupMessageHandlers = this.setupMessageHandlers.bind(this);\n\t\tthis.setupMessageHandlers();\n\n\t\tthis.canvas = React.createRef<HTMLCanvasElement>();\n\t\tthis.statsCanvas = React.createRef<HTMLCanvasElement>();\n\t\tthis.showImportDialog = this.showImportDialog.bind(this);\n\t\tthis.handleImportDialogClose = this.handleImportDialogClose.bind(this);\n\t\tthis.handleObjectViewClick = this.handleObjectViewClick.bind(this);\n\t\tthis.handleObjectViewDelete = this.handleObjectViewDelete.bind(this);\n\t\tthis.handleObjectPropertyChange = this.handleObjectPropertyChange.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.handleObjectPropertyValueChangeAsNumber = this.handleObjectPropertyValueChangeAsNumber.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.handleObjectPropertyValueChangeAsString = this.handleObjectPropertyValueChangeAsString.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.handleSettingsButtonClick = this.handleSettingsButtonClick.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.handleMaterialBarClose = this.handleMaterialBarClose.bind(this);\n\t\tthis.handleMaterialBarItemSelect = this.handleMaterialBarItemSelect.bind(this);\n\t\tthis.handleSettingChange = this.handleSettingChange.bind(this);\n\t\tthis.handleObjectPropertyButtonClick = this.handleObjectPropertyButtonClick.bind(this);\n\t\tthis.addMessageHandler = this.addMessageHandler.bind(this);\n\t}\n\taddMessageHandler(message: string, handler: (acc, ...args) => KeyValuePair<any>, cb?: ()=>void) {\n\t\tthis.props.messenger.addMessageHandler(message, (acc, ...args) => {\n\t\t\tconst nextState = handler(acc, ...args);\n\t\t\tthis.setState({\n\t\t\t\tlastUpdateReason: message,\n\t\t\t\t...nextState\n\t\t\t}, cb || (()=> {}))\n\t\t})\n\t}\n  setupMessageHandlers() {\n    \n    this.addMessageHandler(\"NEW\", () => {\n      return {\n        selectedObject: {} as Container,\n        containers: {} as KeyValuePair<Container>,\n        lastUpdateReason: \"NEW\"\n      }\n    });\n    this.addMessageHandler(\"DESELECT_ALL_OBJECTS\", () => {\n      return {\n        selectedObject: {} as Container,\n        lastUpdateReason: \"DESELECT_ALL_OBJECTS\"\n      }\n    });\n    \n    this.addMessageHandler(\"SET_SELECTION\", (acc, objects) => {\n      if (objects instanceof Array) {\n        return {\n          selectedObject: objects[objects.length - 1],\n          lastUpdateReason: \"SET_SELECTION\"\n        };\n      }\n      else return {}\n    })\n    \n    this.addMessageHandler(\"APPEND_SELECTION\", (acc, objects) => {\n      if (objects instanceof Array) {\n        return {\n          selectedObject: objects[objects.length - 1],\n          lastUpdateReason: \"APPEND_SELECTION\"\n        };\n      } else return {};\n    })\n    \n    this.addMessageHandler(\"SET_OBJECT_VIEW\", (acc, object) => {\n      if (!object.uuid) {\n        return {}\n      }\n      else {\n        return {\n          selectedObject: object,\n          lastUpdateReason: \"SET_OBJECT_VIEW\"\n        };\n      }\n    });\n        \n    this.addMessageHandler(\"SHOW_TOAST\", (acc, toastProps: IToastProps) => {\n      AppToaster.show(toastProps);\n      return {};\n    });\n    \n\t\tthis.addMessageHandler(\"SHOW_NEW_WARNING\",\n\t\t\t() => {\n\t\t\t\treturn ({\n\t\t\t\t\tnewWarningVisible: true\n\t\t\t})\n\t\t});\n\t\tthis.addMessageHandler(\"SHOW_TERMINAL\",\n\t\t\t() => {\n\t\t\treturn ({\n\t\t\t\tterminalOpen: true\n\t\t\t});\n\t\t});\n\t\tthis.addMessageHandler(\"TOGGLE_TERMINAL\",\n\t\t\t() => {\n      return {\n        terminalOpen: !this.state.terminalOpen\n      };\n    });\n\t\tthis.addMessageHandler(\"OPEN_MATERIAL_SEARCH\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn ({\n\t\t\t\tmaterialDrawerOpen: true\n\t\t\t});\n\t\t});\n    \n\n\t\t// this.addMessageHandler(\"ASSIGN_MATERIAL\",\n    //   (acc, material, id) => {\n    //     if (id) {\n    //       const surface = this.props.messenger.postMessage(\"FETCH_SURFACE\", id)[0] as Surface;\n    //       surface.acousticMaterial = material;\n    //     }\n    //     else if ((this.state.selectedObject) && (this.state.selectedObject instanceof Surface)) {\n\t\t// \t\t// this.state.selectedObject.acousticMaterial = material;\n\t\t// \t\tconst { selectedObject } = this.state;\n\t\t// \t\tselectedObject.acousticMaterial = material;\n\t\t// \t\treturn ({\n\t\t// \t\t\tselectedObject,\n\t\t// \t\t\tmaterialDrawerOpen: false\n\t\t// \t\t})\n\t\t// \t}\n\t\t// \treturn ({\n\t\t// \t\tselectedObject: this.state.selectedObject\n\t\t// \t})\n\t\t// });\n\t\t\n\t\tthis.addMessageHandler(\"TOGGLE_MATERIAL_SEARCH\",\n\t\t\t(acc, ...args) => {\n      return {\n        materialDrawerOpen: !this.state.materialDrawerOpen\n      };\n    });\n\t\tthis.addMessageHandler(\"UPDATE_CHART_DATA\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn ({\n\t\t\t\tchartData: args[0]\n\t\t\t})\n\t\t})\n\t\tthis.addMessageHandler(\"SHOW_IMPORT_DIALOG\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn {\n\t\t\t\timportDialogVisible: !this.state.importDialogVisible,\n\t\t\t};\n\t\t});\n\t\tthis.addMessageHandler(\"SHOW_IMPORT_DIALOG\",\n\t\t\t(acc, ...args) => {\n\t\t\t\treturn ({\n          importDialogVisible: !this.state.importDialogVisible,\n        });\n\t\t\t}\n    );\n    \n    this.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\",\n      (acc, ...args) => {\n      if (args[0] && this.state.containers[args[0]]) {\n        const containers = { ...this.state.containers };\n        const selectedObject = this.state.selectedObject;\n        delete containers[args[0]];\n        return {\n          selectedObject: selectedObject && selectedObject.uuid === args[0] ? {} as Container : selectedObject,\n          containers,\n          lastUpdateReason: \"SHOULD_REMOVE_CONTAINER\"\n        }\n      }\n      else {\n        return {}\n      }\n    })\n\t\tthis.addMessageHandler(\"SHOULD_ADD_SOURCE\",\n\t\t\t(acc, ...args) => {\n\t\t\t\tconst containers = { ...this.state.containers };\n\t\t\t\tcontainers[acc[0].uuid] = acc[0];\n\t\t\t\treturn ({\n          containers,\n          lastUpdateReason: \"SHOULD_ADD_SOURCE\"\n        });\n\t\t\t}\n\t\t);\n\t\tthis.addMessageHandler(\"SHOULD_ADD_RECEIVER\",\n\t\t\t(acc, ...args) => {\n\t\t\t\tconst containers = { ...this.state.containers };\n\t\t\t\tcontainers[acc[0].uuid] = acc[0];\n\t\t\t\treturn ({ containers });\n\t\t\t}\n\t\t);\n\t\tthis.addMessageHandler(\"SHOULD_ADD_RAYTRACER\",\n\t\t\t(acc, ...args) => {\n\t\t\t\tconst solvers = { ...this.state.solvers };\n\t\t\t\tsolvers[acc[0].uuid] = acc[0];\n\t\t\t\treturn ({ solvers });\n\t\t\t}\n    );\n    this.addMessageHandler(\"SHOULD_REMOVE_SOLVER\", (acc, ...args) => {\n      if (args[0] && this.state.solvers[args[0]]) {\n        const solvers = { ...this.state.solvers };\n        const selectedObject = this.state.selectedObject;\n        delete solvers[args[0]];\n        return {\n          selectedObject: selectedObject && selectedObject.uuid === args[0] ? ({} as Container) : selectedObject,\n          solvers,\n          lastUpdateReason: \"SHOULD_REMOVE_SOLVER\"\n        };\n      }\n      else {\n        return {}\n      }\n    });\n\t\tthis.addMessageHandler(\"SHOULD_ADD_RT60\",\n      (acc, ...args) => {\n        if (acc && acc[0]) {\n          const solvers = { ...this.state.solvers };\n          solvers[acc[0].uuid] = acc[0];\n          return ({ solvers });\n        }\n        else {\n          return ({});\n        }\n\t\t\t}\n\t\t);\n\t\tthis.addMessageHandler(\"SHOULD_ADD_FDTD\",\n\t\t\t(acc, ...args) => {\n\t\t\t\tconst solvers = { ...this.state.solvers };\n\t\t\t\tsolvers[acc[0].uuid] = acc[0];\n\t\t\t\treturn ({ solvers });\n\t\t\t}\n\t\t);\t\t\n\t\tthis.addMessageHandler(\"ADDED_ROOM\",\n\t\t\t(acc, ...args) => {\n\t\t\tconst containers = { ...this.state.containers };\n\t\t\tcontainers[args[0].uuid] = args[0];\n\t\t\treturn ({ containers });\n\t\t});\n\t\tthis.addMessageHandler(\"IMPORT_FILE\",\n\t\t\t(acc, ...args) => {\n\t\t\t\t// console.log(acc);\n\t\t\t\treturn {}\n\t\t\t}\n\t\t);\n\t\tthis.addMessageHandler(\"SIMULATION_DID_PLAY\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn ({\n\t\t\t\tsimulationRunning: true\n\t\t\t})\n\t\t});\n\t\tthis.addMessageHandler(\"SIMULATION_DID_PAUSE\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn({\n\t\t\t\tsimulationRunning: false\n\t\t\t})\n\t\t});\n\t\tthis.addMessageHandler(\"STATS_SETUP\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn({\n\t\t\t\tstats: Object.keys(args[0]).map(x => args[0][x]) as Stat[]\n\t\t\t});\n\t\t});\n\t\tthis.addMessageHandler(\"STATS_UPDATE\",\n\t\t\t(acc, ...args) => {\n\t\t\treturn({\n\t\t\t\tstats: Object.keys(args[0]).map(x => args[0][x]) as Stat[]\n\t\t\t});\n    });\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.canvas.current &&\n\t\t\tthis.props.messenger.postMessage(\n\t\t\t\t\"APP_MOUNTED\",\n\t\t\t\tthis.canvas.current\n\t\t\t);\n\t}\n\n\tshowImportDialog() {\n\t\tthis.setState({\n\t\t\timportDialogVisible: !this.state.importDialogVisible,\n\t\t\tlastUpdateReason: \"showImportDialog\"\n\t\t});\n\t}\n\thandleImportDialogClose(e?) {\n\t\tthis.setState({\n      importDialogVisible: !this.state.importDialogVisible,\n      lastUpdateReason: \"handleImportDialogClose\"\n    });\n\t}\n\thandleSettingsButtonClick(e?) {\n\t\tthis.setState({\n      settingsDrawerVisible: !this.state.settingsDrawerVisible,\n      lastUpdateReason: \"handleSettingsButtonClick\"\n    });\n\t}\n\n  handleObjectViewClick(object, e: React.MouseEvent) {\n    if (object instanceof Container && object['kind']!==\"room\") {\n      if (e.shiftKey) {\n        this.props.messenger.postMessage(\"APPEND_SELECTION\", [object])\n      }\n      else {\n        this.props.messenger.postMessage(\"SET_SELECTION\", [object]);\n      }\n    }\n    else if (object instanceof Solver) {\n      this.props.messenger.postMessage(\"SET_OBJECT_VIEW\", object)\n    }\n  }\n  handleObjectViewDelete(object: Container | Solver) {\n    if (object instanceof Container) {\n      this.props.messenger.postMessage(\"SHOULD_REMOVE_CONTAINER\", object.uuid);\n    }\n    else if (object instanceof Solver) {\n      this.props.messenger.postMessage(\"SHOULD_REMOVE_SOLVER\", object.uuid);\n    }\n  }\n\thandleObjectPropertyButtonClick(e: React.MouseEvent<HTMLInputElement, MouseEvent>) {\n\t\tconst { selectedObject } = this.state;\n\t\tif (selectedObject instanceof RayTracer) {\n\t\t\tswitch (e.currentTarget.name) {\n\t\t\t\tcase \"ray-tracer-play\":\n\t\t\t\t\tthis.props.messenger.postMessage(\"RAYTRACER_SHOULD_PLAY\", selectedObject.uuid);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ray-tracer-pause\":\n\t\t\t\t\tthis.props.messenger.postMessage(\"RAYTRACER_SHOULD_PAUSE\", selectedObject.uuid);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ray-tracer-clear\":\n\t\t\t\t\tthis.props.messenger.postMessage(\"RAYTRACER_SHOULD_CLEAR\", selectedObject.uuid);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: break;\n\t\t\t}\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedObject,\n\t\t\tlastUpdateReason: \"handleObjectPropertyButtonClick\"\n\t\t}, () => {\n\t\t\t// console.log(this.state.selectedObject);\n\t\t});\n\t}\n\thandleObjectPropertyValueChangeAsNumber(\n\t\tid: string,\n\t\tprop: string,\n\t\tvalueAsNumber: number\n\t) {\n\t\tconst { selectedObject } = this.state;\n\t\tselectedObject[prop] = valueAsNumber;\n\t\tthis.setState({\n\t\t\tselectedObject,\n\t\t\tlastUpdateReason: \"handleObjectPropertyValueChangeAsNumber\"\n\t\t\t\n\t\t});\n\t}\n\thandleObjectPropertyValueChangeAsString(\n\t\tid: string,\n\t\tprop: string,\n\t\tvalueAsString: string\n\t) {\n\t\tconst { selectedObject } = this.state;\n\t\tselectedObject[prop] = valueAsString;\n\t\tthis.setState({\n      selectedObject,\n      lastUpdateReason: \"handleObjectPropertyValueChangeAsString\"\n    });\n\t}\n\n\thandleObjectPropertyChange(e: ObjectPropertyInputEvent) {\n\t\tconst { selectedObject } = this.state;\n\t\tconst prop = e.name;\n\t\tswitch (e.type) {\n\t\t\tcase \"checkbox\":\n\t\t\t\tselectedObject[prop] = e.value;\n\t\t\t\tbreak;\n\t\t\tcase \"text\":\n\t\t\t\tselectedObject[prop] = e.value;\n\t\t\t\tbreak;\n\t\t\tcase \"number\":\n\t\t\t\tselectedObject[prop] = Number(e.value);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tselectedObject[prop] = e.value;\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.setState({\n      selectedObject,\n      lastUpdateReason: \"handleObjectPropertyChange\"\n    });\n\t}\n\thandleSettingChange(e: React.ChangeEvent<HTMLInputElement>) {\n\t\tconst settings = { ...this.state.settings };\n\t\tconst id = e.currentTarget.id;\n\t\tsettings[id].value =\n\t\t\te.currentTarget.type === \"checkbox\"\n\t\t\t\t? e.currentTarget.checked\n\t\t\t\t: e.currentTarget.value;\n\t\tthis.setState(\n      {\n        settings,\n        lastUpdateReason: \"handleSettingChange\"\n      },\n      () => {\n        this.props.messenger.postMessage(\"SETTING_CHANGE\", {\n          setting: id,\n          value: settings[id].value\n        });\n      }\n    );\n\t}\n\n\t// shouldComponentUpdate(nextProps, nextState, nextContext) {\n\t// \tconsole.log(\"shouldComponentUpdate::nextState\", nextState);\n\t// \treturn true;\n\t// }\n\t\n\thandleMaterialBarClose(e) {\n\t\tthis.setState({\n\t\t\tmaterialDrawerOpen: false\n\t\t})\n\t}\n\thandleMaterialBarItemSelect(e) {\n\t}\n\t\n\tMaterialOptionListRenderer: ItemListRenderer<AcousticMaterial> = (props: IItemListRendererProps<AcousticMaterial>) => {\n\t\t\n\t\treturn (\n\t\t\t<div>\n\t\t\t{props.filteredItems.map((x, i) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div key={i}>\n\t\t\t\t\t\t{x.material}\n\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t\n\t\t\t})}\n\t\t\t</div>\n\t\t)\n\t};\n\t\n\trender() {\n\t\treturn (\n      <div>\n        <div>\n          <Navbar className=\"main-nav_bar\">\n            <Navbar.Group\n              align={Alignment.LEFT}\n              className=\"main-nav_bar-left_group\">\n              <Navbar.Group className=\"main-nav_bar-logo_text\">\n                cram.ui\n              </Navbar.Group>\n              <Navbar.Divider />\n              <Menu className=\"main-nav_bar-left_menu\">\n                <ButtonGroup minimal={true}>\n                  <Popover\n                    minimal={true}\n                    transitionDuration={20}\n                    position={Position.BOTTOM_LEFT}\n                    className=\"main-nav_bar-left_menu-popover-file\">\n                    <Button\n                      text=\"File\"\n                      className={\"main-nav_bar-left_menu-button\"}\n                    />\n                    <Menu>\n                      <MenuItem\n                        text={\n                          <MenuItemText\n                            text=\"New\"\n                            hotkey={Characters.SHIFT + \"N\"}\n                          />\n                        }\n                        onClick={e =>\n                          this.setState({ newWarningVisible: true })\n                        }\n                      />\n                      <MenuItem text=\"Save\" disabled></MenuItem>\n                      <MenuDivider />\n                      <MenuItem\n                        text=\"Import\"\n                        onClick={this.showImportDialog}></MenuItem>\n                    </Menu>\n                  </Popover>\n                  <Popover\n                    minimal={true}\n                    transitionDuration={50}\n                    position={Position.BOTTOM_LEFT}>\n                    <Button\n                      text=\"Edit\"\n                      className={\"main-nav_bar-left_menu-button\"}\n                    />\n                    <Menu>\n                      <MenuItem text=\"Undo\" disabled></MenuItem>\n                      <MenuItem text=\"Redo\" disabled></MenuItem>\n                      <MenuDivider />\n                      <MenuItem text=\"Cut\" disabled></MenuItem>\n                      <MenuItem text=\"Copy\" disabled></MenuItem>\n                      <MenuItem text=\"Paste\" disabled></MenuItem>\n                    </Menu>\n                  </Popover>\n                  {/* <Popover\n                    minimal={true}\n                    transitionDuration={50}\n                    position={Position.BOTTOM_LEFT}>\n                    <Button\n                      text=\"View\"\n                      className={\"main-nav_bar-left_menu-button\"}\n                    />\n                    <Menu>\n                      <MenuItem text=\"Toast\" onClick={(e: React.MouseEvent) => {\n                        AppToaster.show({ message: \"Toasted.\" });\n                      }}></MenuItem>\n                    </Menu>\n                  </Popover> */}\n                  <Popover\n                    minimal={true}\n                    transitionDuration={50}\n                    position={Position.BOTTOM_LEFT}>\n                    <Button\n                      text=\"Add\"\n                      className={\"main-nav_bar-left_menu-button\"}\n                    />\n                    <Menu>\n                      <MenuItem\n                        text={\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}>\n                            <div>Source</div>\n                            <div style={{ color: Colors.LIGHT_GRAY1 }}>\n                            </div>\n                          </div>\n                        }\n                        onClick={() =>\n                          this.props.messenger.postMessage(\"SHOULD_ADD_SOURCE\")\n                        }\n                      />\n                      <MenuItem\n                        text=\"Receiver\"\n                        onClick={() =>\n                          this.props.messenger.postMessage(\n                            \"SHOULD_ADD_RECEIVER\"\n                          )\n                        }></MenuItem>\n                      <MenuDivider />\n                      <MenuItem\n                        text={\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}>\n                            <div>Ray Tracer</div>\n                            <div style={{ color: Colors.LIGHT_GRAY1 }}>\n                            </div>\n                          </div>\n                        }\n                        onClick={() =>\n                          this.props.messenger.postMessage(\n                            \"SHOULD_ADD_RAYTRACER\"\n                          )\n                        }\n                      />\n\n                      <MenuItem\n                        text={\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}>\n                            <div>FDTD</div>\n                            <div style={{ color: Colors.LIGHT_GRAY1 }}>\n                            </div>\n                          </div>\n                        }\n                        disabled\n                        onClick={() =>\n                          this.props.messenger.postMessage(\"SHOULD_ADD_FDTD\")\n                        }\n                      />\n                      <MenuItem\n                        text={\n                          <div\n                            style={{\n                              display: \"flex\",\n                              justifyContent: \"space-between\"\n                            }}>\n                            <div>RT60</div>\n                            <div style={{ color: Colors.LIGHT_GRAY1 }}>\n                            </div>\n                          </div>\n                        }\n                        onClick={() =>\n                          this.props.messenger.postMessage(\"SHOULD_ADD_RT60\")\n                        }\n                      />\n                      {/* </Menu> */}\n                    </Menu>\n                  </Popover>\n                </ButtonGroup>\n              </Menu>\n            </Navbar.Group>\n            <Navbar.Group\n              align={Alignment.RIGHT}\n\t\t\t\t\t\t\tclassName=\"main-nav_bar-right_group\"\n\t\t\t\t\t\t>\n              <Button\n                icon=\"cog\"\n                minimal={true}\n                className={\"main-nav_bar-right_menu-button\"}\n                disabled\n                onClick={this.handleSettingsButtonClick}></Button>\n            </Navbar.Group>\n          </Navbar>\n        </div>\n        <Alert\n          isOpen={this.state.newWarningVisible}\n          transitionDuration={100}\n          canOutsideClickCancel\n          canEscapeKeyCancel\n          cancelButtonText=\"No, cancel\"\n          confirmButtonText=\"Yes, start over\"\n          intent={Intent.DANGER}\n          onConfirm={e => {\n            this.props.messenger.postMessage(\"NEW\");\n            this.setState({\n              newWarningVisible: false\n            });\n          }}\n          onCancel={e => {\n            this.setState({\n              newWarningVisible: false\n            });\n          }}>\n          Are you sure you want to start over?\n        </Alert>\n        <SettingsDrawer\n          size={\"55%\"}\n          onClose={this.handleSettingsButtonClick}\n          isOpen={this.state.settingsDrawerVisible}\n          onSubmit={() => {\n            this.setState({\n              settings: this.props.messenger.postMessage(\"SUBMIT_ALL_SETTINGS\")[0]\n            });\n          }}\n        >\n          <SettingsPanel messenger={this.props.messenger}/>\n          <input\n            name=\"background\"\n            type=\"color\"\n            onChange={e =>\n              this.props.messenger.postMessage(\n                \"RENDERER_SHOULD_CHANGE_BACKGROUND\",\n                e.currentTarget.value\n              )\n            }\n          />\n          <input\n            name=\"fogColor\"\n            type=\"color\"\n            onChange={e =>\n              this.props.messenger.postMessage(\n                \"RENDERER_SHOULD_CHANGE_FOG_COLOR\",\n                e.currentTarget.value\n              )\n            }\n          />\n        </SettingsDrawer>\n\n        <Drawer\n          position={Position.RIGHT}\n          size=\"100%\"\n          autoFocus={true}\n          enforceFocus={true}\n          hasBackdrop={true}\n          onClose={this.handleMaterialBarClose}\n          canOutsideClickClose={true}\n          canEscapeKeyClose={true}\n          isCloseButtonShown={true}\n          title=\"Material Selection\"\n          isOpen={this.state.materialDrawerOpen}>\n          <MaterialDrawer\n            messenger={this.props.messenger}\n            object={\n              this.state.selectedObject &&\n              this.state.selectedObject instanceof Surface\n                ? this.state.selectedObject\n                : undefined\n            }\n          />\n        </Drawer>\n\n\n        <ImportDialog\n          onImport={file => {\n            this.props.messenger.postMessage(\"IMPORT_FILE\", file);\n            this.handleImportDialogClose();\n          }}\n          isOpen={this.state.importDialogVisible}\n          autoFocus={true}\n          canEscapeKeyClose={true}\n          canOutsideClickClose={true}\n          enforceFocus={false}\n          usePortal={true}\n          data={{ themeName: \"dark\" }}\n          onClose={this.handleImportDialogClose}\n          onDrop={file => {\n            this.props.messenger.postMessage(\"IMPORT_FILE\", file);\n          }}\n        />\n        <SplitterLayout\n          secondaryMinSize={5}\n          primaryMinSize={50}\n          secondaryInitialSize={300}\n          primaryIndex={1}\n          customClassName=\"modified-splitter-layout\">\n          <SplitterLayout\n            vertical={true}\n            primaryMinSize={10}\n            secondaryMinSize={10}\n            secondaryInitialSize={70}\n            percentage={true}>\n            <PanelContainer>\n              <ObjectView\n                containers={this.state.containers}\n                solvers={this.state.solvers}\n                onClick={this.handleObjectViewClick}\n                onDelete={this.handleObjectViewDelete}\n              />\n            </PanelContainer>\n            <PanelContainer className=\"panel full-bottom\">\n              {(() => {\n                if (Object.keys(this.state.selectedObject).length > 0) {\n                  return (\n                    <ObjectProperties\n                      messenger={this.props.messenger}\n                      object={this.state.selectedObject}\n                      onPropertyChange={this.handleObjectPropertyChange}\n                      onPropertyValueChangeAsNumber={\n                        this.handleObjectPropertyValueChangeAsNumber\n                      }\n                      onPropertyValueChangeAsString={\n                        this.handleObjectPropertyValueChangeAsString\n                      }\n                      onButtonClick={this.handleObjectPropertyButtonClick}\n                    />\n                  );\n                }\n              })()}\n            </PanelContainer>\n          </SplitterLayout>\n          <SplitterLayout\n            vertical={true}\n            primaryMinSize={100}\n            secondaryMinSize={5}\n            secondaryInitialSize={200}\n            customClassName=\"canvas-gutter\"\n            onSecondaryPaneSizeChange={(value: number) => {}}>\n            <div className=\"webgl-canvas\">\n              <canvas id=\"renderer-canvas\" ref={this.canvas} />\n            </div>\n            <PanelContainer className=\"panel full-bottom gutter-panel\">\n              <Gutter\n                messenger={this.props.messenger}\n                solvers={this.state.solvers}\n                key={\"gutter-panel\"}\n              />\n            </PanelContainer>\n          </SplitterLayout>\n        </SplitterLayout>\n      </div>\n    );\n\t}\n}\n","import { KeyValuePair } from \"./common/key-value-pair\";\nimport { uuid } from \"uuidv4\";\n\nexport type EventHandler = (...args) => void;\n\n\n\nexport default class Messenger{\n    private dictionary: KeyValuePair<KeyValuePair<EventHandler>>;\n    private messageListeners: KeyValuePair<EventHandler>;\n    lastMessage: string;\n    constructor() {\n        this.dictionary = {};\n        this.messageListeners = {};\n        this.lastMessage = \"\";\n    }\n    addMessageHandler(message: string, handler: EventHandler): string[] {\n        const id = uuid();\n        if (!this.dictionary[message]) {\n            this.dictionary[message] = {\n                [id]: handler\n            }\n            return [message, id];\n        } else {\n            this.dictionary[message][id] = handler;\n            return [message, id];\n        }\n    }\n    removeMessage(message: string) {\n        if (this.dictionary[message]) {\n            delete this.dictionary[message];\n        }\n    }\n    removeMessageHandler(message: string, id: string) {\n        if (this.dictionary[message][id]) {\n            delete this.dictionary[message][id];\n        }\n    }\n    postMessage(message: string, ...args) {\n        if (message != this.lastMessage) {\n            this.lastMessage = message;\n            // console.log(message);\n        }\n        // if message exists\n        if (this.dictionary[message]) {\n            // accumulates the results of each handler\n            let accumulator = [] as any[];\n            \n            // for each message handler\n            Object.keys(this.dictionary[message]).forEach(key => {\n                // call the message handler with the acculated results and the original arguments\n                const results = this.dictionary[message][key](accumulator, ...args);\n                accumulator.push(results);\n            })\n            return accumulator;\n        }\n        return [] as any[];\n    }\n    addMessageListener(callback: EventHandler) {\n        const id = uuid();\n        this.messageListeners[id] = callback;\n    }\n    removeMessageListener(id) {\n        if (this.messageListeners[id]) {\n            delete this.messageListeners[id];\n        }\n    }\n}","//@ts-ignore\nimport * as THREE from \"three\";\nimport matcapPorcelainWhite from \"../res/matcaps/matcap-porcelain-white.jpg\";\nimport matcapRazin from \"../res/matcaps/razin.png\";\nimport triPattern from \"../res/textures/tri_pattern.jpg\"\nimport matcapOverexposedOutline from \"../res/matcaps/overexposed-outline.png\";\nimport matcapOutline from \"../res/matcaps/outline.png\";\nimport matcapUnderShadow from \"../res/matcaps/undershadow.png\";\n\nconst loader = new THREE.TextureLoader();\nexport const MATCAP_PORCELAIN_WHITE = loader.load(matcapPorcelainWhite);\nexport const MATCAP_OUTLINE = loader.load(matcapOutline);\nexport const MATCAP_OVEREXPOSED_OUTLINE = loader.load(matcapOverexposedOutline);\nexport const MATCAP_RAZIN = loader.load(matcapRazin);\nexport const MATCAP_UNDER_SHADOW = loader.load(matcapUnderShadow);\nexport const TEXTURE_TRI_PATTERN = loader.load(triPattern);","import * as THREE from \"three\";\nimport Container, { ContainerProps, ContainerSaveObject } from \"./container\";\nimport chroma from 'chroma-js';\nimport glow from '../render/shaders/glow';\nimport { MATCAP_PORCELAIN_WHITE, MATCAP_UNDER_SHADOW } from \"./asset-store\";\n\nconst defaults = {\n  color: 0xa2c982\n};\n\nexport interface SourceSaveObject extends ContainerSaveObject{\n  color: number;\n}\n\n\nexport interface SourceProps extends ContainerProps {\n  f?: (t: number) => number;\n  theta?: number;\n  phi?: number;\n}\n\n\nexport default class Source extends Container {\n  f: (t: number) => number;\n  theta: number;\n  phi: number;\n  numRays: number;\n  mesh: THREE.Mesh;\n  selectedMaterial: THREE.MeshMatcapMaterial;\n  normalMaterial: THREE.MeshMatcapMaterial;\n  constructor(name: string, props?: SourceProps) {\n    super(name);\n    this.kind = \"source\";\n\n\n    this.selectedMaterial = new THREE.MeshMatcapMaterial({\n      color: chroma(defaults.color).brighten(1).num(),\n      matcap: MATCAP_UNDER_SHADOW\n    });\n    \n    this.normalMaterial = new THREE.MeshMatcapMaterial({\n      color: defaults.color,\n      matcap: MATCAP_PORCELAIN_WHITE\n    });\n    this.mesh = new THREE.Mesh(\n      new THREE.SphereGeometry(0.1, 32, 16),\n      // pointsGeometry,\n      // pointsMaterial,\n      this.normalMaterial\n    );\n    this.mesh.userData[\"kind\"] = \"source\";\n    this.add(this.mesh);\n    \n   \n\n    \n    \n    this.f = (props && props.f) || ((t) => Math.sin(t));\n    this.theta = (props && props.theta) || Math.PI / 4;\n    this.phi = (props && props.phi) || Math.PI / 2;\n    this.numRays = 0;\n    this.select = () => {\n     if (!this.selected) {\n       this.selected = true;\n       let brighterColor = chroma((this.mesh.material as THREE.MeshMatcapMaterial).color.getHex())\n         .brighten(1)\n         .num();\n       this.selectedMaterial.color.setHex(brighterColor);\n       this.mesh.material = this.selectedMaterial;\n     }\n    };\n    this.deselect = () => {\n      if (this.selected) {\n        this.selected = false;\n        this.mesh.material = this.normalMaterial;\n      }\n    };\n    this.renderCallback = (time?: number) => { };\n    this.save = () => {\n      const name = this.name;\n      const visible = this.visible;\n      const position = this.position.toArray();\n      const scale = this.scale.toArray();\n      const rotation = this.rotation.toArray();\n      const color = this.getColorAsNumber();\n      const uuid = this.uuid;\n      return {\n        name,\n        visible,\n        position,\n        scale,\n        rotation,\n        color,\n        uuid\n      }\n    }\n    this.restore = (state: SourceSaveObject) => {\n      this.name = state.name;\n      this.visible = state.visible;\n      this.position.set(state.position[0], state.position[1], state.position[2]);\n      this.scale.set(state.scale[0], state.scale[1], state.scale[2]);\n      this.rotation.set(state.rotation[0], state.rotation[1], state.rotation[2]);\n      this.color = state.color;\n      this.uuid = state.uuid;\n    }\n  }\n  \n  getColorAsNumber() {\n    return (this.mesh.material as THREE.MeshBasicMaterial).color.getHex();\n  }\n  getColorAsString() {\n    return String.fromCharCode(35) + (this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\n  }\n  get color() {\n    return String.fromCharCode(35)+(this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\n  }\n  set color(col: string | number) {\n    if (typeof col === \"string\") {\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setStyle(col);\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\n    }\n    else {\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setHex(col);\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\n    }\n  }\n}\n","\nimport * as THREE from \"three\";\nimport Container, { ContainerProps, ContainerSaveObject } from \"./container\";\nimport chroma from \"chroma-js\";\nimport { MATCAP_PORCELAIN_WHITE, MATCAP_UNDER_SHADOW } from \"./asset-store\";\n\n// import { vs, fs } from '../render/shaders/glow';\n\n\nexport interface ReceiverSaveObject extends ContainerSaveObject {\n  color: number;\n}\n\nexport interface ReceiverProps extends ContainerProps{\n    \n}\n\nconst defaults = {\n  color: 0xdd6f6f,\n  selectedColor: 0x9fcbff\n};\n\nexport default class Receiver extends Container{\n  mesh: THREE.Mesh;\n  selectedMaterial: THREE.MeshMatcapMaterial;\n  normalMaterial: THREE.MeshMatcapMaterial;\n  constructor(name: string, props?: ReceiverProps) {\n    super(name);\n    this.kind = \"receiver\";\n//     const glowmaterial = new THREE.ShaderMaterial({\n//       uniforms: {\n//         c: { type: \"f\", value: 1.0 },\n//         p: { type: \"f\", value: 1.4 },\n//         glowColor: { type: \"c\", value: new THREE.Color(0xffff00) },\n//         viewVector: { type: \"v3\", value: camera.position }\n//       },\n//       vertexShader: vs,\n//       fragmentShader: fs,\n//       side: THREE.FrontSide,\n//       blending: THREE.AdditiveBlending,\n//       transparent: true\n// });\n     this.selectedMaterial = new THREE.MeshMatcapMaterial({\n       color: defaults.color,\n       matcap: MATCAP_UNDER_SHADOW\n     });\n\n     this.normalMaterial = new THREE.MeshMatcapMaterial({\n       color: defaults.color,\n       matcap: MATCAP_PORCELAIN_WHITE\n     });\n    this.mesh = new THREE.Mesh(\n      new THREE.SphereGeometry(0.1, 32, 16),\n      this.normalMaterial\n    );\n    this.mesh.userData['kind'] = 'receiver';\n    this.add(this.mesh);\n    this.select = () => {\n      if (!this.selected) {\n        this.selected = true;\n        let brighterColor = chroma((this.mesh.material as THREE.MeshMatcapMaterial).color.getHex()).brighten(1).num();\n        this.selectedMaterial.color.setHex(brighterColor);\n        this.mesh.material = this.selectedMaterial;\n      }\n    };\n    this.deselect = () => {\n      if (this.selected) {\n        this.selected = false;\n        this.mesh.material = this.normalMaterial;\n      }\n    };\n    this.renderCallback = (time?: number) => {};\n    this.save = () => {\n      const name = this.name;\n      const visible = this.visible;\n      const position = this.position.toArray();\n      const scale = this.scale.toArray();\n      const rotation = this.rotation.toArray();\n      const color = this.getColorAsNumber();\n      const uuid = this.uuid;\n      return {\n        name,\n        visible,\n        position,\n        scale,\n        rotation,\n        color,\n        uuid\n      };\n    };\n    this.restore = (state: ReceiverSaveObject) => {\n      this.name = state.name;\n      this.visible = state.visible;\n      this.position.set(state.position[0], state.position[1], state.position[2]);\n      this.scale.set(state.scale[0], state.scale[1], state.scale[2]);\n      this.rotation.set(state.rotation[0], state.rotation[1], state.rotation[2]);\n      this.color = state.color;\n      this.uuid = state.uuid;\n    };\n  }\n  getColorAsNumber() {\n    return (this.mesh.material as THREE.MeshBasicMaterial).color.getHex();\n  }\n  getColorAsString() {\n    return String.fromCharCode(35) + (this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\n  }\n  get color(){\n    return String.fromCharCode(35)+(this.mesh.material as THREE.MeshBasicMaterial).color.getHexString();\n  }\n  set color(col: string | number) {\n    if (typeof col === \"string\") {\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setStyle(col);\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setStyle(col);\n    }\n    else {\n      (this.mesh.material as THREE.MeshMatcapMaterial).color.setHex(col);\n      (this.normalMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\n      (this.selectedMaterial as THREE.MeshMatcapMaterial).color.setHex(col);\n    }\n  }\n\n}","/* eslint-disable no-lone-blocks */\n\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * @author ScieCode / http://github.com/sciecode\n */\n\n \n \nimport { EventDispatcher, MOUSE, Quaternion, Spherical, TOUCH, Vector2, Vector3 } from \"three/build/three.module.js\";\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function (object, domElement) {\n  if (domElement === undefined) console.warn('THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.');\n  if (domElement === document)\n    console.error('THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.');\n\n  this.object = object;\n  this.domElement = domElement;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  // How far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0; // radians\n  this.maxPolarAngle = Math.PI; // radians\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = false;\n  this.dampingFactor = 0.05;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0;\n\n  // Set to false to disable panning\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = false; // if true, pan in screen-space\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n  // Set to false to disable use of the keys\n  this.enableKeys = false;\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  // Mouse buttons\n  this.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n  // Touch fingers\n  this.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n  this.keyMods = {\n    pan: \"shiftKey\",\n    dolly: \"metaKey\",\n    noMiddleButton: \"altKey\"\n  };\n  \n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return spherical.theta;\n  };\n\n  this.saveState = function () {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.reset = function () {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n\n    scope.update();\n\n    state = STATE.NONE;\n  };\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = (function () {\n    var offset = new Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new Quaternion().setFromUnitVectors(object.up, new Vector3(0, 1, 0));\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new Vector3();\n    var lastQuaternion = new Quaternion();\n\n    return function update() {\n      var position = scope.object.position;\n\n      offset.copy(position).sub(scope.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // angle from z-axis around y-axis\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      if (scope.enableDamping) {\n        spherical.theta += sphericalDelta.theta * scope.dampingFactor;\n        spherical.phi += sphericalDelta.phi * scope.dampingFactor;\n      } else {\n        spherical.theta += sphericalDelta.theta;\n        spherical.phi += sphericalDelta.phi;\n      }\n\n      // restrict theta to be between desired limits\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\n\n      // restrict phi to be between desired limits\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n\n      spherical.makeSafe();\n\n      spherical.radius *= scale;\n\n      // restrict radius to be between desired limits\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\n\n      // move target to panned location\n\n      if (scope.enableDamping === true) {\n        scope.target.addScaledVector(panOffset, scope.dampingFactor);\n      } else {\n        scope.target.add(panOffset);\n      }\n\n      offset.setFromSpherical(spherical);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(scope.target).add(offset);\n\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n\n        panOffset.set(0, 0, 0);\n      }\n\n      scale = 1;\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n        scope.dispatchEvent(changeEvent);\n\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n\n        return true;\n      }\n\n      return false;\n    };\n  })();\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n    scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n    scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n\n    scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n    scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n    scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.domElement.removeEventListener(\"keydown\", onKeyDown, false);\n\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  };\n\n  //\n  // internals\n  //\n\n  var scope = this;\n  \n  if (!scope.keyMods) {\n    scope.keyMods = {\n      pan: \"shiftKey\",\n      dolly: \"metaKey\",\n      noMiddleButton: \"altKey\"\n    };\n  }\n\n  var changeEvent = { type: \"change\" };\n  var startEvent = { type: \"start\" };\n  var endEvent = { type: \"end\" };\n\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_PAN: 4,\n    TOUCH_DOLLY_PAN: 5,\n    TOUCH_DOLLY_ROTATE: 6\n  };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new Spherical();\n  var sphericalDelta = new Spherical();\n\n  var scale = 1;\n  var panOffset = new Vector3();\n  var zoomChanged = false;\n\n  var rotateStart = new Vector2();\n  var rotateEnd = new Vector2();\n  var rotateDelta = new Vector2();\n\n  var panStart = new Vector2();\n  var panEnd = new Vector2();\n  var panDelta = new Vector2();\n\n  var dollyStart = new Vector2();\n  var dollyEnd = new Vector2();\n  var dollyDelta = new Vector2();\n\n  function getAutoRotationAngle() {\n    return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft(angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = (function () {\n    var v = new Vector3();\n\n    return function panLeft(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n      v.multiplyScalar(-distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  var panUp = (function () {\n    var v = new Vector3();\n\n    return function panUp(distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = (function () {\n    var offset = new Vector3();\n\n    return function pan(deltaX, deltaY) {\n      var element = scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0);\n\n        // we use only clientHeight here so aspect ratio does not distort speed\n        panLeft((2 * deltaX * targetDistance) / element.clientHeight, scope.object.matrix);\n        panUp((2 * deltaY * targetDistance) / element.clientHeight, scope.object.matrix);\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft((deltaX * (scope.object.right - scope.object.left)) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n        panUp((deltaY * (scope.object.top - scope.object.bottom)) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\");\n        scope.enablePan = false;\n      }\n    };\n  })();\n\n  function dollyIn(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyOut(dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\");\n      scope.enableZoom = false;\n    }\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate(event) {\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n    rotateEnd.set(event.clientX, event.clientY);\n\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n\n    var element = scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n    dollyEnd.set(event.clientX, event.clientY);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyIn(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyOut(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n    panEnd.set(event.clientX, event.clientY);\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    scope.update();\n  }\n\n  function handleMouseUp(/*event*/) {\n    // no-op\n  }\n\n  function handleMouseWheel(event) {\n    if (event.deltaY < 0) {\n      dollyOut(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyIn(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown(event) {\n    var needsUpdate = false;\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        needsUpdate = true;\n        break;\n      default: break;\n    }\n\n    if (needsUpdate) {\n      // prevent the browser from scrolling on cursor keys\n      event.preventDefault();\n\n      scope.update();\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n    if (event.touches.length === 1) {\n      rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      rotateStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartPan(event) {\n    if (event.touches.length === 1) {\n      panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchStartDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyStart.set(0, distance);\n  }\n\n  function handleTouchStartDollyPan(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n\n    if (scope.enablePan) handleTouchStartPan(event);\n  }\n\n  function handleTouchStartDollyRotate(event) {\n    if (scope.enableZoom) handleTouchStartDolly(event);\n\n    if (scope.enableRotate) handleTouchStartRotate(event);\n  }\n\n  function handleTouchMoveRotate(event) {\n    if (event.touches.length === 1) {\n      rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      rotateEnd.set(x, y);\n    }\n\n    rotateDelta.subVectors(rotateEnd, rotateStart).multiplyScalar(scope.rotateSpeed);\n\n    var element = scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n  }\n\n  function handleTouchMovePan(event) {\n    if (event.touches.length === 1) {\n      panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    } else {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panEnd.set(x, y);\n    }\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n  }\n\n  function handleTouchMoveDolly(event) {\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyEnd.set(0, distance);\n\n    dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n    dollyIn(dollyDelta.y);\n\n    dollyStart.copy(dollyEnd);\n  }\n\n  function handleTouchMoveDollyPan(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n\n    if (scope.enablePan) handleTouchMovePan(event);\n  }\n\n  function handleTouchMoveDollyRotate(event) {\n    if (scope.enableZoom) handleTouchMoveDolly(event);\n\n    if (scope.enableRotate) handleTouchMoveRotate(event);\n  }\n\n  function handleTouchEnd(/*event*/) {\n    // no-op\n  }\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown(event) {\n    if (scope.enabled === false) return;\n\n    // Prevent the browser from scrolling.\n\n    event.preventDefault();\n\n    // Manually set the focus since calling preventDefault above\n    // prevents the browser from setting it automatically.\n\n    scope.domElement.focus ? scope.domElement.focus() : window.focus();\n    switch (event.button) {\n      case 0:\n        {\n          if (event[scope.keyMods.noMiddleButton]) {\n            if (event[scope.keyMods.pan] && !event[scope.keyMods.dolly]) {\n              if (scope.enablePan === false) { return; }\n              handleMouseDownPan(event);\n              state = STATE.PAN;\n            }\n            else if (event[scope.keyMods.dolly]) {\n              if (scope.enableZoom === false) { return; }\n              handleMouseDownDolly(event);\n              state = STATE.DOLLY;\n            }\n            else {\n              if (scope.enableRotate === false) {\n                return;\n              }\n              handleMouseDownRotate(event);\n              state = STATE.ROTATE;\n            }\n          }\n          else {\n            state = STATE.NONE;\n          }\n        } break;\n      case 1: {\n        if (event[scope.keyMods.pan] && !event[scope.keyMods.dolly]) {\n          if (scope.enablePan === false) { return; }\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        }\n        else if (event[scope.keyMods.dolly]) {\n          if (scope.enableZoom === false) { return; }\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n        }\n        else {\n          if (scope.enableRotate === false) {\n            return;\n          }\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        }\n      }\n        break;\n\n      case 2: {\n        state = STATE.NONE;\n      }\n        break;\n      default: break;\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener(\"mousemove\", onMouseMove, false);\n      document.addEventListener(\"mouseup\", onMouseUp, false);\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleMouseMoveRotate(event);\n\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n\n        handleMouseMoveDolly(event);\n\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n\n        handleMouseMovePan(event);\n\n        break;\n      default: break;\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n\n    handleMouseUp(event);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    scope.dispatchEvent(startEvent);\n\n    handleMouseWheel(event);\n\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown(event) {\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1:\n        switch (scope.touches.ONE) {\n          case TOUCH.ROTATE:\n            if (scope.enableRotate === false) return;\n\n            handleTouchStartRotate(event);\n\n            state = STATE.TOUCH_ROTATE;\n\n            break;\n\n          case TOUCH.PAN:\n            if (scope.enablePan === false) return;\n\n            handleTouchStartPan(event);\n\n            state = STATE.TOUCH_PAN;\n\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      case 2:\n        switch (scope.touches.TWO) {\n          case TOUCH.DOLLY_PAN:\n            if (scope.enableZoom === false && scope.enablePan === false) return;\n\n            handleTouchStartDollyPan(event);\n\n            state = STATE.TOUCH_DOLLY_PAN;\n\n            break;\n\n          case TOUCH.DOLLY_ROTATE:\n            if (scope.enableZoom === false && scope.enableRotate === false) return;\n\n            handleTouchStartDollyRotate(event);\n\n            state = STATE.TOUCH_DOLLY_ROTATE;\n\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (state) {\n      case STATE.TOUCH_ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleTouchMoveRotate(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_PAN:\n        if (scope.enablePan === false) return;\n\n        handleTouchMovePan(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_DOLLY_PAN:\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n\n        handleTouchMoveDollyPan(event);\n\n        scope.update();\n\n        break;\n\n      case STATE.TOUCH_DOLLY_ROTATE:\n        if (scope.enableZoom === false && scope.enableRotate === false) return;\n\n        handleTouchMoveDollyRotate(event);\n\n        scope.update();\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd(event) {\n    if (scope.enabled === false) return;\n\n    handleTouchEnd(event);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n  }\n\n  //\n\n  scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n\n  scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n  scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n\n  scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n  scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n  scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n\n  scope.domElement.addEventListener(\"keydown\", onKeyDown, false);\n\n  // make sure element can receive keys.\n\n  if (scope.domElement.tabIndex === -1) {\n    scope.domElement.tabIndex = 0;\n  }\n\n  // force an update at start\n\n  this.update();\n};\n\nOrbitControls.prototype = Object.create(EventDispatcher.prototype);\nOrbitControls.prototype.constructor = OrbitControls;\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function (object, domElement) {\n  OrbitControls.call(this, object, domElement);\n\n  this.mouseButtons.LEFT = MOUSE.PAN;\n  this.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n  this.touches.ONE = TOUCH.PAN;\n  this.touches.TWO = TOUCH.DOLLY_ROTATE;\n};\n\nMapControls.prototype = Object.create(EventDispatcher.prototype);\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","import { Vector3 } from 'three';\n\nexport function lerp(a: number, b: number, amt: number) {\n  return a + (b - a) * amt;\n}\n\nexport function lerp3(a: Vector3, b: Vector3, amt: number) {\n  return new Vector3(\n\t\tlerp(a.x, b.x, amt),\n\t\tlerp(a.y, b.y, amt),\n\t\tlerp(a.z, b.z, amt)\n  );\n}","/*\n * Easing Functions - inspired from http:\n * only considering the t value for the range [0, 1] => [0, 1]\n */\nexport const EasingFunctions = {\n\t/**\n\t * no easing, no acceleration\n\t */\n\tlinear: (t: number) => t,\n\n\t/**\n\t *accelerating from zero velocity\n\t */\n\teaseInQuad: (t: number) => t * t,\n\n\t/**\n\t *decelerating to zero velocity\n\t */\n\teaseOutQuad: (t: number) => t * (2 - t),\n\n\t/**\n\t *acceleration until halfway, then deceleration\n\t */\n\teaseInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n\n\t/**\n\t *accelerating from zero velocity\n\t */\n\teaseInCubic: (t: number) => t * t * t,\n\n\t/**\n\t *decelerating to zero velocity\n\t */\n  easeOutCubic: (t: number) => --t * t * t + 1,\n  \n\t/**\n\t * acceleration until halfway, then deceleration\n\t */\n\teaseInOutCubic: (t: number) =>\n    t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  \n\t/**\n\t * accelerating from zero velocity\n\t */\n  easeInQuart: (t: number) => t * t * t * t,\n  \n\t/**\n\t * decelerating to zero velocity\n\t */\n  easeOutQuart: (t: number) => 1 - --t * t * t * t,\n  \n\n\t/**\n\t * acceleration until halfway, then deceleration\n\t */\n\teaseInOutQuart: (t: number) =>\n    t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\n  \n\t/**\n\t *  accelerating from zero velocity\n\t */\n  easeInQuint: (t: number) => t * t * t * t * t,\n  \n\t/**\n\t * decelerating to zero velocity\n\t */\n  easeOutQuint: (t: number) => 1 + --t * t * t * t * t,\n  \n\t/**\n\t * acceleration until halfway, then deceleration\n\t */\n\teaseInOutQuint: (t: number) =>\n\t\tt < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t\n};\n\nexport default EasingFunctions;\n","import * as THREE from 'three';\nimport Container from '../../objects/container';\n\nexport interface GridProps {\n\tsize?: number;\n\tdivisions?: number;\n\tcolor1?: number;\n\tcolor2?: number;\n}\n\nexport default class Grid extends Container{\n\tgridHelper: THREE.GridHelper;\n  constructor(name?: string, props?: GridProps) {\n\t\tsuper(name || \"grid\");\n\n\t\tthis.gridHelper = new THREE.GridHelper(\n\t\t\t(props && props.size) || 1000,\n\t\t\t(props && props.divisions) || 100,\n\t\t\t(props && props.color1) || 0xd4d6d8,\n\t\t\t(props && props.color2) || 0xe4e7e8\n\t\t);\n\t\t\n\t\t((this.gridHelper.geometry as THREE.BufferGeometry).getAttribute(\"position\") as THREE.BufferAttribute).setXYZ(200, 0, 0, 0);\n\t\t((this.gridHelper.geometry as THREE.BufferGeometry).getAttribute(\"position\") as THREE.BufferAttribute).setXYZ(201, 0, 0, 0);\n\t\t((this.gridHelper.geometry as THREE.BufferGeometry).getAttribute(\"position\") as THREE.BufferAttribute).setXYZ(202, 0, 0, 0);\n\t\t((this.gridHelper.geometry as THREE.BufferGeometry).getAttribute(\"position\") as THREE.BufferAttribute).setXYZ(203, 0, 0, 0);\n\t\t\n\t\t\n\n\n\t  this.gridHelper.rotation.set(Math.PI / 2, 0, 0, \"XYZ\");\n\t  const material = this.gridHelper.material as THREE.LineBasicMaterial;\n\t  material.transparent = true;\n\t  material.opacity = 0.2;\n\t  material.color.setRGB(0, 0, 0);\n\t  this.add(this.gridHelper);\n  }\n}\n","export const camera = {\n\tmetadata: {\n\t\tversion: 4.5,\n\t\ttype: \"Object\",\n\t\tgenerator: \"Object3D.toJSON\"\n\t},\n\tobject: {\n\t\ttype: \"PerspectiveCamera\",\n\t\tlayers: 1,\n\t\tmatrix: [\n\t\t\t0.9865227300450198,\n\t\t\t0.1636242741909678,\n\t\t\t-2.7755575615628914e-17,\n\t\t\t0,\n\t\t\t-0.04441440408326102,\n\t\t\t0.26778312317158637,\n\t\t\t0.9624549650006486,\n\t\t\t0,\n\t\t\t0.15748099508972446,\n\t\t\t-0.949483699617824,\n\t\t\t0.27144141236296304,\n\t\t\t0,\n\t\t\t17.09256526213967,\n\t\t\t-45.12563348939184,\n\t\t\t15.073592779879819,\n\t\t\t1\n\t\t],\n\t\tfov: 25,\n\t\tzoom: 1,\n\t\tnear: 0.0001,\n\t\tfar: 500,\n\t\tfocus: 10,\n\t\taspect: 2.3666666666666667,\n\t\tfilmGauge: 35,\n\t\tfilmOffset: 0\n\t}\n};\n\nexport default {\n\tcamera: JSON.stringify(camera)\n};\n","import * as THREE from \"three\";\n\nimport Container from \"../../objects/container\";\n\nexport interface AxesProps {\n  Xaxis?: boolean;\n  Yaxis?: boolean;\n  Zaxis?: boolean;\n}\n\n\nexport default class Axes extends Container {\n  Xaxis: THREE.Line;\n  Yaxis: THREE.Line;\n  Zaxis: THREE.Line;\n\tconstructor(name?: string, props?: AxesProps) {\n\t\tsuper(name || \"axes\");\n\t\tthis.Xaxis = new THREE.Line(this.makeLine(\n\t\t\tnew THREE.Vector3(-1000, 0, 0),\n\t\t\tnew THREE.Vector3(+1000, 0, 0)\n    ), new THREE.LineBasicMaterial({\n      color: 0xff0000,\n      transparent: true,\n      opacity: 0.3,\n      visible: (props && props.Xaxis) || true\n    }));\n\n    this.Yaxis = new THREE.Line(\n\t\tthis.makeLine(\n\t\t\tnew THREE.Vector3(0, -1000, 0),\n\t\t\tnew THREE.Vector3(0, +1000, 0)\n\t\t),\n\t\tnew THREE.LineBasicMaterial({\n\t\t\tcolor: 0x38a10c,\n\t\t\ttransparent: true,\n\t\t\topacity: 0.3,\n\t\t\tvisible: (props && props.Yaxis) || true\n\t\t})\n\t);\n\n\t\tthis.Zaxis = new THREE.Line(\n\t\t\tthis.makeLine(\n\t\t\t\tnew THREE.Vector3(0, 0, -1000),\n\t\t\t\tnew THREE.Vector3(0, 0, +1000)\n\t\t\t),\n\t\t\tnew THREE.LineBasicMaterial({\n\t\t\t\tcolor: 0x0000ff,\n\t\t\t\ttransparent: true,\n\t\t\t\topacity: 0.3,\n\t\t\t\tvisible: (props && props.Zaxis) || false\n\t\t\t})\n\t\t);\n    \n    this.add(this.Xaxis, this.Yaxis, this.Zaxis);\n  }\n  makeLine(start: THREE.Vector3, end: THREE.Vector3) {\n    const geometry = new THREE.Geometry();\n\t\tgeometry.vertices.push(start);\n    geometry.vertices.push(end);\n    return geometry;\n  }\n}\n","import * as THREE from \"three\";\nimport Container from \"../../objects/container\";\n\nexport default class Lights extends Container{\n  constructor(name?: string) {\n    super(name || \"lights\");\n\t\tthis.add(new Container(\"ambientLights\"));\n    this.add(new Container(\"geometryLights\"));\n    this.add(new Container(\"helpers\"));\n    this.ambientLights.add(new THREE.AmbientLight(0xffffff, 1))\n    \n    const color = 0xffffff;\n    const intensity = 1;\n    const light = new THREE.DirectionalLight(color, intensity);\n    // this.geometryLights.add(light);\n      \n    const size = 1;\n    const helperColor = 0x000000;\n    const helper = new THREE.DirectionalLightHelper(light,size,helperColor);\n    // this.helpers.add(helper);\n  }\n  setHelpersVisible(visible) {\n    this.helpers.visible = visible;\n  }\n  get ambientLights() {\n    return this.children[0];\n  }\n  get geometryLights() {\n    return this.children[1];\n  }\n  get helpers() {\n    return this.children[2];\n  }\n}\n","import * as THREE from \"three\";\nimport Container from \"../objects/container\";\n\nexport default class PickHelper {\n  pickPosition: { x: number; y: number; };\n  raycaster: THREE.Raycaster;\n  pickedObject: any;\n  pickedObjectSavedColor: number;\n  hover: null;\n  scene: any;\n  camera: any;\n  objects: Container[];\n  mount: any;\n  constructor(scene, camera, mount) {\n    this.pickPosition = { x: 0, y: 0 };\n    this.raycaster = new THREE.Raycaster();\n    this.pickedObject = null;\n    this.pickedObjectSavedColor = 0;\n    this.hover = null;\n    this.scene = scene;\n    this.camera = camera;\n    this.objects = [] as Container[];\n    this.mount = mount;\n  }\n\n  pick(event, objects = this.objects, scene = this.scene, camera=this.camera, mount=this.mount) {\n    this.setPickPosition(event, mount);\n    this.raycaster.setFromCamera(this.pickPosition, this.camera);\n\n    const intersectedObjects = this.raycaster.intersectObjects(objects, true);\n    if (intersectedObjects.length) {\n      let i = 0;\n      let found = false;\n      while (!found && i < intersectedObjects.length) {\n        //@ts-ignore\n        if (intersectedObjects[i]?.object?.parent?.kind.match(/source|receiver/gmi)) {\n          this.pickedObject = intersectedObjects[i].object.parent;\n          found = true;\n        }\n        i++;\n      }\n      if (!found) {\n        this.pickedObject = intersectedObjects[0].object.parent;\n      }\n    } else {\n      this.pickedObject = false;\n    }\n    return this.pickedObject;\n  }\n\n  pickOnce(event, scene, camera, mount) {\n    this.setPickPosition(event, mount);\n    let normalizedPosition = this.pickPosition;\n\n    this.raycaster.setFromCamera(normalizedPosition, camera);\n\n    const intersectedObjects = this.raycaster.intersectObjects(scene.children, true);\n    if (intersectedObjects.length) {\n      if (intersectedObjects[0].object === this.pickedObject) {\n        return false;\n      }\n      this.pickedObject = intersectedObjects[0].object;\n    } else {\n      this.pickedObject = false;\n    }\n    return this.pickedObject;\n  }\n\n  pickCenter(scene, camera, mount) {\n    this.setPickPositionCenter(mount);\n    let normalizedPosition = this.pickPosition;\n\n    this.raycaster.setFromCamera(normalizedPosition, camera);\n\n    const intersectedObjects = this.raycaster.intersectObjects(scene.children, true);\n    if (intersectedObjects.length) {\n      this.pickedObject = intersectedObjects[0].object;\n    } else {\n      this.pickedObject = false;\n    }\n    return this.pickedObject;\n  }\n\n  setPickPosition(event, mount) {\n    const pos = this.getCanvasRelativePosition(event, mount);\n    // console.log(pos);\n    // console.log(mount.clientWidth, mount.clientHeight);\n    this.pickPosition.x = (pos.x / mount.clientWidth) * 2 - 1;\n    this.pickPosition.y = (pos.y / mount.clientHeight) * -2 + 1;\n  }\n\n  setPickPositionCenter(mount) {\n    const pos = { x: mount.clientWidth / 2, y: mount.clientHeight / 2 };\n    this.pickPosition.x = (pos.x / mount.clientWidth) * 2 - 1;\n    this.pickPosition.y = (pos.y / mount.clientHeight) * -2 + 1;\n  }\n\n  getCanvasRelativePosition(event, mount) {\n    const rect = mount.getBoundingClientRect();\n    return {\n      x: event.clientX - rect.left,\n      y: event.clientY - rect.top\n    };\n  }\n\n  clearPickPosition() {\n    this.pickPosition.x = -100000;\n    this.pickPosition.y = -100000;\n  }\n}\n","import * as THREE from \"three\";\n\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport { OutlinePass } from \"three/examples/jsm/postprocessing/OutlinePass\";\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\nimport { FXAAShader } from \"three/examples/jsm/shaders/FXAAShader\";\nimport { OrbitControls } from \"./OrbitControls\";\n\n//@ts-ignore\n// import fs from \"!raw-loader!./shaders/beam/shader.frag\";\n//@ts-ignore\n// import vs from \"!raw-loader!./shaders/beam/shader.vert\";\n// import { AudioRenderer } from './audio';\nimport { CameraStore } from \"../common/storage-schemas\";\n\n\nimport { lerp, lerp3 } from \"../common/lerp\";\nimport EasingFunctions from '../common/easing';\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\n\n//@ts-ignore\nimport speakerModel from \"!raw-loader!../res/models/speaker.gltf\";\n//@ts-ignore\nimport micModel from \"!raw-loader!../res/models/mic.gltf\";\n\nimport whitematcap from '../res/textures/matcap-porcelain-white.jpg';\nimport triPattern from '../res/textures/tri_pattern.jpg'\n\nimport Container from \"../objects/container\";\n\nimport Grid from \"./env/grid\";\nimport { KeyValuePair } from \"../common/key-value-pair\";\n\nimport defaults from './defaults';\nimport Axes from './env/axes';\nimport Lights from './env/lights';\nimport Room from '../objects/room';\nimport Messenger from \"../messenger\";\n\n\nimport PickHelper from './pick-helper';\n\n\n\n\n\n\nexport interface OrbitControlMouseConfig {\t\t\n\tLEFT: number;\n\tMIDDLE: number;\n\tRIGHT: number;\n}\n\nexport interface MouseConfigSet {\n  Default: OrbitControlMouseConfig;\n  Shift: OrbitControlMouseConfig;\n  Control: OrbitControlMouseConfig;\n  Alt: OrbitControlMouseConfig;\n  Meta: OrbitControlMouseConfig;\n}\n\nexport interface ModifierKeyState {\n\tShift: number;\n  Control: number;\n  Alt: number;\n  Meta: number;\n}\n\nexport interface RendererParams{\n\telt?: HTMLCanvasElement;\n\tmessenger: Messenger;\n}\n\nexport default class Renderer {\n\t\n\tmouseConfigSet!: MouseConfigSet;\n\tmodifierKeyState!: ModifierKeyState; \n\t\n\telt!: HTMLCanvasElement;\n\trenderer!: THREE.Renderer;\n\n\t_camera!: THREE.PerspectiveCamera|THREE.OrthographicCamera;\n\tperspectiveCamera!: THREE.PerspectiveCamera;\n\torthoCamera!: THREE.OrthographicCamera\n\n\tscene!: THREE.Scene;\n\tenv!: Container;\n\tworkspace!: Container;\n\n\tlights!: Lights;\n\taxes!: Axes;\n\tgrid!: Grid;\n\n\tstack!: Array<(...args)=>void>\n\n\n\tsettingHandlers!: KeyValuePair<((val: any)=>void)>;\n\t\n\tsourceGroup!: Container;\n\tsourceTemplate!: Container;\n\n\treceiverGroup!: Container;\n\treceiverTemplate!: Container;\n\n\tgeometryGroup!: Container;\n\tcontrols;\n\n\tworkspaceCursor!: THREE.Object3D;\n\tfog!: THREE.FogExp2 | THREE.Fog;\n\n\n  textures!: KeyValuePair<THREE.Texture>\n\tsmoothingCameraFunction!: any;\n\tsmoothingCamera!: boolean;\n\tmessenger: Messenger;\n\tpickHelper!: PickHelper;\n\tcomposer!: EffectComposer;\n\toutlinePass!: OutlinePass;\n\trenderPass!: RenderPass;\n\teffectFXAA!: ShaderPass;\n\t\n\n\n\t\n\tconstructor(params: RendererParams) {\n\t\t[\n\t\t\t\"init\",\n\t\t\t\"render\",\n\t\t\t\"smoothCameraTo\",\n\t\t\t\"setOrtho\",\n\t\t].forEach(method => {\n\t\t\tthis[method] = this[method].bind(this);\n\t\t});\n\t\t\n\t\t\n\t\t\n\n\t\tthis.messenger = params.messenger;\n\t\t\n\t}\n\t\n\tinit(elt: HTMLCanvasElement) {\n\n\t\tthis.modifierKeyState = {\n\t\t\tShift: 0,\n\t\t\tControl: 0,\n\t\t\tAlt: 0,\n\t\t\tMeta: 0\n\t\t};\n\t\t\n\t\tthis.smoothingCamera = false;\n\t\tthis.smoothingCameraFunction = undefined;\n\t\tthis.elt = elt;\n\t\tthis.stack = [] as Array<(...args) => void>;\n\t\tthis.env = new Container(\"env\");\n\t\tthis.workspace = new Container(\"workspace\");\n\t\tthis.workspaceCursor = this.workspace;\n\t\t\n\t\tthis.lights = new Lights();\n\t\tthis.grid = new Grid();\n\t\tthis.axes = new Axes();\n\t\t\n\t\tthis.env.add(this.grid, this.lights, this.axes);\n\t\t\n\n\t\tconst background = 0xf5f8fa;\n\n\t\t// scene\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.scene.background = new THREE.Color(background);\n\t\tthis.scene.add(this.env, this.workspace);\n\t\t\n\t\t// renderer\n\t\tthis.renderer = new THREE.WebGLRenderer({\n\t\t\tcanvas: this.elt,\n\t\t\tcontext: this.elt.getContext(\"webgl2\", { alpha: false })!,\n\t\t\tantialias: true,\n\t\t\tdepth: true,\n\t\t\tprecision: \"mediump\"\n\t\t});\n\t\t//@ts-ignore\n\t\tthis.renderer.shadowMap.enabled = true;\n\t\t//@ts-ignore\n\t\tthis.renderer.shadowMapSoft = true;\n\n\t\tthis.renderer.setSize(this.clientWidth, this.clientHeight);\n\t\tconst pixelRatio = window.devicePixelRatio;\n\t\t//@ts-ignore\n\t\tthis.renderer.setPixelRatio(pixelRatio);\n\t\t\n\t\t\n\n\t\t\tconst fov = 45;\n\t\t\tconst aspect = this.aspect;\n\t\t\tconst near = 0.01;\n\t\t\tconst far = 500;\n\t\t\tconst up = [0, 0, 1];\n\t\t\t\n\t\t\tthis._camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\n\t\t\tthis._camera.up.set(up[0], up[1], up[2]);\n\n\t\t\tconst storedState = JSON.parse(localStorage.getItem(\"camera\") || defaults.camera) as CameraStore;\n\n\t\t\tif (storedState) {\n\t\t\t\tif (storedState.object) {\n\t\t\t\t\tthis._camera.position.set(storedState.object.matrix[12], storedState.object.matrix[13], storedState.object.matrix[14]);\n\t\t\t\t\tif (this._camera instanceof THREE.PerspectiveCamera) {\n\t\t\t\t\t\tthis._camera.fov = storedState.object.fov;\n\t\t\t\t\t\tthis._camera.aspect = storedState.object.aspect;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.mouseConfigSet = {\n\t\t\t\tDefault: {\n\t\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t\t},\n\t\t\t\tShift: {\n\t\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t\t},\n\t\t\t\tMeta: {\n\t\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t\t},\n\t\t\t\tAlt: {\n\t\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t\t},\n\t\t\t\tControl: {\n\t\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.controls = new OrbitControls(this._camera, this.renderer.domElement);\n\t\t\tthis.controls.mouseButtons = this.mouseConfigSet.Default;\n\t\t\tthis.controls.screenSpacePanning = true;\n\t\t\t// console.log(this.controls)\n\n\t\n\t\t\n\t\t\tthis.pickHelper = new PickHelper(this.scene, this._camera, this.renderer.domElement);\n\t\t\n\t\t\tthis.fog = new THREE.Fog(background, far - 200, far);\n\t\t\tthis.scene.fog = this.fog;\n\n\t\t\tthis.composer = new EffectComposer(this.renderer as THREE.WebGLRenderer);\n\n\t\t\tthis.renderPass = new RenderPass(this.scene, this._camera);\n\t\t\tthis.composer.addPass(this.renderPass);\n\n\t\t\n\t\t\tthis.settingHandlers = {};\n\t\t\tthis.settingHandlers.lightHelpersVisible = (val: boolean) => {\n\t\t\t\tconsole.log(val);\n\t\t\t\tthis.lights.setHelpersVisible(val);\n\t\t\t};\n\t\n\t\t\tthis.messenger.addMessageHandler(\"RENDERER_SHOULD_CHANGE_BACKGROUND\", (acc, ...args) => (this.background = args[0]));\n\t\t\tthis.messenger.addMessageHandler(\"RENDERER_SHOULD_CHANGE_FOG_COLOR\", (acc, ...args) => (this.fogColor = args[0]));\n\t\t\tthis.messenger.addMessageHandler(\"TOGGLE_CAMERA_ORTHO\", (acc, ...args) => this.setOrtho(this.camera instanceof THREE.PerspectiveCamera));\n\t\t\tthis.messenger.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\", (acc, ...args) => {\n\t\t\t\tconst id = args[0];\n\t\t\t\tconst object = this.scene.getObjectByProperty(\"uuid\", id);\n\t\t\t\tif (object) {\n\t\t\t\t\tconsole.log(object);\n\t\t\t\t\tobject.parent && object.parent.remove(object);\n\t\t\t\t\t// this.scene.remove(object);\n\t\t\t\t}\n\t\t\t});\n\t\t\n\n\n\t\t\t// save the state of the camera\n\t\t\twindow.addEventListener(\"mouseup\", (e) => {\n\t\t\t\tif (this.camera instanceof THREE.PerspectiveCamera) {\n\t\t\t\t\tlocalStorage.setItem(\"camera\", JSON.stringify(this.camera.toJSON()));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\twindow.addEventListener(\"keydown\", (e) => {\n\t\t\t\tif (this.modifierKeyState.hasOwnProperty(e.key)) {\n\t\t\t\t\tthis.modifierKeyState[e.key] += 1;\n\t\t\t\t}\n\t\t\t\tif (e.key === \"Escape\") {\n\t\t\t\t\tthis.messenger.postMessage(\"DESELECT_ALL_OBJECTS\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\twindow.addEventListener(\"keyup\", (e) => {\n\t\t\t\tif (this.modifierKeyState.hasOwnProperty(e.key)) {\n\t\t\t\t\tthis.modifierKeyState[e.key] -= 1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.renderer.domElement.addEventListener(\"mousedown\", (e) => {\n\t\t\t\tconst selection = this.pickHelper.pick(e, [this.workspace]);\n\n\t\t\t\tif (selection) {\n\t\t\t\t\tif (e.button == 0) {\n\t\t\t\t\t\tif (e.shiftKey) {\n\t\t\t\t\t\t\tthis.messenger.postMessage(\"APPEND_SELECTION\", [selection]);\n\t\t\t\t\t\t} else if (!e.altKey) {\n\t\t\t\t\t\t\tthis.messenger.postMessage(\"SET_SELECTION\", [selection]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t}\n\t\t\t\t// console.log(this.pickHelper);\n\t\t\t});\n\t\t\t\n\t\t\tthis.render();\n\t\t\tthis.composer.render();\n\n\t\t\t// setInterval(this.render, 1000 / 20);\n\n\t}\n\t\n\tresetControls() {\n\t\tthis.controls.dispose();\n\t\tthis.controls = new OrbitControls(this.camera, this.renderer.domElement);\n    this.controls.mouseButtons = this.mouseConfigSet.Default;\n    this.controls.screenSpacePanning = true;\n    // console.log(this.controls)\n\n\t}\n\t\n\tsetOrtho(on: boolean) {\n\t\tconst near = this.camera.near;\n\t\tconst far = this.camera.far;\n\t\tconst fov = 45;\n\t\tif (on) {\n\t\t\tconst { left, right, top, bottom } = this.getCenteredCanvasBounds();\n\t\t\tlet camera = new THREE.OrthographicCamera(left, right, top, bottom, near, far);\n\t\t\tcamera.zoom = 8.1;\n\t\t\tthis.camera = camera;\n\n\t\t}\n\t\telse {\n\t\t\tthis.camera = new THREE.PerspectiveCamera(fov, this.aspect, near, far);\n\t\t}\n\t\t// this.resizeCanvasToDisplaySize(true);\n\t\t// this.camera.position.set(pos.x, pos.y, pos.z);\n\t\t// this.camera.applyQuaternion(quat);\n\t\t\n\t}\n\t\n\tget camera() {\n\t\treturn this._camera;\n\t}\n\t\n\tset camera(camera: THREE.PerspectiveCamera | THREE.OrthographicCamera) {\n\t\tconst quat = new THREE.Quaternion().copy(this._camera.quaternion);\n\t\tconst pos = new THREE.Vector3().copy(this._camera.position);\n\t\tthis._camera = camera;\n\t\tthis._camera.up.set(0, 0, 1);\n\t\t// this.controls.dispose();\n\t\t// this.controls = new OrbitControls(this._camera, this.renderer.domElement);\n  \t// this.controls.mouseButtons = this.mouseConfigSet.Default;\n\t\t// this.controls.screenSpacePanning = true;\n\t\tthis.controls.object = this._camera;\n\t\tthis.controls.update();\n\t\tthis._camera.position.set(pos.x, pos.y, pos.z);\n\t\tthis._camera.setRotationFromQuaternion(quat)\n\t\tthis._camera.quaternion.normalize();\n\t\tthis._camera.updateProjectionMatrix();\n\t\tif (this.renderPass.camera.uuid !== this._camera.uuid) {\n\t\t\tthis.renderPass.camera = this._camera;\n\t\t}\n\t\t\n\t\tthis.pickHelper = new PickHelper(this.scene, this._camera, this.renderer.domElement);\n\t}\n\t\n\t\n\tprivate get clientWidth() {\n\t\treturn (this.elt.parentElement as HTMLDivElement).clientWidth;\n\t}\n\tprivate get clientHeight() {\n\t\treturn (this.elt.parentElement as HTMLDivElement).clientHeight;\n\t}\n\tprivate get aspect() {\n\t\treturn this.clientWidth / this.clientHeight;\n\t}\n\t\n\t\n\tresize() {\n\t\tthis.renderer.setSize(\n\t\t\tthis.renderer.domElement.parentElement?.clientWidth || 0,\n\t\t\tthis.renderer.domElement.parentElement?.clientHeight || 0\n\t\t);\n\t\tthis.composer.setSize(\n\t\t\tthis.renderer.domElement.parentElement?.clientWidth || 0,\n\t\t\tthis.renderer.domElement.parentElement?.clientHeight || 0\n\t\t);\n\n\t}\n\tresizeCanvasToDisplaySize(force?: boolean) {\n\t\tconst canvas = this.renderer.domElement;\n\t\t// look up the size the canvas is being displayed\n\t\tconst width = canvas.clientWidth;\n\t\tconst height = canvas.clientHeight;\n\t\n\t\t// adjust displayBuffer size to match\n\t\tif (canvas.width !== width || canvas.height !== height || force) {\n\t\t\t// you must pass false here or three.js sadly fights the browser\n\t\t\tthis.renderer.setSize(width, height, false);\n\t\t\tthis.composer.setSize(width, height);\n\t\t\t\tif (this.camera instanceof THREE.OrthographicCamera) {\n          this.camera.left = -canvas.width / 2;\n          this.camera.right = canvas.width / 2;\n          this.camera.top = canvas.height / 2;\n          this.camera.bottom = -canvas.height / 2;\n        } else {\n          (this.camera as THREE.PerspectiveCamera).aspect = canvas.width / canvas.height;\n\n        }\n\t\t\t\n\t\t\tthis.camera.updateProjectionMatrix();\n\n\t\t\t// update any render target sizes here\n\t\t}\n\t}\n\tcheckresize() {\n\t\tif (\n\t\t\tthis.renderer.domElement.width !==\n\t\t\t\tthis.renderer.domElement.parentElement?.clientWidth ||\n\t\t\t0 ||\n\t\t\tthis.renderer.domElement.height !==\n\t\t\t\t(this.renderer.domElement.parentElement?.clientHeight || 0)\n\t\t) {\n\t\t\tthis.resize();\n\t\t}\n\t}\n\tsettingChanged(setting: string, value: any) {\n\t\tthis.settingHandlers[setting](value);\n\t}\n\taddRays(rays: THREE.LineSegments) {\n\t\tthis.scene.add(rays);\n\t}\n\tadd(obj: THREE.Object3D) {\n\t\tthis.workspaceCursor.add(obj);\n\t}\n\tremove(obj: THREE.Object3D) {\n\t\tthis.workspace.getObjectByProperty('uuid', obj.uuid)?.remove();\n\t}\n\t\n\taddRoom(room: Room) {\n\t\tthis.workspaceCursor.add(room);\n\t\tconst near =\n\t\t\troom.boundingBox.max\n\t\t\t\t.clone()\n\t\t\t\t.sub(room.boundingBox.min)\n\t\t\t\t.length() * 4;\n\t\tconst far = near * 4;\n\t\tconst color = this.fog.color;\n\t\tthis.fog = new THREE.Fog(color.getHex(), near, far);\n    this.scene.fog = this.fog;\n\t}\n\n\t\n\t\n\n\t\n\tgetCenteredCanvasBounds() {\n\t\tconst halfheight = this.renderer.domElement.height / 2;\n\t\tconst halfwidth = this.renderer.domElement.width / 2;\n\t\treturn {\n\t\t\ttop: halfheight,\n\t\t\tbottom: -halfheight,\n\t\t\tleft: -halfwidth,\n\t\t\tright: halfwidth\n\t\t}\n\t}\n\tgetOrthoBounds() {\n\t\tif (this.camera instanceof THREE.OrthographicCamera) {\n\t\t\treturn [this.camera.top, this.camera.bottom, this.camera.left, this.camera.right];\n\t\t}\n\t\telse {\n\t\t\treturn [this.orthoCamera.top, this.orthoCamera.bottom, this.orthoCamera.left, this.orthoCamera.right];\n\t\t}\n\t}\n\t\n\tsmoothCameraTo(\n\t\tposition: THREE.Vector3,\n\t\ttarget?: THREE.Vector3,\n\t\tduration?: number,\n\t\tcurve?: (t: number) => number\n\t) {\n\t\tconst origin = this.camera.getWorldPosition(new THREE.Vector3());\n\t\tconst timer = new Ticker(\"inc\");\n\t\tconst _curve = curve || EasingFunctions.linear;\n\t\tconst _duration = (duration || 1000);\n\t\tthis.smoothingCamera = true;\n\t\tthis.smoothingCameraFunction = () => {\n\t\t\ttimer.tick();\n\t\t\tif (timer.ticks > _duration) {\n        this.smoothingCamera = false;\n        return;\n      }\n\t\t\tconst pos = lerp3(\n        origin,\n        position,\n        _curve(timer.ticks / _duration)\n      );\n\t\t\tthis.camera.position.set(pos.x, pos.y, pos.z);\n\t\t\ttarget && this.camera.lookAt(target);\n\t\t};\n\t}\n\tupdate() {\n\t\tthis.smoothingCamera && this.smoothingCameraFunction();\n\t\tthis.messenger.postMessage(\"RENDERER_UPDATED\");\n\t}\n\trender() {\n\t\t\n\t\tthis.update();\n\t\tthis.resizeCanvasToDisplaySize();\n\t\trequestAnimationFrame(this.render);\n\t\t// this.renderer.render(this.scene, this.camera);\n\t\tthis.composer.render();\n\t}\n\t\n\t\n\tget background() {\n\t\treturn (this.scene.background as THREE.Color).getHexString();\n\t}\n\tset background(color: string) {\n\t\t(this.scene.background as THREE.Color).setStyle(color);\n\t}\n\tget fogColor() {\n\t\treturn (this.scene.fog && this.scene.fog.color && this.scene.fog.color.getHexString()) || \"#000000\";\n\t}\n\tset fogColor(color: string) {\n\t\tthis.scene.fog?.color.setStyle(color);\n\t}\n\t\n\t\n}\n\n\nexport interface SmoothCameraParams {\n\tposition: THREE.Vector3;\n\ttarget?: THREE.Vector3;\n\tduration: number;\n\tcurve?: (t: number) => number;\n}\n\nexport class Ticker{\n\tticks: number;\n\tkind: \"inc\" | \"dec\";\n\tinc: boolean;\n\ttick: (() => number);\n\tconstructor(kind: \"inc\" | \"dec\", ticks?: number) {\n\t\tthis.kind = kind;\n\t\tthis.inc = this.kind === \"inc\";\n\t\tthis.ticks = ticks || 0;\t\n\t\tthis.tick = this.inc\n\t\t\t? function () {\n\t\t\t\treturn this.ticks++;\n\t\t\t}\n\t\t\t: function () {\n\t\t\t\treturn this.ticks--;\n\t\t\t}\n\t}\n}\n\n","export default function fullScreen() {\n  if (!document.fullscreenElement) {\n    document.documentElement.requestFullscreen();\n  } else {\n    if (document.exitFullscreen) {\n      document.exitFullscreen(); \n    }\n  }\n}","import * as THREE from \"three\";\n\nexport class STLLoader {\n\tconstructor() {}\n\tparse(data) {\n\t\tvar isBinary = function() {\n\t\t\tvar expect, face_size, n_faces, reader;\n\t\t\treader = new DataView(binData);\n\t\t\tface_size = (32 / 8) * 3 + (32 / 8) * 3 * 3 + 16 / 8;\n\t\t\tn_faces = reader.getUint32(80, true);\n\t\t\texpect = 80 + 32 / 8 + n_faces * face_size;\n\n\t\t\tif (expect === reader.byteLength) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// An ASCII STL data must begin with 'solid ' as the first six bytes.\n\t\t\t// However, ASCII STLs lacking the SPACE after the 'd' are known to be\n\t\t\t// plentiful.  So, check the first 5 bytes for 'solid'.\n\n\t\t\t// US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\n\t\t\tvar solid = [115, 111, 108, 105, 100];\n\n\t\t\tfor (var i = 0; i < 5; i++) {\n\t\t\t\t// If solid[ i ] does not match the i-th byte, then it is not an\n\t\t\t\t// ASCII STL; hence, it is binary and return true.\n\n\t\t\t\tif (solid[i] != reader.getUint8(i, false)) return true;\n\t\t\t}\n\n\t\t\t// First 5 bytes read \"solid\"; declare it to be an ASCII STL\n\t\t\treturn false;\n\t\t};\n\n\t\tvar binData = this.ensureBinary(data);\n\n\t\treturn isBinary()\n\t\t\t? this.parseBinary(binData)\n\t\t\t: this.parseASCII(this.ensureString(data));\n\t}\n\n\tparseBinary(data) {\n\t\tvar reader = new DataView(data);\n\t\tvar faces = reader.getUint32(80, true);\n\n\t\tvar r,\n\t\t\tg,\n\t\t\tb,\n\t\t\thasColors = false,\n\t\t\tcolors;\n\t\tvar defaultR, defaultG, defaultB, alpha;\n\n\t\t// process STL header\n\t\t// check for default color in header (\"COLOR=rgba\" sequence).\n\n\t\tfor (var index = 0; index < 80 - 10; index++) {\n\t\t\tif (\n\t\t\t\treader.getUint32(index, false) == 0x434f4c4f /*COLO*/ &&\n\t\t\t\treader.getUint8(index + 4) == 0x52 /*'R'*/ &&\n\t\t\t\treader.getUint8(index + 5) == 0x3d /*'='*/\n\t\t\t) {\n\t\t\t\thasColors = true;\n\t\t\t\tcolors = [];\n\n\t\t\t\tdefaultR = reader.getUint8(index + 6) / 255;\n\t\t\t\tdefaultG = reader.getUint8(index + 7) / 255;\n\t\t\t\tdefaultB = reader.getUint8(index + 8) / 255;\n\t\t\t\talpha = reader.getUint8(index + 9) / 255;\n\t\t\t}\n\t\t}\n\n\t\tvar dataOffset = 84;\n\t\tvar faceLength = 12 * 4 + 2;\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tvar vertices = [] as any[];\n\t\tvar normals = [] as any[];\n\n\t\tfor (var face = 0; face < faces; face++) {\n\t\t\tvar start = dataOffset + face * faceLength;\n\t\t\tvar normalX = reader.getFloat32(start, true);\n\t\t\tvar normalY = reader.getFloat32(start + 4, true);\n\t\t\tvar normalZ = reader.getFloat32(start + 8, true);\n\n\t\t\tif (hasColors) {\n\t\t\t\tvar packedColor = reader.getUint16(start + 48, true);\n\n\t\t\t\tif ((packedColor & 0x8000) === 0) {\n\t\t\t\t\t// facet has its own unique color\n\n\t\t\t\t\tr = (packedColor & 0x1f) / 31;\n\t\t\t\t\tg = ((packedColor >> 5) & 0x1f) / 31;\n\t\t\t\t\tb = ((packedColor >> 10) & 0x1f) / 31;\n\t\t\t\t} else {\n\t\t\t\t\tr = defaultR;\n\t\t\t\t\tg = defaultG;\n\t\t\t\t\tb = defaultB;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 1; i <= 3; i++) {\n\t\t\t\tvar vertexstart = start + i * 12;\n\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart, true));\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 4, true));\n\t\t\t\tvertices.push(reader.getFloat32(vertexstart + 8, true));\n\n\t\t\t\tnormals.push(normalX, normalY, normalZ);\n\n\t\t\t\tif (hasColors) {\n\t\t\t\t\tcolors.push(r, g, b);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tgeometry.addAttribute(\n\t\t\t\"position\",\n\t\t\tnew THREE.BufferAttribute(new Float32Array(vertices), 3)\n\t\t);\n\t\tgeometry.addAttribute(\n\t\t\t\"normal\",\n\t\t\tnew THREE.BufferAttribute(new Float32Array(normals), 3)\n\t\t);\n\n\t\tif (hasColors) {\n\t\t\tgeometry.addAttribute(\n\t\t\t\t\"color\",\n\t\t\t\tnew THREE.BufferAttribute(new Float32Array(colors), 3)\n\t\t\t);\n\t\t\t//@ts-ignore\n\t\t\tgeometry.hasColors = true;\n\t\t\t//@ts-ignore\n\t\t\tgeometry.alpha = alpha;\n\t\t}\n\n\t\treturn geometry;\n\t}\n\n\tparseASCII(data) {\n\t\tvar geometry,\n\t\t\tlength,\n\t\t\tpatternFace,\n\t\t\tpatternNormal,\n\t\t\tpatternVertex,\n\t\t\tresult,\n\t\t\ttext;\n\t\tgeometry = new THREE.BufferGeometry();\n\t\tpatternFace = /facet([\\s\\S]*?)endfacet/g;\n\n\t\tvar vertices = [] as any[];\n\t\tvar normals = [] as any[];\n\n\t\tvar normal = new THREE.Vector3();\n\n\t\twhile ((result = patternFace.exec(data)) !== null) {\n\t\t\ttext = result[0];\n\t\t\tpatternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\twhile ((result = patternNormal.exec(text)) !== null) {\n\t\t\t\tnormal.x = parseFloat(result[1]);\n\t\t\t\tnormal.y = parseFloat(result[3]);\n\t\t\t\tnormal.z = parseFloat(result[5]);\n\t\t\t}\n\n\t\t\tpatternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n\t\t\twhile ((result = patternVertex.exec(text)) !== null) {\n\t\t\t\tvertices.push(\n\t\t\t\t\tparseFloat(result[1]),\n\t\t\t\t\tparseFloat(result[3]),\n\t\t\t\t\tparseFloat(result[5])\n\t\t\t\t);\n\t\t\t\tnormals.push(normal.x, normal.y, normal.z);\n\t\t\t}\n\t\t}\n\n\t\tgeometry.addAttribute(\n\t\t\t\"position\",\n\t\t\tnew THREE.BufferAttribute(new Float32Array(vertices), 3)\n\t\t);\n\t\tgeometry.addAttribute(\n\t\t\t\"normal\",\n\t\t\tnew THREE.BufferAttribute(new Float32Array(normals), 3)\n\t\t);\n\n\t\treturn geometry;\n\t}\n\n\tensureString(buf) {\n\t\tif (typeof buf !== \"string\") {\n\t\t\tvar array_buffer = new Uint8Array(buf);\n\t\t\tvar strArray = [] as String[];\n\t\t\tfor (var i = 0; i < buf.byteLength; i++) {\n\t\t\t\tstrArray.push(String.fromCharCode(array_buffer[i])); // implicitly assumes little-endian\n\t\t\t}\n\t\t\treturn strArray.join(\"\");\n\t\t} else {\n\t\t\treturn buf;\n\t\t}\n\t}\n\n\tensureBinary(buf) {\n\t\tif (typeof buf === \"string\") {\n\t\t\tvar array_buffer = new Uint8Array(buf.length);\n\t\t\tfor (var i = 0; i < buf.length; i++) {\n\t\t\t\tarray_buffer[i] = buf.charCodeAt(i) & 0xff; // implicitly assumes little-endian\n\t\t\t}\n\t\t\treturn array_buffer.buffer || array_buffer;\n\t\t} else {\n\t\t\treturn buf;\n\t\t}\n\t}\n}\n","export class OBJLoader {\n\tprivate fileContents: string;\n\tprivate defaultModelName = \"untitled\";\n\tprivate currentMaterial = \"\";\n\tprivate currentGroup = \"\";\n\tprivate smoothingGroup = 0;\n\n\tprivate result: IResult = {\n\t\tmaterialLibraries: [],\n\t\tmodels: []\n\t};\n\n\tconstructor(fileContents: string, defaultModelName?: string) {\n\t\tthis.fileContents = fileContents;\n\n\t\tif (defaultModelName !== undefined) {\n\t\t\tthis.defaultModelName = defaultModelName;\n\t\t}\n\t}\n\n\tpublic parseAsync(): Promise<IResult> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tresolve(this.parse());\n\t\t\t} catch (theError) {\n\t\t\t\treject(theError);\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic parse(): IResult {\n\t\tconst stripComments = (line: string) => {\n\t\t\tconst commentIndex = line.indexOf(\"#\");\n\t\t\tif (commentIndex > -1) {\n\t\t\t\treturn line.substring(0, commentIndex);\n\t\t\t}\n\t\t\treturn line;\n\t\t};\n\n\t\tconst lines = this.fileContents.split(\"\\n\");\n\t\tfor (const line of lines) {\n\t\t\tconst strippedline = stripComments(line);\n\n\t\t\tconst lineItems = strippedline\n\t\t\t\t.replace(/\\s\\s+/g, \" \")\n\t\t\t\t.trim()\n\t\t\t\t.split(\" \");\n\n\t\t\tswitch (lineItems[0].toLowerCase()) {\n\t\t\t\tcase \"o\": // Start A New Model\n\t\t\t\t\tthis.parseObject(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"g\": // Start a new polygon group\n\t\t\t\t\tthis.parseGroup(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"v\": // Define a vertex for the current model\n\t\t\t\t\tthis.parseVertexCoords(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vt\": // Texture Coords\n\t\t\t\t\tthis.parseTextureCoords(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vn\": // Define a vertex normal for the current model\n\t\t\t\t\tthis.parseVertexNormal(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"s\": // Smooth shading statement\n\t\t\t\t\tthis.parseSmoothShadingStatement(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"f\": // Define a Face/Polygon\n\t\t\t\t\tthis.parsePolygon(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"mtllib\": // Reference to a material library file (.mtl)\n\t\t\t\t\tthis.parseMtlLib(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"usemtl\": // Sets the current material to be applied to polygons defined from this point forward\n\t\t\t\t\tthis.parseUseMtl(lineItems);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this.result;\n\t}\n\n\tprivate currentModel(): IModel {\n\t\tif (this.result.models.length === 0) {\n\t\t\tthis.result.models.push({\n\t\t\t\tfaces: [],\n\t\t\t\tname: this.defaultModelName,\n\t\t\t\ttextureCoords: [],\n\t\t\t\tvertexNormals: [],\n\t\t\t\tvertices: []\n\t\t\t});\n\t\t\tthis.currentGroup = \"\";\n\t\t\tthis.smoothingGroup = 0;\n\t\t}\n\n\t\treturn this.result.models[this.result.models.length - 1];\n\t}\n\n\tprivate parseObject(lineItems: string[]): void {\n\t\tconst modelName =\n\t\t\tlineItems.length >= 2 ? lineItems[1] : this.defaultModelName;\n\t\tthis.result.models.push({\n\t\t\tfaces: [],\n\t\t\tname: modelName,\n\t\t\ttextureCoords: [],\n\t\t\tvertexNormals: [],\n\t\t\tvertices: []\n\t\t});\n\t\tthis.currentGroup = \"\";\n\t\tthis.smoothingGroup = 0;\n\t}\n\n\tprivate parseGroup(lineItems: string[]): void {\n\t\tif (lineItems.length !== 2) {\n\t\t\tthrow \"Group statements must have exactly 1 argument (eg. g group_1)\";\n\t\t}\n\n\t\tthis.currentGroup = lineItems[1];\n\t}\n\n\tprivate parseVertexCoords(lineItems: string[]): void {\n\t\tconst x = lineItems.length >= 2 ? parseFloat(lineItems[1]) : 0.0;\n\t\tconst y = lineItems.length >= 3 ? parseFloat(lineItems[2]) : 0.0;\n\t\tconst z = lineItems.length >= 4 ? parseFloat(lineItems[3]) : 0.0;\n\n\t\tthis.currentModel().vertices.push({ x, y, z });\n\t}\n\n\tprivate parseTextureCoords(lineItems: string[]): void {\n\t\tconst u = lineItems.length >= 2 ? parseFloat(lineItems[1]) : 0.0;\n\t\tconst v = lineItems.length >= 3 ? parseFloat(lineItems[2]) : 0.0;\n\t\tconst w = lineItems.length >= 4 ? parseFloat(lineItems[3]) : 0.0;\n\n\t\tthis.currentModel().textureCoords.push({ u, v, w });\n\t}\n\n\tprivate parseVertexNormal(lineItems: string[]): void {\n\t\tconst x = lineItems.length >= 2 ? parseFloat(lineItems[1]) : 0.0;\n\t\tconst y = lineItems.length >= 3 ? parseFloat(lineItems[2]) : 0.0;\n\t\tconst z = lineItems.length >= 4 ? parseFloat(lineItems[3]) : 0.0;\n\n\t\tthis.currentModel().vertexNormals.push({ x, y, z });\n\t}\n\n\tprivate parsePolygon(lineItems: string[]): void {\n\t\tconst totalVertices = lineItems.length - 1;\n\t\tif (totalVertices < 3) {\n\t\t\tthrow `Face statement has less than 3 vertices`;\n\t\t}\n\n\t\tconst face: IFace = {\n\t\t\tgroup: this.currentGroup,\n\t\t\tmaterial: this.currentMaterial,\n\t\t\tsmoothingGroup: this.smoothingGroup,\n\t\t\tvertices: []\n\t\t};\n\n\t\tfor (let i = 0; i < totalVertices; i += 1) {\n\t\t\tconst vertexString = lineItems[i + 1];\n\t\t\tconst vertexValues = vertexString.split(\"/\");\n\n\t\t\tif (vertexValues.length < 1 || vertexValues.length > 3) {\n\t\t\t\tthrow `Two many values (separated by /) for a single vertex`;\n\t\t\t}\n\n\t\t\tlet vertexIndex = 0;\n\t\t\tlet textureCoordsIndex = 0;\n\t\t\tlet vertexNormalIndex = 0;\n\t\t\tvertexIndex = parseInt(vertexValues[0], 10);\n\t\t\tif (vertexValues.length > 1 && vertexValues[1] !== \"\") {\n\t\t\t\ttextureCoordsIndex = parseInt(vertexValues[1], 10);\n\t\t\t}\n\t\t\tif (vertexValues.length > 2) {\n\t\t\t\tvertexNormalIndex = parseInt(vertexValues[2], 10);\n\t\t\t}\n\n\t\t\tif (vertexIndex === 0) {\n\t\t\t\tthrow \"Faces uses invalid vertex index of 0\";\n\t\t\t}\n\n\t\t\t// Negative vertex indices refer to the nth last defined vertex\n\t\t\t// convert these to postive indices for simplicity\n\t\t\tif (vertexIndex < 0) {\n\t\t\t\tvertexIndex =\n\t\t\t\t\tthis.currentModel().vertices.length + 1 + vertexIndex;\n\t\t\t}\n\n\t\t\tface.vertices.push({\n\t\t\t\ttextureCoordsIndex,\n\t\t\t\tvertexIndex,\n\t\t\t\tvertexNormalIndex\n\t\t\t});\n\t\t}\n\t\tthis.currentModel().faces.push(face);\n\t}\n\n\tprivate parseMtlLib(lineItems: string[]): void {\n\t\tif (lineItems.length >= 2) {\n\t\t\tthis.result.materialLibraries.push(lineItems[1]);\n\t\t}\n\t}\n\n\tprivate parseUseMtl(lineItems: string[]): void {\n\t\tif (lineItems.length >= 2) {\n\t\t\tthis.currentMaterial = lineItems[1];\n\t\t}\n\t}\n\n\tprivate parseSmoothShadingStatement(lineItems: string[]): void {\n\t\tif (lineItems.length !== 2) {\n\t\t\tthrow \"Smoothing group statements must have exactly 1 argument (eg. s <number|off>)\";\n\t\t}\n\n\t\tconst groupNumber =\n\t\t\tlineItems[1].toLowerCase() === \"off\"\n\t\t\t\t? 0\n\t\t\t\t: parseInt(lineItems[1], 10);\n\t\tthis.smoothingGroup = groupNumber;\n\t}\n}\n\ninterface IResult {\n\tmodels: IModel[];\n\tmaterialLibraries: string[];\n}\n\ninterface IModel {\n\tname: string;\n\tvertices: IVertex[];\n\ttextureCoords: ITextureVertex[];\n\tvertexNormals: IVertex[];\n\tfaces: IFace[];\n}\n\ninterface IFace {\n\tmaterial: string;\n\tgroup: string;\n\tsmoothingGroup: number;\n\tvertices: IFaceVertexIndicies[];\n}\n\ninterface IFaceVertexIndicies {\n\tvertexIndex: number;\n\ttextureCoordsIndex: number;\n\tvertexNormalIndex: number;\n}\n\ninterface IVertex {\n\tx: number;\n\ty: number;\n\tz: number;\n}\n\ninterface ITextureVertex {\n\tu: number;\n\tv: number;\n\tw: number;\n}\n","import * as THREE from 'three';\nimport { STLLoader, OBJLoader } from \"../render/loaders\";\nconst STL = new STLLoader();\n\n\nexport function stl(data) {\n  return STL.parseASCII(data)\n};\nexport function obj(data) {\n    const loader = new OBJLoader(data);\n    const res = loader.parse();\n\n    const [vertices, vertexNormals, textureCoords] = res.models.reduce(\n      (a, b) => [a[0].concat(b.vertices), a[1].concat(b.vertexNormals), a[2].concat(b.textureCoords)],\n      [[] as any[], [] as any[], [] as any[]]\n    );\n    const models = res.models.map(model => {\n      const buffer = new THREE.BufferGeometry();\n      const verts = [] as number[];\n      const vertNormals = [] as number[];\n      const texCoords = [] as number[];\n      model.faces.forEach(face => {\n        face.vertices.forEach(vertex => {\n          const v = vertices[vertex.vertexIndex - 1];\n          v && verts.push(v.x, v.y, v.z);\n          const vn = vertexNormals[vertex.vertexNormalIndex - 1];\n          vn && vertNormals.push(vn.x, vn.y, vn.z);\n          const tc = textureCoords[vertex.textureCoordsIndex - 1];\n          tc && texCoords.push(tc.u, tc.v, tc.w);\n        });\n      });\n      buffer.setAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(verts), 3, false));\n      buffer.setAttribute(\"normals\", new THREE.BufferAttribute(new Float32Array(vertNormals), 3, false));\n      buffer.setAttribute(\"texCoords\", new THREE.BufferAttribute(new Float32Array(texCoords), 3, false));\n      return {\n        name: model.name,\n        geometry: buffer\n      };\n    });\n\n    return models;\n}\n","export default function expose(item: any, target=window) {\n    Object.assign(target, item);\n}","export type ConfigType = \"text\" | \"number\" | \"checkbox\" | \"radio\" | \"color\" | \"select\";\n\nexport interface SettingsProps<T> {\n  value: T;\n  kind: ConfigType;\n  id: string;\n  name: string;\n  description: string;\n}\n\nexport class Setting<T>{\n  private _value: T;\n  public kind: ConfigType;\n  public id: string;\n  public name: string;\n  public description: string;\n  public staged_value: T;\n  \n  constructor(props: SettingsProps<T>){\n    this._value = props.value;\n    this.kind = props.kind;\n    this.id = props.id;\n    this.name = props.name;\n    this.description = props.description;\n    this.staged_value = this.value;\n  }\n  setStagedValue(value: T) {\n    this.staged_value = value;\n    return this;\n  }\n  submit() {\n    this.value = this.staged_value;\n  }\n  get edited() {\n    switch (this.kind) {\n      case \"number\": return (this.value != this.staged_value);\n      case \"checkbox\": return (this.value != this.staged_value);\n      case \"text\": return (this.value !== this.staged_value);\n      case \"radio\": return (this.value !== this.staged_value);\n      case \"select\": return (this.value !== this.staged_value);\n      default: return JSON.stringify(this.value) !== JSON.stringify(this.staged_value)\n    }\n  }\n  get value() {\n    return this._value;\n  }\n  set value(newvalue: T) {\n    this._value = newvalue;\n  }\n}","import { FDTDParams } from './';\nimport Room from '../../objects/room';\nimport Receiver from '../../objects/receiver';\nimport Source from '../../objects/source';\n\nconst defaults = {\n  room: {} as Room,\n  gain: 500,\n  threshold: 0.001,\n  dx: 1,\n  dt: 1,\n  sources: [] as Source[],\n  receivers: [] as Receiver[],\n  q: 0.343,\n  r: 1.32,\n} as FDTDParams;\n\nexport default defaults","//@ts-ignore\nimport vs from \"!raw-loader!./shader.vert\";\n//@ts-ignore\nimport fs from \"!raw-loader!./shader.frag\";\n\nexport default {\n  vs,\n  fs\n};\n","export default \"precision highp float;\\nuniform mat4 modelViewMatrix;\\nuniform mat4 projectionMatrix;\\nuniform float time;\\n\\nuniform float gain;\\nattribute vec3 position;\\nattribute vec2 uv;\\nattribute vec3 translate;\\n\\nvarying vec2 vUv;\\nvarying float vScale;\\n\\nattribute float pressure;\\nvarying float vPressure;\\n\\n\\nfloat rand(vec2 co){\\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\n}\\n\\n\\n\\nvoid main() {\\n  vec4 mvPosition = modelViewMatrix * vec4( translate, 1.0 );\\n  vec3 ran = vec3(rand(translate.xy),rand(translate.xz),rand(translate.yz));\\n  vec3 trTime = ran+translate;\\n  float scale = abs(pressure) * 10.0;\\n  vScale = scale;\\n  scale = clamp(scale * gain + 10.0,0.0,100.0);\\n  mvPosition.xyz += position * scale;\\n  vUv = uv;\\n  vPressure = pressure;\\n  gl_Position = projectionMatrix * mvPosition;\\n\\n}\";","export default \"precision highp float;\\n\\nuniform sampler2D map;\\nuniform float threshold;\\nvarying vec2 vUv;\\nvarying float vScale;\\nvarying float vPressure;\\n\\n// HSL to RGB Convertion helpers\\nvec3 HUEtoRGB(float H){\\n  H = mod(H,1.0);\\n  float R = abs(H * 6.0 - 3.0) - 1.0;\\n  float G = 2.0 - abs(H * 6.0 - 2.0);\\n  float B = 2.0 - abs(H * 6.0 - 4.0);\\n  return clamp(vec3(R,G,B),0.0,1.0);\\n}\\n\\nvec3 HSLtoRGB(vec3 HSL){\\n  vec3 RGB = HUEtoRGB(HSL.x);\\n  float C = (1.0 - abs(2.0 * HSL.z - 1.0)) * HSL.y;\\n  return (RGB - 0.5) * C + HSL.z;\\n}\\n\\nvoid main() {\\n  vec4 diffuseColor = texture2D( map, vUv );\\n  if(abs(vPressure)<threshold){\\n    discard;\\n  }\\n  if(vPressure<0.0){\\n    gl_FragColor = vec4(vec3(1.0,0.0,0.0), clamp(abs(vPressure),0.0,1.0));\\n  }\\n  else{\\n    gl_FragColor = vec4(vec3(0.0,1.0,0.0), clamp(abs(vPressure),0.0,1.0));\\n  }\\n}\";","//@ts-nocheck\nimport { GPU, Kernel, Input, IKernelFunctionThis } from \"gpu.js\";\nimport Room from \"../../objects/room\";\nimport * as THREE from \"three\";\nimport Solver from \"../solver\";\nimport Surface from \"../../objects/surface\";\nimport Source from \"../../objects/source\";\nimport Receiver from \"../../objects/receiver\";\nimport defaults from './defaults';\n\nimport image from '../../res/sprites/circle.png';\nimport shader from './shader';\n\nconst { ceil, round, floor, abs } = Math;\n\ninterface Thread {\n\tx: number,\n\ty: number,\n\tz: number;\n}\n\n\n\nexport interface FDTDParams {\n\troom: Room;\n\tgain: number;\n\tthreshold: number;\n\tdx: number;\n\tdt: number;\n\tsources: Source[];\n\treceivers: Receiver[];\n\tq: number;\n\tr: number;\n}\n\nexport class FDTD extends Solver {\n\trunning: boolean;\n\tclearpass: boolean;\n\tn: number;\n\tt: number;\n\t\n\troom!: Room;\n\tprivate _gain!: number;\n\tprivate _threshold!: number;\n\tdx!: number;\n\tdt!: number;\n\tsources!: Source[];\n\treceivers!: Receiver[];\n\tq!: number;\n\tr!: number;\n\t\n\tu!: Float32Array[];\n\tf!: Float32Array;\n\tlx: number;\n\tly: number;\n\tlz: number;\n\tnz: number;\n\tny: number;\n\tnx: number;\n\tN: number;\n\t\n\tsourceLocations: number[][];\n\t\n\tgpu!: GPU;\n\tkernel!: Kernel;\n\t\n\tmesh!: THREE.Mesh;\n\tgeometry!: THREE.InstancedBufferGeometry;\n\tpressureAttribute!: THREE.InstancedBufferAttribute;\n\tmaterial!: THREE.RawShaderMaterial;\n\tconstructor(params?: FDTDParams) {\n\t\tsuper(params);\n\t\tthis.kind = \"fdtd\";\n\t\tthis.n = 0;\n\t\tthis.t = 0;\n\t\t\n\t\tthis.running = false;\n\t\tthis.clearpass = false;\n\t\t\n\t\tfor (const key in defaults) {\n\t\t\tthis[key] = (params && params[key]) || defaults[key];\n\t\t}\n\t\tconst { x: lx, y: ly, z: lz } = { ...this.room.boundingBox.getSize(new THREE.Vector3()) };\n\t\tthis.lx = lx;\n\t\tthis.ly = ly;\n\t\tthis.lz = lz;\n\t\tthis.nx = ceil(this.lx / this.dx);\n\t\tthis.ny = ceil(this.ly / this.dx);\n\t\tthis.nz = ceil(this.lz / this.dx);\n\t\tthis.N = this.nx * this.ny * this.nz;\n\t\tthis.sourceLocations = [];\n\t\tfor (let i = 0; i < this.sources.length; i++) {\n\t\t\tthis.sourceLocations.push([\n\t\t\t\tround((this.sources[i].x * this.nx) / this.lx),\n\t\t\t\tround((this.sources[i].y * this.ny) / this.ly),\n\t\t\t\tround((this.sources[i].z * this.nz) / this.lz)\n\t\t\t]);\n\t\t}\n\t\tthis.reset();\n\t\tthis.initKernel(params);\n\t\tthis.initRenderItems();\n\t}\n\tget threshold() {\n\t\treturn this._threshold;\n\t}\n\tset threshold(threshold: number) {\n\t\tthis._threshold = threshold;\n\t\tthis.material && (this.material.uniforms[\"threshold\"].value = this._threshold);\n\t}\n\tget gain() {\n\t\treturn this._gain;\n\t}\n\tset gain(gain: number) {\n\t\tthis._gain = gain;\n\t\tthis.material && (this.material.uniforms[\"gain\"].value = this._gain);\n\t}\n\tinitKernel() {\n\n\t\tthis.gpu = new GPU({\n\t\t\tmode: \"webgl2\",\n\n    });\n\t\n\t\tfunction kernelFunction(\n      this: IKernelFunctionThis,\n      prev: number[][][],\n      curr: number[][][],\n\t\t\tf: number[][][],\n      q: number,\n      r: number,\n      dx: number,\n      dt: number,\n      nx: number,\n      ny: number,\n      nz: number\n\t\t): number {\n\t\t\t\t\t\tlet u_prev = prev[this.thread.z][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet u_center = curr[this.thread.z][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet u_right = curr[this.thread.z][this.thread.y][this.thread.x + 1];\n\t\t\t\t\t\tlet u_left = curr[this.thread.z][this.thread.y][this.thread.x - 1];\n\t\t\t\t\t\tlet u_front = curr[this.thread.z][this.thread.y + 1][this.thread.x];\n\t\t\t\t\t\tlet u_back = curr[this.thread.z][this.thread.y - 1][this.thread.x];\n\t\t\t\t\t\tlet u_top = curr[this.thread.z + 1][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet u_bottom = curr[this.thread.z - 1][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet f_center = f[this.thread.z][this.thread.y][this.thread.x];\n\t\t\t\t\t\tlet grad_x = (q + q) * (u_right - u_center) - (q + q) * (u_center - u_left);\n\t\t\t\t\t\tlet grad_y = (q + q) * (u_front - u_center) - (q + q) * (u_center - u_back);\n\t\t\t\t\t\tlet grad_z = (q + q) * (u_top - u_center) - (q + q) * (u_center - u_bottom);\n\t\t\t\t\t\tlet grad = grad_x + grad_y + grad_z;\n\n\t\t\t\t\t\tlet coef = 1.0 / (2.0 * r * dx * dx);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn coef * grad + 2.0 * u_center - u_prev + dt * dt * f_center;\n\t\t\t\t}\n\t\tthis.kernel = this.gpu\n\t\t\t.createKernel<typeof kernelFunction>(kernelFunction)\n\n\t\t\t.setOutput([this.N])\n\n\t}\n\tsatisfyBounds() {\n\t\tfor (let i = 0; i < this.nx; i++){\n\t\t\tfor (let j = 0; j < this.ny; j++){\n\t\t\t\tthis.u[this.curr][this.getIndex(i, j, 0)] = 0;\n\t\t\t\tthis.u[this.curr][this.getIndex(i, j, this.nz-1)] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < this.nx; i++){\n\t\t\tfor (let k = 0; k < this.nz; k++){\n\t\t\t\tthis.u[this.curr][this.getIndex(i, 0, k)] = 0;\n\t\t\t\tthis.u[this.curr][this.getIndex(i, this.ny-1, k)] = 0;\n\t\t\t}\n\t\t}\n\t\tfor (let j = 0; j < this.ny; j++){\n\t\t\tfor (let k = 0; k < this.nz; k++){\n\t\t\t\tthis.u[this.curr][this.getIndex(0, j, k)] = 0;\n\t\t\t\tthis.u[this.curr][this.getIndex(this.nx-1, j, k)] = 0;\n\t\t\t}\n\t\t}\n\t}\n\treset() {\n\t\tthis.t = 0;\n\t\tthis.n = 0;\n\t\tthis.u = [\n\t\t\tnew Float32Array(this.N),\n\t\t\tnew Float32Array(this.N),\n\t\t];\n\t\tthis.f = new Float32Array(this.N);\n\t\tfor (let i = 0; i < this.N; i++){\n\t\t\tthis.u[0][i] = 0;\n\t\t\tthis.u[1][i] = 0;\n\t\t\tthis.f[i] = 0;\n\t\t}\n\n\t\tfor (let i = 0; i < this.sourceLocations.length; i++){\n\t\t\tthis.f[\n\t\t\t\tthis.getIndex(\n\t\t\t\t\tthis.sourceLocations[i][0],\n\t\t\t\t\tthis.sourceLocations[i][1],\n\t\t\t\t\tthis.sourceLocations[i][2]\n\t\t\t\t)\n\t\t\t] = this.sources[i].f(0);\n\t\t}\n\t}\n\tgetIndex(i, j, k) {\n\t\treturn i * this.ny * this.nz + j * this.nz + k;\n\t}\n\tget3DIndex(i) {\n\t\treturn [\n\t\t\tfloor(i/(this.ny*this.nz))%this.nx,\n\t\t\tfloor(i/(this.nz))%this.ny,\n\t\t\ti%this.nz,\n\t\t]\n\t}\n\tget curr() {\n\t\treturn (this.n + 1) % 2;\n\t}\n\tget prev() {\n\t\treturn this.n % 2;\n\t}\n\tclear() {\n\t\tthis.clearpass = true;\n\t\tif (this.running) {\n\t\t}\n\t}\n\n\tupdate = () => {\n\t\tif (this.running || this.clearpass) {\n\t\t\tthis.satisfyBounds();\n\t\t\tthis.step();\n\t\t}\n\t\t// console.log(this.running);\n\t}\n\tupdateSources() {\n\t\tfor (let i = 0; i < this.sourceLocations.length; i++) {\n\t\t\t\t\t// console.log(this.sources[i].f(this.t))\n          this.f[\n            this.getIndex(\n              this.sourceLocations[i][2],\n              this.sourceLocations[i][1],\n              this.sourceLocations[i][0]\n            )\n\t\t\t\t\t] = this.sources[i].f(this.t);\n\t\t\t// console.log(\n      //   this.f[\n      //     this.getIndex(\n      //       this.sourceLocations[i][2],\n      //       this.sourceLocations[i][1],\n      //       this.sourceLocations[i][0]\n      //     )\n      //   ]\n\t\t\t// );\n\t\t\t// console.log(this.sourceLocations[i]);\n        }\n\t}\n\tstep() { \n\t\tif (this.clearpass) {\n\t\t\tthis.reset();\n\t\t\treturn\n\t\t}\n\t\t\n\t\t//@ts-ignore\n\t\tthis.u[this.prev] = this.kernel(\n      //@ts-ignore\n      new Input(this.u[this.prev], [this.nz, this.ny, this.nx]),\n      //@ts-ignore\n      new Input(this.u[this.curr], [this.nz, this.ny, this.nx]),\n      //@ts-ignore\n\t\t\tnew Input(this.f, [this.nz, this.ny, this.nx]),\n      this.q,\n      this.r,\n      this.dx,\n      this.dt,\n      this.nx,\n      this.ny,\n      this.nz\n\t\t);\n\t\t\n\t\tthis.t += this.dt;\n\t\t// console.log(this.sources[0].f(this.t))\n\t\tthis.n++;\n\n\t\t// this.gain = \n\t\t\n\t\tthis.updateSources();\n\t\t// this.satisfyBounds();\n\t\tthis.pressureAttribute.set(this.u[this.curr], 0);\n\t\t//@ts-ignore\n\t\tthis.room.getFDTDPressureAttribute().needsUpdate=true\n\t}\n\tinitRenderItems() {\n\t\tconst boxGeometry = new THREE.CircleBufferGeometry(.1, 6);\n\t\tthis.geometry = new THREE.InstancedBufferGeometry();\n\t\tthis.geometry.index = boxGeometry.index;\n\t\tthis.geometry.attributes = boxGeometry.attributes;\n\t\tconst translateArray = new Float32Array(this.N*3);\n\t\tlet c = 0;\n\t\tfor (let i = 0; i < this.nx; i++){\n\t\t\tfor (let j = 0; j < this.ny; j++){\n\t\t\t\tfor (let k = 0; k < this.nz; k++){\n\t\t\t\t\tlet index = this.getIndex(i,j,k) * 3;\n\t\t\t\t\ttranslateArray[index+0] = (i / this.nx) * this.lx + this.dx/2;\n\t\t\t\t\ttranslateArray[index+1] = (j / this.ny) * this.ly + this.dx/2;\n\t\t\t\t\ttranslateArray[index + 2] = (k / this.nz) * this.lz + this.dx/2;\n\t\t\t\t\tc++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.pressureAttribute = new THREE.InstancedBufferAttribute(this.u[this.curr],1);\n\t\tthis.pressureAttribute.setUsage(THREE.DynamicDrawUsage);\n\n\t\tthis.geometry.setAttribute(\"translate\", new THREE.InstancedBufferAttribute(translateArray, 3));\n\t\tthis.geometry.setAttribute(\"pressure\", new THREE.InstancedBufferAttribute(this.u[this.curr],1))\n\t\tthis.material = new THREE.RawShaderMaterial({\n      uniforms: {\n        map: {\n          value: new THREE.TextureLoader().load(image)\n        },\n\t\t\t\ttime: { value: 0.0 },\n\t\t\t\tthreshold: { value: this.threshold },\n\t\t\t\tgain: { value: this.gain }\n\t\t\t},\n\t\t\t\n\t\t\tvertexShader: shader.vs,\n\t\t\tfragmentShader: shader.fs,\n\t\t\ttransparent: true,\n\t\t\talphaTest: 1.0,\n\t\t\tdepthTest: true,\n      depthWrite: true\n\t\t});\n\t\t\n\t\tthis.mesh = new THREE.Mesh(this.geometry, this.material);\n\n\t\t\n\t\tthis.room.setFDTD(this.mesh);\n\n\t}\n\n\t// subdivide() {\n\t// \tconst { min, max } = this.room.boundingBox;\n\t// \tconst { x, y, z } = max.sub(min);\n\t// \tthis.N = [\n\t// \t\tMath.ceil(x / this.resolution),\n\t// \t\tMath.ceil(y / this.resolution),\n\t// \t\tMath.ceil(z / this.resolution)\n\t// \t];\n\t// \tfor (let i = 0; i < this.N[0]; i++) {\n\t// \t\tthis.elementBoxes.push([]);\n\t// \t\tthis.meshes.push([]);\n\n\t// \t\tthis.u[this.prev].push([]);\n\t// \t\tthis.u[this.curr].push([]);\n\t// \t\tthis.u[this.next].push([]);\n\n\t// \t\tthis.rho.push([]);\n\t// \t\tthis.q.push([]);\n\t// \t\tthis.f.push([]);\n\n\t// \t\tfor (let j = 0; j < this.N[1]; j++) {\n\t// \t\t\tthis.elementBoxes[i].push([]);\n\t// \t\t\tthis.meshes[i].push([]);\n\n\t// \t\t\tthis.u[this.prev][i].push([]);\n\t// \t\t\tthis.u[this.curr][i].push([]);\n\t// \t\t\tthis.u[this.next][i].push([]);\n\n\t// \t\t\tthis.rho[i].push([]);\n\t// \t\t\tthis.q[i].push([]);\n\t// \t\t\tthis.f[i].push([]);\n\n\t// \t\t\tfor (let k = 0; k < this.N[2]; k++) {\n\t// \t\t\t\tthis.u[this.prev][i][j][k] = 0;\n\t// \t\t\t\tthis.u[this.curr][i][j][k] = 0;\n\t// \t\t\t\tthis.u[this.next][i][j][k] = 0;\n\n\t// \t\t\t\tthis.rho[i][j][k] = 1.25;\n\t// \t\t\t\tthis.q[i][j][k] = 1000;\n\t// \t\t\t\tthis.f[i][j][k] = 0;\n\n\t// \t\t\t\tconst box = new THREE.Box3().setFromCenterAndSize(\n\t// \t\t\t\t\tnew THREE.Vector3(\n\t// \t\t\t\t\t\tmin.x + i * this.resolution,\n\t// \t\t\t\t\t\tmin.y + j * this.resolution,\n\t// \t\t\t\t\t\tmin.z + k * this.resolution\n\t// \t\t\t\t\t),\n\t// \t\t\t\t\tnew THREE.Vector3().setScalar(this.resolution)\n\t// \t\t\t\t);\n\t// \t\t\t\tthis.elementBoxes[i][j][k] = box;\n\t// \t\t\t\tthis.meshes[i][j][k] = new THREE.Mesh(\n\t// \t\t\t\t\tnew THREE.BoxBufferGeometry(\n\t// \t\t\t\t\t\tthis.resolution,\n\t// \t\t\t\t\t\tthis.resolution,\n\t// \t\t\t\t\t\tthis.resolution\n\t// \t\t\t\t\t),\n\t// \t\t\t\t\tnew THREE.MeshBasicMaterial({\n\t// \t\t\t\t\t\tcolor: 0,\n\t// \t\t\t\t\t\ttransparent: true,\n\t// \t\t\t\t\t\topacity: 0.0\n\t// \t\t\t\t\t})\n\t// \t\t\t\t);\n\n\t// \t\t\t\tconst center = box.getCenter(new THREE.Vector3());\n\t// \t\t\t\tthis.meshes[i][j][k].position.set(\n\t// \t\t\t\t\tcenter.x,\n\t// \t\t\t\t\tcenter.y,\n\t// \t\t\t\t\tcenter.z\n\t// \t\t\t\t);\n\t// \t\t\t\tthis.room.add(this.meshes[i][j][k]);\n\t// \t\t\t\tlet intersects = false;\n\t// \t\t\t\tfor (\n\t// \t\t\t\t\tlet s = 0;\n\t// \t\t\t\t\ts < this.room.surfaces.children.length;\n\t// \t\t\t\t\ts++\n\t// \t\t\t\t) {\n\t// \t\t\t\t\tif (this.room.surfaces.children[s] instanceof Surface) {\n\t// \t\t\t\t\t\tfor (\n\t// \t\t\t\t\t\t\tlet v = 0;\n\t// \t\t\t\t\t\t\tv <\n\t// \t\t\t\t\t\t\t(this.room.surfaces.children[s] as Surface)\n\t// \t\t\t\t\t\t\t\t._triangles.length;\n\t// \t\t\t\t\t\t\tv++\n\t// \t\t\t\t\t\t) {\n\t// \t\t\t\t\t\t\tif (\n\t// \t\t\t\t\t\t\t\tbox.intersectsTriangle(\n\t// \t\t\t\t\t\t\t\t\t(this.room.surfaces.children[\n\t// \t\t\t\t\t\t\t\t\t\ts\n\t// \t\t\t\t\t\t\t\t\t] as Surface)._triangles[v]\n\t// \t\t\t\t\t\t\t\t)\n\t// \t\t\t\t\t\t\t) {\n\t// \t\t\t\t\t\t\t\tintersects = true;\n\t// \t\t\t\t\t\t\t}\n\t// \t\t\t\t\t\t}\n\t// \t\t\t\t\t}\n\t// \t\t\t\t}\n\t// \t\t\t\tif (intersects) {\n\t// \t\t\t\t\t// this.C[i][j][k]=0\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// }\n}\n","import * as THREE from \"three\";\nimport Container, { ContainerProps } from \"./container\";\nimport Surface from './surface';\nimport { FDTD } from \"../compute/fdtd\";\n\nexport interface RoomProps extends ContainerProps {\n\tsurfaces: Surface[];\n\t// surfaceEdges: Surface[];\n\tshowBoundingBox?: boolean;\n}\n\nexport default class Room extends Container {\n\tboundingBox!: THREE.Box3;\n\tboundingBoxHelper!: THREE.Box3Helper;\n\tsurfaces: Container;\n\t_fdtdmeshid!: number;\n\tvolume: number;\n\tconstructor(name: string, props: RoomProps) {\n\t\tsuper(name);\n\t\tthis.kind = \"room\";\n\t\tthis.surfaces = new Container(\"surfaces\");\n\t\tprops.surfaces.forEach(surface => {\n\t\t\tthis.surfaces.add(surface);\n\t\t});\n\t\tthis.add(this.surfaces);\n\t\tthis.calculateBoundingBox();\n\t\tthis.add(this.boundingBoxHelper);\n\t\tthis.boundingBoxHelper.visible = props.showBoundingBox || false;\n\t\t\tthis.deselect = () => {\n        this.surfaces.children.forEach((x: Container) => {\n          x.deselect();\n        });\n      };\n      this.select = () => {\n        this.surfaces.children.forEach((x: Container) => {\n          x.select();\n        });\n\t\t\t};\n\t\tthis.volume = this.volumeOfMesh();\n\t}\n\tget showBoundingBox() {\n\t\treturn this.boundingBoxHelper.visible;\n\t}\n\tset showBoundingBox(_showBoundingBox: boolean) {\n\t\tthis.boundingBoxHelper.visible = _showBoundingBox;\n\t}\n\tcalculateBoundingBox() {\n\t\tthis.boundingBox = this.surfaces.children.reduce((a: THREE.Box3, b: Container) => {\n\t\t\t\t(b as Surface).geometry.computeBoundingBox();\n\t\t\t\treturn (a as THREE.Box3).union((b as Surface).geometry.boundingBox);\n\t\t}, new THREE.Box3());\n\t\tthis.boundingBoxHelper = new THREE.Box3Helper(this.boundingBox, new THREE.Color(0xF18E4A));\n\t\tthis.boundingBoxHelper.name = \"bounding-box\"\n\t\treturn this.boundingBox;\n\t}\n\tsetFDTD(mesh: THREE.Mesh) {\n\t\tthis._fdtdmeshid = mesh.id;\n\t\tthis.add(mesh);\n\t}\n\tgetFDTDPressureAttribute(): THREE.InstancedBufferAttribute {\n\t\treturn (((this.getObjectById(this._fdtdmeshid) as THREE.Mesh).geometry as THREE.InstancedBufferGeometry).getAttribute('pressure') as THREE.InstancedBufferAttribute)\n\t}\n\tsignedVolumeOfTriangle(p1: THREE.Vector3, p2: THREE.Vector3, p3: THREE.Vector3) {\n \t\treturn p1.dot(p2.clone().cross(p3)) / 6.0;\n\t}\n\tvolumeOfMesh() {\n\t\tlet sum = 0;\n\t\tthis.surfaces.children.forEach((surface: Surface) => {\n\t\t\tsurface._triangles.forEach((triangle: THREE.Triangle) => {\n\t\t\t\tsum+=this.signedVolumeOfTriangle(triangle.a, triangle.b, triangle.c);\t\n\t\t\t})\n\t\t})\n\t\treturn Math.abs(sum);\n\t}\n}\n","import Solver, { SolverParams } from \"../solver\";\nimport Room from \"../../objects/room\";\nimport Surface from \"../../objects/surface\";\nimport { third_octave } from '../acoustics';\nexport interface RT60Props extends SolverParams{\n  room: Room;\n}\n\nexport class RT60 extends Solver{\n  room: Room;\n  constructor(props: RT60Props) {\n    super(props);\n    this.room = props.room; \n    this.kind = \"rt60\";\n  }\n  sabine(frequencies: number[] = third_octave) {\n    const v = this.room.volumeOfMesh();\n    const response = [] as number[];\n    frequencies.forEach(frequency => {\n      let sum = 0;\n      this.room.surfaces.children.forEach((surface: Surface) => {\n        sum += (surface.getArea() * surface.absorptionFunction(frequency));\n      });\n      response.push(0.161 * v / sum);\n    });\n    return [frequencies, response];\n  }\n  arauPuchades() {\n    \n  }\n}\n\nexport default RT60;","import React from \"react\";\nimport ReactDOM, { render } from \"react-dom\";\n\nimport App from \"./containers/App\";\nimport browserReport from \"./common/browser-report\";\nimport Messenger from \"./messenger\";\nimport Source from \"./objects/source\";\nimport Receiver from \"./objects/receiver\";\nimport Renderer from \"./render/renderer\";\nimport { registerHotKeys } from \"./hotkeys\";\nimport { fileType, allowed } from \"./common/file-type\";\n\nimport * as importHandlers from './import-handlers';\nimport EasingFunctions from \"./common/easing\";\nimport * as THREE from \"three\";\nimport { KeyValuePair } from \"./common/key-value-pair\";\nimport expose from \"./common/expose\";\nimport Container from \"./objects/container\";\nimport { Setting } from \"./common/setting\";\nimport {randomInteger} from './common/random';\n\nimport { chunk } from \"./common/chunk\";\n//@ts-ignore\nimport triangleroom from \"!raw-loader!./res/triangle.stl\";\n//@ts-ignore\nimport testroom from \"!raw-loader!./res/models/testthing.obj\";\n\nimport Solver from \"./compute/solver\";\nimport { FDTD } from \"./compute/fdtd\";\nimport GLFDTD from \"./compute/gl-fdtd\";\nimport Room from \"./objects/room\";\nimport Surface from \"./objects/surface\";\nimport RayTracer from \"./compute/raytracer\";\nimport { uuid } from \"uuidv4\";\n// import { RT60 } from './compute/rt60';\nimport RT60 from './compute/rt';\nimport * as ac from \"./compute/acoustics\";\n\nimport materials from \"./db/material.json\";\nimport {Searcher} from \"fast-fuzzy\";\nimport { IToastProps } from \"@blueprintjs/core\";\n\n// import { CSG, CAG } from '@jscad/csg';\n// //@ts-ignore\n// window.CSG = CSG;\n// //@ts-ignore\n// window.CAG = CAG;\n\n// import Fuse from \"fuse.js\";\nexport interface AcousticMaterial {\n  tags: string[];\n  manufacturer: string;\n  name: string;\n  material: string;\n  absorption: {\n    \"63\": number;\n    \"125\": number;\n    \"250\": number;\n    \"500\": number;\n    \"1000\": number;\n    \"2000\": number;\n    \"4000\": number;\n    \"8000\": number;\n  };\n  nrc: number;\n  source: string;\n  description: string;\n  _id: string;\n}\n\n\nexpose({ ac, chunk, THREE, EasingFunctions }, window);\n\nconst materialsIndex = {} as KeyValuePair<AcousticMaterial>;\n\nmaterials.forEach(x => {\n    materialsIndex[x._id] = x;\n});\n\nconst state = {\n  time: 0,\n  selectedObjects: [] as Container[],\n  materialsIndex,\n  materials,\n  materialSearcher: new Searcher(\n  materials,\n    {\n      keySelector: obj => obj.material\n    }\n  ),\n  browser: browserReport(navigator.userAgent),\n  sources: [] as string[],\n  receivers: [] as string[],\n  room: \"\" as string,\n  containers: {} as KeyValuePair<Container>,\n  solvers: {} as KeyValuePair<Solver>,\n  simulation: \"\",\n  glfdtd: {} as GLFDTD,\n  renderer: {} as Renderer,\n  messenger: new Messenger(),\n\n  settings: {\n    fog_color: new Setting<string>({\n      id: \"fog_color\",\n      name: \"Fog Color\",\n      description: \"Changes the color of the scene's fog\",\n      kind: \"color\",\n      value: \"#ffffff\"\n    }),\n    default_save_name: new Setting<string>({\n      id: \"default_save_name\",\n      name: \"Default Save Name\",\n      description: \"The default name when saving\",\n      kind: \"text\",\n      value: \"new-project.json\"\n    })\n  } as KeyValuePair<Setting<string|number|boolean>>\n};\n\nstate.renderer = new Renderer({\n  messenger: state.messenger\n});\n\nstate.messenger.addMessageHandler(\"SET_SELECTION\", (acc, objects) => {\n  state.messenger.postMessage(\"DESELECT_ALL_OBJECTS\");\n  state.messenger.postMessage(\"APPEND_SELECTION\", objects);\n});\n\nstate.messenger.addMessageHandler(\"DESELECT_ALL_OBJECTS\", (acc, ...args) => {\n  Object.keys(state.containers).forEach((x) => {\n    state.containers[x].deselect();\n  });\n  state.selectedObjects = [] as Container[];\n});\n\nstate.messenger.addMessageHandler(\"APPEND_SELECTION\", (acc, objects) => {\n  if (objects instanceof Array) {\n    for (let i = 0; i < objects.length; i++){\n      if (objects[i] instanceof Container) {\n        objects[i].select();\n        state.selectedObjects.push(objects[i]);\n      }\n    }\n  }\n})\n\nstate.messenger.addMessageHandler(\"FETCH_ROOMS\", () => {\n  const roomkeys = Object.keys(state.containers).filter(x => {\n    return state.containers[x].kind === \"room\";\n  });\n  if (roomkeys && roomkeys.length > 0) {\n    return roomkeys.map(x => state.containers[x] as Room);\n  }\n});\n\nstate.messenger.addMessageHandler(\"FETCH_SETTINGS\", () => {\n  return state.settings;\n})\n\nstate.messenger.addMessageHandler(\"SUBMIT_ALL_SETTINGS\", () => {\n  for (const key in state.settings) {\n    state.settings[key].submit();\n  }\n  return state.settings;\n});\n\nstate.messenger.addMessageHandler(\"FETCH_ALL_MATERIALS\", (acc, ...args) => {\n  return state.materials;\n});\n\nstate.messenger.addMessageHandler(\"SEARCH_ALL_MATERIALS\", (acc, ...args) => {\n  const res = state.materialSearcher.search(args[0]);\n  return res;\n});\n\n\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_RAYTRACER\", (acc, ...args) => {\n  const raytracer = new RayTracer({\n    messenger: state.messenger,\n    name: \"ray-tracer\",\n    containers: state.containers,\n    reflectionOrder: 6,\n    updateInterval: 5,\n    passes: 500,\n    pointSize: 2,\n    renderer: state.renderer\n  });\n  state.solvers[raytracer.uuid] = raytracer;\n  raytracer.runWithoutReceiver = false;\n  return raytracer;\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_REMOVE_SOLVER\", (acc, id) => {\n  if (state.solvers && state.solvers[id]) {\n    if (state.solvers[id].kind === \"ray-tracer\") {\n      (state.solvers[id] as RayTracer).removeMessageHandlers();\n    }\n   delete state.solvers[id];\n }\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_RT60\", (acc, ...args) => {\n  const rooms = Object.keys(state.containers).filter(x => state.containers[x] instanceof Room);\n  if (rooms.length>0) {\n    const rt60 = new RT60({\n      room: state.containers[rooms[0]] as Room,\n      name: 'rt60'\n    });\n    state.solvers[rt60.uuid] = rt60;\n    return rt60;\n  }\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_FDTD\", (acc, ...args) => {\n  const sources = [] as Source[];\n  const rooms = [] as Room[];\n  const receivers = [] as Receiver[];\n  for (const key in state.containers) {\n    switch (state.containers[key].kind) {\n      case \"source\":\n        sources.push(state.containers[key] as Source);\n        break;\n      case \"receiver\":\n        receivers.push(state.containers[key] as Receiver);\n        break;\n      case \"room\":\n        rooms.push(state.containers[key] as Room);\n        break;\n      default:\n        break;\n    }\n  }\n\n  state.simulation = uuid();\n  state.solvers[state.simulation] = new FDTD({\n    room: rooms[0],\n    dt: 0.0005,\n    dx: 2,\n    gain: 1,\n    threshold: 0.0001,\n    q: 0.43,\n    r: 1.33,\n    sources,\n    receivers\n  });\n  state.solvers[state.simulation].uuid = state.simulation;\n\n  return state.solvers[state.simulation];\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_CALCULATE_RESPONSE\", (acc, id, frequencies) => {\n  (state.solvers[id] instanceof RayTracer) && (state.solvers[id] as RayTracer).calculateReflectionLoss(frequencies);\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_TEST_WASM\", (acc, id, value) => {\n  (state.solvers[id] instanceof RayTracer) && (state.solvers[id] as RayTracer).testWasm(value);\n});\n\nstate.messenger.addMessageHandler(\"FETCH_ALL_SOURCES\", (acc, ...args) => {\n  return state.sources.map(x => {\n    if (args && args[0] && args[0] instanceof Array) {\n      return args[0].map(y => state.containers[x][y]);\n    } else return state.containers[x];\n  });\n});\n\nstate.messenger.addMessageHandler(\"FETCH_ALL_RECEIVERS\", (acc, ...args) => {\n  return state.receivers.map(x => {\n    if (args && args[0] && args[0] instanceof Array) {\n      return args[0].map(y => state.containers[x][y]);\n    } else return state.containers[x];\n  });\n});\n\nstate.messenger.addMessageHandler(\"FETCH_SOURCE\", (acc, ...args) => {\n  return state.containers[args[0]];\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_SOURCE\", (acc, ...args) => {\n  const source = new Source(\"new source\");\n  state.containers[source.uuid] = source;\n  state.sources.push(source.uuid);\n  state.renderer.add(source);\n  Object.keys(state.solvers).forEach(x => {\n    state.solvers[x] instanceof RayTracer &&\n      (state.solvers[x] as RayTracer).addSource(source);\n  });\n  return source;\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_REMOVE_CONTAINER\", (acc, id) => {\n  if (state.containers[id]) {\n    switch (state.containers[id].kind) {\n      case \"source\": {\n        state.sources = state.sources.reduce((a, b) => {\n          if (b !== id) {\n            a.push(b);\n          }\n          return a;\n        }, [] as string[]);\n      } break;\n      case \"receiver\": {\n        state.receivers = state.receivers.reduce((a, b) => {\n          if (b !== id) {\n            a.push(b);\n          }\n          return a;\n        }, [] as string[]);\n      } break;\n    }\n    state.selectedObjects = state.selectedObjects.filter((x) => x.uuid !== id);\n    state.renderer.remove(state.containers[id]);\n    delete state.containers[id];\n  }\n});\n\nstate.messenger.addMessageHandler(\"SHOULD_ADD_RECEIVER\", (acc, ...args) => {\n  const rec = new Receiver(\"new receiver\");\n  state.containers[rec.uuid] = rec;\n  state.receivers.push(rec.uuid);\n  state.renderer.add(rec);\n  Object.keys(state.solvers).forEach(x => {\n    state.solvers[x] instanceof RayTracer &&\n      (state.solvers[x] as RayTracer).addReceiver(rec);\n  });\n  return rec;\n});\n\nstate.messenger.addMessageHandler(\"ADDED_ROOM\", (acc, ...args) => {\n  args[0];\n});\n\nstate.messenger.addMessageHandler(\"IMPORT_FILE\", (acc, ...args) => {\n  const files = Array.from(args[0]);\n  files.forEach(async (file: File) => {\n    if (allowed[fileType(file.name)]) {\n      const objectURL = URL.createObjectURL(file);\n      const result = await (await fetch(objectURL)).text();\n      const models = importHandlers.obj(result);\n      const surfaces = models.map(\n        model => new Surface(model.name, {\n          geometry: model.geometry,\n          acousticMaterial: state.materials[0]\n        })\n      );\n      const room = new Room(\"new room\", {\n        surfaces\n      });\n      state.containers[room.uuid] = room;\n      state.room = room.uuid;\n      state.renderer.addRoom(room);\n      state.messenger.postMessage(\"ADDED_ROOM\", room);\n    }\n  });\n});\n\nstate.messenger.addMessageHandler(\"APP_MOUNTED\", (acc, ...args) => {\n  state.renderer.init(args[0]);\n});\n\nstate.messenger.addMessageHandler(\"RENDERER_UPDATED\", (acc, ...args) => {\n  state.time += 0.01666666667;\n  if (state.simulation.length > 0) {\n    state.solvers[state.simulation].update();\n  }\n  if (state.selectedObjects.length > 0) {\n    state.selectedObjects.forEach(x => {\n      x.renderCallback(state.time);\n    })\n  }\n});\n\nstate.messenger.addMessageHandler(\"SIMULATION_SHOULD_PLAY\", (acc, ...args) => {\n  state.solvers[state.simulation].running = true;\n  state.messenger.postMessage(\"SIMULATION_DID_PLAY\");\n});\n\nstate.messenger.addMessageHandler(\"SIMULATION_SHOULD_PAUSE\", (acc, ...args) => {\n  state.solvers[state.simulation].running = false;\n  state.messenger.postMessage(\"SIMULATION_DID_PAUSE\");\n});\n\nstate.messenger.addMessageHandler(\"SIMULATION_SHOULD_CLEAR\", (acc, ...args) => {\n  (state.solvers[state.simulation] as FDTD).reset();\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_SHOULD_PLAY\", (acc, ...args) => {\n  if (state.solvers[args[0]] instanceof RayTracer) {\n    (state.solvers[args[0]] as RayTracer).isRunning = true;\n  }\n  return state.solvers[args[0]] && state.solvers[args[0]].running;\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_SHOULD_PAUSE\", (acc, ...args) => {\n  if (state.solvers[args[0]] instanceof RayTracer) {\n    (state.solvers[args[0]] as RayTracer).isRunning = false;\n  }\n  return state.solvers[args[0]].running;\n});\n\nstate.messenger.addMessageHandler(\"RAYTRACER_SHOULD_CLEAR\", (acc, ...args) => {\n  if (state.solvers[args[0]] instanceof RayTracer) {\n    (state.solvers[args[0]] as RayTracer).clearRays();\n  }\n});\n\nstate.messenger.addMessageHandler(\"FETCH_SURFACE\", (acc, ...args) => {\n  const id = args[0];\n  if (id) {\n    const rooms = state.messenger.postMessage(\"FETCH_ROOMS\")[0];\n    if (rooms && rooms.length > 0) {\n      for (let i = 0; i < rooms.length; i++){\n        const room = (rooms[i] as Room);\n        const surface = room.surfaces.getObjectByProperty(\"uuid\", id);\n        if (surface && surface instanceof Surface) {\n          return surface;\n        }\n      }\n    }\n  }\n})\n\nstate.messenger.addMessageHandler(\"ASSIGN_MATERIAL\", (acc, material) => {\n  let surfaceCount = 0;\n  for (let i = 0; i < state.selectedObjects.length; i++){\n    if (state.selectedObjects[i] instanceof Surface) {\n      (state.selectedObjects[i] as Surface).acousticMaterial = material;\n      surfaceCount++;\n    }\n  }\n  if (surfaceCount > 0) {\n    state.messenger.postMessage(\"SHOW_TOAST\", {\n      message: `Assigned material to ${surfaceCount} surface${surfaceCount > 1 ? \"s\" : \"\"}.`,\n      intent: \"success\",\n      timeout: 1750,\n      icon: \"tick\"\n    } as IToastProps);\n  }\n  else {\n     state.messenger.postMessage(\"SHOW_TOAST\", {\n       message: `No surfaces are selected.`,\n       intent: \"warning\",\n       timeout: 1750,\n       icon: \"issue\"\n     } as IToastProps);\n  }\n});\n\n// for the settings drawer\nstate.messenger.addMessageHandler(\"SETTING_CHANGE\", (acc, ...args) => {\n  const { setting, value } = args[0];\n  console.log(setting, value);\n  state.renderer.settingChanged(setting, value);\n});\n\n// new project\nstate.messenger.addMessageHandler(\"NEW\", (acc, ...args) => {\n  Object.keys(state.solvers).forEach(x => {\n    state.messenger.postMessage(\"SHOULD_REMOVE_SOLVER\", x);\n  })\n  Object.keys(state.containers).forEach(x => {\n    state.messenger.postMessage('SHOULD_REMOVE_CONTAINER', x);\n  });\n  state.messenger.postMessage(\"DESELECT_ALL_OBJECTS\");\n  \n});\n\n\nregisterHotKeys(state.messenger);\n\n// TODO remove this\nexpose({ r: state.renderer }, window);\n\n// the main app\nReactDOM.render(<App {...state} />, document.getElementById(\"root\"));\n\n// This is to simulate user uploading a mesh file and adding source + receiver\nsetTimeout(() => {\n\n  const { uuid: sourceidL } = state.messenger.postMessage(\n    \"SHOULD_ADD_SOURCE\"\n  )[0];\n\n  const { uuid: sourceidR } = state.messenger.postMessage(\n    \"SHOULD_ADD_SOURCE\"\n  )[0];\n\n\n  const { uuid: receiverId } = state.messenger.postMessage(\n    \"SHOULD_ADD_RECEIVER\"\n  )[0];\n  const models = importHandlers.obj(testroom);\n\n  const surfaces = models.map(\n    model =>\n      new Surface(model.name, {\n        geometry: model.geometry,\n        acousticMaterial: state.materials[147]\n      })\n  );\n  const room = new Room(\"room\", {\n    surfaces\n  });\n  state.containers[room.uuid] = room;\n  state.renderer.addRoom(room);\n\n  state.messenger.postMessage(\"ADDED_ROOM\", room);\n\n  (state.containers[sourceidL] as Source).position.set(28.5, 13, 3);\n  (state.containers[sourceidL] as Source).scale.set(3, 3, 3);\n  (state.containers[sourceidL] as Source).name = \"L\";\n\n  (state.containers[sourceidR] as Source).position.set(28.5, 2, 3);\n  (state.containers[sourceidR] as Source).scale.set(3, 3, 3);\n  (state.containers[sourceidR] as Source).name = \"R\";\n\n  (state.containers[receiverId] as Receiver).position.set(12, 7.5,  4);\n  (state.containers[receiverId] as Receiver).scale.set(8, 8, 8);\n\n\n  expose(\n    {\n      // fdtd: state.messenger.postMessage(\"SHOULD_ADD_FDTD\")[0],\n      raytracer: state.messenger.postMessage(\"SHOULD_ADD_RAYTRACER\")[0],\n      state,\n      THREE\n    },\n    window\n  );\n}, 200);\n","import hotkeys from \"hotkeys-js\";\nimport Messenger from \"./messenger\";\nimport fullscreen from './common/fullscreen';\n\nexport function registerHotKeys(messenger: Messenger) {\n  \n  hotkeys(\"ctrl+i, command+i\", function () { messenger.postMessage(\"SHOW_IMPORT_DIALOG\") });\n  hotkeys(\"shift+/\", function () { messenger.postMessage(\"SHOW_TERMINAL\") })\n  hotkeys(\"shift+m\", function () { messenger.postMessage(\"TOGGLE_MATERIAL_SEARCH\") })\n  hotkeys(\"shift+n\", function () { messenger.postMessage(\"SHOW_NEW_WARNING\"); })\n  hotkeys(\"shift+o\", function(){messenger.postMessage(\"TOGGLE_CAMERA_ORTHO\")})\n  hotkeys(\"ctrl+shift+f, command+shift+f\", fullscreen);\n}\n\n\n\n","/*\n* Report browser settings like whatsmybrowser.org\n* Inspired by\n* http://stackoverflow.com/questions/9514179/how-to-find-the-operating-system-version-using-javascript\n*/\n\nexport interface Browser {\n\t\tname: string;\n\t\tversion: string;\n}\n\nexport interface Flash {\n\t\tversion: any;\n}\n\nexport interface Java {\n\t\tversion: any;\n}\n\nexport interface Os {\n\t\tname: string;\n\t\tversion: string;\n}\n\nexport interface Screen {\n\t\tcolors: number;\n\t\tdppx: number;\n\t\theight: number;\n\t\twidth: number;\n}\n\nexport interface Layout {\n\t\theight: number;\n\t\twidth: number;\n}\n\nexport interface Viewport {\n\t\theight: number;\n\t\tlayout: Layout;\n\t\twidth: number;\n\t\tzoom: number;\n}\n\n\nexport interface Report {\n\tbrowser: Browser;\n\tcookies: boolean;\n\tflash: Flash;\n\tip: any;\n\tjava: Java;\n\tos: Os;\n\tscreen: Screen;\n\tscripts: boolean;\n\tuserAgent: string;\n\tviewport: Viewport;\n\twebsockets: boolean;\n\tlang: string[];\n\ttimestamp: string;\n}\n\nexport default function browerReport(userAgent) {\n  let definePropertySupported;\n\tlet match;\n\tlet uuid;\n\n\tuserAgent = userAgent || navigator.userAgent;\n\n\t// initialize object to store results\n\tconst report: Report = {\n\t\ttimestamp: \"\",\n\t\tbrowser: {\n\t\t\tname: \"\",\n\t\t\tversion: \"\"\n\t\t},\n\t\tcookies: true,\n\t\tflash: {\n\t\t\tversion: \"\"\n\t\t},\n\t\tip: \"\",\n\t\tjava: {\n\t\t\tversion: \"\"\n\t\t},\n\t\tos: {\n\t\t\tname: \"\",\n\t\t\tversion: \"\"\n\t\t},\n\t\tscreen: {\n\t\t\tcolors: 0,\n\t\t\tdppx: 0,\n\t\t\theight: 0,\n\t\t\twidth: 0\n\t\t},\n\t\tscripts: true,\n\t\tuserAgent: userAgent,\n\t\tviewport: {\n\t\t\theight: 0,\n\t\t\tlayout: {\n\t\t\t\theight: 0,\n\t\t\t\twidth: 0\n\t\t\t},\n\t\t\twidth: 0,\n\t\t\tzoom: 0\n\t\t},\n\t\tlang: [\"\"],\n\t\twebsockets: true\n\t};\n\n\t// extract browser name from user agent\n\tif (userAgent.indexOf(\"Trident\") >= 0 || userAgent.indexOf(\"MSIE\") >= 0) {\n\t\tif (userAgent.indexOf(\"Mobile\") >= 0) {\n\t\t\treport.browser.name = \"IE Mobile\";\n\t\t} else {\n\t\t\treport.browser.name = \"Internet Explorer\";\n\t\t}\n\t}\n\n\tif (\n\t\tuserAgent.indexOf(\"Firefox\") >= 0 &&\n\t\tuserAgent.indexOf(\"Seamonkey\") === -1\n\t) {\n\t\tif (userAgent.indexOf(\"Android\") >= 0) {\n\t\t\treport.browser.name = \"Firefox for Android\";\n\t\t} else {\n\t\t\treport.browser.name = \"Firefox\";\n\t\t}\n\t}\n\n\tif (\n\t\tuserAgent.indexOf(\"Safari\") >= 0 &&\n\t\tuserAgent.indexOf(\"Chrome\") === -1 &&\n\t\tuserAgent.indexOf(\"Chromium\") === -1 &&\n\t\tuserAgent.indexOf(\"Android\") === -1\n\t) {\n\t\tif (userAgent.indexOf(\"CriOS\") >= 0) {\n\t\t\treport.browser.name = \"Chrome for iOS\";\n\t\t} else if (userAgent.indexOf(\"FxiOS\") >= 0) {\n\t\t\treport.browser.name = \"Firefox for iOS\";\n\t\t} else {\n\t\t\treport.browser.name = \"Safari\";\n\t\t}\n\t}\n\n\tif (userAgent.indexOf(\"Chrome\") >= 0) {\n\t\tif (userAgent.match(/\\bChrome\\/[.0-9]* Mobile\\b/)) {\n\t\t\tif (\n\t\t\t\tuserAgent.match(/\\bVersion\\/\\d+\\.\\d+\\b/) ||\n\t\t\t\tuserAgent.match(/\\bwv\\b/)\n\t\t\t) {\n\t\t\t\treport.browser.name = \"WebView on Android\";\n\t\t\t} else {\n\t\t\t\treport.browser.name = \"Chrome for Android\";\n\t\t\t}\n\t\t} else {\n\t\t\treport.browser.name = \"Chrome\";\n\t\t}\n\t}\n\n\tif (\n\t\tuserAgent.indexOf(\"Android\") >= 0 &&\n\t\tuserAgent.indexOf(\"Chrome\") === -1 &&\n\t\tuserAgent.indexOf(\"Chromium\") === -1 &&\n\t\tuserAgent.indexOf(\"Trident\") === -1 &&\n\t\tuserAgent.indexOf(\"Firefox\") === -1\n\t) {\n\t\treport.browser.name = \"Android Browser\";\n\t}\n\n\tif (userAgent.indexOf(\"Edge\") >= 0) {\n\t\treport.browser.name = \"Edge\";\n\t}\n\n\tif (userAgent.indexOf(\"UCBrowser\") >= 0) {\n\t\treport.browser.name = \"UC Browser for Android\";\n\t}\n\n\tif (userAgent.indexOf(\"SamsungBrowser\") >= 0) {\n\t\treport.browser.name = \"Samsung Internet\";\n\t}\n\n\tif (userAgent.indexOf(\"OPR\") >= 0 || userAgent.indexOf(\"Opera\") >= 0) {\n\t\tif (userAgent.indexOf(\"Opera Mini\") >= 0) {\n\t\t\treport.browser.name = \"Opera Mini\";\n\t\t} else if (\n\t\t\tuserAgent.indexOf(\"Opera Mobi\") >= 0 ||\n\t\t\tuserAgent.indexOf(\"Opera Tablet\") >= 0 ||\n\t\t\tuserAgent.indexOf(\"Mobile\") >= 0\n\t\t) {\n\t\t\treport.browser.name = \"Opera Mobile\";\n\t\t} else {\n\t\t\treport.browser.name = \"Opera\";\n\t\t}\n\t}\n\n\tif (\n\t\tuserAgent.indexOf(\"BB10\") >= 0 ||\n\t\tuserAgent.indexOf(\"PlayBook\") >= 0 ||\n\t\tuserAgent.indexOf(\"BlackBerry\") >= 0\n\t) {\n\t\treport.browser.name = \"BlackBerry\";\n\t}\n\n\tif (userAgent.indexOf(\"MQQBrowser\") >= 0) {\n\t\treport.browser.name = \"QQ Browser\";\n\t}\n\n\t// extract browser version number from user agent\n\tmatch = null;\n\n\tswitch (report.browser.name) {\n\t\tcase \"Chrome\":\n\t\tcase \"Chrome for Android\":\n\t\tcase \"WebView on Android\":\n\t\t\tmatch = userAgent.match(/Chrome\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Firefox\":\n\t\tcase \"Firefox for Android\":\n\t\t\tmatch = userAgent.match(/Firefox\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Firefox for iOS\":\n\t\t\tmatch = userAgent.match(/FxiOS\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Edge\":\n\t\tcase \"Internet Explorer\":\n\t\tcase \"IE Mobile\":\n\t\t\tif (userAgent.indexOf(\"Edge\") >= 0) {\n\t\t\t\tmatch = userAgent.match(/Edge\\/((\\d+\\.)+\\d+)/);\n\t\t\t} else if (userAgent.indexOf(\"rv:11\") >= 0) {\n\t\t\t\tmatch = userAgent.match(/rv:((\\d+\\.)+\\d+)/);\n\t\t\t} else if (userAgent.indexOf(\"MSIE\") >= 0) {\n\t\t\t\tmatch = userAgent.match(/MSIE ((\\d+\\.)+\\d+)/);\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase \"Safari\":\n\t\t\tmatch = userAgent.match(/Version\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Android Browser\":\n\t\t\tmatch = userAgent.match(/Android ((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"UC Browser for Android\":\n\t\t\tmatch = userAgent.match(/UCBrowser\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Samsung Internet\":\n\t\t\tmatch = userAgent.match(/SamsungBrowser\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Opera Mini\":\n\t\t\tmatch = userAgent.match(/Opera Mini\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Opera\":\n\t\t\tif (userAgent.match(/OPR/)) {\n\t\t\t\tmatch = userAgent.match(/OPR\\/((\\d+\\.)+\\d+)/);\n\t\t\t} else if (userAgent.match(/Version/)) {\n\t\t\t\tmatch = userAgent.match(/Version\\/((\\d+\\.)+\\d+)/);\n\t\t\t} else {\n\t\t\t\tmatch = userAgent.match(/Opera\\/((\\d+\\.)+\\d+)/);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"BlackBerry\":\n\t\t\tmatch = userAgent.match(/Version\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"QQ Browser\":\n\t\t\tmatch = userAgent.match(/MQQBrowser\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tmatch = userAgent.match(/\\/((\\d+\\.)+\\d+)$/);\n\t\t\tbreak;\n\t}\n\n\tif (match && match[1]) {\n\t\treport.browser.version = match[1];\n\t}\n\n\t// pull in browser window size from the visual viewport\n\treport.viewport.width =\n\t\twindow.innerWidth || document.documentElement.clientWidth;\n\treport.viewport.height =\n\t\twindow.innerHeight || document.documentElement.clientHeight;\n\n\t/*\n\t * test if Object.defineProperty function is fully supported\n\t */\n\ttry {\n\t\tObject.defineProperty({}, \"x\", {});\n\t\tdefinePropertySupported = true;\n\t} catch (e) {\n\t\tdefinePropertySupported = false;\n\t}\n\n\t/*\n\t * helper function to safely log warning messages\n\t */\n\t/* eslint-disable no-console */\n\tfunction warning(msg) {\n\t\tif (window.console) {\n\t\t\tif (console.warn) {\n\t\t\t\tconsole.warn(msg);\n\t\t\t} else {\n\t\t\t\tconsole.log(msg);\n\t\t\t}\n\t\t}\n\t}\n\t/* eslint-enable no-console */\n\n\t// deprecate report.browser.size\n\tif (definePropertySupported) {\n\t\tObject.defineProperty(report.browser, \"size\", {\n\t\t\tget: function() {\n\t\t\t\twarning(\n\t\t\t\t\t\"browser.size is deprecated; use viewport.width and viewport.height\"\n\t\t\t\t);\n\t\t\t\treturn report.viewport.width + \" x \" + report.viewport.height;\n\t\t\t}\n\t\t});\n\t}\n\n\t// pull in raw values for layout viewport\n\treport.viewport.layout.width = document.documentElement.clientWidth;\n\treport.viewport.layout.height = document.documentElement.clientHeight;\n\n\t// define viewport zoom property\n\treport.viewport.zoom = report.viewport.layout.width / report.viewport.width;\n\n\t// are cookies enabled\n\t// can't trust this value (Microsoft Edge lies)\n\t// report.cookies = !!navigator.cookieEnabled;\n\n\t// truly check if cookies are enabled\n\t// generate UUID for cookie name\n\tuuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\";\n\tuuid = uuid.replace(/[xy]/g, function(c) {\n\t\tvar r, v;\n\n\t\tr = (Math.random() * 16) | 0;\n\t\tv = c === \"x\" ? r : (r & 0x3) | 0x8;\n\n\t\treturn v.toString(16);\n\t});\n\tdocument.cookie = uuid;\n\n\tif (document.cookie.indexOf(uuid) >= 0) {\n\t\treport.cookies = true;\n\t} else {\n\t\treport.cookies = false;\n\t}\n\t// delete temporary cookie\n\tdocument.cookie = uuid + \"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\n\n\t// check plugins\n\t(function(plugins) {\n\t\tvar i, l, plugin;\n\n\t\tif (plugins) {\n\t\t\tl = plugins.length;\n\n\t\t\tfor (i = 0; i < l; i += 1) {\n\t\t\t\tplugin = plugins.item(i);\n\n\t\t\t\t// what version of Adobe Flash\n\t\t\t\tif (plugin.name.indexOf(\"Flash\") >= 0) {\n\t\t\t\t\tmatch = plugin.description.match(/\\b((\\d+\\.)+\\d+)\\b/);\n\t\t\t\t\tif (match && match[1]) {\n\t\t\t\t\t\treport.flash.version = match[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// what version of Java\n\t\t\t\tif (plugin.name.indexOf(\"Java\") >= 0) {\n\t\t\t\t\tmatch = plugin.description.match(/\\b((\\d+\\.)+\\d+)\\b/);\n\t\t\t\t\tif (match && match[1]) {\n\t\t\t\t\t\treport.java.version = match[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})(navigator.plugins);\n\n\t// extract operating system name from user agent\n\tif (userAgent.indexOf(\"Windows\") >= 0) {\n\t\tif (userAgent.indexOf(\"Windows Phone\") >= 0) {\n\t\t\treport.os.name = \"Windows Phone\";\n\t\t} else {\n\t\t\treport.os.name = \"Windows\";\n\t\t}\n\t}\n\n\tif (userAgent.indexOf(\"OS X\") >= 0 && userAgent.indexOf(\"Android\") === -1) {\n\t\treport.os.name = \"OS X\";\n\t}\n\n\tif (userAgent.indexOf(\"Linux\") >= 0) {\n\t\treport.os.name = \"Linux\";\n\t}\n\n\tif (userAgent.indexOf(\"like Mac OS X\") >= 0) {\n\t\treport.os.name = \"iOS\";\n\t}\n\n\tif (\n\t\t(userAgent.indexOf(\"Android\") >= 0 || userAgent.indexOf(\"Adr\") >= 0) &&\n\t\tuserAgent.indexOf(\"Windows Phone\") === -1\n\t) {\n\t\treport.os.name = \"Android\";\n\t}\n\n\tif (userAgent.indexOf(\"BB10\") >= 0) {\n\t\treport.os.name = \"BlackBerry\";\n\t}\n\n\tif (userAgent.indexOf(\"RIM Tablet OS\") >= 0) {\n\t\treport.os.name = \"BlackBerry Tablet OS\";\n\t}\n\n\tif (userAgent.indexOf(\"BlackBerry\") >= 0) {\n\t\treport.os.name = \"BlackBerryOS\";\n\t}\n\n\tif (userAgent.indexOf(\"CrOS\") >= 0) {\n\t\treport.os.name = \"Chrome OS\";\n\t}\n\n\tif (userAgent.indexOf(\"KAIOS\") >= 0) {\n\t\treport.os.name = \"KaiOS\";\n\t}\n\n\t// extract operating system version from user agent\n\tmatch = null;\n\n\tswitch (report.os.name) {\n\t\tcase \"Windows\":\n\t\tcase \"Windows Phone\":\n\t\t\tif (userAgent.indexOf(\"Win16\") >= 0) {\n\t\t\t\treport.os.version = \"3.1.1\";\n\t\t\t} else if (userAgent.indexOf(\"Windows CE\") >= 0) {\n\t\t\t\treport.os.version = \"CE\";\n\t\t\t} else if (userAgent.indexOf(\"Windows 95\") >= 0) {\n\t\t\t\treport.os.version = \"95\";\n\t\t\t} else if (userAgent.indexOf(\"Windows 98\") >= 0) {\n\t\t\t\tif (userAgent.indexOf(\"Windows 98; Win 9x 4.90\") >= 0) {\n\t\t\t\t\treport.os.version = \"Millennium Edition\";\n\t\t\t\t} else {\n\t\t\t\t\treport.os.version = \"98\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmatch = userAgent.match(\n\t\t\t\t\t/Win(?:dows)?(?: Phone)?[ _]?(?:(?:NT|9x) )?((?:(\\d+\\.)*\\d+)|XP|ME|CE)\\b/\n\t\t\t\t);\n\n\t\t\t\tif (match && match[1]) {\n\t\t\t\t\tswitch (match[1]) {\n\t\t\t\t\t\tcase \"6.4\":\n\t\t\t\t\t\t\t// some versions of Firefox mistakenly used 6.4\n\t\t\t\t\t\t\tmatch[1] = \"10.0\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"6.3\":\n\t\t\t\t\t\t\tmatch[1] = \"8.1\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"6.2\":\n\t\t\t\t\t\t\tmatch[1] = \"8\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"6.1\":\n\t\t\t\t\t\t\tmatch[1] = \"7\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"6.0\":\n\t\t\t\t\t\t\tmatch[1] = \"Vista\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"5.2\":\n\t\t\t\t\t\t\tmatch[1] = \"Server 2003\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"5.1\":\n\t\t\t\t\t\t\tmatch[1] = \"XP\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"5.01\":\n\t\t\t\t\t\t\tmatch[1] = \"2000 SP1\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"5.0\":\n\t\t\t\t\t\t\tmatch[1] = \"2000\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"4.0\":\n\t\t\t\t\t\t\tmatch[1] = \"4.0\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t// nothing\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"OS X\":\n\t\t\tmatch = userAgent.match(/OS X ((\\d+[._])+\\d+)\\b/);\n\t\t\tbreak;\n\t\tcase \"Linux\":\n\t\t\t// linux user agent strings do not usually include the version\n\t\t\treport.os.version = \"\";\n\t\t\tbreak;\n\t\tcase \"iOS\":\n\t\t\tmatch = userAgent.match(/OS ((\\d+[._])+\\d+) like Mac OS X/);\n\t\t\tbreak;\n\t\tcase \"Android\":\n\t\t\tmatch = userAgent.match(/(?:Android|Adr) (\\d+([._]\\d+)*)/);\n\t\t\tbreak;\n\t\tcase \"BlackBerry\":\n\t\tcase \"BlackBerryOS\":\n\t\t\tmatch = userAgent.match(/Version\\/((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"BlackBerry Tablet OS\":\n\t\t\tmatch = userAgent.match(/RIM Tablet OS ((\\d+\\.)+\\d+)/);\n\t\t\tbreak;\n\t\tcase \"Chrome OS\":\n\t\t\treport.os.version = report.browser.version;\n\t\t\tbreak;\n\t\tcase \"KaiOS\":\n\t\t\tmatch = userAgent.match(/KAIOS\\/(\\d+(\\.\\d+)*)/);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\t// no good default behavior\n\t\t\treport.os.version = \"\";\n\t\t\tbreak;\n\t}\n\n\tif (match && match[1]) {\n\t\t// replace underscores in version number with periods\n\t\tmatch[1] = match[1].replace(/_/g, \".\");\n\t\treport.os.version = match[1];\n\t}\n\n\t// handle Mac OS X / OS X / macOS naming conventions\n\tif (report.os.name === \"OS X\" && report.os.version) {\n\t\tvar versions = report.os.version.split(\".\");\n\t\tif (versions.length >= 2) {\n\t\t\tvar minorVersion = parseInt(versions[1], 10);\n\t\t\tif (minorVersion <= 7) {\n\t\t\t\treport.os.name = \"Mac OS X\";\n\t\t\t} else if (minorVersion >= 12) {\n\t\t\t\treport.os.name = \"macOS\";\n\t\t\t} else {\n\t\t\t\treport.os.name = \"OS X\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// pull in screen info from W3C standard properties\n\treport.screen.width = screen.width;\n\treport.screen.height = screen.height;\n\treport.screen.colors = screen.colorDepth;\n\tif (window.devicePixelRatio && !isNaN(window.devicePixelRatio)) {\n\t\treport.screen.dppx = window.devicePixelRatio;\n\t} else {\n\t\treport.screen.dppx = 1;\n\t}\n\n\t// deprecate report.screen.size\n\tif (definePropertySupported) {\n\t\tObject.defineProperty(report.screen, \"size\", {\n\t\t\tget: function() {\n\t\t\t\twarning(\n\t\t\t\t\t\"screen.size is deprecated; use screen.width and screen.height\"\n\t\t\t\t);\n\t\t\t\treturn report.screen.width + \" x \" + report.screen.height;\n\t\t\t}\n\t\t});\n\t}\n\n\t// deprecate report.screen.resolution\n\tif (definePropertySupported) {\n\t\tObject.defineProperty(report.screen, \"resolution\", {\n\t\t\tget: function() {\n\t\t\t\twarning(\n\t\t\t\t\t\"screen.resolution is deprecated; multiply screen.width and screen.height by screen.dppx\"\n\t\t\t\t);\n\t\t\t\treturn (\n\t\t\t\t\treport.screen.dppx * report.screen.width +\n\t\t\t\t\t\" x \" +\n\t\t\t\t\treport.screen.dppx * report.screen.height\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\t// are web sockets supported\n\treport.websockets = !!window.WebSocket;\n\n\t// preferred language(s) for displaying pages\n\treport.lang = [String(navigator.languages) || String(navigator.language)];\n\n\t// local date, time, and time zone\n\treport.timestamp = new Date().toString();\n\n\treturn report;\n};","export default \"# Blender v2.80 (sub 75) OBJ File: 'testthing.blend'\\n# www.blender.org\\nmtllib testthing.mtl\\no Cube.001_Cube.002\\nv 0.511582 -4.514263 8.068190\\nv 0.511582 19.514263 8.068190\\nv 18.387676 -4.514263 8.068190\\nv 18.387676 19.514263 8.068190\\nvt 0.776756 0.750000\\nvt 0.875000 0.500000\\nvt 0.776756 0.500000\\nvt 0.875000 0.750000\\nvn 0.0000 0.0000 -1.0000\\nusemtl None\\ns off\\nf 3/1/1 2/2/1 4/3/1\\nf 3/1/1 1/4/1 2/2/1\\no Cube.002_Cube.003\\nv 26.247158 17.990746 5.902935\\nv 26.247158 -2.990745 5.902935\\nv 18.387676 -4.514263 8.068190\\nv 18.387676 19.514263 8.068190\\nvt 0.678513 0.750000\\nvt 0.776756 0.500000\\nvt 0.678513 0.500000\\nvt 0.776756 0.750000\\nvn -0.2656 0.0000 -0.9641\\nusemtl None\\ns off\\nf 6/5/2 8/6/2 5/7/2\\nf 6/5/2 7/8/2 8/6/2\\no Cube.003_Cube.004\\nv 26.899284 0.100000 5.233099\\nv 26.899284 14.900000 5.233099\\nv 26.247158 17.990746 5.902935\\nv 26.247158 -2.990745 5.902935\\nvt 0.625000 0.750000\\nvt 0.678513 0.500000\\nvt 0.625000 0.500000\\nvt 0.678513 0.750000\\nvn -0.7165 0.0000 -0.6976\\nusemtl None\\ns off\\nf 9/9/3 11/10/3 10/11/3\\nf 9/9/3 12/12/3 11/10/3\\no Cube.004_Cube.005\\nv 26.899284 0.100000 5.233099\\nv 26.899284 14.900000 5.233099\\nv 30.235020 14.900000 5.233099\\nv 30.235020 0.100000 5.233099\\nvt 0.625000 0.500000\\nvt 0.625000 0.750000\\nvt 0.625000 0.500000\\nvt 0.625000 0.750000\\nvn 0.0000 0.0000 -1.0000\\nusemtl None\\ns off\\nf 15/13/4 13/14/4 14/15/4\\nf 15/13/4 16/16/4 13/14/4\\no Cube.005_Cube.006\\nv 30.235020 14.900000 5.233099\\nv 30.235020 14.900000 1.551984\\nv 30.235020 0.100000 1.551984\\nv 30.235020 0.100000 5.233099\\nvt 0.375000 0.750000\\nvt 0.625000 0.500000\\nvt 0.375000 0.500000\\nvt 0.625000 0.750000\\nvn -1.0000 0.0000 0.0000\\nusemtl None\\ns off\\nf 19/17/5 17/18/5 18/19/5\\nf 19/17/5 20/20/5 17/18/5\\no Cube.006_Cube.007\\nv 26.899284 14.900000 1.551984\\nv 26.899284 14.900000 5.233099\\nv 30.235020 14.900000 5.233099\\nv 30.235020 14.900000 1.551984\\nvt 0.375000 0.500000\\nvt 0.625000 0.500000\\nvt 0.375000 0.500000\\nvt 0.625000 0.500000\\nvn 0.0000 -1.0000 0.0000\\nusemtl None\\ns off\\nf 24/21/6 22/22/6 21/23/6\\nf 24/21/6 23/24/6 22/22/6\\no Cube.007_Cube.008\\nv 26.899284 14.900000 1.551984\\nv 26.899284 14.900000 5.233099\\nv 26.247158 17.990746 0.500000\\nv 26.247158 17.990746 5.902935\\nvt 0.375000 0.500000\\nvt 0.625000 0.446487\\nvt 0.375000 0.446487\\nvt 0.625000 0.500000\\nvn -0.9785 -0.2064 0.0000\\nusemtl None\\ns off\\nf 25/25/7 28/26/7 27/27/7\\nf 25/25/7 26/28/7 28/26/7\\no Cube.008_Cube.009\\nv 26.247158 17.990746 0.500000\\nv 26.247158 17.990746 5.902935\\nv 18.387676 19.514263 0.500000\\nv 18.387676 19.514263 8.068190\\nvt 0.375000 0.348244\\nvt 0.625000 0.446487\\nvt 0.625000 0.348244\\nvt 0.375000 0.446487\\nvn -0.1903 -0.9817 0.0000\\nusemtl None\\ns off\\nf 31/29/8 30/30/8 32/31/8\\nf 31/29/8 29/32/8 30/30/8\\no Cube.009_Cube.010\\nv 0.511582 19.514263 0.500000\\nv 0.511582 19.514263 8.068190\\nv 18.387676 19.514263 0.500000\\nv 18.387676 19.514263 8.068190\\nvt 0.375000 0.348244\\nvt 0.625000 0.250000\\nvt 0.375000 0.250000\\nvt 0.625000 0.348244\\nvn 0.0000 -1.0000 0.0000\\nusemtl None\\ns off\\nf 35/33/9 34/34/9 33/35/9\\nf 35/33/9 36/36/9 34/34/9\\no Cube.010_Cube.011\\nv 0.511582 -4.514263 0.500000\\nv 0.511582 -4.514263 8.068190\\nv 0.511582 19.514263 0.500000\\nv 0.511582 19.514263 8.068190\\nvt 0.375000 0.250000\\nvt 0.625000 0.000000\\nvt 0.375000 0.000000\\nvt 0.625000 0.250000\\nvn 1.0000 0.0000 0.0000\\nusemtl None\\ns off\\nf 39/37/10 38/38/10 37/39/10\\nf 39/37/10 40/40/10 38/38/10\\no Cube.011_Cube.012\\nv 0.511582 -4.514263 0.500000\\nv 0.511582 -4.514263 8.068190\\nv 18.387676 -4.514263 8.068190\\nv 18.387676 -4.514263 0.500000\\nvt 0.375000 1.000000\\nvt 0.625000 0.901756\\nvt 0.375000 0.901756\\nvt 0.625000 1.000000\\nvn 0.0000 1.0000 0.0000\\nusemtl None\\ns off\\nf 41/41/11 43/42/11 44/43/11\\nf 41/41/11 42/44/11 43/42/11\\no Cube.012_Cube.013\\nv 26.247158 -2.990745 0.500000\\nv 26.247158 -2.990745 5.902935\\nv 18.387676 -4.514263 8.068190\\nv 18.387676 -4.514263 0.500000\\nvt 0.375000 0.901756\\nvt 0.625000 0.803513\\nvt 0.375000 0.803513\\nvt 0.625000 0.901756\\nvn -0.1903 0.9817 0.0000\\nusemtl None\\ns off\\nf 48/45/12 46/46/12 45/47/12\\nf 48/45/12 47/48/12 46/46/12\\no Cube.013_Cube.014\\nv 26.899284 0.100000 1.551984\\nv 26.899284 0.100000 5.233099\\nv 26.247158 -2.990745 0.500000\\nv 26.247158 -2.990745 5.902935\\nvt 0.375000 0.750000\\nvt 0.625000 0.803513\\nvt 0.625000 0.750000\\nvt 0.375000 0.803513\\nvn -0.9785 0.2064 0.0000\\nusemtl None\\ns off\\nf 49/49/13 52/50/13 50/51/13\\nf 49/49/13 51/52/13 52/50/13\\no Cube.014_Cube.015\\nv 26.899284 0.100000 1.551984\\nv 26.899284 0.100000 5.233099\\nv 30.235020 0.100000 1.551984\\nv 30.235020 0.100000 5.233099\\nvt 0.625000 0.750000\\nvt 0.375000 0.750000\\nvt 0.625000 0.750000\\nvt 0.375000 0.750000\\nvn 0.0000 1.0000 0.0000\\nusemtl None\\ns off\\nf 56/53/14 53/54/14 54/55/14\\nf 56/53/14 55/56/14 53/54/14\\no Cube.015_Cube.016\\nv 26.899284 0.100000 1.551984\\nv 26.899284 14.900000 1.551984\\nv 30.235020 14.900000 1.551984\\nv 30.235020 0.100000 1.551984\\nvt 0.375000 0.750000\\nvt 0.375000 0.500000\\nvt 0.375000 0.750000\\nvt 0.375000 0.500000\\nvn 0.0000 0.0000 1.0000\\nusemtl None\\ns off\\nf 60/57/15 58/58/15 57/59/15\\nf 60/57/15 59/60/15 58/58/15\\no Cube.016_Cube.017\\nv 26.899284 0.100000 1.551984\\nv 26.899284 14.900000 1.551984\\nv 26.247158 17.990746 0.500000\\nv 26.247158 -2.990745 0.500000\\nvt 0.321487 0.750000\\nvt 0.375000 0.500000\\nvt 0.321487 0.500000\\nvt 0.375000 0.750000\\nvn -0.8499 0.0000 0.5269\\nusemtl None\\ns off\\nf 64/61/16 62/62/16 63/63/16\\nf 64/61/16 61/64/16 62/62/16\\no Cube.017_Cube.018\\nv 26.247158 17.990746 0.500000\\nv 26.247158 -2.990745 0.500000\\nv 18.387676 19.514263 0.500000\\nv 18.387676 -4.514263 0.500000\\nvt 0.223244 0.750000\\nvt 0.321487 0.500000\\nvt 0.223244 0.500000\\nvt 0.321487 0.750000\\nvn 0.0000 0.0000 1.0000\\nusemtl None\\ns off\\nf 68/65/17 65/66/17 67/67/17\\nf 68/65/17 66/68/17 65/66/17\\no Cube.018_Cube.019\\nv 0.511582 -4.514263 0.500000\\nv 0.511582 19.514263 0.500000\\nv 18.387676 19.514263 0.500000\\nv 18.387676 -4.514263 0.500000\\nvt 0.125000 0.750000\\nvt 0.223244 0.500000\\nvt 0.125000 0.500000\\nvt 0.223244 0.750000\\nvn 0.0000 0.0000 1.0000\\nusemtl None\\ns off\\nf 69/69/18 71/70/18 70/71/18\\nf 69/69/18 72/72/18 71/70/18\\n\";"],"sourceRoot":""}